var T=Object.defineProperty;var L=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var B=(o,a,e)=>a in o?T(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,x=(o,a)=>{for(var e in a||(a={}))E.call(a,e)&&B(o,e,a[e]);if(L)for(var e of L(a))$.call(a,e)&&B(o,e,a[e]);return o};var g=(o,a,e)=>new Promise((l,s)=>{var d=n=>{try{f(e.next(n))}catch(t){s(t)}},p=n=>{try{f(e.throw(n))}catch(t){s(t)}},f=n=>n.done?l(n.value):Promise.resolve(n.value).then(d,p);f((e=e.apply(o,a)).next())});import{K as z,cj as W,$ as v,a9 as N,ar as O,ay as R,T as q,bG as U}from"./bootstrap-Bf65uz2I.js";import V from"./login-Dl-rxzPD.js";import{r as I,a as Z,al as j,A as F,_ as D,k as S,ac as K,ad as G,w as A,c as b,m as H,n as C,J as h,E as y,u as r,x as J,am as Q,K as _,B as X}from"../jse/index-index-D3Xb8oT_.js";import{_ as Y,a as ee,b as ae}from"./layout.vue_vue_type_script_setup_true_lang-DLUDgH1Q.js";import{u as te}from"./use-modal-DXTXRMj-.js";import{_ as oe}from"./avatar.vue_vue_type_script_setup_true_lang-Cr9F7Pdr.js";import"./css-CLrSDUNG.js";import"./auth-title-BzCfOmtz.js";import"./index-DkILrUrr.js";import"./loading-BcNj5jY5.js";import"./index-Ce9mjW49.js";import"./theme-toggle.vue_vue_type_script_setup_true_lang-BUTk6wtH.js";import"./sun-Cowdc2cF.js";import"./use-drawer-Bads5S26.js";import"./TabsList.vue_vue_type_script_setup_true_lang-DVsWOo6X.js";import"./TabsContent.vue_vue_type_script_setup_true_lang-enzTYp2q.js";import"./Switch.vue_vue_type_script_setup_true_lang-Bb11ubxz.js";import"./sidebar-nav-f0sGeGXW.js";import"./rotate-cw-BZDu6YbA.js";const ne=z("book-open-text",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]),m=I(),M=I(!1),k=I({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function re(){function o(l){return g(this,null,function*(){var d;const{Watermark:s}=yield D(()=>g(null,null,function*(){const{Watermark:p}=yield import("./index.esm-j49SPltB.js");return{Watermark:p}}),[]);k.value=x(x({},k.value),l),m.value=new s(k.value),yield(d=m.value)==null?void 0:d.create()})}function a(l){return g(this,null,function*(){var s;m.value?(yield F(),yield(s=m.value)==null?void 0:s.changeOptions(x(x({},k.value),l))):yield o(l)})}function e(){m.value&&(m.value.destroy(),m.value=void 0)}return M.value||(M.value=!0,Z(()=>{e()})),{destroyWatermark:e,updateWatermark:a,watermark:j(m)}}const se=S({name:"LoginExpiredModal",__name:"login-expired-modal",props:K({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=o,e=G(o,"open"),[l,s]=te();A(()=>e.value,t=>{s.setState({isOpen:t})});const d=b(()=>a.zIndex||n()),p=["ant-message","loading"];function f(t){return p.some(u=>t.classList.contains(u))}function n(){let t=0;return[...document.querySelectorAll("*")].forEach(i=>{const c=window.getComputedStyle(i).getPropertyValue("z-index");c&&!Number.isNaN(Number.parseInt(c))&&!f(i)&&(t=Math.max(t,Number.parseInt(c)))}),t+1}return(t,u)=>(C(),H("div",null,[h(r(l),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":d.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:y(()=>[h(r(oe),{src:o.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),h(r(W),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":r(v)("authentication.loginAgainSubTitle"),title:r(v)("authentication.loginAgainTitle")},{default:y(()=>[J(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),Be=S({__name:"basic",setup(o){const a=N(),e=O(),l=R(),s=q(),{destroyWatermark:d,updateWatermark:p}=re(),f=b(()=>[{handler:()=>{a.push({name:"Profile"})},icon:"lucide:user",text:v("page.auth.profile")},{handler:()=>{a.push({name:"Profile",query:{tab:"password"}})},icon:"lucide:lock",text:v("settingsConfig.updatePwd")},{handler:()=>{Q(U,{target:"_blank"})},icon:ne,text:v("ui.widgets.document")}]),n=b(()=>{var u,i;return(i=(u=e.userInfo)==null?void 0:u.avatar)!=null?i:_.app.defaultAvatar});function t(){return g(this,null,function*(){yield l.logout(!1)})}return A(()=>({enable:_.app.watermark,content:_.app.watermarkContent}),w=>g(null,[w],function*({enable:u,content:i}){var c,P;u?yield p({content:i||`${(c=e.userInfo)==null?void 0:c.username} - ${(P=e.userInfo)==null?void 0:P.realName}`}):d()}),{immediate:!0}),(u,i)=>(C(),X(r(ae),{onClearPreferencesAndLogout:t},{"user-dropdown":y(()=>{var w,c;return[h(r(ee),{avatar:n.value,menus:f.value,text:(w=r(e).userInfo)==null?void 0:w.nickname,description:(c=r(e).userInfo)==null?void 0:c.loginName,"tag-text":"Pro",onLogout:t},null,8,["avatar","menus","text","description"])]}),extra:y(()=>[h(r(se),{open:r(s).loginExpired,"onUpdate:open":i[0]||(i[0]=w=>r(s).loginExpired=w),avatar:n.value},{default:y(()=>[h(V)]),_:1},8,["open","avatar"])]),"lock-screen":y(()=>[h(r(Y),{avatar:n.value,onToLogin:t},null,8,["avatar"])]),_:1}))}});export{Be as default};
