import{$ as u,M as C,R as F}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as q}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as B,a as v}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{ElInput as c}from"./index-BjDsryRX.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as D,o as T,r as i,B as U,n as w,E as s,J as r,u as e,L as b,y as V}from"../jse/index-index-D3Xb8oT_.js";const G=D({__name:"PromptTemplateModal",emits:["reload"],setup(P,{expose:y,emit:E}){const _=E;T(()=>{}),y({openDialog:k});const p=i(),n=i(!1),m=i(!0),t=i({id:"",title:"",description:"",content:""}),d=i(!1),x=i({title:[{required:!0,message:u("message.required"),trigger:"blur"}],content:[{required:!0,message:u("message.required"),trigger:"blur"}]});function k(o){o.id&&(m.value=!1),t.value=o,n.value=!0}function M(){var o;(o=p.value)==null||o.validate(l=>{l&&(d.value=!0,C.post(m.value?"api/v1/sysPromptTemplate/save":"api/v1/sysPromptTemplate/update",t.value).then(a=>{d.value=!1,a.errorCode===0&&(F.success(a.message),_("reload"),f())}).catch(()=>{d.value=!1}))})}function f(){var o;(o=p.value)==null||o.resetFields(),m.value=!0,t.value={},n.value=!1}return(o,l)=>(w(),U(e(q),{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=a=>n.value=a),draggable:"",title:m.value?e(u)("button.add"):e(u)("button.edit"),"before-close":f,"close-on-click-modal":!1},{footer:s(()=>[r(e(g),{onClick:f},{default:s(()=>[b(V(e(u)("button.cancel")),1)]),_:1}),r(e(g),{type:"primary",onClick:M,loading:d.value,disabled:d.value},{default:s(()=>[b(V(e(u)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:s(()=>[r(e(B),{"label-width":"120px",ref_key:"saveForm",ref:p,model:t.value,"status-icon":"",rules:x.value},{default:s(()=>[r(e(v),{prop:"title",label:"标题"},{default:s(()=>[r(e(c),{modelValue:t.value.title,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value.title=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),r(e(v),{prop:"description",label:"描述"},{default:s(()=>[r(e(c),{type:"textarea",rows:2,modelValue:t.value.description,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.description=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),r(e(v),{prop:"content",label:"提示词"},{default:s(()=>[r(e(c),{type:"textarea",rows:10,modelValue:t.value.content,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.content=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{G as _};
