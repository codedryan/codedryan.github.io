var ie=Object.defineProperty;var q=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var U=(m,p,r)=>p in m?ie(m,p,{enumerable:!0,configurable:!0,writable:!0,value:r}):m[p]=r,D=(m,p)=>{for(var r in p||(p={}))ne.call(p,r)&&U(m,r,p[r]);if(q)for(var r of q(p))ce.call(p,r)&&U(m,r,p[r]);return m};var w=(m,p,r)=>new Promise((y,k)=>{var g=f=>{try{h(r.next(f))}catch(S){k(S)}},M=f=>{try{h(r.throw(f))}catch(S){k(S)}},h=f=>f.done?y(f.value):Promise.resolve(f.value).then(g,M);h((r=r.apply(m,p)).next())});import{a9 as pe,$ as a,a8 as F,Y as Q,M as x,R as T,Z as A,bV as ue,a3 as de,Q as W,_ as me}from"./bootstrap-Bf65uz2I.js";import{E as fe}from"./el-avatar-BVPcm0Px.js";import"./css-gf8D6QlL.js";import{E as ve}from"./el-card-DGd_zL6P.js";import{E as ge}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";import{E as _e,a as ye,b as z}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     *//* empty css                */import{E as he,a as Ce}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import"./css-B4xXAc0m.js";import{E as P}from"./el-message-box-B8o3mhYx.js";import{_ as be}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{P as ke}from"./PageSide-wLZhy9Oh.js";import Se from"./McpStoreModal-C-BCfnzz.js";import{ElButton as C}from"./index-oBOAcXl-.js";import{ElInput as J}from"./index-BjDsryRX.js";import{ElInputNumber as xe}from"./index-9UPoHQm1.js";import{k as Ve,r as d,o as Ee,c as Me,m as V,n as v,q as i,J as n,E as c,L as b,y as u,u as t,p as K,F as Y,N as Z,B as E}from"../jse/index-index-D3Xb8oT_.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./validator-D2YZey62.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";/* empty css               *//* empty css                  */import"./DictSelect-DdOvS-6R.js";import"./UploadAvatar-a3x1lqjM.js";import"./el-image-viewer-DlaFkWIK.js";import"./debounce-AsHllEOy.js";import"./index-C33Sf0pH.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./AIEditorManualSegmentation-C7EP4Ojv.js";import"./index-BKzCwxYe.js";const Ne={class:"flex h-full flex-col gap-6 p-6"},Be={class:"mcp-store-header"},De={class:"operation-button"},we={class:"header-content-container"},Te={class:"title-content-font-style"},$e={class:"desc-content-font-style"},Ie={class:"custom-input-container"},Le={class:"textarea-with-search"},Re={class:"flex max-h-[calc(100vh-191px)] flex-1 gap-6"},qe={class:"h-full flex-1 overflow-auto"},Ue={class:"card-container"},Fe={key:0,class:"empty-tip"},Qe={class:"card-header"},Ae={class:"card-icon"},We={key:1,class:"icon-placeholder"},ze={class:"card-title"},Pe={class:"card-content"},Je={class:"content-item"},Ke={class:"value"},Ye={class:"card-actions"},Ze=Ve({__name:"McpStoreList",setup(m){const p=d(),r=d({}),y=d(),k=d(),g=d(),M=d(!1),h=d(""),f=d(0),S=pe();function j(){y.value.setQuery({categoryId:N.value,serverName:h})}function G(e){e==null||e.resetFields(),y.value.setQuery({})}function $(e){k.value.openDialog(D({},e))}const N=d("");function H(e){P.confirm(a("message.deleteAlert"),a("message.noticeTitle"),{confirmButtonText:a("message.ok"),cancelButtonText:a("message.cancel"),type:"warning",beforeClose:(s,o,l)=>{s==="confirm"&&(o.confirmButtonLoading=!0,x.post("/api/v1/mcpStore/remove",{id:e.id}).then(_=>{_.errorCode===0&&(T.success(_.message),l(),y.value.setQuery({categoryId:N.value}))}))}})}const I=d([]),B=()=>w(null,null,function*(){O();const[,e]=yield W(x.get)("/api/v1/mcpStoreCategory/list",{params:{sortKey:"sortNo",sortType:"asc"}});e&&e.errorCode===0&&(I.value=[{id:"",categoryName:a("common.allCategories")},...e.data])}),O=()=>w(null,null,function*(){const[,e]=yield W(x.get)("/api/v1/mcpStore/getMcpStoreCount");e&&e.errorCode===0&&(f.value=e.data)});Ee(()=>{B()});const X=[{icon:F,label:a("button.edit"),onClick(e){L(e)}},{type:"danger",icon:Q,label:a("button.delete"),onClick(e){oe(e)}}],ee={icon:A,label:a("button.add"),onClick(){L({})}};function L(e){var s;(s=p.value)==null||s.resetFields(),r.value=D({},e),g.value=!0}function te(e){N.value=e.id,y.value.setQuery({categoryId:e.id})}function oe(e){P.confirm(a("message.deleteAlert"),a("message.noticeTitle"),{confirmButtonText:a("message.ok"),cancelButtonText:a("message.cancel"),type:"warning",beforeClose:(s,o,l)=>{s==="confirm"?(o.confirmButtonLoading=!0,x.post("/api/v1/mcpStoreCategory/remove",{id:e.id}).then(_=>{o.confirmButtonLoading=!1,_.errorCode===0&&(T.success(_.message),l(),B())}).catch(()=>{o.confirmButtonLoading=!1})):l()}}).catch(()=>{})}const R=d([{prop:"categoryName",label:a("aiWorkflowCategory.categoryName"),type:"input",required:!0,placeholder:a("aiWorkflowCategory.categoryName")},{prop:"sortNo",label:a("aiWorkflowCategory.sortNo"),type:"number",required:!1,placeholder:a("aiWorkflowCategory.sortNo")}]),ae=Me(()=>{const e={};return R.value.forEach(s=>{const o=[];s.required&&o.push({required:!0,message:`${a("message.required")}`,trigger:"blur"}),o.length>0&&(e[s.prop]=o)}),e});function re(){var e;(e=p.value)==null||e.validate(s=>{if(s){g.value=!0;const o=r.value.id?"/api/v1/mcpStoreCategory/update":"/api/v1/mcpStoreCategory/save";x.post(o,r.value).then(l=>{g.value=!1,l.errorCode===0&&(B(),T.success(l.message),g.value=!1)})}})}function le(e){S.push({path:"/ai/mcpStore/McpServiceDetail",query:{id:e.id}})}return(e,s)=>(v(),V("div",Ne,[i("div",Be,[i("div",De,[n(t(C),{type:"primary",onClick:s[0]||(s[0]=o=>$({})),icon:t(A)},{default:c(()=>[b(u(t(a)("button.add")),1)]),_:1},8,["icon"])]),i("div",we,[i("div",Te,u(t(a)("mcpStore.labels.mcpTitle")),1),i("div",$e,u(t(a)("mcpStore.labels.currentlyIncluded"))+" "+u(f.value)+" "+u(t(a)("mcpStore.labels.continuouslyUpdated")),1)]),i("div",Ie,[i("div",Le,[n(t(J),{type:"textarea",rows:5,modelValue:h.value,"onUpdate:modelValue":s[1]||(s[1]=o=>h.value=o),placeholder:"请输入MCP Server名称"},null,8,["modelValue"]),n(t(C),{class:"search-btn",type:"primary",icon:t(ue),onClick:j},{default:c(()=>[b(u(t(a)("button.search")),1)]),_:1},8,["icon"])])])]),i("div",Re,[n(ke,{"label-key":"categoryName","value-key":"id",menus:I.value,"control-btns":X,"footer-button":ee,onChange:te},null,8,["menus"]),i("div",qe,[n(be,{ref_key:"pageDataRef",ref:y,"page-url":"/api/v1/mcpStore/page","page-size":12},{default:c(({pageList:o})=>[i("div",Ue,[!o||o.length===0?(v(),V("div",Fe," 暂无数据 ")):K("",!0),(v(!0),V(Y,null,Z(o,l=>(v(),E(t(ve),{key:l.id,class:"mcp-card",hoverable:"",onClick:_=>le(l)},{default:c(()=>{var _;return[i("div",Qe,[i("div",Ae,[l.icon?(v(),E(t(fe),{key:0,src:l.icon,alt:"icon",class:"icon-img"},null,8,["src"])):(v(),V("span",We,u(((_=l.serverName)==null?void 0:_.charAt(0))||"M"),1))]),i("div",ze,u(l.serverName||""),1)]),i("div",Pe,[i("div",Je,[i("span",Ke,u(l.description||""),1)])]),i("div",Ye,[n(t(_e),{trigger:"click"},{dropdown:c(()=>[n(t(ye),null,{default:c(()=>[n(t(z),null,{default:c(()=>[n(t(C),{link:"",icon:t(F),onClick:se=>$(l),size:"small"},{default:c(()=>[b(u(t(a)("button.edit")),1)]),_:1},8,["icon","onClick"])]),_:2},1024),n(t(z),null,{default:c(()=>[n(t(C),{type:"danger",link:"",icon:t(Q),onClick:se=>H(l),size:"small"},{default:c(()=>[b(u(t(a)("button.delete")),1)]),_:1},8,["icon","onClick"])]),_:2},1024)]),_:2},1024)]),default:c(()=>[n(t(C),{style:{"--el-button-text-color":"hsl(220deg 9.68% 63.53%)","--el-button-font-weight":400},icon:t(de),link:""},null,8,["icon"])]),_:2},1024)])]}),_:2},1032,["onClick"]))),128))])]),_:1},512)])]),n(Se,{ref_key:"saveDialog",ref:k,onReload:G},null,512),n(t(ge),{modelValue:g.value,"onUpdate:modelValue":s[3]||(s[3]=o=>g.value=o),title:r.value.id?`${t(a)("button.edit")}`:`${t(a)("button.add")}`,"close-on-click-modal":!1},{footer:c(()=>[n(t(C),{onClick:s[2]||(s[2]=o=>g.value=!1)},{default:c(()=>[b(u(t(a)("button.cancel")),1)]),_:1}),n(t(C),{type:"primary",onClick:re,loading:M.value},{default:c(()=>[b(u(t(a)("button.confirm")),1)]),_:1},8,["loading"])]),default:c(()=>[n(t(he),{ref_key:"formRef",ref:p,model:r.value,rules:ae.value,"label-width":"120px"},{default:c(()=>[(v(!0),V(Y,null,Z(R.value,o=>(v(),E(t(Ce),{key:o.prop,label:o.label,prop:o.prop},{default:c(()=>[!o.type||o.type==="input"?(v(),E(t(J),{key:0,modelValue:r.value[o.prop],"onUpdate:modelValue":l=>r.value[o.prop]=l,placeholder:o.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):o.type==="number"?(v(),E(t(xe),{key:1,modelValue:r.value[o.prop],"onUpdate:modelValue":l=>r.value[o.prop]=l,placeholder:o.placeholder,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])):K("",!0)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])]))}}),lo=me(Ze,[["__scopeId","data-v-a982021a"]]);export{lo as default};
