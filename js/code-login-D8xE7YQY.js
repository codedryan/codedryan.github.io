var b=(o,c,n)=>new Promise((l,t)=>{var u=a=>{try{s(n.next(a))}catch(m){t(m)}},p=a=>{try{s(n.throw(a))}catch(m){t(m)}},s=a=>a.done?l(a.value):Promise.resolve(a.value).then(u,p);s((n=n.apply(o,c)).next())});import{a9 as L,av as N,$ as e,aw as x,aF as y}from"./bootstrap-Bf65uz2I.js";import{T as S}from"./auth-title-BzCfOmtz.js";import{k as C,G as A,c as v,m as F,n as k,J as T,B as $,p as E,E as f,x as w,L as h,y as g,u as i,q as I,s as P,r as V}from"../jse/index-index-D3Xb8oT_.js";const _={class:"text-muted-foreground"},D=C({name:"AuthenticationCodeLogin",__name:"code-login",props:{formSchema:{},loading:{type:Boolean,default:!1},loginPath:{default:"/auth/login"},title:{default:""},subTitle:{default:""},submitButtonText:{default:""},showBack:{type:Boolean,default:!0}},emits:["submit"],setup(o,{expose:c,emit:n}){const l=o,t=n,u=L(),[p,s]=N(A({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:v(()=>l.formSchema),showDefaultActions:!1}));function a(){return b(this,null,function*(){const{valid:r}=yield s.validate(),d=yield s.getValues();r&&t("submit",d)})}function m(){u.push(l.loginPath)}return c({getFormApi:()=>s}),(r,d)=>(k(),F("div",null,[T(S,null,{desc:f(()=>[I("span",_,[w(r.$slots,"subTitle",{},()=>[h(g(o.subTitle||i(e)("authentication.codeSubtitle")),1)])])]),default:f(()=>[w(r.$slots,"title",{},()=>[h(g(o.title||i(e)("authentication.welcomeBack"))+" ðŸ“² ",1)])]),_:3}),T(i(p)),T(i(x),{class:P([{"cursor-wait":o.loading},"w-full"]),loading:o.loading,onClick:a},{default:f(()=>[w(r.$slots,"submitButtonText",{},()=>[h(g(o.submitButtonText||i(e)("common.login")),1)])]),_:3},8,["class","loading"]),o.showBack?(k(),$(i(x),{key:0,class:"mt-4 w-full",variant:"outline",onClick:d[0]||(d[0]=q=>m())},{default:f(()=>[h(g(i(e)("common.back")),1)]),_:1})):E("",!0)]))}}),B=6,J=C({name:"CodeLogin",__name:"code-login",setup(o){const c=V(!1),n=v(()=>[{component:"AIFlowyInput",componentProps:{placeholder:e("authentication.mobile")},fieldName:"phoneNumber",label:e("authentication.mobile"),rules:y().min(1,{message:e("authentication.mobileTip")}).refine(t=>/^\d{11}$/.test(t),{message:e("authentication.mobileErrortip")})},{component:"AIFlowyPinInput",componentProps:{codeLength:B,createText:t=>t>0?e("authentication.sendText",[t]):e("authentication.sendCode"),placeholder:e("authentication.code")},fieldName:"code",label:e("authentication.code"),rules:y().length(B,{message:e("authentication.codeTip",[B])})}]);function l(t){return b(this,null,function*(){console.log(t)})}return(t,u)=>(k(),$(i(D),{"form-schema":n.value,loading:c.value,onSubmit:l},null,8,["form-schema","loading"]))}});export{J as default};
