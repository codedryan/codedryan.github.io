import{$ as a,M as y,R as M}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as U}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as D,a as v}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{U as F}from"./UploadAvatar-a3x1lqjM.js";import{ElInput as g}from"./index-BjDsryRX.js";import{ElButton as c}from"./index-oBOAcXl-.js";import{k as B,o as I,r as i,B as w,n as A,E as u,J as s,u as e,L as b,y as V}from"../jse/index-index-D3Xb8oT_.js";const O=B({__name:"DatasetModal",emits:["reload"],setup(L,{expose:q,emit:C}){const E=C;I(()=>{}),q({openDialog:k});const p=i(),n=i(!1),m=i(!0),t=i({deptId:"",icon:"",name:"",description:"",qaCount:"",auditCount:"",status:""}),d=i(!1),_=i({deptId:[{required:!0,message:a("message.required"),trigger:"blur"}],name:[{required:!0,message:a("message.required"),trigger:"blur"}],qaCount:[{required:!0,message:a("message.required"),trigger:"blur"}],auditCount:[{required:!0,message:a("message.required"),trigger:"blur"}],status:[{required:!0,message:a("message.required"),trigger:"blur"}]});function k(r){r.id&&(m.value=!1),t.value=r,n.value=!0}function x(){var r;(r=p.value)==null||r.validate(l=>{l&&(d.value=!0,y.post(m.value?"api/v1/dataset/save":"api/v1/dataset/update",t.value).then(o=>{d.value=!1,o.errorCode===0&&(M.success(o.message),E("reload"),f())}).catch(()=>{d.value=!1}))})}function f(){var r;(r=p.value)==null||r.resetFields(),m.value=!0,t.value={},n.value=!1}return(r,l)=>(A(),w(e(U),{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value=o),draggable:"",title:m.value?e(a)("button.add"):e(a)("button.edit"),"before-close":f,"close-on-click-modal":!1},{footer:u(()=>[s(e(c),{onClick:f},{default:u(()=>[b(V(e(a)("button.cancel")),1)]),_:1}),s(e(c),{type:"primary",onClick:x,loading:d.value,disabled:d.value},{default:u(()=>[b(V(e(a)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:u(()=>[s(e(D),{"label-width":"120px",ref_key:"saveForm",ref:p,model:t.value,"status-icon":"",rules:_.value},{default:u(()=>[s(e(v),{prop:"icon",label:e(a)("dataset.icon")},{default:u(()=>[s(F,{modelValue:t.value.icon,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.icon=o)},null,8,["modelValue"])]),_:1},8,["label"]),s(e(v),{prop:"name",label:e(a)("dataset.name")},{default:u(()=>[s(e(g),{modelValue:t.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.name=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),s(e(v),{prop:"description",label:e(a)("dataset.description")},{default:u(()=>[s(e(g),{type:"textarea",rows:4,modelValue:t.value.description,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.description=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{O as _};
