import{bL as R,aP as b,aQ as w,cS as k,bQ as E,cT as $}from"./bootstrap-Bf65uz2I.js";import{k as d,r as p,B as v,n as u,E as i,x as m,u as r,ag as L,p as q,c as h,o as I,a as M,ae as F,w as P,I as j,s as g,v as N,ap as T,aq as D,D as Q,m as S,J as C,z as A,L as U,y as V}from"../jse/index-index-D3Xb8oT_.js";const[B,J]=R("AvatarRoot");var W=d({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){return b(),J({imageLoadingStatus:p("idle")}),(e,t)=>(u(),v(r(w),{"as-child":e.asChild,as:e.as},{default:i(()=>[m(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),G=W,H=d({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const e=a,t=B();b();const l=p(e.delayMs===void 0);return L(o=>{if(e.delayMs&&k){const n=window.setTimeout(()=>{l.value=!0},e.delayMs);o(()=>{window.clearTimeout(n)})}}),(o,n)=>l.value&&r(t).imageLoadingStatus.value!=="loaded"?(u(),v(r(w),{key:0,"as-child":o.asChild,as:o.as},{default:i(()=>[m(o.$slots,"default")]),_:3},8,["as-child","as"])):q("v-if",!0)}}),K=H;function z(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function O(a,{referrerPolicy:e,crossOrigin:t}={}){const l=p(!1),o=p(null),n=h(()=>l.value?(!o.value&&k&&(o.value=new window.Image),o.value):null),c=p(z(n.value,a.value)),_=f=>()=>{l.value&&(c.value=f)};return I(()=>{l.value=!0,L(f=>{const s=n.value;if(!s)return;c.value=z(s,a.value);const y=_("loaded"),x=_("error");s.addEventListener("load",y),s.addEventListener("error",x),e!=null&&e.value&&(s.referrerPolicy=e.value),typeof(t==null?void 0:t.value)=="string"&&(s.crossOrigin=t.value),f(()=>{s.removeEventListener("load",y),s.removeEventListener("error",x)})})}),M(()=>{l.value=!1}),c}var X=d({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(a,{emit:e}){const t=a,l=e,{src:o,referrerPolicy:n,crossOrigin:c}=F(t);b();const _=B(),f=O(o,{referrerPolicy:n,crossOrigin:c});return P(f,s=>{l("loadingStatusChange",s),s!=="idle"&&(_.imageLoadingStatus.value=s)},{immediate:!0}),(s,y)=>j((u(),v(r(w),{role:"img","as-child":s.asChild,as:s.as,src:r(o),"referrer-policy":r(n)},{default:i(()=>[m(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[E,r(f)==="loaded"]])}}),Y=X;const Z=$("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{shape:{circle:"rounded-full",square:"rounded-md"},size:{base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl",sm:"h-10 w-10 text-xs"}}}),ee=d({__name:"Avatar",props:{class:{},shape:{default:"circle"},size:{default:"sm"}},setup(a){const e=a;return(t,l)=>(u(),v(r(G),{class:g(r(N)(r(Z)({size:a.size,shape:a.shape}),e.class))},{default:i(()=>[m(t.$slots,"default")]),_:3},8,["class"]))}}),ae=d({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(a){const e=a;return(t,l)=>(u(),v(r(K),T(D(e)),{default:i(()=>[m(t.$slots,"default")]),_:3},16))}}),te=d({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(a){const e=a;return(t,l)=>(u(),v(r(Y),Q(e,{class:"h-full w-full object-cover"}),null,16))}}),le=d({inheritAttrs:!1,__name:"avatar",props:{alt:{default:"avatar"},class:{},dot:{type:Boolean,default:!1},dotClass:{default:"bg-green-500"},fit:{default:"cover"},size:{},delayMs:{},asChild:{type:Boolean},as:{default:"button"},src:{},referrerPolicy:{},crossOrigin:{}},setup(a){const e=a,t=h(()=>{const{fit:n}=e;return n?{objectFit:n}:{}}),l=h(()=>e.alt.slice(-2).toUpperCase()),o=h(()=>e.size!==void 0&&e.size>0?{height:"fit-content",width:`${e.size}px`}:{});return(n,c)=>(u(),S("div",{class:g([e.class,"relative flex flex-shrink-0 items-center"]),style:A(o.value)},[C(r(ee),{class:g([e.class,"size-full"])},{default:i(()=>[C(r(te),{alt:a.alt,src:a.src,style:A(t.value)},null,8,["alt","src","style"]),C(r(ae),null,{default:i(()=>[U(V(l.value),1)]),_:1})]),_:1},8,["class"]),a.dot?(u(),S("span",{key:0,class:g([a.dotClass,"border-background absolute bottom-0 right-0 size-3 rounded-full border-2"])},null,2)):q("",!0)],6))}});export{le as _};
