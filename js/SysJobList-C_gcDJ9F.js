var q=Object.defineProperty;var T=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var L=(d,s,n)=>s in d?q(d,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[s]=n,j=(d,s)=>{for(var n in s||(s={}))A.call(s,n)&&L(d,n,s[n]);if(T)for(var n of T(s))H.call(s,n)&&L(d,n,s[n]);return d};import{$ as o,Z as O,a3 as Q,aX as Y,aY as Z,aZ as z,Y as F,M as D,R as B,aI as X}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as G,a as K,b as h}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     */import{E as J}from"./el-message-box-B8o3mhYx.js";import"./css-C9o_OfXA.js";import"./el-overlay-Zuw8glOl.js";import{E as U,a as u}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{H as W}from"./HeaderSearch-Dj9rqjlr.js";import{_ as ee}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{u as te}from"./dict-CsbZy8Qf.js";import{_ as oe}from"./SysJobModal.vue_vue_type_script_setup_true_lang-DBVv0Afl.js";import{ElButton as _}from"./index-oBOAcXl-.js";import{k as ie,o as re,r as E,S as ae,H as se,m as g,n as y,J as i,q as $,E as r,u as e,L as m,y as p,I as C,p as S}from"../jse/index-index-D3Xb8oT_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./index-BjDsryRX.js";import"./event-BB_Ol6Sd.js";import"./index-C33Sf0pH.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./validator-D2YZey62.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./merge-BysAs727.js";import"./_baseClone-trfKWgGN.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./hasPermission-CIdLHqw4.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";/* empty css                  */import"./el-alert-DFDoDStD.js";import"./el-dialog-CAR1-R4U.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./el-card-DGd_zL6P.js";import"./css-CLrSDUNG.js";import"./el-tabs-BUyJm6xP.js";import"./use-wheel-C9oFsIdW.js";import"./index-DSAOTmKA.js";import"./css-B4xXAc0m.js";import"./css-BBEQ4fog.js";import"./css-Co2xKw2s.js";import"./index-C5wmh2tf.js";import"./index-9UPoHQm1.js";import"./index-BKzCwxYe.js";import"./index-Ce9mjW49.js";import"./DictSelect-DdOvS-6R.js";import"./WorkflowFormItem.vue_vue_type_script_setup_true_lang-Cr5clR5Y.js";import"./css-XAUFhYlW.js";import"./ChooseResource.vue_vue_type_script_setup_true_lang-DqbjF1_U.js";import"./ResourceCardList.vue_vue_type_script_setup_true_lang-DuPVj3a4.js";import"./el-col-D5ifHzRC.js";import"./el-image-viewer-DlaFkWIK.js";import"./el-row-u3yI-Elm.js";/* empty css                */import"./Tag-BLqYdY0p.js";import"./resource-Vt4YTl0B.js";import"./PreviewModal.vue_vue_type_script_setup_true_lang-DbqXkAAw.js";import"./index-Bpv3aWiu.js";const le={class:"flex h-full flex-col gap-6 p-6"},ne={class:"bg-background border-border flex-1 rounded-lg border p-5"},me={class:"flex items-center gap-3"},pe={key:0},ce={key:1},Ft=ie({__name:"SysJobList",setup(d){re(()=>{w()});const s=E(),n=E(),f=te(),N=[{key:"create",text:o("button.add"),icon:ae(O),type:"primary",data:{action:"create"},permission:"/api/v1/sysJob/save"}];function w(){f.fetchDictionary("jobType"),f.fetchDictionary("jobStatus"),f.fetchDictionary("yesOrNo"),f.fetchDictionary("misfirePolicy")}const P=a=>{s.value.setQuery({jobName:a,isQueryOr:!0})};function v(a){a==null||a.resetFields(),s.value.setQuery({})}function x(a){n.value.openDialog(j({},a))}function M(a){J.confirm(o("message.deleteAlert"),o("message.noticeTitle"),{confirmButtonText:o("message.ok"),cancelButtonText:o("message.cancel"),type:"warning",beforeClose:(b,l,c)=>{b==="confirm"?(l.confirmButtonLoading=!0,D.post("/api/v1/sysJob/remove",{id:a.id}).then(t=>{l.confirmButtonLoading=!1,t.errorCode===0&&(B.success(t.message),v(),c())}).catch(()=>{l.confirmButtonLoading=!1})):c()}}).catch(()=>{})}function R(a){J.confirm(o("message.startAlert"),o("message.noticeTitle"),{confirmButtonText:o("message.ok"),cancelButtonText:o("message.cancel"),type:"warning",beforeClose:(b,l,c)=>{b==="confirm"?(l.confirmButtonLoading=!0,D.get(`/api/v1/sysJob/start?id=${a.id}`).then(t=>{l.confirmButtonLoading=!1,t.errorCode===0&&(B.success(t.message),v(),c())})):c()}})}function I(a){J.confirm(o("message.stopAlert"),o("message.noticeTitle"),{confirmButtonText:o("message.ok"),cancelButtonText:o("message.cancel"),type:"warning",beforeClose:(b,l,c)=>{b==="confirm"?(l.confirmButtonLoading=!0,D.get(`/api/v1/sysJob/stop?id=${a.id}`).then(t=>{l.confirmButtonLoading=!1,t.errorCode===0&&(B.success(t.message),v(),c())})):c()}})}function V(a){X.push({name:"SysJobLog",query:{jobId:a.id}})}return(a,b)=>{const l=se("access");return y(),g("div",le,[i(oe,{ref_key:"saveDialog",ref:n,onReload:v},null,512),i(W,{buttons:N,onSearch:P,onButtonClick:b[0]||(b[0]=c=>x({}))}),$("div",ne,[i(ee,{ref_key:"pageDataRef",ref:s,"page-url":"/api/v1/sysJob/page","page-size":10},{default:r(({pageList:c})=>[i(e(U),{data:c,border:""},{default:r(()=>[i(e(u),{prop:"jobName",label:e(o)("sysJob.jobName")},{default:r(({row:t})=>[m(p(t.jobName),1)]),_:1},8,["label"]),i(e(u),{prop:"jobType",label:e(o)("sysJob.jobType")},{default:r(({row:t})=>[m(p(e(f).getDictLabel("jobType",t.jobType)),1)]),_:1},8,["label"]),i(e(u),{prop:"cronExpression",label:e(o)("sysJob.cronExpression")},{default:r(({row:t})=>[m(p(t.cronExpression),1)]),_:1},8,["label"]),i(e(u),{prop:"allowConcurrent",label:e(o)("sysJob.allowConcurrent")},{default:r(({row:t})=>[m(p(e(f).getDictLabel("yesOrNo",t.allowConcurrent)),1)]),_:1},8,["label"]),i(e(u),{prop:"misfirePolicy",label:e(o)("sysJob.misfirePolicy")},{default:r(({row:t})=>[m(p(e(f).getDictLabel("misfirePolicy",t.misfirePolicy)),1)]),_:1},8,["label"]),i(e(u),{prop:"status",label:e(o)("sysJob.status")},{default:r(({row:t})=>[m(p(e(f).getDictLabel("jobStatus",t.status)),1)]),_:1},8,["label"]),i(e(u),{prop:"created",label:e(o)("sysJob.created")},{default:r(({row:t})=>[m(p(t.created),1)]),_:1},8,["label"]),i(e(u),{prop:"remark",label:e(o)("sysJob.remark")},{default:r(({row:t})=>[m(p(t.remark),1)]),_:1},8,["label"]),i(e(u),{label:e(o)("common.handle"),width:"90",align:"right"},{default:r(({row:t})=>[$("div",me,[i(e(_),{link:"",type:"primary",onClick:k=>x(t)},{default:r(()=>[m(p(e(o)("button.edit")),1)]),_:1},8,["onClick"]),i(e(G),null,{dropdown:r(()=>[i(e(K),null,{default:r(()=>[t.status===0?C((y(),g("div",pe,[i(e(h),{onClick:k=>R(t)},{default:r(()=>[i(e(_),{icon:e(Y),link:""},{default:r(()=>[m(p(e(o)("button.start")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[l,"/api/v1/sysJob/save","code"]]):S("",!0),t.status===1?C((y(),g("div",ce,[i(e(h),{onClick:k=>I(t)},{default:r(()=>[i(e(_),{icon:e(Z),link:""},{default:r(()=>[m(p(e(o)("button.stop")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[l,"/api/v1/sysJob/save","code"]]):S("",!0),C((y(),g("div",null,[i(e(h),{onClick:k=>V(t)},{default:r(()=>[i(e(_),{icon:e(z),link:""},{default:r(()=>[m(p(e(o)("button.log")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[l,"/api/v1/sysJob/query","code"]]),C((y(),g("div",null,[i(e(h),{onClick:k=>M(t)},{default:r(()=>[i(e(_),{type:"danger",icon:e(F),link:""},{default:r(()=>[m(p(e(o)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[l,"/api/v1/sysJob/remove","code"]])]),_:2},1024)]),default:r(()=>[i(e(_),{link:"",icon:e(Q)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])])}}});export{Ft as default};
