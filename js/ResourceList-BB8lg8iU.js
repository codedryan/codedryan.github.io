var ce=Object.defineProperty;var W=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var A=(f,u,n)=>u in f?ce(f,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):f[u]=n,V=(f,u)=>{for(var n in u||(u={}))pe.call(u,n)&&A(f,n,u[n]);if(W)for(var n of W(u))me.call(u,n)&&A(f,n,u[n]);return f};var O=(f,u,n)=>new Promise((w,D)=>{var _=v=>{try{T(n.next(v))}catch(b){D(b)}},x=v=>{try{T(n.throw(v))}catch(b){D(b)}},T=v=>v.done?w(v.value):Promise.resolve(v.value).then(_,x);T((n=n.apply(f,u)).next())});import{$ as t,a8 as de,Y as P,M as R,R as F,Q as fe,V as ge,Z as Y,a3 as ve,aN as ye}from"./bootstrap-Bf65uz2I.js";import{E as _e}from"./el-avatar-BVPcm0Px.js";import"./css-gf8D6QlL.js";import{E as be}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";import{E as ke,a as Ce,b as j}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     *//* empty css                */import{a as B,E as H}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import"./css-B4xXAc0m.js";import{E as J}from"./el-message-box-B8o3mhYx.js";import{E as he,a as k}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               *//* empty css                */import{D as xe}from"./DictSelect-DdOvS-6R.js";import{_ as De}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{P as Te}from"./PageSide-wLZhy9Oh.js";import{T as K}from"./Tag-BLqYdY0p.js";import{u as Ne}from"./dict-CsbZy8Qf.js";import{g as we,a as Z,b as G}from"./resource-Vt4YTl0B.js";import{_ as Ve}from"./PreviewModal.vue_vue_type_script_setup_true_lang-DbqXkAAw.js";import{_ as Re}from"./ResourceModal.vue_vue_type_script_setup_true_lang-Csu0h69s.js";import{ElInput as X}from"./index-BjDsryRX.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{E as Be}from"./index-Bpv3aWiu.js";import{k as Ee,o as $e,r as d,c as Le,H as Se,m as q,n as C,J as o,q as h,E as l,u as e,L as p,y as m,I as ee,B as E,Y as Fe,F as qe,N as Ie,p as Ue}from"../jse/index-index-D3Xb8oT_.js";import{ElInputNumber as ze}from"./index-9UPoHQm1.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./validator-D2YZey62.js";import"./merge-BysAs727.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./use-form-item-DVWmmqeW.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";/* empty css                  */import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./el-image-viewer-DlaFkWIK.js";import"./index-C33Sf0pH.js";import"./Upload.vue_vue_type_script_setup_true_lang-ClW8ereK.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./index-BKzCwxYe.js";const Me={class:"flex h-full flex-col gap-1.5 p-6"},Qe={class:"flex items-center justify-between"},We={class:"handle-div"},Ae={class:"flex max-h-[calc(100vh-191px)] flex-1 gap-6"},Oe={class:"bg-background h-full flex-1 overflow-auto rounded-lg p-5"},Pe={class:"flex items-center gap-2.5"},Ye={class:"flex items-center gap-3"},je={class:"flex items-center"},bt=Ee({__name:"ResourceList",setup(f){$e(()=>{T(),L()});const u=d(),n=d(),w=d(),D=d(),_=d({resourceName:"",resourceType:""}),x=Ne();function T(){x.fetchDictionary("resourceType"),x.fetchDictionary("resourceOriginType")}function v(r){r==null||r.validate(s=>{s&&n.value.setQuery(_.value)})}function b(r){r==null||r.resetFields(),n.value.setQuery({})}function I(r){w.value.openDialog(V({},r))}function oe(r){J.confirm(t("message.deleteAlert"),t("message.noticeTitle"),{confirmButtonText:t("message.ok"),cancelButtonText:t("message.cancel"),type:"warning",beforeClose:(s,c,a)=>{s==="confirm"?(c.confirmButtonLoading=!0,R.post("/api/v1/resource/remove",{id:r.id}).then(i=>{c.confirmButtonLoading=!1,i.errorCode===0&&(F.success(i.message),b(u.value),a())}).catch(()=>{c.confirmButtonLoading=!1})):a()}}).catch(()=>{})}function te(r){D.value.openDialog(V({},r))}function re(r){window.open(r.resourceUrl,"_blank")}const U=d([{prop:"categoryName",label:t("aiWorkflowCategory.categoryName"),type:"input",required:!0,placeholder:t("aiWorkflowCategory.categoryName")},{prop:"sortNo",label:t("aiWorkflowCategory.sortNo"),type:"number",required:!1,placeholder:t("aiWorkflowCategory.sortNo")}]),z=d([]),ae=[{icon:de,label:t("button.edit"),onClick(r){Q(r)}},{type:"danger",icon:P,label:t("button.delete"),onClick(r){ne(r)}}],le={icon:Y,label:t("button.add"),onClick(){Q({})}},N=d(!1),y=d({}),M=d(),ie=Le(()=>{const r={};return U.value.forEach(s=>{const c=[];s.required&&c.push({required:!0,message:`${t("message.required")}`,trigger:"blur"}),c.length>0&&(r[s.prop]=c)}),r}),$=d(!1);function se(r){n.value.setQuery({categoryId:r.id})}function Q(r){var s;(s=M.value)==null||s.resetFields(),y.value=V({},r),N.value=!0}function ne(r){J.confirm(t("message.deleteAlert"),t("message.noticeTitle"),{confirmButtonText:t("message.ok"),cancelButtonText:t("message.cancel"),type:"warning",beforeClose:(s,c,a)=>{s==="confirm"?(c.confirmButtonLoading=!0,R.post("/api/v1/resourceCategory/remove",{id:r.id}).then(i=>{c.confirmButtonLoading=!1,i.errorCode===0&&(F.success(i.message),a(),L())}).catch(()=>{c.confirmButtonLoading=!1})):a()}}).catch(()=>{})}function ue(){var r;(r=u.value)==null||r.validate(s=>{if(s){$.value=!0;const c=y.value.id?"/api/v1/resourceCategory/update":"/api/v1/resourceCategory/save";R.post(c,y.value).then(a=>{$.value=!1,a.errorCode===0&&(F.success(a.message),N.value=!1,L())})}})}const L=()=>O(null,null,function*(){const[,r]=yield fe(R.get)("/api/v1/resourceCategory/list",{params:{sortKey:"sortNo",sortType:"asc"}});r&&r.errorCode===0&&(z.value=[{id:"",categoryName:t("common.allCategories")},...r.data])});return(r,s)=>{const c=Se("access");return C(),q("div",Me,[o(Ve,{ref_key:"previewDialog",ref:D},null,512),o(Re,{ref_key:"saveDialog",ref:w,onReload:b},null,512),h("div",Qe,[o(e(H),{ref_key:"formRef",ref:u,inline:"",model:_.value},{default:l(()=>[o(e(B),{prop:"resourceType",class:"!mr-3"},{default:l(()=>[o(xe,{modelValue:_.value.resourceType,"onUpdate:modelValue":s[0]||(s[0]=a=>_.value.resourceType=a),"dict-code":"resourceType",placeholder:e(t)("aiResource.resourceType")},null,8,["modelValue","placeholder"])]),_:1}),o(e(B),{prop:"resourceName",class:"!mr-3"},{default:l(()=>[o(e(X),{modelValue:_.value.resourceName,"onUpdate:modelValue":s[1]||(s[1]=a=>_.value.resourceName=a),placeholder:e(t)("aiResource.resourceName")},null,8,["modelValue","placeholder"])]),_:1}),o(e(B),null,{default:l(()=>[o(e(g),{onClick:s[2]||(s[2]=a=>v(u.value)),type:"primary"},{default:l(()=>[p(m(e(t)("button.query")),1)]),_:1}),o(e(g),{onClick:s[3]||(s[3]=a=>b(u.value))},{default:l(()=>[p(m(e(t)("button.reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),h("div",We,[ee((C(),E(e(g),{onClick:s[4]||(s[4]=a=>I({})),type:"primary"},{default:l(()=>[o(e(ge),{class:"mr-1"},{default:l(()=>[o(e(Y))]),_:1}),p(" "+m(e(t)("button.add")),1)]),_:1})),[[c,"/api/v1/resource/save","code"]])])]),h("div",Ae,[o(Te,{"label-key":"categoryName","value-key":"id",menus:z.value,"control-btns":ae,"footer-button":le,onChange:se},null,8,["menus"]),h("div",Oe,[o(De,{ref_key:"pageDataRef",ref:n,"page-url":"/api/v1/resource/page","page-size":10},{default:l(({pageList:a})=>[o(e(he),{data:a,border:""},{default:l(()=>[o(e(k),{prop:"resourceName",label:e(t)("aiResource.resourceName"),width:"300"},{default:l(({row:i})=>[h("div",Pe,[o(e(_e),{src:e(we)(i),shape:"square",size:32},null,8,["src"]),o(e(Be),{truncated:""},{default:l(()=>[p(m(i.resourceName),1)]),_:2},1024)])]),_:1},8,["label"]),o(e(k),{align:"center",prop:"suffix",label:e(t)("aiResource.suffix"),width:"60"},{default:l(({row:i})=>[p(m(i.suffix),1)]),_:1},8,["label"]),o(e(k),{align:"center",prop:"fileSize",label:e(t)("aiResource.fileSize")},{default:l(({row:i})=>[p(m(e(Fe)(i.fileSize)),1)]),_:1},8,["label"]),o(e(k),{align:"center",prop:"origin",label:e(t)("aiResource.origin")},{default:l(({row:i})=>[o(K,{size:"small","background-color":`${e(Z)(i)}15`,"text-color":e(Z)(i),text:e(x).getDictLabel("resourceOriginType",i.origin)},null,8,["background-color","text-color","text"])]),_:1},8,["label"]),o(e(k),{align:"center",prop:"resourceType",label:e(t)("aiResource.resourceType")},{default:l(({row:i})=>[o(K,{size:"small","background-color":`${e(G)(i)}15`,"text-color":e(G)(i),text:e(x).getDictLabel("resourceType",i.resourceType)},null,8,["background-color","text-color","text"])]),_:1},8,["label"]),o(e(k),{prop:"created",label:e(t)("aiResource.created")},{default:l(({row:i})=>[p(m(i.created),1)]),_:1},8,["label"]),o(e(k),{label:e(t)("common.handle"),width:"140",align:"right"},{default:l(({row:i})=>[h("div",Ye,[h("div",je,[o(e(g),{link:"",type:"primary",onClick:S=>te(i)},{default:l(()=>[p(m(e(t)("button.view")),1)]),_:1},8,["onClick"]),o(e(g),{link:"",type:"primary",onClick:S=>I(i)},{default:l(()=>[p(m(e(t)("button.edit")),1)]),_:1},8,["onClick"])]),o(e(ke),null,{dropdown:l(()=>[o(e(Ce),null,{default:l(()=>[o(e(j),{onClick:S=>re(i)},{default:l(()=>[o(e(g),{icon:e(ye),link:""},{default:l(()=>[p(m(e(t)("button.download")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"]),ee((C(),q("div",null,[o(e(j),{onClick:S=>oe(i)},{default:l(()=>[o(e(g),{type:"danger",icon:e(P),link:""},{default:l(()=>[p(m(e(t)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[c,"/api/v1/resource/remove","code"]])]),_:2},1024)]),default:l(()=>[o(e(g),{link:"",icon:e(ve)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])]),o(e(be),{modelValue:N.value,"onUpdate:modelValue":s[6]||(s[6]=a=>N.value=a),title:y.value.id?`${e(t)("button.edit")}`:`${e(t)("button.add")}`,"close-on-click-modal":!1},{footer:l(()=>[o(e(g),{onClick:s[5]||(s[5]=a=>N.value=!1)},{default:l(()=>[p(m(e(t)("button.cancel")),1)]),_:1}),o(e(g),{type:"primary",onClick:ue,loading:$.value},{default:l(()=>[p(m(e(t)("button.confirm")),1)]),_:1},8,["loading"])]),default:l(()=>[o(e(H),{ref_key:"sideFormRef",ref:M,model:y.value,rules:ie.value,"label-width":"120px"},{default:l(()=>[(C(!0),q(qe,null,Ie(U.value,a=>(C(),E(e(B),{key:a.prop,label:a.label,prop:a.prop},{default:l(()=>[!a.type||a.type==="input"?(C(),E(e(X),{key:0,modelValue:y.value[a.prop],"onUpdate:modelValue":i=>y.value[a.prop]=i,placeholder:a.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):a.type==="number"?(C(),E(e(ze),{key:1,modelValue:y.value[a.prop],"onUpdate:modelValue":i=>y.value[a.prop]=i,placeholder:a.placeholder,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])):Ue("",!0)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{bt as default};
