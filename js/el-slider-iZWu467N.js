var Xe=Object.defineProperty,Ke=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var Ce=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,te=(e,t)=>{for(var n in t||(t={}))$e.call(t,n)&&Ce(e,n,t[n]);if(xe)for(var n of xe(t))Ue.call(t,n)&&Ce(e,n,t[n]);return e},de=(e,t)=>Ke(e,Ye(t));var le=(e,t,n)=>new Promise((a,s)=>{var m=v=>{try{b(n.next(v))}catch(d){s(d)}},r=v=>{try{b(n.throw(v))}catch(d){s(d)}},b=v=>v.done?a(v.value):Promise.resolve(v.value).then(m,r);b((n=n.apply(e,t)).next())});import{bo as oe,bm as Se,bn as ae,bq as Me,bk as fe,bv as We,bx as K,an as ze,ao as ke,d as Ve,by as Oe,br as Ae,ax as je,aq as qe}from"./bootstrap-Bf65uz2I.js";import{ElInputNumber as Ge}from"./index-9UPoHQm1.js";import{c as pe,E as He}from"./index-CMBjNRIa.js";import{u as Je}from"./index-bT9OJj6t.js";import{C as Ie,I as Ee,U as re}from"./event-BB_Ol6Sd.js";import{b as ne,i as Qe,r as Z,c as g,w as ve,A as ge,k as se,G as Re,ae as we,m as R,n as M,J as _e,E as Pe,q as Q,s as _,u as l,y as Ze,z as J,a8 as Le,P as De,O as et,o as tt,X as lt,B as be,p as ce,F as me,N as he}from"../jse/index-index-D3Xb8oT_.js";import{d as Ne}from"./debounce-AsHllEOy.js";import{c as at}from"./clamp-CeuJyDnc.js";import{u as nt,a as ot}from"./use-form-item-DVWmmqeW.js";import{u as rt}from"./use-form-common-props-IzjzSHax.js";const Fe=Symbol("sliderContextKey"),st=Se(te({modelValue:{type:ae([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Me,inputSize:Me,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ae(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ae(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:pe,default:"top"},marks:{type:ae(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0}},Je(["ariaLabel"]))),ye=e=>oe(e)||ne(e)&&e.every(oe),it={[re]:ye,[Ee]:ye,[Ie]:ye},ut=Se({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:pe,default:"top"}}),dt={[re]:e=>oe(e)},ct=(e,t,n)=>{const a=Z(),s=Z(!1),m=g(()=>t.value instanceof Function),r=g(()=>m.value&&t.value(e.modelValue)||e.modelValue),b=Ne(()=>{n.value&&(s.value=!0)},50),v=Ne(()=>{n.value&&(s.value=!1)},50);return{tooltip:a,tooltipVisible:s,formatValue:r,displayTooltip:b,hideTooltip:v}},mt=(e,t,n)=>{const{disabled:a,min:s,max:m,step:r,showTooltip:b,persistent:v,precision:d,sliderSize:f,formatTooltip:i,emitChange:V,resetSize:T,updateDragging:Y}=Qe(Fe),{tooltip:z,tooltipVisible:L,formatValue:p,displayTooltip:k,hideTooltip:F}=ct(e,i,b),B=Z(),E=g(()=>`${(e.modelValue-s.value)/(m.value-s.value)*100}%`),P=g(()=>e.vertical?{bottom:E.value}:{left:E.value}),$=()=>{t.hovering=!0,k()},ie=()=>{t.hovering=!1,t.dragging||F()},U=c=>{a.value||(c.preventDefault(),I(c),window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("mouseup",C),window.addEventListener("touchend",C),window.addEventListener("contextmenu",C),B.value.focus())},X=c=>{a.value||(t.newPosition=Number.parseFloat(E.value)+c/(m.value-s.value)*100,N(t.newPosition),V())},W=()=>{X(-r.value)},u=()=>{X(r.value)},y=()=>{X(-r.value*4)},S=()=>{X(r.value*4)},q=()=>{a.value||(N(0),V())},G=()=>{a.value||(N(100),V())},H=c=>{const h=We(c);let w=!0;switch(h){case K.left:case K.down:W();break;case K.right:case K.up:u();break;case K.home:q();break;case K.end:G();break;case K.pageDown:y();break;case K.pageUp:S();break;default:w=!1;break}w&&c.preventDefault()},O=c=>{let h,w;return c.type.startsWith("touch")?(w=c.touches[0].clientY,h=c.touches[0].clientX):(w=c.clientY,h=c.clientX),{clientX:h,clientY:w}},I=c=>{t.dragging=!0,t.isClick=!0;const{clientX:h,clientY:w}=O(c);e.vertical?t.startY=w:t.startX=h,t.startPosition=Number.parseFloat(E.value),t.newPosition=t.startPosition},x=c=>{if(t.dragging){t.isClick=!1,k(),T();let h;const{clientX:w,clientY:D}=O(c);e.vertical?(t.currentY=D,h=(t.startY-t.currentY)/f.value*100):(t.currentX=w,h=(t.currentX-t.startX)/f.value*100),t.newPosition=t.startPosition+h,N(t.newPosition)}},C=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||F(),t.isClick||N(t.newPosition),V()},0),window.removeEventListener("mousemove",x),window.removeEventListener("touchmove",x),window.removeEventListener("mouseup",C),window.removeEventListener("touchend",C),window.removeEventListener("contextmenu",C))},N=c=>le(null,null,function*(){if(c===null||Number.isNaN(+c))return;c=at(c,0,100);const h=Math.floor((m.value-s.value)/r.value),w=h*r.value/(m.value-s.value)*100,D=w+(100-w)/2;let o;if(c<w){const ue=w/h,A=Math.round(c/ue);o=s.value+A*r.value}else c<D?o=s.value+h*r.value:o=m.value;o=Number.parseFloat(o.toFixed(d.value)),o!==e.modelValue&&n(re,o),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),yield ge(),t.dragging&&k(),z.value.updatePopper()});return ve(()=>t.dragging,c=>{Y(c)}),fe(B,"touchstart",U,{passive:!1}),{disabled:a,button:B,tooltip:z,tooltipVisible:L,showTooltip:b,persistent:v,wrapperStyle:P,formatValue:p,handleMouseEnter:$,handleMouseLeave:ie,onButtonDown:U,onKeyDown:H,setPosition:N}},vt=se({name:"ElSliderButton"}),ft=se(de(te({},vt),{props:ut,emits:dt,setup(e,{expose:t,emit:n}){const a=e,s=ke("slider"),m=Re({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),r=g(()=>f.value?i.value:!1),{disabled:b,button:v,tooltip:d,showTooltip:f,persistent:i,tooltipVisible:V,wrapperStyle:T,formatValue:Y,handleMouseEnter:z,handleMouseLeave:L,onButtonDown:p,onKeyDown:k,setPosition:F}=mt(a,m,n),{hovering:B,dragging:E}=we(m);return t({onButtonDown:p,onKeyDown:k,setPosition:F,hovering:B,dragging:E}),(P,$)=>(M(),R("div",{ref_key:"button",ref:v,class:_([l(s).e("button-wrapper"),{hover:l(B),dragging:l(E)}]),style:J(l(T)),tabindex:l(b)?void 0:0,onMouseenter:l(z),onMouseleave:l(L),onMousedown:l(p),onFocus:l(z),onBlur:l(L),onKeydown:l(k)},[_e(l(He),{ref_key:"tooltip",ref:d,visible:l(V),placement:P.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":P.tooltipClass,disabled:!l(f),persistent:l(r)},{content:Pe(()=>[Q("span",null,Ze(l(Y)),1)]),default:Pe(()=>[Q("div",{class:_([l(s).e("button"),{hover:l(B),dragging:l(E)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}}));var Te=ze(ft,[["__file","button.vue"]]);const gt=Se({mark:{type:ae([String,Object]),default:void 0}});var bt=se({name:"ElSliderMarker",props:gt,setup(e){const t=ke("slider"),n=g(()=>Le(e.mark)?e.mark:e.mark.label),a=g(()=>Le(e.mark)?void 0:e.mark.style);return()=>De("div",{class:t.e("marks-text"),style:a.value},n.value)}});const ht=(e,t,n)=>{const{form:a,formItem:s}=nt(),m=et(),r=Z(),b=Z(),v={firstButton:r,secondButton:b},d=g(()=>e.disabled||(a==null?void 0:a.disabled)||!1),f=g(()=>Math.min(t.firstValue,t.secondValue)),i=g(()=>Math.max(t.firstValue,t.secondValue)),V=g(()=>e.range?`${100*(i.value-f.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),T=g(()=>e.range?`${100*(f.value-e.min)/(e.max-e.min)}%`:"0%"),Y=g(()=>e.vertical?{height:e.height}:{}),z=g(()=>e.vertical?{height:V.value,bottom:T.value}:{width:V.value,left:T.value}),L=()=>{if(m.value){const u=m.value.getBoundingClientRect();t.sliderSize=u[e.vertical?"height":"width"]}},p=u=>{const y=e.min+u*(e.max-e.min)/100;if(!e.range)return r;let S;return Math.abs(f.value-y)<Math.abs(i.value-y)?S=t.firstValue<t.secondValue?"firstButton":"secondButton":S=t.firstValue>t.secondValue?"firstButton":"secondButton",v[S]},k=u=>{const y=p(u);return y.value.setPosition(u),y},F=u=>{t.firstValue=u!=null?u:e.min,E(e.range?[f.value,i.value]:u!=null?u:e.min)},B=u=>{t.secondValue=u,e.range&&E([f.value,i.value])},E=u=>{n(re,u),n(Ee,u)},P=()=>le(null,null,function*(){yield ge(),n(Ie,e.range?[f.value,i.value]:e.modelValue)}),$=u=>{var y,S,q,G,H,O;if(d.value||t.dragging)return;L();let I=0;if(e.vertical){const x=(q=(S=(y=u.touches)==null?void 0:y.item(0))==null?void 0:S.clientY)!=null?q:u.clientY;I=(m.value.getBoundingClientRect().bottom-x)/t.sliderSize*100}else{const x=(O=(H=(G=u.touches)==null?void 0:G.item(0))==null?void 0:H.clientX)!=null?O:u.clientX,C=m.value.getBoundingClientRect().left;I=(x-C)/t.sliderSize*100}if(!(I<0||I>100))return k(I)};return{elFormItem:s,slider:m,firstButton:r,secondButton:b,sliderDisabled:d,minValue:f,maxValue:i,runwayStyle:Y,barStyle:z,resetSize:L,setPosition:k,emitChange:P,onSliderWrapperPrevent:u=>{var y,S;((y=v.firstButton.value)!=null&&y.dragging||(S=v.secondButton.value)!=null&&S.dragging)&&u.preventDefault()},onSliderClick:u=>{$(u)&&P()},onSliderDown:u=>le(null,null,function*(){const y=$(u);y&&(yield ge(),y.value.onButtonDown(u))}),onSliderMarkerDown:u=>{if(d.value||t.dragging)return;k(u)&&P()},setFirstValue:F,setSecondValue:B}},yt=(e,t,n,a)=>({stops:g(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return Ve("ElSlider","step should not be 0."),[];const r=Math.ceil((e.max-e.min)/e.step),b=100*e.step/(e.max-e.min),v=Array.from({length:r-1}).map((d,f)=>(f+1)*b);return e.range?v.filter(d=>d<100*(n.value-e.min)/(e.max-e.min)||d>100*(a.value-e.min)/(e.max-e.min)):v.filter(d=>d>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:r=>e.vertical?{bottom:`${r}%`}:{left:`${r}%`}}),Vt=e=>g(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((n,a)=>n-a).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),wt=(e,t,n,a,s,m)=>{const r=d=>{s(re,d),s(Ee,d)},b=()=>e.range?![n.value,a.value].every((d,f)=>d===t.oldValue[f]):e.modelValue!==t.oldValue,v=()=>{var d,f;e.min>e.max&&Oe("Slider","min should not be greater than max.");const i=e.modelValue;e.range&&ne(i)?i[1]<e.min?r([e.min,e.min]):i[0]>e.max?r([e.max,e.max]):i[0]<e.min?r([e.min,i[1]]):i[1]>e.max?r([i[0],e.max]):(t.firstValue=i[0],t.secondValue=i[1],b()&&(e.validateEvent&&((d=m==null?void 0:m.validate)==null||d.call(m,"change").catch(V=>Ve(V))),t.oldValue=i.slice())):!e.range&&oe(i)&&!Number.isNaN(i)&&(i<e.min?r(e.min):i>e.max?r(e.max):(t.firstValue=i,b()&&(e.validateEvent&&((f=m==null?void 0:m.validate)==null||f.call(m,"change").catch(V=>Ve(V))),t.oldValue=i)))};v(),ve(()=>t.dragging,d=>{d||v()}),ve(()=>e.modelValue,(d,f)=>{t.dragging||ne(d)&&ne(f)&&d.every((i,V)=>i===f[V])&&t.firstValue===d[0]&&t.secondValue===d[1]||v()},{deep:!0}),ve(()=>[e.min,e.max],()=>{v()})},St=(e,t,n)=>{const a=Z();return tt(()=>le(null,null,function*(){e.range?(ne(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!oe(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),fe(window,"resize",n),yield ge(),n()})),{sliderWrapper:a}},kt=se({name:"ElSlider"}),Et=se(de(te({},kt),{props:st,emits:it,setup(e,{expose:t,emit:n}){const a=e,s=ke("slider"),{t:m}=Ae(),r=Re({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:b,slider:v,firstButton:d,secondButton:f,sliderDisabled:i,minValue:V,maxValue:T,runwayStyle:Y,barStyle:z,resetSize:L,emitChange:p,onSliderWrapperPrevent:k,onSliderClick:F,onSliderDown:B,onSliderMarkerDown:E,setFirstValue:P,setSecondValue:$}=ht(a,r,n),{stops:ie,getStopStyle:U}=yt(a,r,V,T),{inputId:X,isLabeledByFormItem:W}=ot(a,{formItemContext:b}),u=rt(),y=g(()=>a.inputSize||u.value),S=g(()=>a.ariaLabel||m("el.slider.defaultLabel",{min:a.min,max:a.max})),q=g(()=>a.range?a.rangeStartLabel||m("el.slider.defaultRangeStartLabel"):S.value),G=g(()=>a.formatValueText?a.formatValueText(c.value):`${c.value}`),H=g(()=>a.rangeEndLabel||m("el.slider.defaultRangeEndLabel")),O=g(()=>a.formatValueText?a.formatValueText(h.value):`${h.value}`),I=g(()=>[s.b(),s.m(u.value),s.is("vertical",a.vertical),{[s.m("with-input")]:a.showInput}]),x=Vt(a);wt(a,r,V,T,n,b);const C=g(()=>{const o=[a.min,a.max,a.step].map(ue=>{const A=`${ue}`.split(".")[1];return A?A.length:0});return Math.max.apply(null,o)}),{sliderWrapper:N}=St(a,r,L),{firstValue:c,secondValue:h,sliderSize:w}=we(r),D=o=>{r.dragging=o};return fe(N,"touchstart",k,{passive:!1}),fe(N,"touchmove",k,{passive:!1}),lt(Fe,de(te({},we(a)),{sliderSize:w,disabled:i,precision:C,emitChange:p,resetSize:L,updateDragging:D})),t({onSliderClick:F}),(o,ue)=>{var A,Be;return M(),R("div",{id:o.range?l(X):void 0,ref_key:"sliderWrapper",ref:N,class:_(l(I)),role:o.range?"group":void 0,"aria-label":o.range&&!l(W)?l(S):void 0,"aria-labelledby":o.range&&l(W)?(A=l(b))==null?void 0:A.labelId:void 0},[Q("div",{ref_key:"slider",ref:v,class:_([l(s).e("runway"),{"show-input":o.showInput&&!o.range},l(s).is("disabled",l(i))]),style:J(l(Y)),onMousedown:l(B),onTouchstartPassive:l(B)},[Q("div",{class:_(l(s).e("bar")),style:J(l(z))},null,6),_e(Te,{id:o.range?void 0:l(X),ref_key:"firstButton",ref:d,"model-value":l(c),vertical:o.vertical,"tooltip-class":o.tooltipClass,placement:o.placement,role:"slider","aria-label":o.range||!l(W)?l(q):void 0,"aria-labelledby":!o.range&&l(W)?(Be=l(b))==null?void 0:Be.labelId:void 0,"aria-valuemin":o.min,"aria-valuemax":o.range?l(h):o.max,"aria-valuenow":l(c),"aria-valuetext":l(G),"aria-orientation":o.vertical?"vertical":"horizontal","aria-disabled":l(i),"onUpdate:modelValue":l(P)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),o.range?(M(),be(Te,{key:0,ref_key:"secondButton",ref:f,"model-value":l(h),vertical:o.vertical,"tooltip-class":o.tooltipClass,placement:o.placement,role:"slider","aria-label":l(H),"aria-valuemin":l(c),"aria-valuemax":o.max,"aria-valuenow":l(h),"aria-valuetext":l(O),"aria-orientation":o.vertical?"vertical":"horizontal","aria-disabled":l(i),"onUpdate:modelValue":l($)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ce("v-if",!0),o.showStops?(M(),R("div",{key:1},[(M(!0),R(me,null,he(l(ie),(j,ee)=>(M(),R("div",{key:ee,class:_(l(s).e("stop")),style:J(l(U)(j))},null,6))),128))])):ce("v-if",!0),l(x).length>0?(M(),R(me,{key:2},[Q("div",null,[(M(!0),R(me,null,he(l(x),(j,ee)=>(M(),R("div",{key:ee,style:J(l(U)(j.position)),class:_([l(s).e("stop"),l(s).e("marks-stop")])},null,6))),128))]),Q("div",{class:_(l(s).e("marks"))},[(M(!0),R(me,null,he(l(x),(j,ee)=>(M(),be(l(bt),{key:ee,mark:j.mark,style:J(l(U)(j.position)),onMousedown:je(xt=>l(E)(j.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ce("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),o.showInput&&!o.range?(M(),be(l(Ge),{key:0,ref:"input","model-value":l(c),class:_(l(s).e("input")),step:o.step,disabled:l(i),controls:o.showInputControls,min:o.min,max:o.max,precision:l(C),size:l(y),"onUpdate:modelValue":l(P),onChange:l(p)},null,8,["model-value","class","step","disabled","controls","min","max","precision","size","onUpdate:modelValue","onChange"])):ce("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}}));var Bt=ze(Et,[["__file","slider.vue"]]);const Ft=qe(Bt);export{Ft as E};
