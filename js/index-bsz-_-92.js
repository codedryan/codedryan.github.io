var X=Object.defineProperty;var T=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var q=(n,i,a)=>i in n?X(n,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[i]=a,F=(n,i)=>{for(var a in i||(i={}))ee.call(i,a)&&q(n,a,i[a]);if(T)for(var a of T(i))te.call(i,a)&&q(n,a,i[a]);return n};var N=(n,i,a)=>new Promise((f,C)=>{var h=m=>{try{g(a.next(m))}catch(v){C(v)}},k=m=>{try{g(a.throw(m))}catch(v){C(v)}},g=m=>m.done?f(m.value):Promise.resolve(m.value).then(h,k);g((a=a.apply(n,i)).next())});import{a9 as oe,$ as o,Z as Q,a8 as I,a6 as ae,Y as M,Q as V,R as w,M as E}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as re}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as ie,a as le}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import"./css-B4xXAc0m.js";import{E as U}from"./el-message-box-B8o3mhYx.js";import{r as se}from"./bot-DbCgUpjx.js";import{d as ne}from"./defaultBotAvatar-CYROtSWB.js";import{H as me}from"./HeaderSearch-Dj9rqjlr.js";import{C as pe}from"./CardList-DOl2PmFc.js";import{_ as ue}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{P as ce}from"./PageSide-wLZhy9Oh.js";import{u as de}from"./dict-CsbZy8Qf.js";import{_ as fe}from"./modal.vue_vue_type_script_setup_true_lang-DKsosw-a.js";import{ElInput as ge}from"./index-BjDsryRX.js";import{ElInputNumber as ve}from"./index-9UPoHQm1.js";import{ElButton as W}from"./index-oBOAcXl-.js";import{k as ye,o as be,r as c,S as Ce,c as he,m as A,n as b,J as u,q as z,E as d,u as l,F as ke,N as _e,B as S,p as Be,L as H,y as O}from"../jse/index-index-D3Xb8oT_.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./validator-D2YZey62.js";import"./el-dropdown-menu-v2KdT220.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";/* empty css                  *//* empty css                     */import"./hasPermission-CIdLHqw4.js";import"./el-avatar-BVPcm0Px.js";import"./el-card-DGd_zL6P.js";import"./css-CLrSDUNG.js";/* empty css                */import"./index-Bpv3aWiu.js";import"./index-Ce9mjW49.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";/* empty css               *//* empty css                  */import"./DictSelect-DdOvS-6R.js";import"./UploadAvatar-a3x1lqjM.js";import"./el-image-viewer-DlaFkWIK.js";import"./debounce-AsHllEOy.js";import"./index-C33Sf0pH.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./index-BKzCwxYe.js";const xe={class:"flex h-full flex-col gap-6 p-6"},Ne={class:"flex flex-1 gap-6"},Ve={class:"h-[calc(100vh-192px)] flex-1 overflow-auto"},Pt=ye({__name:"index",setup(n){be(()=>{Y(),x()});const i=oe(),a=c(),f=c(),C=de(),h=[{key:"create",text:`${o("button.create")} Bot`,icon:Ce(Q),type:"primary",data:{action:"create"},permission:"/api/v1/documentCollection/save"}],k=[{icon:I,text:o("button.edit"),className:"",permission:"",onClick(e){var r;(r=f.value)==null||r.open("edit",e)}},{icon:ae,text:o("button.setting"),className:"",permission:"",onClick(e){i.push({path:`/ai/bots/setting/${e.id}`})}},{icon:M,text:o("button.delete"),className:"item-danger",permission:"/api/v1/bot/remove",onClick(e){g(e)}}],g=e=>N(null,null,function*(){const[r]=yield V(U.confirm)(o("message.deleteAlert"),o("message.noticeTitle"),{confirmButtonText:o("message.ok"),cancelButtonText:o("message.cancel"),type:"warning"});if(!r){const[t,s]=yield V(se)(e.id);!t&&s.errorCode===0&&(w.success(o("message.deleteOkMessage")),a.value.setQuery({}))}}),m=e=>{a.value.setQuery({title:e,isQueryOr:!0})},v=()=>{var e;(e=f.value)==null||e.open("create")},R=c([{prop:"categoryName",label:o("aiWorkflowCategory.categoryName"),type:"input",required:!0,placeholder:o("aiWorkflowCategory.categoryName")},{prop:"sortNo",label:o("aiWorkflowCategory.sortNo"),type:"number",required:!1,placeholder:o("aiWorkflowCategory.sortNo")}]),p=c({}),y=c(!1),_=c(),B=c(!1),$=c([]),P=[{icon:I,label:o("button.edit"),onClick(e){D(e)}},{type:"danger",icon:M,label:o("button.delete"),onClick(e){j(e)}}],J={icon:Q,label:o("button.add"),onClick(){D({})}},K=he(()=>{const e={};return R.value.forEach(r=>{const t=[];r.required&&t.push({required:!0,message:`${o("message.required")}`,trigger:"blur"}),t.length>0&&(e[r.prop]=t)}),e});function Y(){C.fetchDictionary("dataStatus")}function Z(e){a.value.setQuery({categoryId:e.id})}function D(e){var r;(r=_.value)==null||r.resetFields(),p.value=F({},e),y.value=!0}function j(e){U.confirm(o("message.deleteAlert"),o("message.noticeTitle"),{confirmButtonText:o("message.ok"),cancelButtonText:o("message.cancel"),type:"warning",beforeClose:(r,t,s)=>{r==="confirm"?(t.confirmButtonLoading=!0,E.post("/api/v1/botCategory/remove",{id:e.id}).then(L=>{t.confirmButtonLoading=!1,L.errorCode===0&&(w.success(L.message),s(),x())}).catch(()=>{t.confirmButtonLoading=!1})):s()}}).catch(()=>{})}function G(){var e;(e=_.value)==null||e.validate(r=>{if(r){B.value=!0;const t=p.value.id?"/api/v1/botCategory/update":"/api/v1/botCategory/save";E.post(t,p.value).then(s=>{B.value=!1,s.errorCode===0&&(w.success(s.message),y.value=!1,x())})}})}const x=()=>N(null,null,function*(){const[,e]=yield V(E.get)("/api/v1/botCategory/list",{params:{sortKey:"sortNo",sortType:"asc"}});e&&e.errorCode===0&&($.value=[{id:"",categoryName:o("common.allCategories")},...e.data])});return(e,r)=>(b(),A("div",xe,[u(me,{buttons:h,onSearch:m,onButtonClick:v}),z("div",Ne,[u(ce,{"label-key":"categoryName","value-key":"id",menus:$.value,"control-btns":P,"footer-button":J,onChange:Z},null,8,["menus"]),z("div",Ve,[u(ue,{ref_key:"pageDataRef",ref:a,"page-url":"/api/v1/bot/page","page-sizes":[12,18,24],"page-size":12},{default:d(({pageList:t})=>[u(pe,{"default-icon":l(ne),data:t,actions:k},null,8,["default-icon","data"])]),_:1},512)])]),u(fe,{ref_key:"modalRef",ref:f,onSuccess:r[0]||(r[0]=t=>a.value.setQuery({}))},null,512),u(l(re),{modelValue:y.value,"onUpdate:modelValue":r[2]||(r[2]=t=>y.value=t),title:p.value.id?`${l(o)("button.edit")}`:`${l(o)("button.add")}`,"close-on-click-modal":!1},{footer:d(()=>[u(l(W),{onClick:r[1]||(r[1]=t=>y.value=!1)},{default:d(()=>[H(O(l(o)("button.cancel")),1)]),_:1}),u(l(W),{type:"primary",onClick:G,loading:B.value},{default:d(()=>[H(O(l(o)("button.confirm")),1)]),_:1},8,["loading"])]),default:d(()=>[u(l(ie),{ref_key:"formRef",ref:_,model:p.value,rules:K.value,"label-width":"120px"},{default:d(()=>[(b(!0),A(ke,null,_e(R.value,t=>(b(),S(l(le),{key:t.prop,label:t.label,prop:t.prop},{default:d(()=>[!t.type||t.type==="input"?(b(),S(l(ge),{key:0,modelValue:p.value[t.prop],"onUpdate:modelValue":s=>p.value[t.prop]=s,placeholder:t.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):t.type==="number"?(b(),S(l(ve),{key:1,modelValue:p.value[t.prop],"onUpdate:modelValue":s=>p.value[t.prop]=s,placeholder:t.placeholder,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","placeholder"])):Be("",!0)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])]))}});export{Pt as default};
