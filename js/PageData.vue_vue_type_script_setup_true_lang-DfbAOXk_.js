var k=Object.defineProperty;var N=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var h=(r,t,e)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,z=(r,t)=>{for(var e in t||(t={}))w.call(t,e)&&h(r,e,t[e]);if(N)for(var e of N(t))C.call(t,e)&&h(r,e,t[e]);return r};var f=(r,t,e)=>new Promise((i,g)=>{var m=s=>{try{l(e.next(s))}catch(u){g(u)}},a=s=>{try{l(e.throw(s))}catch(u){g(u)}},l=s=>s.done?i(s.value):Promise.resolve(s.value).then(m,a);l((e=e.apply(r,t)).next())});import{M as x}from"./bootstrap-Bf65uz2I.js";import{E as P}from"./el-empty-CDAlv280.js";import{E}from"./el-pagination-W2lJTIgw.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import"./css-C9o_OfXA.js";import{k as _,r as v,G as B,w as Q,o as U,H as D,I as L,m as S,n as c,B as V,F as $,q,p as F,x as G,J as I,u as y,K as M}from"../jse/index-index-D3Xb8oT_.js";const j={class:"page-data-container"},H={key:0,class:"mx-auto mt-8 w-fit"},ae=_({__name:"PageData",props:{pageUrl:{},pageSize:{default:10},pageSizes:{default:()=>[10,20,50,100]},extraQueryParams:{default:()=>({})}},setup(r,{expose:t}){const e=r,i=v([]),g=v(!1),m=v({}),a=B({pageNumber:1,pageSize:e.pageSize,total:0}),l=o=>f(null,null,function*(){g.value=!0;try{return{data:yield(yield x.get(`${e.pageUrl}`,{params:o})).data}}finally{g.value=!1}}),s=()=>f(null,null,function*(){var o,n;try{const p=yield l(z(z({pageNumber:a.pageNumber,pageSize:a.pageSize},e.extraQueryParams),m.value));i.value=((o=p.data)==null?void 0:o.records)||[],a.total=((n=p.data)==null?void 0:n.totalRow)||0}catch(p){console.error("get data error:",p),i.value=[],a.total=0}}),u=o=>{a.pageSize=o,a.pageNumber=1},b=o=>{a.pageNumber=o};return t({setQuery:o=>{a.pageNumber=1,a.pageSize=e.pageSize,m.value=o,s()}}),Q([()=>a.pageNumber,()=>a.pageSize],()=>{s()},{deep:!0}),U(()=>{s()}),(o,n)=>{const p=D("loading");return L((c(),S("div",j,[i.value.length>0?(c(),S($,{key:0},[q("div",null,[G(o.$slots,"default",{pageList:i.value})]),a.total>a.pageSize?(c(),S("div",H,[I(y(E),{"current-page":a.pageNumber,"onUpdate:currentPage":n[0]||(n[0]=d=>a.pageNumber=d),"page-size":a.pageSize,"onUpdate:pageSize":n[1]||(n[1]=d=>a.pageSize=d),total:a.total,"page-sizes":r.pageSizes,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u,onCurrentChange:b},null,8,["current-page","page-size","total","page-sizes"])])):F("",!0)],64)):(c(),V(y(P),{key:1,image:`/empty${y(M).theme.mode==="dark"?"-dark":""}.png`},null,8,["image"]))])),[[p,g.value]])}}});export{ae as _};
