var on=Object.defineProperty,sn=Object.defineProperties;var an=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable;var Ye=Math.pow,Qe=(it,rt,lt)=>rt in it?on(it,rt,{enumerable:!0,configurable:!0,writable:!0,value:lt}):it[rt]=lt,Ft=(it,rt)=>{for(var lt in rt||(rt={}))Je.call(rt,lt)&&Qe(it,lt,rt[lt]);if(Ue)for(var lt of Ue(rt))tn.call(rt,lt)&&Qe(it,lt,rt[lt]);return it},te=(it,rt)=>sn(it,an(rt));var Pe=(it,rt)=>{var lt={};for(var ct in it)Je.call(it,ct)&&rt.indexOf(ct)<0&&(lt[ct]=it[ct]);if(it!=null&&Ue)for(var ct of Ue(it))rt.indexOf(ct)<0&&tn.call(it,ct)&&(lt[ct]=it[ct]);return lt};var ve=(it,rt,lt)=>new Promise((ct,ht)=>{var dt=pt=>{try{ft(lt.next(pt))}catch(gt){ht(gt)}},ut=pt=>{try{ft(lt.throw(pt))}catch(gt){ht(gt)}},ft=pt=>pt.done?ct(pt.value):Promise.resolve(pt.value).then(dt,ut);ft((lt=lt.apply(it,rt)).next())});import{fa as toString,_ as _export_sfc,c2 as get$2,aN as download_default,as as useRoute,a9 as useRouter,V as ElIcon,bX as refresh_right_default,c0 as copy_document_default,$ as $t,M as api,U as sseClient,R as ElMessage,Q as tryit}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import"./css-Dmm60okM.js";import{b as getPerQuestions,f as getMessageList}from"./bot-DbCgUpjx.js";import{k as defineComponent,B as createBlock,n as openBlock,u as unref,m as createElementBlock,M as createStaticVNode,q as createBaseVNode,r as ref,o as onMounted,w as watch,a as onUnmounted,H as resolveDirective,I as withDirectives,z as normalizeStyle$1,a4 as getDefaultExportFromCjs,ak as onBeforeUnmount,J as createVNode,E as withCtx,L as createTextVNode,ag as watchEffect,T as resolveComponent,p as createCommentVNode,P as h$2,y as toDisplayString,F as Fragment$1,N as renderList,s as normalizeClass,v as cn}from"../jse/index-index-D3Xb8oT_.js";import{E as ElAvatar}from"./el-avatar-BVPcm0Px.js";import{d as defaultAvatar}from"./defaultBotAvatar-CYROtSWB.js";import"./index-Dv97N9Ru.js";import{p as init$1}from"./universalTransition-D5im4pU2.js";import{b as baseSlice}from"./_baseSlice-DZe_dRSe.js";import{m as merge}from"./merge-BysAs727.js";import{c as clamp$1}from"./clamp-CeuJyDnc.js";import{c as cloneDeep}from"./cloneDeep-Orislllf.js";import{ElButton}from"./index-oBOAcXl-.js";import{u as useBotStore}from"./bot-CHN1-44s.js";import{ElSpace}from"./index-73ilN1KJ.js";const uuid$1=()=>{const it=()=>typeof globalThis!="undefined"&&typeof globalThis.crypto=="object"&&typeof globalThis.crypto.getRandomValues=="function"?globalThis.crypto.getRandomValues(new Uint8Array(1))[0]:typeof globalThis.msCrypto=="object"&&typeof globalThis.msCrypto.getRandomValues=="function"?globalThis.msCrypto.getRandomValues(new Uint8Array(1))[0]:Math.floor(Math.random()*256);return"10000000-1000-4000-8000-100000000000".replaceAll(/[018]/g,rt=>(Number(rt)^it()&15>>Number(rt)/4).toString(16))};function castSlice(it,rt,lt){var ct=it.length;return lt=lt===void 0?ct:lt,!rt&&lt>=ct?it:baseSlice(it,rt,lt)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(it){return reHasUnicode.test(it)}function asciiToArray(it){return it.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(it){return it.match(reUnicode)||[]}function stringToArray(it){return hasUnicode(it)?unicodeToArray(it):asciiToArray(it)}function createCaseFirst(it){return function(rt){rt=toString(rt);var lt=hasUnicode(rt)?stringToArray(rt):void 0,ct=lt?lt[0]:rt.charAt(0),ht=lt?castSlice(lt,1).join(""):rt.slice(1);return ct[it]()+ht}}var upperFirst=createCaseFirst("toUpperCase");function capitalize(it){return upperFirst(toString(it).toLowerCase())}function arrayReduce(it,rt,lt,ct){for(var ht=-1,dt=it==null?0:it.length;++ht<dt;)lt=rt(lt,it[ht],ht,it);return lt}function basePropertyOf(it){return function(rt){return it==null?void 0:it[rt]}}var deburredLetters={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},deburrLetter=basePropertyOf(deburredLetters),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(it){return it=toString(it),it&&it.replace(reLatin,deburrLetter).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(it){return it.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(it){return reHasUnicodeWord.test(it)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['’]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(it){return it.match(reUnicodeWord)||[]}function words(it,rt,lt){return it=toString(it),rt=rt,rt===void 0?hasUnicodeWord(it)?unicodeWords(it):asciiWords(it):it.match(rt)||[]}var rsApos="['’]",reApos=RegExp(rsApos,"g");function createCompounder(it){return function(rt){return arrayReduce(words(deburr(rt).replace(reApos,"")),it,"")}}var camelCase=createCompounder(function(it,rt,lt){return rt=rt.toLowerCase(),it+(lt?capitalize(rt):rt)}),kebabCase=createCompounder(function(it,rt,lt){return it+(lt?"-":"")+rt.toLowerCase()});const _sfc_main$6=defineComponent({__name:"botAvatar",props:{size:{},src:{}},setup(it){const rt=it;return(lt,ct)=>{var ht,dt;return openBlock(),createBlock(unref(ElAvatar),{src:(ht=rt.src)!=null?ht:unref(defaultAvatar),size:(dt=rt.size)!=null?dt:36},null,8,["src","size"])}}}),_sfc_main$5={},_hoisted_1$5={width:"30px",height:"30px",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function _sfc_render$2(it,rt){return openBlock(),createElementBlock("svg",_hoisted_1$5,[...rt[0]||(rt[0]=[createStaticVNode('<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="运行Bot备份-2" transform="translate(-1185, -791)"><g id="编组-11" transform="translate(1185, 791)"><g id="矩形-2" fill="#0066FF"><rect id="矩形" x="0" y="0" width="30" height="30" rx="15"></rect></g><g id="发送-实色" transform="translate(9, 10)" fill="#FFFFFF" fill-rule="nonzero"><path d="M11.6691674,0.239363769 C11.3947722,0.00461392042 11.0102658,-0.0631322672 10.6652017,0.0613280807 L0.636969787,3.6945732 C0.263984798,3.83008097 0.0191472071,4.15148685 0.00107884118,4.53436129 C-0.0170055712,4.91722033 0.193315985,5.25912086 0.553174932,5.42769394 L2.11910533,6.16191613 C2.15033183,6.17608698 2.1782688,6.19658162 2.20291623,6.21863029 C2.36557966,6.62039919 3.00806572,8.19439408 3.29396632,8.76316664 C3.43856139,9.05307662 3.70475688,9.25631519 3.95123121,9.34455602 C3.93479959,9.34297122 3.91673122,9.3398324 3.89701007,9.3366782 C3.94466819,9.35400325 3.99396306,9.36818948 4.04489467,9.37763671 C4.37023758,9.44065929 4.7037963,9.34455602 4.93712855,9.1192534 L5.52045114,8.55992807 C5.62396715,8.46065521 5.78664663,8.43860655 5.91481008,8.50792214 L8.42721154,9.87552427 C8.57836963,9.9574413 8.74597539,10 8.91358115,10 C9.04503412,10 9.17813989,9.97476635 9.3030138,9.92279119 C9.58893045,9.80462387 9.79596247,9.57142805 9.87154152,9.28153345 L11.9698789,1.1705315 C12.0602529,0.830200382 11.9435948,0.472544209 11.6691835,0.239363769 L11.6691674,0.239363769 Z M2.82731788,6.02483896 L8.20373185,3.07537951 L5.16882405,6.05635025 C5.11952919,6.10518658 5.08337641,6.16033134 5.05872897,6.2249387 C5.05707618,6.22809291 5.05707618,6.22966232 5.05543944,6.23281652 C5.04886037,6.25172637 4.44910616,7.94859682 4.09418954,8.71589971 C4.02188398,8.67020219 3.93479959,8.59616298 3.88386798,8.4937513 C3.62096202,7.96435246 3.00804967,6.46599696 2.82731788,6.02483896 L2.82731788,6.02483896 Z" id="形状"></path></g></g></g></g>',1)])])}const SendEnableIcon=_export_sfc(_sfc_main$5,[["render",_sfc_render$2]]),_sfc_main$4={},_hoisted_1$4={width:"30px",height:"30px",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1(it,rt){return openBlock(),createElementBlock("svg",_hoisted_1$4,[...rt[0]||(rt[0]=[createStaticVNode('<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="设置bot" transform="translate(-1370, -830)"><g id="编组-7" transform="translate(992, 64)"><g id="编组-11" transform="translate(378, 766)"><g id="矩形-2" fill="#DFDFDF"><rect id="矩形" x="0" y="0" width="30" height="30" rx="15"></rect></g><g id="发送-实色" transform="translate(9, 10)" fill="#FFFFFF" fill-rule="nonzero"><path d="M11.6691674,0.239363769 C11.3947722,0.00461392042 11.0102658,-0.0631322672 10.6652017,0.0613280807 L0.636969787,3.6945732 C0.263984798,3.83008097 0.0191472071,4.15148685 0.00107884118,4.53436129 C-0.0170055712,4.91722033 0.193315985,5.25912086 0.553174932,5.42769394 L2.11910533,6.16191613 C2.15033183,6.17608698 2.1782688,6.19658162 2.20291623,6.21863029 C2.36557966,6.62039919 3.00806572,8.19439408 3.29396632,8.76316664 C3.43856139,9.05307662 3.70475688,9.25631519 3.95123121,9.34455602 C3.93479959,9.34297122 3.91673122,9.3398324 3.89701007,9.3366782 C3.94466819,9.35400325 3.99396306,9.36818948 4.04489467,9.37763671 C4.37023758,9.44065929 4.7037963,9.34455602 4.93712855,9.1192534 L5.52045114,8.55992807 C5.62396715,8.46065521 5.78664663,8.43860655 5.91481008,8.50792214 L8.42721154,9.87552427 C8.57836963,9.9574413 8.74597539,10 8.91358115,10 C9.04503412,10 9.17813989,9.97476635 9.3030138,9.92279119 C9.58893045,9.80462387 9.79596247,9.57142805 9.87154152,9.28153345 L11.9698789,1.1705315 C12.0602529,0.830200382 11.9435948,0.472544209 11.6691835,0.239363769 L11.6691674,0.239363769 Z M2.82731788,6.02483896 L8.20373185,3.07537951 L5.16882405,6.05635025 C5.11952919,6.10518658 5.08337641,6.16033134 5.05872897,6.2249387 C5.05707618,6.22809291 5.05707618,6.22966232 5.05543944,6.23281652 C5.04886037,6.25172637 4.44910616,7.94859682 4.09418954,8.71589971 C4.02188398,8.67020219 3.93479959,8.59616298 3.88386798,8.4937513 C3.62096202,7.96435246 3.00804967,6.46599696 2.82731788,6.02483896 L2.82731788,6.02483896 Z" id="形状"></path></g></g></g></g></g>',1)])])}const SendIcon=_export_sfc(_sfc_main$4,[["render",_sfc_render$1]]),_sfc_main$3={},_hoisted_1$3={"data-v-cabe7c8e":"",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"loading-svg"};function _sfc_render(it,rt){return openBlock(),createElementBlock("svg",_hoisted_1$3,[...rt[0]||(rt[0]=[createBaseVNode("title",null,"Loading",-1),createBaseVNode("rect",{fill:"currentColor",height:"250",rx:"24",ry:"24",width:"250",x:"375",y:"375"},null,-1),createBaseVNode("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor","stroke-width":"100",opacity:"0.45"},null,-1),createBaseVNode("circle",{cx:"500",cy:"500",fill:"none",r:"450",stroke:"currentColor","stroke-width":"100","stroke-dasharray":"600 9999999"},[createBaseVNode("animateTransform",{attributeName:"transform",dur:"1s",from:"0 500 500",repeatCount:"indefinite",to:"360 500 500",type:"rotate"})],-1)])])}const SendingIcon=_export_sfc(_sfc_main$3,[["render",_sfc_render]]),_hoisted_1$2={id:"echarts",class:"relative w-full min-w-28"},_sfc_main$2=defineComponent({__name:"echarts",props:{code:{},height:{},theme:{},width:{}},setup(__props){const props=__props,refEle=ref(),loading=ref(!0);let myChart=null;function parseEChartsOption(str){try{let cleanedStr=str.trim().replace(/^option\s*=\s*/,"").replace(/;\s*$/,"");if(cleanedStr.includes("=>")||cleanedStr.includes("function")||cleanedStr.includes("formatter:")){cleanedStr=cleanedStr.replaceAll(/([(\s:,])'([^']+)'([\s),])/g,'$1"$2"$3').replaceAll(/([(\s:,])'([^']+)'$/g,'$1"$2"'),cleanedStr=cleanedStr.replaceAll(/([{,]\s*)(\w+)\s*:/g,'$1"$2":').replaceAll(/([{,]\s*)'(\w+)'\s*:/g,'$1"$2":').replaceAll(/([{,]\s*)"(\w+)"\s*:/g,'$1"$2":'),cleanedStr=cleanedStr.replaceAll(/"(params)/g,"params");try{return new Function(`return ${cleanedStr}`)()}catch(it){try{return eval(`(${cleanedStr})`)}catch(rt){return null}}}else return cleanedStr=cleanedStr.replaceAll("'",'"').replaceAll(/(\w+)\s*:/g,'"$1":'),JSON.parse(cleanedStr)}catch(it){return null}}function renderChart(){if(refEle.value)try{const it=parseEChartsOption(props.code);!myChart&&it&&(loading.value=!1,myChart=init$1(refEle.value,props.theme),myChart.setOption(it))}catch(it){console.error("图表配置解析失败:",it)}}function handleResize(){myChart==null||myChart.resize()}function destroyChart(){myChart&&(myChart.dispose(),myChart=null),window.removeEventListener("resize",handleResize)}return onMounted(()=>{renderChart(),window.addEventListener("resize",handleResize)}),watch(()=>props.code,()=>{renderChart()}),onUnmounted(()=>{destroyChart()}),(it,rt)=>{const lt=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",{ref_key:"refEle",ref:refEle,style:normalizeStyle$1({height:__props.height||"400px",width:__props.width||"95%"})},null,4)])),[[lt,loading.value]])}}}),TEMPLATE_REGISTRY=new Map;function registerTemplate(it,rt){TEMPLATE_REGISTRY.set(it,rt)}function getTemplate(it){return TEMPLATE_REGISTRY.get(it)}const BRANCH_GRADIENT={edgeType:"curved",edgeColorMode:"gradient",edgeWidth:2,colorMode:"branch",levelGap:80,nodeGap:18},LEVEL_GRADIENT={edgeType:"curved",edgeWidth:2,edgeColorMode:"gradient",colorMode:"level",levelGap:80,nodeGap:18},LINED_PALETTE={type:"lined-text",usePaletteColor:!0,showUnderline:!0,underlineThickness:2},CAPSULE={type:"capsule-item"},CIRCULAR_PROGRESS={type:"circular-progress"},ROUNDED_RECT_NODE={type:"rounded-rect-node",positionH:"center"},COMPACT_CARD={type:"compact-card"},createStructure=(it,rt)=>Ft(Ft({type:"hierarchy-mindmap"},rt!==void 0?{edgeAlign:rt}:{}),it),createTemplate=(it,rt,lt,ct)=>[it,{design:{structure:createStructure(rt,ct),item:lt}}],hierarchyMindmapTemplates=Object.fromEntries([createTemplate("hierarchy-mindmap-branch-gradient-lined-palette",BRANCH_GRADIENT,LINED_PALETTE,"bottom"),createTemplate("hierarchy-mindmap-level-gradient-lined-palette",LEVEL_GRADIENT,LINED_PALETTE,"bottom"),createTemplate("hierarchy-mindmap-branch-gradient-capsule-item",BRANCH_GRADIENT,CAPSULE),createTemplate("hierarchy-mindmap-level-gradient-capsule-item",LEVEL_GRADIENT,CAPSULE),createTemplate("hierarchy-mindmap-branch-gradient-circle-progress",BRANCH_GRADIENT,CIRCULAR_PROGRESS,.4),createTemplate("hierarchy-mindmap-level-gradient-circle-progress",LEVEL_GRADIENT,CIRCULAR_PROGRESS,.4),createTemplate("hierarchy-mindmap-branch-gradient-rounded-rect",BRANCH_GRADIENT,ROUNDED_RECT_NODE),createTemplate("hierarchy-mindmap-level-gradient-rounded-rect",LEVEL_GRADIENT,ROUNDED_RECT_NODE),createTemplate("hierarchy-mindmap-branch-gradient-compact-card",BRANCH_GRADIENT,COMPACT_CARD),createTemplate("hierarchy-mindmap-level-gradient-compact-card",LEVEL_GRADIENT,COMPACT_CARD)]),hierarchyStructureTemplates={"hierarchy-structure":{design:{title:"default",structure:{type:"hierarchy-structure"},item:"simple"}},"hierarchy-structure-mirror":{design:{title:"default",structure:{type:"hierarchy-structure",layerLabelPosition:"right"},item:"simple"}}},structures={"tech-style":{edgeType:"straight",edgeStyle:"solid",edgeColorMode:"gradient",edgeMarker:"arrow",markerSize:12,edgeCornerRadius:5},"dashed-line":{edgeStyle:"dashed",edgeCornerRadius:10,edgeDashPattern:"10,5",edgeColorMode:"gradient",edgeMarker:"dot",markerSize:6,edgeOffset:6},"distributed-origin":{edgeOrigin:"distributed",edgeOriginPadding:30,edgeMarker:"arrow",edgeCornerRadius:10,markerSize:12,edgeColorMode:"gradient"},"curved-line":{edgeType:"curved",edgeColorMode:"gradient",edgeMarker:"none"},"dashed-arrow":{edgeType:"straight",edgeStyle:"dashed",edgeDashPattern:"8,4",edgeMarker:"arrow",markerSize:10,edgeCornerRadius:0}},items=["capsule-item","rounded-rect-node","compact-card","badge-card","ribbon-card"],hierarchyTreeTemplates={},structureName="hierarchy-tree",orientationConfigs=[{key:""},{key:"bt",orientation:"bottom-top"},{key:"lr",orientation:"left-right"},{key:"rl",orientation:"right-left"}],createTemplateName=(it,rt,lt)=>it?`${structureName}-${it}-${rt}-${lt}`:`${structureName}-${rt}-${lt}`;for(const it of items)for(const[rt,lt]of Object.entries(structures))for(const{key:ct,orientation:ht}of orientationConfigs){const dt=createTemplateName(ct,rt,it);hierarchyTreeTemplates[dt]={design:{structure:Ft(Ft({type:"hierarchy-tree"},ht?{orientation:ht}:{}),lt),item:{type:it}}}}const listZigzagTemplates={"list-zigzag-up-compact-card":{design:{title:"default",structure:{type:"list-zigzag-up"},items:[{type:"compact-card"}]},themeConfig:{colorPrimary:"#17CA2C"}},"list-zigzag-up-simple":{design:{title:"default",structure:{type:"list-zigzag-up"},items:[{type:"simple",usePaletteColor:!0}]},themeConfig:{colorPrimary:"#17CA2C"}},"list-zigzag-down-compact-card":{design:{title:"default",structure:{type:"list-zigzag-down"},items:[{type:"compact-card"}]},themeConfig:{colorPrimary:"#17CA2C"}},"list-zigzag-down-simple":{design:{title:"default",structure:{type:"list-zigzag-down"},items:[{type:"simple",usePaletteColor:!0}]},themeConfig:{colorPrimary:"#17CA2C"}}},sequenceStairsTemplates={"sequence-stairs-front-pill-badge":{design:{title:"default",structure:{type:"sequence-stairs-front"},items:[{type:"pill-badge"}]}},"sequence-stairs-front-compact-card":{design:{title:"default",structure:{type:"sequence-stairs-front"},items:[{type:"compact-card"}]}},"sequence-stairs-front-simple":{design:{title:"default",structure:{type:"sequence-stairs-front"},items:[{type:"simple",usePaletteColor:!0}]}}},wordCloudTemplate={"chart-wordcloud-rotate":{design:{structure:{type:"chart-wordcloud"},item:"simple"}},"chart-wordcloud":{design:{structure:{type:"chart-wordcloud",enableRotate:!1},item:"simple"}}},BUILT_IN_TEMPLATES=Ft(Ft(Ft(Ft(Ft(Ft({"compare-hierarchy-left-right-circle-node-pill-badge":{design:{structure:{type:"compare-hierarchy-left-right",decoration:"split-line",surround:!1,groupGap:-20},title:"default",items:[{type:"circle-node",width:240},"pill-badge"]},themeConfig:{}},"compare-hierarchy-left-right-circle-node-plain-text":{design:{title:"default",structure:{type:"compare-hierarchy-left-right",decoration:"dot-line",flipLeaf:!0,groupGap:-10},items:[{type:"circle-node",width:180},{type:"plain-text"}]}},"list-pyramid-rounded-rect-node":{design:{title:"default",structure:{type:"list-pyramid"},items:[{type:"rounded-rect-node"}]}},"list-pyramid-badge-card":{design:{title:"default",structure:{type:"list-pyramid"},items:[{type:"badge-card"}]}},"list-pyramid-compact-card":{design:{title:"default",structure:{type:"list-pyramid"},items:[{type:"compact-card"}]}},"list-column-done-list":{design:{title:"default",structure:{type:"list-column"},items:[{type:"done-list"}]}},"list-column-vertical-icon-arrow":{design:{title:"default",structure:{type:"list-column",gap:-5,zigzag:!0},items:[{type:"vertical-icon-arrow"}]}},"list-grid-badge-card":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"badge-card"}]}},"list-grid-candy-card-lite":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"candy-card-lite"}]}},"chart-column-simple":{design:{title:"default",structure:{type:"chart-column"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]}},"list-grid-circular-progress":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"circular-progress"}]}},"list-grid-compact-card":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"compact-card"}]}},"list-grid-done-list":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"done-list"}]}},"list-grid-horizontal-icon-arrow":{design:{title:"default",structure:{type:"list-grid",gap:0,zigzag:!0},items:[{type:"horizontal-icon-arrow"}]}},"list-grid-progress-card":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"progress-card"}]}},"list-grid-ribbon-card":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"ribbon-card"}]}},"list-grid-simple":{design:{title:"default",structure:{type:"list-grid"},items:[{type:"simple"}]}},"list-row-circular-progress":{design:{title:"default",structure:{type:"list-row"},items:[{type:"circular-progress"}]}},"list-row-horizontal-icon-arrow":{design:{title:"default",structure:{type:"list-row",gap:0,zigzag:!0},items:[{type:"horizontal-icon-arrow"}]}},"relation-circle-circular-progress":{design:{title:"default",structure:{type:"relation-circle"},items:[{type:"circular-progress"}]}},"relation-circle-icon-badge":{design:{title:"default",structure:{type:"relation-circle"},items:[{type:"icon-badge"}]}},"sequence-steps-badge-card":{design:{title:"default",structure:{type:"sequence-steps"},items:[{type:"badge-card"}]}},"sequence-steps-simple":{design:{title:"default",structure:{type:"sequence-steps",gap:10},items:[{type:"simple"}]}},"sequence-timeline-done-list":{design:{title:"default",structure:{type:"sequence-timeline"},items:[{type:"done-list"}]}},"sequence-timeline-plain-text":{design:{title:"default",structure:{type:"sequence-timeline"},items:[{type:"plain-text"}]}},"sequence-timeline-rounded-rect-node":{design:{title:"default",structure:{type:"sequence-timeline"},items:[{type:"rounded-rect-node"}]}},"sequence-ascending-steps":{design:{title:"default",structure:{type:"sequence-ascending-steps",vGap:-46,hGap:-20},items:[{type:"l-corner-card"}]}},"sequence-timeline-simple":{design:{title:"default",structure:{type:"sequence-timeline",gap:20},items:[{type:"simple",positionV:"middle"}]}},"sequence-cylinders-3d-simple":{design:{title:"default",structure:{type:"sequence-cylinders-3d",gapY:20},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]}},"list-column-simple-vertical-arrow":{design:{title:"default",structure:{type:"list-column",gap:0,zigzag:!0},items:[{type:"simple-vertical-arrow"}]}},"list-row-simple-horizontal-arrow":{design:{title:"default",structure:{type:"list-row",gap:0,zigzag:!0},items:[{type:"simple-horizontal-arrow"}]}},"compare-swot":{design:{title:"default",structure:{type:"compare-hierarchy-row",itemGap:32,itemPadding:40,showColumnBackground:!0,columnBackgroundAlpha:.08},items:[{type:"letter-card",showBottomShade:!1},{type:"plain-text",formatter:it=>`● ${it}`,usePaletteColor:!0}]}},"compare-hierarchy-row-letter-card-compact-card":{design:{title:"default",structure:{type:"compare-hierarchy-row"},items:[{type:"letter-card"},{type:"compact-card"}]}},"compare-hierarchy-row-letter-card-rounded-rect-node":{design:{title:"default",structure:{type:"compare-hierarchy-row"},items:[{type:"letter-card"},{type:"rounded-rect-node"}]}},"sequence-snake-steps-compact-card":{design:{title:"default",structure:{type:"sequence-snake-steps"},items:[{type:"compact-card"}]}},"sequence-snake-steps-pill-badge":{design:{title:"default",structure:{type:"sequence-snake-steps"},items:[{type:"pill-badge"}]}},"sequence-snake-steps-simple":{design:{title:"default",structure:{type:"sequence-snake-steps"},items:[{type:"simple"}]}},"sequence-color-snake-steps-horizontal-icon-line":{design:{title:"default",structure:{type:"sequence-color-snake-steps"},items:[{type:"horizontal-icon-line"}]}},"sequence-pyramid-simple":{design:{title:"default",structure:{type:"sequence-pyramid"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]},themeConfig:{colorPrimary:"#1677ff"}},"sequence-funnel-simple":{design:{title:"default",structure:{type:"sequence-funnel"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]},themeConfig:{palette:"#1677ff"}},"list-row-horizontal-icon-line":{design:{title:"default",structure:{type:"list-row",gap:0,zigzag:!0},items:[{type:"horizontal-icon-line"}]}},"list-sector-simple":{design:{title:"default",structure:{type:"list-sector"},items:[{type:"simple"}]}},"list-sector-plain-text":{design:{title:"default",structure:{type:"list-sector"},items:[{type:"plain-text"}]}},"list-sector-half-plain-text":{design:{title:"default",structure:{type:"list-sector",startAngle:-180,endAngle:0},items:[{type:"plain-text"}]}},"quadrant-quarter-simple-card":{design:{title:"default",structure:{type:"quadrant"},items:[{type:"quarter-simple-card"}]}},"quadrant-quarter-circular":{design:{title:"default",structure:{type:"quadrant"},items:[{type:"quarter-circular"}]}},"sequence-roadmap-vertical-plain-text":{design:{title:"default",structure:{type:"sequence-roadmap-vertical"},items:[{type:"plain-text"}]}},"sequence-roadmap-vertical-simple":{design:{title:"default",structure:{type:"sequence-roadmap-vertical"},items:[{type:"simple",showIcon:!1}]}},"sequence-roadmap-vertical-badge-card":{design:{title:"default",structure:{type:"sequence-roadmap-vertical"},items:[{type:"badge-card"}]}},"sequence-roadmap-vertical-pill-badge":{design:{title:"default",structure:{type:"sequence-roadmap-vertical"},items:[{type:"pill-badge"}]}},"sequence-roadmap-vertical-quarter-circular":{design:{title:"default",structure:{type:"sequence-roadmap-vertical"},items:[{type:"quarter-circular"}]}},"sequence-roadmap-vertical-quarter-simple-card":{design:{title:"default",structure:{type:"sequence-roadmap-vertical",flipped:!0},items:[{type:"quarter-simple-card"}]}},"sequence-horizontal-zigzag-simple-illus":{design:{title:"default",structure:{type:"sequence-horizontal-zigzag"},items:[{type:"simple-illus"}]}},"sequence-horizontal-zigzag-horizontal-icon-line":{design:{title:"default",structure:{type:"sequence-horizontal-zigzag"},items:[{type:"horizontal-icon-line"}]}},"sequence-horizontal-zigzag-plain-text":{design:{title:"default",structure:{type:"sequence-horizontal-zigzag"},items:[{type:"plain-text"}]}},"sequence-horizontal-zigzag-simple-horizontal-arrow":{design:{title:"default",structure:{type:"sequence-horizontal-zigzag"},items:[{type:"simple-horizontal-arrow"}]}},"sequence-horizontal-zigzag-simple":{design:{title:"default",structure:{type:"sequence-horizontal-zigzag"},items:[{type:"simple"}]}},"list-row-simple-illus":{design:{title:"default",structure:{type:"list-row"},items:[{type:"simple-illus"}]}},"quadrant-simple-illus":{design:{title:"default",structure:{type:"quadrant"},items:[{type:"simple-illus"}]}},"sequence-color-snake-steps-simple-illus":{design:{title:"default",structure:{type:"sequence-color-snake-steps"},items:[{type:"simple-illus"}]}},"sequence-snake-steps-simple-illus":{design:{title:"default",structure:{type:"sequence-snake-steps"},items:[{type:"simple-illus"}]}},"sequence-steps-simple-illus":{design:{title:"default",structure:{type:"sequence-steps"},items:[{type:"simple-illus"}]}},"sequence-timeline-simple-illus":{design:{title:"default",structure:{type:"sequence-timeline"},items:[{type:"simple-illus",usePaletteColor:!0}]}},"sequence-zigzag-steps-underline-text":{design:{title:"default",structure:{type:"sequence-zigzag-steps"},items:[{type:"underline-text"}]}},"sequence-horizontal-zigzag-underline-text":{design:{title:"default",structure:{type:"sequence-horizontal-zigzag"},items:[{type:"underline-text"}]}},"sequence-roadmap-vertical-underline-text":{design:{title:"default",structure:{type:"sequence-roadmap-vertical"},items:[{type:"underline-text"}]}},"sequence-snake-steps-underline-text":{design:{title:"default",structure:{type:"sequence-snake-steps"},items:[{type:"underline-text"}]}},"sequence-circle-arrows-indexed-card":{design:{title:"default",structure:{type:"sequence-circle-arrows"},items:[{type:"indexed-card"}]}},"sequence-zigzag-pucks-3d-simple":{design:{title:"default",structure:{type:"sequence-zigzag-pucks-3d"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]}},"sequence-zigzag-pucks-3d-underline-text":{design:{title:"default",structure:{type:"sequence-zigzag-pucks-3d"},items:[{type:"underline-text"}]}},"sequence-zigzag-pucks-3d-indexed-card":{design:{title:"default",structure:{type:"sequence-zigzag-pucks-3d"},items:[{type:"indexed-card"}]}},"sequence-ascending-stairs-3d-simple":{design:{title:"default",structure:{type:"sequence-ascending-stairs-3d"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]}},"sequence-ascending-stairs-3d-underline-text":{design:{title:"default",structure:{type:"sequence-ascending-stairs-3d"},items:[{type:"underline-text"}]}},"sequence-circular-underline-text":{design:{title:"default",structure:{type:"sequence-circular"},items:[{type:"underline-text"}]}},"sequence-circular-simple":{design:{title:"default",structure:{type:"sequence-circular"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]}},"sequence-filter-mesh-underline-text":{design:{title:"default",structure:{type:"sequence-filter-mesh"},items:[{type:"underline-text"}]}},"sequence-filter-mesh-simple":{design:{title:"default",structure:{type:"sequence-filter-mesh"},items:[{type:"simple",showIcon:!1,usePaletteColor:!0}]}},"sequence-mountain-underline-text":{design:{title:"default",structure:{type:"sequence-mountain"},items:[{type:"underline-text"}]}},"compare-binary-horizontal-simple-fold":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-fold"},items:[{type:"simple",iconType:"circle",iconSize:40}]}},"compare-binary-horizontal-underline-text-fold":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-fold"},items:[{type:"underline-text"}]}},"compare-binary-horizontal-badge-card-fold":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-fold"},items:[{type:"badge-card"}]}},"compare-binary-horizontal-compact-card-fold":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-fold"},items:[{type:"compact-card"}]}},"compare-binary-horizontal-simple-arrow":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-arrow"},items:[{type:"simple",iconType:"circle",iconSize:40}]}},"compare-binary-horizontal-underline-text-arrow":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-arrow"},items:[{type:"underline-text"}]}},"compare-binary-horizontal-badge-card-arrow":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-arrow"},items:[{type:"badge-card"}]}},"compare-binary-horizontal-compact-card-arrow":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"pros-cons-arrow"},items:[{type:"compact-card"}]}},"compare-binary-horizontal-simple-vs":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"vs"},items:[{type:"simple",iconType:"circle",iconSize:40}]}},"compare-binary-horizontal-underline-text-vs":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"vs"},items:[{type:"underline-text"}]}},"compare-binary-horizontal-badge-card-vs":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"vs"},items:[{type:"badge-card"}]}},"compare-binary-horizontal-compact-card-vs":{design:{title:"default",structure:{type:"compare-binary-horizontal",dividerType:"vs"},items:[{type:"compact-card"}]}},"chart-bar-plain-text":{design:{title:"default",structure:{type:"chart-bar"},items:[{type:"plain-text",positionH:"flipped"}]}},"chart-line-plain-text":{design:{title:"default",structure:{type:"chart-line"},items:[{type:"plain-text",lineNumber:2}]}},"chart-pie-plain-text":{design:{title:"default",structure:{type:"chart-pie"},items:[{type:"plain-text"}]}},"chart-pie-compact-card":{design:{title:"default",structure:{type:"chart-pie"},items:[{type:"compact-card"}]}},"chart-pie-pill-badge":{design:{title:"default",structure:{type:"chart-pie"},items:[{type:"pill-badge"}]}},"chart-pie-donut-plain-text":{design:{title:"default",structure:{type:"chart-pie",innerRadius:90},items:[{type:"plain-text"}]}},"chart-pie-donut-compact-card":{design:{title:"default",structure:{type:"chart-pie",innerRadius:90},items:[{type:"compact-card"}]}},"chart-pie-donut-pill-badge":{design:{title:"default",structure:{type:"chart-pie",innerRadius:90},items:[{type:"pill-badge"}]}}},hierarchyTreeTemplates),hierarchyMindmapTemplates),sequenceStairsTemplates),wordCloudTemplate),listZigzagTemplates),hierarchyStructureTemplates);Object.entries(BUILT_IN_TEMPLATES).forEach(([it,rt])=>{registerTemplate(it,rt)});const Fragment=Symbol.for("@antv/infographic/Fragment");function jsx(it,rt={}){return{type:it,props:rt}}const jsxs=jsx,DefsSymbol=Symbol.for("@antv/infographic/Defs");function Defs(it){return{type:DefsSymbol,props:it}}function Ellipse(it){var ut,ft,pt,gt;const{x:rt=0,y:lt=0,width:ct=0,height:ht=0}=it;return(ut=it.cx)!=null||(it.cx=rt+ct/2),(ft=it.cy)!=null||(it.cy=lt+ht/2),(pt=it.rx)!=null||(it.rx=ct/2),(gt=it.ry)!=null||(it.ry=ht/2),{type:"ellipse",props:it}}function Group(it){const{x:rt=0,y:lt=0}=it;return(rt||lt)&&(it.transform||(it.transform=`translate(${rt}, ${lt})`)),{type:"g",props:it}}function Path$1(it){const{x:rt,y:lt}=it,ct=Ft({},it);return(rt!==void 0||lt!==void 0)&&(ct.transform=`translate(${rt!=null?rt:0}, ${lt!=null?lt:0})`),{type:"path",props:ct}}function Polygon(lt){var ct=lt,{points:it=[]}=ct,rt=Pe(ct,["points"]);const{x:ht,y:dt}=rt,ut=it.map(({x:gt,y:mt})=>`${gt},${mt}`).join(" "),ft=te(Ft({},rt),{points:ut});return(ht!==void 0||dt!==void 0)&&(ft.transform=`translate(${ht!=null?ht:0}, ${dt!=null?dt:0})`+(ft.transform||"")),{type:"polygon",props:ft}}function Rect(it){return{type:"rect",props:it}}function getCommonAttrs(it){return Object.keys(it[0]).reduce((rt,lt)=>{const ct=lt;return it.every(ht=>ht[ct]===it[0][ct])&&(rt[ct]=it[0][ct]),rt},{})}const parseNumber=(it,rt)=>{if(typeof it=="number"){if(rt===3)return{mode:"rgb",r:(it>>8&15|it>>4&240)/255,g:(it>>4&15|it&240)/255,b:(it&15|it<<4&240)/255};if(rt===4)return{mode:"rgb",r:(it>>12&15|it>>8&240)/255,g:(it>>8&15|it>>4&240)/255,b:(it>>4&15|it&240)/255,alpha:(it&15|it<<4&240)/255};if(rt===6)return{mode:"rgb",r:(it>>16&255)/255,g:(it>>8&255)/255,b:(it&255)/255};if(rt===8)return{mode:"rgb",r:(it>>24&255)/255,g:(it>>16&255)/255,b:(it>>8&255)/255,alpha:(it&255)/255}}},named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},parseNamed=it=>parseNumber(named$1[it.toLowerCase()],6),hex$2=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,parseHex=it=>{let rt;return(rt=it.match(hex$2))?parseNumber(parseInt(rt[1],16),rt[1].length):void 0},num$1="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",per=`${num$1}%`,num_per=`(?:${num$1}%|${num$1})`,hue$1=`(?:${num$1}(deg|grad|rad|turn)|${num$1})`,c$2="\\s*,\\s*",rgb_num_old=new RegExp(`^rgba?\\(\\s*${num$1}${c$2}${num$1}${c$2}${num$1}\\s*(?:,\\s*${num_per}\\s*)?\\)$`),rgb_per_old=new RegExp(`^rgba?\\(\\s*${per}${c$2}${per}${c$2}${per}\\s*(?:,\\s*${num_per}\\s*)?\\)$`),parseRgbLegacy=it=>{let rt={mode:"rgb"},lt;if(lt=it.match(rgb_num_old))lt[1]!==void 0&&(rt.r=lt[1]/255),lt[2]!==void 0&&(rt.g=lt[2]/255),lt[3]!==void 0&&(rt.b=lt[3]/255);else if(lt=it.match(rgb_per_old))lt[1]!==void 0&&(rt.r=lt[1]/100),lt[2]!==void 0&&(rt.g=lt[2]/100),lt[3]!==void 0&&(rt.b=lt[3]/100);else return;return lt[4]!==void 0?rt.alpha=Math.max(0,Math.min(1,lt[4]/100)):lt[5]!==void 0&&(rt.alpha=Math.max(0,Math.min(1,+lt[5]))),rt},prepare=(it,rt)=>it===void 0?void 0:typeof it!="object"?parse$2(it):it.mode!==void 0?it:rt?te(Ft({},it),{mode:rt}):void 0,converter=(it="rgb")=>rt=>(rt=prepare(rt,it))!==void 0?rt.mode===it?rt:converters[rt.mode][it]?converters[rt.mode][it](rt):it==="rgb"?converters[rt.mode].rgb(rt):converters.rgb[it](converters[rt.mode].rgb(rt)):void 0,converters={},modes={},parsers=[],colorProfiles={},identity$4=it=>it,useMode=it=>(converters[it.mode]=Ft(Ft({},converters[it.mode]),it.toMode),Object.keys(it.fromMode||{}).forEach(rt=>{converters[rt]||(converters[rt]={}),converters[rt][it.mode]=it.fromMode[rt]}),it.ranges||(it.ranges={}),it.difference||(it.difference={}),it.channels.forEach(rt=>{if(it.ranges[rt]===void 0&&(it.ranges[rt]=[0,1]),!it.interpolate[rt])throw new Error(`Missing interpolator for: ${rt}`);typeof it.interpolate[rt]=="function"&&(it.interpolate[rt]={use:it.interpolate[rt]}),it.interpolate[rt].fixup||(it.interpolate[rt].fixup=identity$4)}),modes[it.mode]=it,(it.parse||[]).forEach(rt=>{useParser(rt,it.mode)}),converter(it.mode)),getMode=it=>modes[it],useParser=(it,rt)=>{if(typeof it=="string"){if(!rt)throw new Error("'mode' required when 'parser' is a string");colorProfiles[it]=rt}else typeof it=="function"&&parsers.indexOf(it)<0&&parsers.push(it)},IdentStartCodePoint=/[^\x00-\x7F]|[a-zA-Z_]/,IdentCodePoint=/[^\x00-\x7F]|[-\w]/,Tok={Function:"function",Ident:"ident",Number:"number",Percentage:"percentage",ParenClose:")",None:"none",Hue:"hue",Alpha:"alpha"};let _i=0;function is_num(it){let rt=it[_i],lt=it[_i+1];return rt==="-"||rt==="+"?/\d/.test(lt)||lt==="."&&/\d/.test(it[_i+2]):rt==="."?/\d/.test(lt):/\d/.test(rt)}function is_ident(it){if(_i>=it.length)return!1;let rt=it[_i];if(IdentStartCodePoint.test(rt))return!0;if(rt==="-"){if(it.length-_i<2)return!1;let lt=it[_i+1];return!!(lt==="-"||IdentStartCodePoint.test(lt))}return!1}const huenits={deg:1,rad:180/Math.PI,grad:9/10,turn:360};function num(it){let rt="";if((it[_i]==="-"||it[_i]==="+")&&(rt+=it[_i++]),rt+=digits(it),it[_i]==="."&&/\d/.test(it[_i+1])&&(rt+=it[_i++]+digits(it)),(it[_i]==="e"||it[_i]==="E")&&((it[_i+1]==="-"||it[_i+1]==="+")&&/\d/.test(it[_i+2])?rt+=it[_i++]+it[_i++]+digits(it):/\d/.test(it[_i+1])&&(rt+=it[_i++]+digits(it))),is_ident(it)){let lt=ident(it);return lt==="deg"||lt==="rad"||lt==="turn"||lt==="grad"?{type:Tok.Hue,value:rt*huenits[lt]}:void 0}return it[_i]==="%"?(_i++,{type:Tok.Percentage,value:+rt}):{type:Tok.Number,value:+rt}}function digits(it){let rt="";for(;/\d/.test(it[_i]);)rt+=it[_i++];return rt}function ident(it){let rt="";for(;_i<it.length&&IdentCodePoint.test(it[_i]);)rt+=it[_i++];return rt}function identlike(it){let rt=ident(it);return it[_i]==="("?(_i++,{type:Tok.Function,value:rt}):rt==="none"?{type:Tok.None,value:void 0}:{type:Tok.Ident,value:rt}}function tokenize(it=""){let rt=it.trim(),lt=[],ct;for(_i=0;_i<rt.length;){if(ct=rt[_i++],ct===`
`||ct==="	"||ct===" "){for(;_i<rt.length&&(rt[_i]===`
`||rt[_i]==="	"||rt[_i]===" ");)_i++;continue}if(ct===",")return;if(ct===")"){lt.push({type:Tok.ParenClose});continue}if(ct==="+"){if(_i--,is_num(rt)){lt.push(num(rt));continue}return}if(ct==="-"){if(_i--,is_num(rt)){lt.push(num(rt));continue}if(is_ident(rt)){lt.push({type:Tok.Ident,value:ident(rt)});continue}return}if(ct==="."){if(_i--,is_num(rt)){lt.push(num(rt));continue}return}if(ct==="/"){for(;_i<rt.length&&(rt[_i]===`
`||rt[_i]==="	"||rt[_i]===" ");)_i++;let ht;if(is_num(rt)&&(ht=num(rt),ht.type!==Tok.Hue)){lt.push({type:Tok.Alpha,value:ht});continue}if(is_ident(rt)&&ident(rt)==="none"){lt.push({type:Tok.Alpha,value:{type:Tok.None,value:void 0}});continue}return}if(/\d/.test(ct)){_i--,lt.push(num(rt));continue}if(IdentStartCodePoint.test(ct)){_i--,lt.push(identlike(rt));continue}return}return lt}function parseColorSyntax(it){it._i=0;let rt=it[it._i++];if(!rt||rt.type!==Tok.Function||rt.value!=="color"||(rt=it[it._i++],rt.type!==Tok.Ident))return;const lt=colorProfiles[rt.value];if(!lt)return;const ct={mode:lt},ht=consumeCoords(it,!1);if(!ht)return;const dt=getMode(lt).channels;for(let ut=0,ft,pt;ut<dt.length;ut++)ft=ht[ut],pt=dt[ut],ft.type!==Tok.None&&(ct[pt]=ft.type===Tok.Number?ft.value:ft.value/100,pt==="alpha"&&(ct[pt]=Math.max(0,Math.min(1,ct[pt]))));return ct}function consumeCoords(it,rt){const lt=[];let ct;for(;it._i<it.length;){if(ct=it[it._i++],ct.type===Tok.None||ct.type===Tok.Number||ct.type===Tok.Alpha||ct.type===Tok.Percentage||rt&&ct.type===Tok.Hue){lt.push(ct);continue}if(ct.type===Tok.ParenClose){if(it._i<it.length)return;continue}return}if(!(lt.length<3||lt.length>4)){if(lt.length===4){if(lt[3].type!==Tok.Alpha)return;lt[3]=lt[3].value}return lt.length===3&&lt.push({type:Tok.None,value:void 0}),lt.every(ht=>ht.type!==Tok.Alpha)?lt:void 0}}function parseModernSyntax(it,rt){it._i=0;let lt=it[it._i++];if(!lt||lt.type!==Tok.Function)return;let ct=consumeCoords(it,rt);if(ct)return ct.unshift(lt.value),ct}const parse$2=it=>{if(typeof it!="string")return;const rt=tokenize(it),lt=rt?parseModernSyntax(rt,!0):void 0;let ct,ht=0,dt=parsers.length;for(;ht<dt;)if((ct=parsers[ht++](it,lt))!==void 0)return ct;return rt?parseColorSyntax(rt):void 0};function parseRgb(it,rt){if(!rt||rt[0]!=="rgb"&&rt[0]!=="rgba")return;const lt={mode:"rgb"},[,ct,ht,dt,ut]=rt;if(!(ct.type===Tok.Hue||ht.type===Tok.Hue||dt.type===Tok.Hue))return ct.type!==Tok.None&&(lt.r=ct.type===Tok.Number?ct.value/255:ct.value/100),ht.type!==Tok.None&&(lt.g=ht.type===Tok.Number?ht.value/255:ht.value/100),dt.type!==Tok.None&&(lt.b=dt.type===Tok.Number?dt.value/255:dt.value/100),ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const parseTransparent=it=>it==="transparent"?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,lerp=(it,rt,lt)=>it+lt*(rt-it),get_classes=it=>{let rt=[];for(let lt=0;lt<it.length-1;lt++){let ct=it[lt],ht=it[lt+1];ct===void 0&&ht===void 0?rt.push(void 0):ct!==void 0&&ht!==void 0?rt.push([ct,ht]):rt.push(ct!==void 0?[ct,ct]:[ht,ht])}return rt},interpolatorPiecewise=it=>rt=>{let lt=get_classes(rt);return ct=>{let ht=ct*lt.length,dt=ct>=1?lt.length-1:Math.max(Math.floor(ht),0),ut=lt[dt];return ut===void 0?void 0:it(ut[0],ut[1],ht-dt)}},interpolatorLinear=interpolatorPiecewise(lerp),fixupAlpha=it=>{let rt=!1,lt=it.map(ct=>ct!==void 0?(rt=!0,ct):1);return rt?lt:it},definition$r={mode:"rgb",channels:["r","g","b","alpha"],parse:[parseRgb,parseHex,parseRgbLegacy,parseNamed,parseTransparent,"srgb"],serialize:"srgb",interpolate:{r:interpolatorLinear,g:interpolatorLinear,b:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},linearize$2=(it=0)=>Math.pow(Math.abs(it),563/256)*Math.sign(it),convertA98ToXyz65=it=>{let rt=linearize$2(it.r),lt=linearize$2(it.g),ct=linearize$2(it.b),ht={mode:"xyz65",x:.5766690429101305*rt+.1855582379065463*lt+.1882286462349947*ct,y:.297344975250536*rt+.6273635662554661*lt+.0752914584939979*ct,z:.0270313613864123*rt+.0706888525358272*lt+.9913375368376386*ct};return it.alpha!==void 0&&(ht.alpha=it.alpha),ht},gamma$3=it=>Math.pow(Math.abs(it),256/563)*Math.sign(it),convertXyz65ToA98=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht={mode:"a98",r:gamma$3(it*2.0415879038107465-rt*.5650069742788597-.3447313507783297*lt),g:gamma$3(it*-.9692436362808798+rt*1.8759675015077206+.0415550574071756*lt),b:gamma$3(it*.0134442806320312-rt*.1183623922310184+1.0151749943912058*lt)};return ct!==void 0&&(ht.alpha=ct),ht},fn$3=(it=0)=>{const rt=Math.abs(it);return rt<=.04045?it/12.92:(Math.sign(it)||1)*Math.pow((rt+.055)/1.055,2.4)},convertRgbToLrgb=({r:it,g:rt,b:lt,alpha:ct})=>{let ht={mode:"lrgb",r:fn$3(it),g:fn$3(rt),b:fn$3(lt)};return ct!==void 0&&(ht.alpha=ct),ht},convertRgbToXyz65=it=>{let{r:rt,g:lt,b:ct,alpha:ht}=convertRgbToLrgb(it),dt={mode:"xyz65",x:.4123907992659593*rt+.357584339383878*lt+.1804807884018343*ct,y:.2126390058715102*rt+.715168678767756*lt+.0721923153607337*ct,z:.0193308187155918*rt+.119194779794626*lt+.9505321522496607*ct};return ht!==void 0&&(dt.alpha=ht),dt},fn$2=(it=0)=>{const rt=Math.abs(it);return rt>.0031308?(Math.sign(it)||1)*(1.055*Math.pow(rt,1/2.4)-.055):it*12.92},convertLrgbToRgb=({r:it,g:rt,b:lt,alpha:ct},ht="rgb")=>{let dt={mode:ht,r:fn$2(it),g:fn$2(rt),b:fn$2(lt)};return ct!==void 0&&(dt.alpha=ct),dt},convertXyz65ToRgb=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=convertLrgbToRgb({r:it*3.2409699419045226-rt*1.537383177570094-.4986107602930034*lt,g:it*-.9692436362808796+rt*1.8759675015077204+.0415550574071756*lt,b:it*.0556300796969936-rt*.2039769588889765+1.0569715142428784*lt});return ct!==void 0&&(ht.alpha=ct),ht},definition$q=te(Ft({},definition$r),{mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:it=>convertXyz65ToA98(convertRgbToXyz65(it)),xyz65:convertXyz65ToA98},toMode:{rgb:it=>convertXyz65ToRgb(convertA98ToXyz65(it)),xyz65:convertA98ToXyz65}}),normalizeHue=it=>(it=it%360)<0?it+360:it,hue=(it,rt)=>it.map((lt,ct,ht)=>{if(lt===void 0)return lt;let dt=normalizeHue(lt);return ct===0||it[ct-1]===void 0?dt:rt(dt-normalizeHue(ht[ct-1]))}).reduce((lt,ct)=>!lt.length||ct===void 0||lt[lt.length-1]===void 0?(lt.push(ct),lt):(lt.push(ct+lt[lt.length-1]),lt),[]),fixupHueShorter=it=>hue(it,rt=>Math.abs(rt)<=180?rt:rt-360*Math.sign(rt)),M$1=[-.14861,1.78277,-.29227,-.90649,1.97294,0],degToRad=Math.PI/180,radToDeg=180/Math.PI;let DE=M$1[3]*M$1[4],BE=M$1[1]*M$1[4],BCAD=M$1[1]*M$1[2]-M$1[0]*M$1[3];const convertRgbToCubehelix=({r:it,g:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=(BCAD*lt+it*DE-rt*BE)/(BCAD+DE-BE),dt=lt-ht,ut=(M$1[4]*(rt-ht)-M$1[2]*dt)/M$1[3],ft={mode:"cubehelix",l:ht,s:ht===0||ht===1?void 0:Math.sqrt(dt*dt+ut*ut)/(M$1[4]*ht*(1-ht))};return ft.s&&(ft.h=Math.atan2(ut,dt)*radToDeg-120),ct!==void 0&&(ft.alpha=ct),ft},convertCubehelixToRgb=({h:it,s:rt,l:lt,alpha:ct})=>{let ht={mode:"rgb"};it=(it===void 0?0:it+120)*degToRad,lt===void 0&&(lt=0);let dt=rt===void 0?0:rt*lt*(1-lt),ut=Math.cos(it),ft=Math.sin(it);return ht.r=lt+dt*(M$1[0]*ut+M$1[1]*ft),ht.g=lt+dt*(M$1[2]*ut+M$1[3]*ft),ht.b=lt+dt*(M$1[4]*ut+M$1[5]*ft),ct!==void 0&&(ht.alpha=ct),ht},differenceHueSaturation=(it,rt)=>{if(it.h===void 0||rt.h===void 0||!it.s||!rt.s)return 0;let lt=normalizeHue(it.h),ct=normalizeHue(rt.h),ht=Math.sin((ct-lt+360)/2*Math.PI/180);return 2*Math.sqrt(it.s*rt.s)*ht},differenceHueNaive=(it,rt)=>{if(it.h===void 0||rt.h===void 0)return 0;let lt=normalizeHue(it.h),ct=normalizeHue(rt.h);return Math.abs(ct-lt)>180?lt-(ct-360*Math.sign(ct-lt)):ct-lt},differenceHueChroma=(it,rt)=>{if(it.h===void 0||rt.h===void 0||!it.c||!rt.c)return 0;let lt=normalizeHue(it.h),ct=normalizeHue(rt.h),ht=Math.sin((ct-lt+360)/2*Math.PI/180);return 2*Math.sqrt(it.c*rt.c)*ht},averageAngle=it=>{let rt=it.reduce((ct,ht)=>{if(ht!==void 0){let dt=ht*Math.PI/180;ct.sin+=Math.sin(dt),ct.cos+=Math.cos(dt)}return ct},{sin:0,cos:0}),lt=Math.atan2(rt.sin,rt.cos)*180/Math.PI;return lt<0?360+lt:lt},definition$p={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:convertRgbToCubehelix},toMode:{rgb:convertCubehelixToRgb},interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},s:interpolatorLinear,l:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueSaturation},average:{h:averageAngle}},convertLabToLch=({l:it,a:rt,b:lt,alpha:ct},ht="lch")=>{rt===void 0&&(rt=0),lt===void 0&&(lt=0);let dt=Math.sqrt(rt*rt+lt*lt),ut={mode:ht,l:it,c:dt};return dt&&(ut.h=normalizeHue(Math.atan2(lt,rt)*180/Math.PI)),ct!==void 0&&(ut.alpha=ct),ut},convertLchToLab=({l:it,c:rt,h:lt,alpha:ct},ht="lab")=>{lt===void 0&&(lt=0);let dt={mode:ht,l:it,a:rt?rt*Math.cos(lt/180*Math.PI):0,b:rt?rt*Math.sin(lt/180*Math.PI):0};return ct!==void 0&&(dt.alpha=ct),dt},k$2=Math.pow(29,3)/Math.pow(3,3),e$3=Math.pow(6,3)/Math.pow(29,3),D50={X:.3457/.3585,Y:1,Z:(1-.3457-.3585)/.3585},D65={X:.3127/.329,Y:1,Z:(1-.3127-.329)/.329};let fn$1=it=>Math.pow(it,3)>e$3?Math.pow(it,3):(116*it-16)/k$2;const convertLab65ToXyz65=({l:it,a:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=(it+16)/116,dt=rt/500+ht,ut=ht-lt/200,ft={mode:"xyz65",x:fn$1(dt)*D65.X,y:fn$1(ht)*D65.Y,z:fn$1(ut)*D65.Z};return ct!==void 0&&(ft.alpha=ct),ft},convertLab65ToRgb=it=>convertXyz65ToRgb(convertLab65ToXyz65(it)),f$2=it=>it>e$3?Math.cbrt(it):(k$2*it+16)/116,convertXyz65ToLab65=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=f$2(it/D65.X),dt=f$2(rt/D65.Y),ut=f$2(lt/D65.Z),ft={mode:"lab65",l:116*dt-16,a:500*(ht-dt),b:200*(dt-ut)};return ct!==void 0&&(ft.alpha=ct),ft},convertRgbToLab65=it=>{let rt=convertXyz65ToLab65(convertRgbToXyz65(it));return it.r===it.b&&it.b===it.g&&(rt.a=rt.b=0),rt},kE=1,kCH=1,θ=26/180*Math.PI,cosθ=Math.cos(θ),sinθ=Math.sin(θ),factor=100/Math.log(139/100),convertDlchToLab65=({l:it,c:rt,h:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht={mode:"lab65",l:(Math.exp(it*kE/factor)-1)/.0039},dt=(Math.exp(.0435*rt*kCH*kE)-1)/.075,ut=dt*Math.cos(lt/180*Math.PI-θ),ft=dt*Math.sin(lt/180*Math.PI-θ);return ht.a=ut*cosθ-ft/.83*sinθ,ht.b=ut*sinθ+ft/.83*cosθ,ct!==void 0&&(ht.alpha=ct),ht},convertLab65ToDlch=({l:it,a:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=rt*cosθ+lt*sinθ,dt=.83*(lt*cosθ-rt*sinθ),ut=Math.sqrt(ht*ht+dt*dt),ft={mode:"dlch",l:factor/kE*Math.log(1+.0039*it),c:Math.log(1+.075*ut)/(.0435*kCH*kE)};return ft.c&&(ft.h=normalizeHue((Math.atan2(dt,ht)+θ)/Math.PI*180)),ct!==void 0&&(ft.alpha=ct),ft},convertDlabToLab65=it=>convertDlchToLab65(convertLabToLch(it,"dlch")),convertLab65ToDlab=it=>convertLchToLab(convertLab65ToDlch(it),"dlab"),definition$o={mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:convertDlabToLab65,rgb:it=>convertLab65ToRgb(convertDlabToLab65(it))},fromMode:{lab65:convertLab65ToDlab,rgb:it=>convertLab65ToDlab(convertRgbToLab65(it))},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:interpolatorLinear,a:interpolatorLinear,b:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},definition$n={mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:convertDlchToLab65,dlab:it=>convertLchToLab(it,"dlab"),rgb:it=>convertLab65ToRgb(convertDlchToLab65(it))},fromMode:{lab65:convertLab65ToDlch,dlab:it=>convertLabToLch(it,"dlch"),rgb:it=>convertLab65ToDlch(convertRgbToLab65(it))},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:interpolatorLinear,c:interpolatorLinear,h:{use:interpolatorLinear,fixup:fixupHueShorter},alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueChroma},average:{h:averageAngle}};function convertHsiToRgb({h:it,s:rt,i:lt,alpha:ct}){it=normalizeHue(it!==void 0?it:0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.abs(it/60%2-1),dt;switch(Math.floor(it/60)){case 0:dt={r:lt*(1+rt*(3/(2-ht)-1)),g:lt*(1+rt*(3*(1-ht)/(2-ht)-1)),b:lt*(1-rt)};break;case 1:dt={r:lt*(1+rt*(3*(1-ht)/(2-ht)-1)),g:lt*(1+rt*(3/(2-ht)-1)),b:lt*(1-rt)};break;case 2:dt={r:lt*(1-rt),g:lt*(1+rt*(3/(2-ht)-1)),b:lt*(1+rt*(3*(1-ht)/(2-ht)-1))};break;case 3:dt={r:lt*(1-rt),g:lt*(1+rt*(3*(1-ht)/(2-ht)-1)),b:lt*(1+rt*(3/(2-ht)-1))};break;case 4:dt={r:lt*(1+rt*(3*(1-ht)/(2-ht)-1)),g:lt*(1-rt),b:lt*(1+rt*(3/(2-ht)-1))};break;case 5:dt={r:lt*(1+rt*(3/(2-ht)-1)),g:lt*(1-rt),b:lt*(1+rt*(3*(1-ht)/(2-ht)-1))};break;default:dt={r:lt*(1-rt),g:lt*(1-rt),b:lt*(1-rt)}}return dt.mode="rgb",ct!==void 0&&(dt.alpha=ct),dt}function convertRgbToHsi({r:it,g:rt,b:lt,alpha:ct}){it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.max(it,rt,lt),dt=Math.min(it,rt,lt),ut={mode:"hsi",s:it+rt+lt===0?0:1-3*dt/(it+rt+lt),i:(it+rt+lt)/3};return ht-dt!==0&&(ut.h=(ht===it?(rt-lt)/(ht-dt)+(rt<lt)*6:ht===rt?(lt-it)/(ht-dt)+2:(it-rt)/(ht-dt)+4)*60),ct!==void 0&&(ut.alpha=ct),ut}const definition$m={mode:"hsi",toMode:{rgb:convertHsiToRgb},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:convertRgbToHsi},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},s:interpolatorLinear,i:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueSaturation},average:{h:averageAngle}};function convertHslToRgb({h:it,s:rt,l:lt,alpha:ct}){it=normalizeHue(it!==void 0?it:0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=lt+rt*(lt<.5?lt:1-lt),dt=ht-(ht-lt)*2*Math.abs(it/60%2-1),ut;switch(Math.floor(it/60)){case 0:ut={r:ht,g:dt,b:2*lt-ht};break;case 1:ut={r:dt,g:ht,b:2*lt-ht};break;case 2:ut={r:2*lt-ht,g:ht,b:dt};break;case 3:ut={r:2*lt-ht,g:dt,b:ht};break;case 4:ut={r:dt,g:2*lt-ht,b:ht};break;case 5:ut={r:ht,g:2*lt-ht,b:dt};break;default:ut={r:2*lt-ht,g:2*lt-ht,b:2*lt-ht}}return ut.mode="rgb",ct!==void 0&&(ut.alpha=ct),ut}function convertRgbToHsl({r:it,g:rt,b:lt,alpha:ct}){it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.max(it,rt,lt),dt=Math.min(it,rt,lt),ut={mode:"hsl",s:ht===dt?0:(ht-dt)/(1-Math.abs(ht+dt-1)),l:.5*(ht+dt)};return ht-dt!==0&&(ut.h=(ht===it?(rt-lt)/(ht-dt)+(rt<lt)*6:ht===rt?(lt-it)/(ht-dt)+2:(it-rt)/(ht-dt)+4)*60),ct!==void 0&&(ut.alpha=ct),ut}const hueToDeg=(it,rt)=>{switch(rt){case"deg":return+it;case"rad":return it/Math.PI*180;case"grad":return it/10*9;case"turn":return it*360}},hsl_old=new RegExp(`^hsla?\\(\\s*${hue$1}${c$2}${per}${c$2}${per}\\s*(?:,\\s*${num_per}\\s*)?\\)$`),parseHslLegacy=it=>{let rt=it.match(hsl_old);if(!rt)return;let lt={mode:"hsl"};return rt[3]!==void 0?lt.h=+rt[3]:rt[1]!==void 0&&rt[2]!==void 0&&(lt.h=hueToDeg(rt[1],rt[2])),rt[4]!==void 0&&(lt.s=Math.min(Math.max(0,rt[4]/100),1)),rt[5]!==void 0&&(lt.l=Math.min(Math.max(0,rt[5]/100),1)),rt[6]!==void 0?lt.alpha=Math.max(0,Math.min(1,rt[6]/100)):rt[7]!==void 0&&(lt.alpha=Math.max(0,Math.min(1,+rt[7]))),lt};function parseHsl(it,rt){if(!rt||rt[0]!=="hsl"&&rt[0]!=="hsla")return;const lt={mode:"hsl"},[,ct,ht,dt,ut]=rt;if(ct.type!==Tok.None){if(ct.type===Tok.Percentage)return;lt.h=ct.value}if(ht.type!==Tok.None){if(ht.type===Tok.Hue)return;lt.s=ht.value/100}if(dt.type!==Tok.None){if(dt.type===Tok.Hue)return;lt.l=dt.value/100}return ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const definition$l={mode:"hsl",toMode:{rgb:convertHslToRgb},fromMode:{rgb:convertRgbToHsl},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[parseHsl,parseHslLegacy],serialize:it=>`hsl(${it.h!==void 0?it.h:"none"} ${it.s!==void 0?it.s*100+"%":"none"} ${it.l!==void 0?it.l*100+"%":"none"}${it.alpha<1?` / ${it.alpha}`:""})`,interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},s:interpolatorLinear,l:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueSaturation},average:{h:averageAngle}};function convertHsvToRgb({h:it,s:rt,v:lt,alpha:ct}){it=normalizeHue(it!==void 0?it:0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.abs(it/60%2-1),dt;switch(Math.floor(it/60)){case 0:dt={r:lt,g:lt*(1-rt*ht),b:lt*(1-rt)};break;case 1:dt={r:lt*(1-rt*ht),g:lt,b:lt*(1-rt)};break;case 2:dt={r:lt*(1-rt),g:lt,b:lt*(1-rt*ht)};break;case 3:dt={r:lt*(1-rt),g:lt*(1-rt*ht),b:lt};break;case 4:dt={r:lt*(1-rt*ht),g:lt*(1-rt),b:lt};break;case 5:dt={r:lt,g:lt*(1-rt),b:lt*(1-rt*ht)};break;default:dt={r:lt*(1-rt),g:lt*(1-rt),b:lt*(1-rt)}}return dt.mode="rgb",ct!==void 0&&(dt.alpha=ct),dt}function convertRgbToHsv({r:it,g:rt,b:lt,alpha:ct}){it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.max(it,rt,lt),dt=Math.min(it,rt,lt),ut={mode:"hsv",s:ht===0?0:1-dt/ht,v:ht};return ht-dt!==0&&(ut.h=(ht===it?(rt-lt)/(ht-dt)+(rt<lt)*6:ht===rt?(lt-it)/(ht-dt)+2:(it-rt)/(ht-dt)+4)*60),ct!==void 0&&(ut.alpha=ct),ut}const definition$k={mode:"hsv",toMode:{rgb:convertHsvToRgb},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:convertRgbToHsv},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},s:interpolatorLinear,v:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueSaturation},average:{h:averageAngle}};function convertHwbToRgb({h:it,w:rt,b:lt,alpha:ct}){if(rt===void 0&&(rt=0),lt===void 0&&(lt=0),rt+lt>1){let ht=rt+lt;rt/=ht,lt/=ht}return convertHsvToRgb({h:it,s:lt===1?1:1-rt/(1-lt),v:1-lt,alpha:ct})}function convertRgbToHwb(it){let rt=convertRgbToHsv(it);if(rt===void 0)return;let lt=rt.s!==void 0?rt.s:0,ct=rt.v!==void 0?rt.v:0,ht={mode:"hwb",w:(1-lt)*ct,b:1-ct};return rt.h!==void 0&&(ht.h=rt.h),rt.alpha!==void 0&&(ht.alpha=rt.alpha),ht}function ParseHwb(it,rt){if(!rt||rt[0]!=="hwb")return;const lt={mode:"hwb"},[,ct,ht,dt,ut]=rt;if(ct.type!==Tok.None){if(ct.type===Tok.Percentage)return;lt.h=ct.value}if(ht.type!==Tok.None){if(ht.type===Tok.Hue)return;lt.w=ht.value/100}if(dt.type!==Tok.None){if(dt.type===Tok.Hue)return;lt.b=dt.value/100}return ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const definition$j={mode:"hwb",toMode:{rgb:convertHwbToRgb},fromMode:{rgb:convertRgbToHwb},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[ParseHwb],serialize:it=>`hwb(${it.h!==void 0?it.h:"none"} ${it.w!==void 0?it.w*100+"%":"none"} ${it.b!==void 0?it.b*100+"%":"none"}${it.alpha<1?` / ${it.alpha}`:""})`,interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},w:interpolatorLinear,b:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueNaive},average:{h:averageAngle}},YW=203,M1=.1593017578125,M2=78.84375,C1=.8359375,C2=18.8515625,C3=18.6875;function transferPqDecode(it){if(it<0)return 0;const rt=Math.pow(it,1/M2);return 1e4*Math.pow(Math.max(0,rt-C1)/(C2-C3*rt),1/M1)}function transferPqEncode(it){if(it<0)return 0;const rt=Math.pow(it/1e4,M1);return Math.pow((C1+C2*rt)/(1+C3*rt),M2)}const toRel=it=>Math.max(it/YW,0),convertItpToXyz65=({i:it,t:rt,p:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);const ht=transferPqDecode(it+.008609037037932761*rt+.11102962500302593*lt),dt=transferPqDecode(it-.00860903703793275*rt-.11102962500302599*lt),ut=transferPqDecode(it+.5600313357106791*rt-.32062717498731885*lt),ft={mode:"xyz65",x:toRel(2.070152218389422*ht-1.3263473389671556*dt+.2066510476294051*ut),y:toRel(.3647385209748074*ht+.680566024947227*dt-.0453045459220346*ut),z:toRel(-.049747207535812*ht-.0492609666966138*dt+1.1880659249923042*ut)};return ct!==void 0&&(ft.alpha=ct),ft},toAbs=(it=0)=>Math.max(it*YW,0),convertXyz65ToItp=({x:it,y:rt,z:lt,alpha:ct})=>{const ht=toAbs(it),dt=toAbs(rt),ut=toAbs(lt),ft=transferPqEncode(.3592832590121217*ht+.6976051147779502*dt-.0358915932320289*ut),pt=transferPqEncode(-.1920808463704995*ht+1.1004767970374323*dt+.0753748658519118*ut),gt=transferPqEncode(.0070797844607477*ht+.0748396662186366*dt+.8433265453898765*ut),mt=.5*ft+.5*pt,xt=1.61376953125*ft-3.323486328125*pt+1.709716796875*gt,yt=4.378173828125*ft-4.24560546875*pt-.132568359375*gt,bt={mode:"itp",i:mt,t:xt,p:yt};return ct!==void 0&&(bt.alpha=ct),bt},definition$i={mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:convertItpToXyz65,rgb:it=>convertXyz65ToRgb(convertItpToXyz65(it))},fromMode:{xyz65:convertXyz65ToItp,rgb:it=>convertXyz65ToItp(convertRgbToXyz65(it))},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:interpolatorLinear,t:interpolatorLinear,p:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},p$3=134.03437499999998,d0$1=16295499532821565e-27,jabPqEncode=it=>{if(it<0)return 0;let rt=Math.pow(it/1e4,M1);return Math.pow((C1+C2*rt)/(1+C3*rt),p$3)},abs$1=(it=0)=>Math.max(it*203,0),convertXyz65ToJab=({x:it,y:rt,z:lt,alpha:ct})=>{it=abs$1(it),rt=abs$1(rt),lt=abs$1(lt);let ht=1.15*it-.15*lt,dt=.66*rt+.34*it,ut=jabPqEncode(.41478972*ht+.579999*dt+.014648*lt),ft=jabPqEncode(-.20151*ht+1.120649*dt+.0531008*lt),pt=jabPqEncode(-.0166008*ht+.2648*dt+.6684799*lt),gt=(ut+ft)/2,mt={mode:"jab",j:.44*gt/(1-.56*gt)-d0$1,a:3.524*ut-4.066708*ft+.542708*pt,b:.199076*ut+1.096799*ft-1.295875*pt};return ct!==void 0&&(mt.alpha=ct),mt},p$2=134.03437499999998,d0=16295499532821565e-27,jabPqDecode=it=>{if(it<0)return 0;let rt=Math.pow(it,1/p$2);return 1e4*Math.pow((C1-rt)/(C3*rt-C2),1/M1)},rel=it=>it/203,convertJabToXyz65=({j:it,a:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=(it+d0)/(.44+.56*(it+d0)),dt=jabPqDecode(ht+.13860504*rt+.058047316*lt),ut=jabPqDecode(ht-.13860504*rt-.058047316*lt),ft=jabPqDecode(ht-.096019242*rt-.8118919*lt),pt={mode:"xyz65",x:rel(1.661373024652174*dt-.914523081304348*ut+.23136208173913045*ft),y:rel(-.3250758611844533*dt+1.571847026732543*ut-.21825383453227928*ft),z:rel(-.090982811*dt-.31272829*ut+1.5227666*ft)};return ct!==void 0&&(pt.alpha=ct),pt},convertRgbToJab=it=>{let rt=convertXyz65ToJab(convertRgbToXyz65(it));return it.r===it.b&&it.b===it.g&&(rt.a=rt.b=0),rt},convertJabToRgb=it=>convertXyz65ToRgb(convertJabToXyz65(it)),definition$h={mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:convertRgbToJab,xyz65:convertXyz65ToJab},toMode:{rgb:convertJabToRgb,xyz65:convertJabToXyz65},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:interpolatorLinear,a:interpolatorLinear,b:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},convertJabToJch=({j:it,a:rt,b:lt,alpha:ct})=>{rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.sqrt(rt*rt+lt*lt),dt={mode:"jch",j:it,c:ht};return ht&&(dt.h=normalizeHue(Math.atan2(lt,rt)*180/Math.PI)),ct!==void 0&&(dt.alpha=ct),dt},convertJchToJab=({j:it,c:rt,h:lt,alpha:ct})=>{lt===void 0&&(lt=0);let ht={mode:"jab",j:it,a:rt?rt*Math.cos(lt/180*Math.PI):0,b:rt?rt*Math.sin(lt/180*Math.PI):0};return ct!==void 0&&(ht.alpha=ct),ht},definition$g={mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:convertJchToJab,rgb:it=>convertJabToRgb(convertJchToJab(it))},fromMode:{rgb:it=>convertJabToJch(convertRgbToJab(it)),jab:convertJabToJch},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},c:interpolatorLinear,j:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueChroma},average:{h:averageAngle}},k$1=Math.pow(29,3)/Math.pow(3,3),e$2=Math.pow(6,3)/Math.pow(29,3);let fn=it=>Math.pow(it,3)>e$2?Math.pow(it,3):(116*it-16)/k$1;const convertLabToXyz50=({l:it,a:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=(it+16)/116,dt=rt/500+ht,ut=ht-lt/200,ft={mode:"xyz50",x:fn(dt)*D50.X,y:fn(ht)*D50.Y,z:fn(ut)*D50.Z};return ct!==void 0&&(ft.alpha=ct),ft},convertXyz50ToRgb=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=convertLrgbToRgb({r:it*3.1341359569958707-rt*1.6173863321612538-.4906619460083532*lt,g:it*-.978795502912089+rt*1.916254567259524+.03344273116131949*lt,b:it*.07195537988411677-rt*.2289768264158322+1.405386058324125*lt});return ct!==void 0&&(ht.alpha=ct),ht},convertLabToRgb=it=>convertXyz50ToRgb(convertLabToXyz50(it)),convertRgbToXyz50=it=>{let{r:rt,g:lt,b:ct,alpha:ht}=convertRgbToLrgb(it),dt={mode:"xyz50",x:.436065742824811*rt+.3851514688337912*lt+.14307845442264197*ct,y:.22249319175623702*rt+.7168870538238823*lt+.06061979053616537*ct,z:.013923904500943465*rt+.09708128566574634*lt+.7140993584005155*ct};return ht!==void 0&&(dt.alpha=ht),dt},f$1=it=>it>e$2?Math.cbrt(it):(k$1*it+16)/116,convertXyz50ToLab=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=f$1(it/D50.X),dt=f$1(rt/D50.Y),ut=f$1(lt/D50.Z),ft={mode:"lab",l:116*dt-16,a:500*(ht-dt),b:200*(dt-ut)};return ct!==void 0&&(ft.alpha=ct),ft},convertRgbToLab=it=>{let rt=convertXyz50ToLab(convertRgbToXyz50(it));return it.r===it.b&&it.b===it.g&&(rt.a=rt.b=0),rt};function parseLab(it,rt){if(!rt||rt[0]!=="lab")return;const lt={mode:"lab"},[,ct,ht,dt,ut]=rt;if(!(ct.type===Tok.Hue||ht.type===Tok.Hue||dt.type===Tok.Hue))return ct.type!==Tok.None&&(lt.l=Math.min(Math.max(0,ct.value),100)),ht.type!==Tok.None&&(lt.a=ht.type===Tok.Number?ht.value:ht.value*125/100),dt.type!==Tok.None&&(lt.b=dt.type===Tok.Number?dt.value:dt.value*125/100),ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const definition$f={mode:"lab",toMode:{xyz50:convertLabToXyz50,rgb:convertLabToRgb},fromMode:{xyz50:convertXyz50ToLab,rgb:convertRgbToLab},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[parseLab],serialize:it=>`lab(${it.l!==void 0?it.l:"none"} ${it.a!==void 0?it.a:"none"} ${it.b!==void 0?it.b:"none"}${it.alpha<1?` / ${it.alpha}`:""})`,interpolate:{l:interpolatorLinear,a:interpolatorLinear,b:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},definition$e=te(Ft({},definition$f),{mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:convertLab65ToXyz65,rgb:convertLab65ToRgb},fromMode:{xyz65:convertXyz65ToLab65,rgb:convertRgbToLab65},ranges:{l:[0,100],a:[-125,125],b:[-125,125]}});function parseLch(it,rt){if(!rt||rt[0]!=="lch")return;const lt={mode:"lch"},[,ct,ht,dt,ut]=rt;if(ct.type!==Tok.None){if(ct.type===Tok.Hue)return;lt.l=Math.min(Math.max(0,ct.value),100)}if(ht.type!==Tok.None&&(lt.c=Math.max(0,ht.type===Tok.Number?ht.value:ht.value*150/100)),dt.type!==Tok.None){if(dt.type===Tok.Percentage)return;lt.h=dt.value}return ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const definition$d={mode:"lch",toMode:{lab:convertLchToLab,rgb:it=>convertLabToRgb(convertLchToLab(it))},fromMode:{rgb:it=>convertLabToLch(convertRgbToLab(it)),lab:convertLabToLch},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[parseLch],serialize:it=>`lch(${it.l!==void 0?it.l:"none"} ${it.c!==void 0?it.c:"none"} ${it.h!==void 0?it.h:"none"}${it.alpha<1?` / ${it.alpha}`:""})`,interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},c:interpolatorLinear,l:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueChroma},average:{h:averageAngle}},definition$c=te(Ft({},definition$d),{mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:it=>convertLchToLab(it,"lab65"),rgb:it=>convertLab65ToRgb(convertLchToLab(it,"lab65"))},fromMode:{rgb:it=>convertLabToLch(convertRgbToLab65(it),"lch65"),lab65:it=>convertLabToLch(it,"lch65")},ranges:{l:[0,100],c:[0,150],h:[0,360]}}),convertLuvToLchuv=({l:it,u:rt,v:lt,alpha:ct})=>{rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.sqrt(rt*rt+lt*lt),dt={mode:"lchuv",l:it,c:ht};return ht&&(dt.h=normalizeHue(Math.atan2(lt,rt)*180/Math.PI)),ct!==void 0&&(dt.alpha=ct),dt},convertLchuvToLuv=({l:it,c:rt,h:lt,alpha:ct})=>{lt===void 0&&(lt=0);let ht={mode:"luv",l:it,u:rt?rt*Math.cos(lt/180*Math.PI):0,v:rt?rt*Math.sin(lt/180*Math.PI):0};return ct!==void 0&&(ht.alpha=ct),ht},u_fn$1=(it,rt,lt)=>4*it/(it+15*rt+3*lt),v_fn$1=(it,rt,lt)=>9*rt/(it+15*rt+3*lt),un$1=u_fn$1(D50.X,D50.Y,D50.Z),vn$1=v_fn$1(D50.X,D50.Y,D50.Z),l_fn=it=>it<=e$2?k$1*it:116*Math.cbrt(it)-16,convertXyz50ToLuv=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=l_fn(rt/D50.Y),dt=u_fn$1(it,rt,lt),ut=v_fn$1(it,rt,lt);!isFinite(dt)||!isFinite(ut)?ht=dt=ut=0:(dt=13*ht*(dt-un$1),ut=13*ht*(ut-vn$1));let ft={mode:"luv",l:ht,u:dt,v:ut};return ct!==void 0&&(ft.alpha=ct),ft},u_fn=(it,rt,lt)=>4*it/(it+15*rt+3*lt),v_fn=(it,rt,lt)=>9*rt/(it+15*rt+3*lt),un=u_fn(D50.X,D50.Y,D50.Z),vn=v_fn(D50.X,D50.Y,D50.Z),convertLuvToXyz50=({l:it,u:rt,v:lt,alpha:ct})=>{if(it===void 0&&(it=0),it===0)return{mode:"xyz50",x:0,y:0,z:0};rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=rt/(13*it)+un,dt=lt/(13*it)+vn,ut=D50.Y*(it<=8?it/k$1:Math.pow((it+16)/116,3)),ft=ut*(9*ht)/(4*dt),pt=ut*(12-3*ht-20*dt)/(4*dt),gt={mode:"xyz50",x:ft,y:ut,z:pt};return ct!==void 0&&(gt.alpha=ct),gt},convertRgbToLchuv=it=>convertLuvToLchuv(convertXyz50ToLuv(convertRgbToXyz50(it))),convertLchuvToRgb=it=>convertXyz50ToRgb(convertLuvToXyz50(convertLchuvToLuv(it))),definition$b={mode:"lchuv",toMode:{luv:convertLchuvToLuv,rgb:convertLchuvToRgb},fromMode:{rgb:convertRgbToLchuv,luv:convertLuvToLchuv},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:interpolatorLinear,fixup:fixupHueShorter},c:interpolatorLinear,l:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}},difference:{h:differenceHueChroma},average:{h:averageAngle}},definition$a=te(Ft({},definition$r),{mode:"lrgb",toMode:{rgb:convertLrgbToRgb},fromMode:{rgb:convertRgbToLrgb},parse:["srgb-linear"],serialize:"srgb-linear"}),definition$9={mode:"luv",toMode:{xyz50:convertLuvToXyz50,rgb:it=>convertXyz50ToRgb(convertLuvToXyz50(it))},fromMode:{xyz50:convertXyz50ToLuv,rgb:it=>convertXyz50ToLuv(convertRgbToXyz50(it))},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:interpolatorLinear,u:interpolatorLinear,v:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},convertLrgbToOklab=({r:it,g:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.cbrt(.412221469470763*it+.5363325372617348*rt+.0514459932675022*lt),dt=Math.cbrt(.2119034958178252*it+.6806995506452344*rt+.1073969535369406*lt),ut=Math.cbrt(.0883024591900564*it+.2817188391361215*rt+.6299787016738222*lt),ft={mode:"oklab",l:.210454268309314*ht+.7936177747023054*dt-.0040720430116193*ut,a:1.9779985324311684*ht-2.42859224204858*dt+.450593709617411*ut,b:.0259040424655478*ht+.7827717124575296*dt-.8086757549230774*ut};return ct!==void 0&&(ft.alpha=ct),ft},convertRgbToOklab=it=>{let rt=convertLrgbToOklab(convertRgbToLrgb(it));return it.r===it.b&&it.b===it.g&&(rt.a=rt.b=0),rt},convertOklabToLrgb=({l:it,a:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=Math.pow(it+.3963377773761749*rt+.2158037573099136*lt,3),dt=Math.pow(it-.1055613458156586*rt-.0638541728258133*lt,3),ut=Math.pow(it-.0894841775298119*rt-1.2914855480194092*lt,3),ft={mode:"lrgb",r:4.076741636075957*ht-3.3077115392580616*dt+.2309699031821044*ut,g:-1.2684379732850317*ht+2.6097573492876887*dt-.3413193760026573*ut,b:-.0041960761386756*ht-.7034186179359362*dt+1.7076146940746117*ut};return ct!==void 0&&(ft.alpha=ct),ft},convertOklabToRgb=it=>convertLrgbToRgb(convertOklabToLrgb(it));function toe(it){const ct=1.170873786407767;return .5*(ct*it-.206+Math.sqrt((ct*it-.206)*(ct*it-.206)+4*.03*ct*it))}function toe_inv(it){return(it*it+.206*it)/(1.170873786407767*(it+.03))}function compute_max_saturation(it,rt){let lt,ct,ht,dt,ut,ft,pt,gt;-1.88170328*it-.80936493*rt>1?(lt=1.19086277,ct=1.76576728,ht=.59662641,dt=.75515197,ut=.56771245,ft=4.0767416621,pt=-3.3077115913,gt=.2309699292):1.81444104*it-1.19445276*rt>1?(lt=.73956515,ct=-.45954404,ht=.08285427,dt=.1254107,ut=.14503204,ft=-1.2684380046,pt=2.6097574011,gt=-.3413193965):(lt=1.35733652,ct=-.00915799,ht=-1.1513021,dt=-.50559606,ut=.00692167,ft=-.0041960863,pt=-.7034186147,gt=1.707614701);let mt=lt+ct*it+ht*rt+dt*it*it+ut*it*rt,xt=.3963377774*it+.2158037573*rt,yt=-.1055613458*it-.0638541728*rt,bt=-.0894841775*it-1.291485548*rt;{let wt=1+mt*xt,Ct=1+mt*yt,vt=1+mt*bt,St=wt*wt*wt,_t=Ct*Ct*Ct,Tt=vt*vt*vt,Et=3*xt*wt*wt,At=3*yt*Ct*Ct,Mt=3*bt*vt*vt,It=6*xt*xt*wt,Lt=6*yt*yt*Ct,jt=6*bt*bt*vt,Ot=ft*St+pt*_t+gt*Tt,Pt=ft*Et+pt*At+gt*Mt,Gt=ft*It+pt*Lt+gt*jt;mt=mt-Ot*Pt/(Pt*Pt-.5*Ot*Gt)}return mt}function find_cusp(it,rt){let lt=compute_max_saturation(it,rt),ct=convertOklabToLrgb({l:1,a:lt*it,b:lt*rt}),ht=Math.cbrt(1/Math.max(ct.r,ct.g,ct.b)),dt=ht*lt;return[ht,dt]}function find_gamut_intersection(it,rt,lt,ct,ht,dt=null){dt||(dt=find_cusp(it,rt));let ut;if((lt-ht)*dt[1]-(dt[0]-ht)*ct<=0)ut=dt[1]*ht/(ct*dt[0]+dt[1]*(ht-lt));else{ut=dt[1]*(ht-1)/(ct*(dt[0]-1)+dt[1]*(ht-lt));{let ft=lt-ht,pt=ct,gt=.3963377774*it+.2158037573*rt,mt=-.1055613458*it-.0638541728*rt,xt=-.0894841775*it-1.291485548*rt,yt=ft+pt*gt,bt=ft+pt*mt,wt=ft+pt*xt;{let Ct=ht*(1-ut)+ut*lt,vt=ut*ct,St=Ct+vt*gt,_t=Ct+vt*mt,Tt=Ct+vt*xt,Et=St*St*St,At=_t*_t*_t,Mt=Tt*Tt*Tt,It=3*yt*St*St,Lt=3*bt*_t*_t,jt=3*wt*Tt*Tt,Ot=6*yt*yt*St,Pt=6*bt*bt*_t,Gt=6*wt*wt*Tt,kt=4.0767416621*Et-3.3077115913*At+.2309699292*Mt-1,Ht=4.0767416621*It-3.3077115913*Lt+.2309699292*jt,Xt=4.0767416621*Ot-3.3077115913*Pt+.2309699292*Gt,zt=Ht/(Ht*Ht-.5*kt*Xt),Nt=-kt*zt,Bt=-1.2684380046*Et+2.6097574011*At-.3413193965*Mt-1,Vt=-1.2684380046*It+2.6097574011*Lt-.3413193965*jt,Yt=-1.2684380046*Ot+2.6097574011*Pt-.3413193965*Gt,Kt=Vt/(Vt*Vt-.5*Bt*Yt),Dt=-Bt*Kt,Rt=-.0041960863*Et-.7034186147*At+1.707614701*Mt-1,Wt=-.0041960863*It-.7034186147*Lt+1.707614701*jt,qt=-.0041960863*Ot-.7034186147*Pt+1.707614701*Gt,Zt=Wt/(Wt*Wt-.5*Rt*qt),Ut=-Rt*Zt;Nt=zt>=0?Nt:1e6,Dt=Kt>=0?Dt:1e6,Ut=Zt>=0?Ut:1e6,ut+=Math.min(Nt,Math.min(Dt,Ut))}}}return ut}function get_ST_max(it,rt,lt=null){lt||(lt=find_cusp(it,rt));let ct=lt[0],ht=lt[1];return[ht/ct,ht/(1-ct)]}function get_Cs(it,rt,lt){let ct=find_cusp(rt,lt),ht=find_gamut_intersection(rt,lt,it,1,it,ct),dt=get_ST_max(rt,lt,ct),ut=.11516993+1/(7.4477897+4.1590124*lt+rt*(-2.19557347+1.75198401*lt+rt*(-2.13704948-10.02301043*lt+rt*(-4.24894561+5.38770819*lt+4.69891013*rt)))),ft=.11239642+1/(1.6132032-.68124379*lt+rt*(.40370612+.90148123*lt+rt*(-.27087943+.6122399*lt+rt*(.00299215-.45399568*lt-.14661872*rt)))),pt=ht/Math.min(it*dt[0],(1-it)*dt[1]),gt=it*ut,mt=(1-it)*ft,xt=.9*pt*Math.sqrt(Math.sqrt(1/(1/(gt*gt*gt*gt)+1/(mt*mt*mt*mt))));return gt=it*.4,mt=(1-it)*.8,[Math.sqrt(1/(1/(gt*gt)+1/(mt*mt))),xt,ht]}function convertOklabToOkhsl(it){const rt=it.l!==void 0?it.l:0,lt=it.a!==void 0?it.a:0,ct=it.b!==void 0?it.b:0,ht={mode:"okhsl",l:toe(rt)};it.alpha!==void 0&&(ht.alpha=it.alpha);let dt=Math.sqrt(lt*lt+ct*ct);if(!dt)return ht.s=0,ht;let[ut,ft,pt]=get_Cs(rt,lt/dt,ct/dt),gt;if(dt<ft){let mt=0,xt=.8*ut,yt=1-xt/ft;gt=(dt-mt)/(xt+yt*(dt-mt))*.8}else{let mt=ft,xt=.2*ft*ft*1.25*1.25/ut,yt=1-xt/(pt-ft);gt=.8+.2*((dt-mt)/(xt+yt*(dt-mt)))}return gt&&(ht.s=gt,ht.h=normalizeHue(Math.atan2(ct,lt)*180/Math.PI)),ht}function convertOkhslToOklab(it){let rt=it.h!==void 0?it.h:0,lt=it.s!==void 0?it.s:0,ct=it.l!==void 0?it.l:0;const ht={mode:"oklab",l:toe_inv(ct)};if(it.alpha!==void 0&&(ht.alpha=it.alpha),!lt||ct===1)return ht.a=ht.b=0,ht;let dt=Math.cos(rt/180*Math.PI),ut=Math.sin(rt/180*Math.PI),[ft,pt,gt]=get_Cs(ht.l,dt,ut),mt,xt,yt,bt;lt<.8?(mt=1.25*lt,xt=0,yt=.8*ft,bt=1-yt/pt):(mt=5*(lt-.8),xt=pt,yt=.2*pt*pt*1.25*1.25/ft,bt=1-yt/(gt-pt));let wt=xt+mt*yt/(1-bt*mt);return ht.a=wt*dt,ht.b=wt*ut,ht}const modeOkhsl=te(Ft({},definition$l),{mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:convertOklabToOkhsl,rgb:it=>convertOklabToOkhsl(convertRgbToOklab(it))},toMode:{oklab:convertOkhslToOklab,rgb:it=>convertOklabToRgb(convertOkhslToOklab(it))}});function convertOklabToOkhsv(it){let rt=it.l!==void 0?it.l:0,lt=it.a!==void 0?it.a:0,ct=it.b!==void 0?it.b:0,ht=Math.sqrt(lt*lt+ct*ct),dt=ht?lt/ht:1,ut=ht?ct/ht:1,[ft,pt]=get_ST_max(dt,ut),gt=.5,mt=1-gt/ft,xt=pt/(ht+rt*pt),yt=xt*rt,bt=xt*ht,wt=toe_inv(yt),Ct=bt*wt/yt,vt=convertOklabToLrgb({l:wt,a:dt*Ct,b:ut*Ct}),St=Math.cbrt(1/Math.max(vt.r,vt.g,vt.b,0));rt=rt/St,ht=ht/St*toe(rt)/rt,rt=toe(rt);const _t={mode:"okhsv",s:ht?(gt+pt)*bt/(pt*gt+pt*mt*bt):0,v:rt?rt/yt:0};return _t.s&&(_t.h=normalizeHue(Math.atan2(ct,lt)*180/Math.PI)),it.alpha!==void 0&&(_t.alpha=it.alpha),_t}function convertOkhsvToOklab(it){const rt={mode:"oklab"};it.alpha!==void 0&&(rt.alpha=it.alpha);const lt=it.h!==void 0?it.h:0,ct=it.s!==void 0?it.s:0,ht=it.v!==void 0?it.v:0,dt=Math.cos(lt/180*Math.PI),ut=Math.sin(lt/180*Math.PI),[ft,pt]=get_ST_max(dt,ut),gt=.5,mt=1-gt/ft,xt=1-ct*gt/(gt+pt-pt*mt*ct),yt=ct*pt*gt/(gt+pt-pt*mt*ct),bt=toe_inv(xt),wt=yt*bt/xt,Ct=convertOklabToLrgb({l:bt,a:dt*wt,b:ut*wt}),vt=Math.cbrt(1/Math.max(Ct.r,Ct.g,Ct.b,0)),St=toe_inv(ht*xt),_t=yt*St/xt;return rt.l=St*vt,rt.a=_t*dt*vt,rt.b=_t*ut*vt,rt}const modeOkhsv=te(Ft({},definition$k),{mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:convertOklabToOkhsv,rgb:it=>convertOklabToOkhsv(convertRgbToOklab(it))},toMode:{oklab:convertOkhsvToOklab,rgb:it=>convertOklabToRgb(convertOkhsvToOklab(it))}});function parseOklab(it,rt){if(!rt||rt[0]!=="oklab")return;const lt={mode:"oklab"},[,ct,ht,dt,ut]=rt;if(!(ct.type===Tok.Hue||ht.type===Tok.Hue||dt.type===Tok.Hue))return ct.type!==Tok.None&&(lt.l=Math.min(Math.max(0,ct.type===Tok.Number?ct.value:ct.value/100),1)),ht.type!==Tok.None&&(lt.a=ht.type===Tok.Number?ht.value:ht.value*.4/100),dt.type!==Tok.None&&(lt.b=dt.type===Tok.Number?dt.value:dt.value*.4/100),ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const definition$8=te(Ft({},definition$f),{mode:"oklab",toMode:{lrgb:convertOklabToLrgb,rgb:convertOklabToRgb},fromMode:{lrgb:convertLrgbToOklab,rgb:convertRgbToOklab},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[parseOklab],serialize:it=>`oklab(${it.l!==void 0?it.l:"none"} ${it.a!==void 0?it.a:"none"} ${it.b!==void 0?it.b:"none"}${it.alpha<1?` / ${it.alpha}`:""})`});function parseOklch(it,rt){if(!rt||rt[0]!=="oklch")return;const lt={mode:"oklch"},[,ct,ht,dt,ut]=rt;if(ct.type!==Tok.None){if(ct.type===Tok.Hue)return;lt.l=Math.min(Math.max(0,ct.type===Tok.Number?ct.value:ct.value/100),1)}if(ht.type!==Tok.None&&(lt.c=Math.max(0,ht.type===Tok.Number?ht.value:ht.value*.4/100)),dt.type!==Tok.None){if(dt.type===Tok.Percentage)return;lt.h=dt.value}return ut.type!==Tok.None&&(lt.alpha=Math.min(1,Math.max(0,ut.type===Tok.Number?ut.value:ut.value/100))),lt}const definition$7=te(Ft({},definition$d),{mode:"oklch",toMode:{oklab:it=>convertLchToLab(it,"oklab"),rgb:it=>convertOklabToRgb(convertLchToLab(it,"oklab"))},fromMode:{rgb:it=>convertLabToLch(convertRgbToOklab(it),"oklch"),oklab:it=>convertLabToLch(it,"oklch")},parse:[parseOklch],serialize:it=>`oklch(${it.l!==void 0?it.l:"none"} ${it.c!==void 0?it.c:"none"} ${it.h!==void 0?it.h:"none"}${it.alpha<1?` / ${it.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}}),convertP3ToXyz65=it=>{let{r:rt,g:lt,b:ct,alpha:ht}=convertRgbToLrgb(it),dt={mode:"xyz65",x:.486570948648216*rt+.265667693169093*lt+.1982172852343625*ct,y:.2289745640697487*rt+.6917385218365062*lt+.079286914093745*ct,z:0*rt+.0451133818589026*lt+1.043944368900976*ct};return ht!==void 0&&(dt.alpha=ht),dt},convertXyz65ToP3=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht=convertLrgbToRgb({r:it*2.4934969119414263-rt*.9313836179191242-.402710784450717*lt,g:it*-.8294889695615749+rt*1.7626640603183465+.0236246858419436*lt,b:it*.0358458302437845-rt*.0761723892680418+.9568845240076871*lt},"p3");return ct!==void 0&&(ht.alpha=ct),ht},definition$6=te(Ft({},definition$r),{mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:it=>convertXyz65ToP3(convertRgbToXyz65(it)),xyz65:convertXyz65ToP3},toMode:{rgb:it=>convertXyz65ToRgb(convertP3ToXyz65(it)),xyz65:convertP3ToXyz65}}),gamma$2=it=>{let rt=Math.abs(it);return rt>=1/512?Math.sign(it)*Math.pow(rt,1/1.8):16*it},convertXyz50ToProphoto=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht={mode:"prophoto",r:gamma$2(it*1.3457868816471585-rt*.2555720873797946-.0511018649755453*lt),g:gamma$2(it*-.5446307051249019+rt*1.5082477428451466+.0205274474364214*lt),b:gamma$2(it*0+rt*0+1.2119675456389452*lt)};return ct!==void 0&&(ht.alpha=ct),ht},linearize$1=(it=0)=>{let rt=Math.abs(it);return rt>=16/512?Math.sign(it)*Math.pow(rt,1.8):it/16},convertProphotoToXyz50=it=>{let rt=linearize$1(it.r),lt=linearize$1(it.g),ct=linearize$1(it.b),ht={mode:"xyz50",x:.7977666449006423*rt+.1351812974005331*lt+.0313477341283922*ct,y:.2880748288194013*rt+.7118352342418731*lt+899369387256e-16*ct,z:0*rt+0*lt+.8251046025104602*ct};return it.alpha!==void 0&&(ht.alpha=it.alpha),ht},definition$5=te(Ft({},definition$r),{mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:convertXyz50ToProphoto,rgb:it=>convertXyz50ToProphoto(convertRgbToXyz50(it))},toMode:{xyz50:convertProphotoToXyz50,rgb:it=>convertXyz50ToRgb(convertProphotoToXyz50(it))}}),α$1=1.09929682680944,β$1=.018053968510807,gamma$1=it=>{const rt=Math.abs(it);return rt>β$1?(Math.sign(it)||1)*(α$1*Math.pow(rt,.45)-(α$1-1)):4.5*it},convertXyz65ToRec2020=({x:it,y:rt,z:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);let ht={mode:"rec2020",r:gamma$1(it*1.7166511879712683-rt*.3556707837763925-.2533662813736599*lt),g:gamma$1(it*-.6666843518324893+rt*1.6164812366349395+.0157685458139111*lt),b:gamma$1(it*.0176398574453108-rt*.0427706132578085+.9421031212354739*lt)};return ct!==void 0&&(ht.alpha=ct),ht},α=1.09929682680944,β=.018053968510807,linearize=(it=0)=>{let rt=Math.abs(it);return rt<β*4.5?it/4.5:(Math.sign(it)||1)*Math.pow((rt+α-1)/α,1/.45)},convertRec2020ToXyz65=it=>{let rt=linearize(it.r),lt=linearize(it.g),ct=linearize(it.b),ht={mode:"xyz65",x:.6369580483012911*rt+.1446169035862083*lt+.1688809751641721*ct,y:.262700212011267*rt+.6779980715188708*lt+.059301716469862*ct,z:0*rt+.0280726930490874*lt+1.0609850577107909*ct};return it.alpha!==void 0&&(ht.alpha=it.alpha),ht},definition$4=te(Ft({},definition$r),{mode:"rec2020",fromMode:{xyz65:convertXyz65ToRec2020,rgb:it=>convertXyz65ToRec2020(convertRgbToXyz65(it))},toMode:{xyz65:convertRec2020ToXyz65,rgb:it=>convertXyz65ToRgb(convertRec2020ToXyz65(it))},parse:["rec2020"],serialize:"rec2020"}),bias=.0037930732552754493,bias_cbrt=Math.cbrt(bias),transfer$1=it=>Math.cbrt(it)-bias_cbrt,convertRgbToXyb=it=>{const{r:rt,g:lt,b:ct,alpha:ht}=convertRgbToLrgb(it),dt=transfer$1(.3*rt+.622*lt+.078*ct+bias),ut=transfer$1(.23*rt+.692*lt+.078*ct+bias),ft=transfer$1(.2434226892454782*rt+.2047674442449682*lt+.5518098665095535*ct+bias),pt={mode:"xyb",x:(dt-ut)/2,y:(dt+ut)/2,b:ft-(dt+ut)/2};return ht!==void 0&&(pt.alpha=ht),pt},transfer=it=>Math.pow(it+bias_cbrt,3),convertXybToRgb=({x:it,y:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);const ht=transfer(it+rt)-bias,dt=transfer(rt-it)-bias,ut=transfer(lt+rt)-bias,ft=convertLrgbToRgb({r:11.031566904639861*ht-9.866943908131562*dt-.16462299650829934*ut,g:-3.2541473810744237*ht+4.418770377582723*dt-.16462299650829934*ut,b:-3.6588512867136815*ht+2.7129230459360922*dt+1.9459282407775895*ut});return ct!==void 0&&(ft.alpha=ct),ft},definition$3={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:convertXybToRgb},fromMode:{rgb:convertRgbToXyb},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:interpolatorLinear,y:interpolatorLinear,b:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},definition$2={mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:convertXyz50ToRgb,lab:convertXyz50ToLab},fromMode:{rgb:convertRgbToXyz50,lab:convertLabToXyz50},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:interpolatorLinear,y:interpolatorLinear,z:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},convertXyz65ToXyz50=it=>{let{x:rt,y:lt,z:ct,alpha:ht}=it;rt===void 0&&(rt=0),lt===void 0&&(lt=0),ct===void 0&&(ct=0);let dt={mode:"xyz50",x:1.0479298208405488*rt+.0229467933410191*lt-.0501922295431356*ct,y:.0296278156881593*rt+.990434484573249*lt-.0170738250293851*ct,z:-.0092430581525912*rt+.0150551448965779*lt+.7518742899580008*ct};return ht!==void 0&&(dt.alpha=ht),dt},convertXyz50ToXyz65=it=>{let{x:rt,y:lt,z:ct,alpha:ht}=it;rt===void 0&&(rt=0),lt===void 0&&(lt=0),ct===void 0&&(ct=0);let dt={mode:"xyz65",x:.9554734527042182*rt-.0230985368742614*lt+.0632593086610217*ct,y:-.0283697069632081*rt+1.0099954580058226*lt+.021041398966943*ct,z:.0123140016883199*rt-.0205076964334779*lt+1.3303659366080753*ct};return ht!==void 0&&(dt.alpha=ht),dt},definition$1={mode:"xyz65",toMode:{rgb:convertXyz65ToRgb,xyz50:convertXyz65ToXyz50},fromMode:{rgb:convertRgbToXyz65,xyz50:convertXyz50ToXyz65},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:interpolatorLinear,y:interpolatorLinear,z:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},convertRgbToYiq=({r:it,g:rt,b:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);const ht={mode:"yiq",y:.29889531*it+.58662247*rt+.11448223*lt,i:.59597799*it-.2741761*rt-.32180189*lt,q:.21147017*it-.52261711*rt+.31114694*lt};return ct!==void 0&&(ht.alpha=ct),ht},convertYiqToRgb=({y:it,i:rt,q:lt,alpha:ct})=>{it===void 0&&(it=0),rt===void 0&&(rt=0),lt===void 0&&(lt=0);const ht={mode:"rgb",r:it+.95608445*rt+.6208885*lt,g:it-.27137664*rt-.6486059*lt,b:it-1.10561724*rt+1.70250126*lt};return ct!==void 0&&(ht.alpha=ct),ht},definition={mode:"yiq",toMode:{rgb:convertYiqToRgb},fromMode:{rgb:convertRgbToYiq},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:interpolatorLinear,i:interpolatorLinear,q:interpolatorLinear,alpha:{use:interpolatorLinear,fixup:fixupAlpha}}},clamp=it=>Math.max(0,Math.min(1,it||0)),fixup=it=>Math.round(clamp(it)*255),rgb$1=converter("rgb"),serializeHex=it=>{if(it===void 0)return;let rt=fixup(it.r),lt=fixup(it.g),ct=fixup(it.b);return"#"+(1<<24|rt<<16|lt<<8|ct).toString(16).slice(1)},serializeHex8=it=>{if(it===void 0)return;let rt=fixup(it.alpha!==void 0?it.alpha:1);return serializeHex(it)+(256|rt).toString(16).slice(1)},formatHex=it=>serializeHex(rgb$1(it)),formatHex8=it=>serializeHex8(rgb$1(it));function luminance(it){let rt=converter("lrgb")(it);return .2126*rt.r+.7152*rt.g+.0722*rt.b}function contrast(it,rt){let lt=luminance(it),ct=luminance(rt);return(Math.max(lt,ct)+.05)/(Math.min(lt,ct)+.05)}useMode(definition$q);useMode(definition$p);useMode(definition$o);useMode(definition$n);useMode(definition$m);useMode(definition$l);useMode(definition$k);useMode(definition$j);useMode(definition$i);useMode(definition$h);useMode(definition$g);useMode(definition$f);useMode(definition$e);useMode(definition$d);useMode(definition$c);useMode(definition$b);useMode(definition$a);useMode(definition$9);useMode(modeOkhsl);useMode(modeOkhsv);useMode(definition$8);const oklch=useMode(definition$7);useMode(definition$6);useMode(definition$5);useMode(definition$4);useMode(definition$r);useMode(definition$3);useMode(definition$2);useMode(definition$1);useMode(definition);function hasColor(it){if(!it)return!1;const rt=it.trim().toLowerCase();return!(rt==="none"||rt==="transparent"||rt==="")}function isDarkColor(it){const rt=parse$2(it);return rt?luminance(rt)<.5:!1}function getDatumByIndexes(it,rt){if(rt.length===0)return{};const lt=Array.isArray(it)?it[rt[0]]:it.items[rt[0]];if(rt.length===1)return lt;const ct=rt.slice(1).map(ht=>`children[${ht}]`).join(".");return get$2(lt,ct)}function isNonNullableParsedDesignsOptions(it){const{structure:rt,item:lt,items:ct}=it;return!(!rt||!lt||ct.some(ht=>!ht))}const COMPONENT_ROLE="infographic-component",ICON_SERVICE_URL="https://www.weavefox.cn/api/open/v1/icon",GENERIC_FONT_FAMILIES=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","-apple-system","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function splitFontFamily(it){const rt=[];let lt="",ct=null;const ht=()=>{const dt=lt.trim();dt&&rt.push(dt),lt=""};for(let dt=0;dt<it.length;dt+=1){const ut=it[dt];if(ct){lt+=ut,ut===ct&&(ct=null);continue}if(ut==='"'||ut==="'"){ct=ut,lt+=ut;continue}if(ut===","){ht();continue}lt+=ut}return ht(),rt}function stripWrappingQuotes(it){const rt=it.trim();return rt.startsWith('"')&&rt.endsWith('"')||rt.startsWith("'")&&rt.endsWith("'")?rt.slice(1,-1):rt}function isWrappedInQuotes(it){const rt=it.trim();return rt.startsWith('"')&&rt.endsWith('"')||rt.startsWith("'")&&rt.endsWith("'")}function needsQuoting(it){return/^\d/.test(it)||/\s/.test(it)}function encodeSingleFontFamily(it){const rt=it.trim();if(!rt||isWrappedInQuotes(rt)||GENERIC_FONT_FAMILIES.has(rt.toLowerCase())||!needsQuoting(rt))return rt;const lt=rt.includes('"')&&!rt.includes("'")?"'":'"';return`${lt}${rt}${lt}`}function decodeFontFamily(it){const rt=splitFontFamily(it);return rt.length?rt.length===1?stripWrappingQuotes(rt[0]):rt.map(lt=>stripWrappingQuotes(lt)).join(", "):""}function encodeFontFamily(it){const rt=splitFontFamily(it);return rt.length?rt.map(lt=>encodeSingleFontFamily(lt)).join(", "):it.trim()}const FontWeightNameMap={100:"thin",hairline:"thin",thin:"thin",200:"extralight",ultralight:"extralight",extralight:"extralight",300:"light",light:"light",400:"regular",normal:"regular",regular:"regular",500:"medium",medium:"medium",600:"semibold",demibold:"semibold",semibold:"semibold",700:"bold",bold:"bold",800:"extrabold",ultrabold:"extrabold",extrabold:"extrabold",900:"black",heavy:"black",black:"black",950:"extrablack",ultrablack:"extrablack",extrablack:"extrablack"};function normalizeFontWeightName(it){const rt=String(it).toLowerCase();return FontWeightNameMap[rt]||"regular"}function createElement(it,rt={}){const lt=document.createElementNS("http://www.w3.org/2000/svg",it);return setAttributes(lt,rt),lt}function parseSVG(it){const lt=new DOMParser().parseFromString(it,"image/svg+xml");if(lt.querySelector("parsererror"))throw new Error("Invalid SVG string");return lt.documentElement}function setAttributes(it,rt){Object.entries(rt).forEach(([lt,ct])=>{ct==null?it.removeAttribute(lt):it.setAttribute(lt,ct)})}function getAttributes(it,rt,lt=!0){return rt.reduce((ct,ht)=>{const dt=it.getAttribute(ht);return(!lt||dt!==null&&dt!==""&&dt!==void 0)&&(ct[ht]=dt),ct},{})}function removeAttributes(it,rt){rt.forEach(lt=>{it.removeAttribute(lt)})}function traverse(it,rt){if(rt(it)===!1)return;Array.from(it.children).forEach(ct=>{traverse(ct,rt)})}function getOrCreateDefs(it,rt="infographic-defs"){const lt=rt?`defs#${rt}`:"defs",ct=it.querySelector(lt);if(ct)return ct;const ht=createElement("defs");return rt&&(ht.id=rt),it.prepend(ht),ht}function getTextEntity(it){return isForeignObjectElement(it)?it.querySelector("span"):null}function createTextElement(it,rt){const lt=document.createElement("span"),ct=createElement("foreignObject",{overflow:"visible"});return ct.appendChild(lt),updateTextElement(ct,{textContent:it,attributes:rt}),ct}function updateTextElement(it,rt){const{textContent:lt,attributes:ct}=rt;if(lt!==void 0&&setTextContent(it,lt),!ct)return;const ht=getTextEntity(it);let{width:dt,height:ut}=ct;const ft={};if(ht){if(Object.assign(ht.style,getTextStyle(ct)),!dt||!ut){const bt=measureTextSpan(ht);!dt&&!it.hasAttribute("width")&&(dt=String(bt.width)),!ut&&!it.hasAttribute("height")&&(ut=String(bt.height))}const{"data-horizontal-align":xt,"data-vertical-align":yt}=ct;Object.assign(ht.style,alignToFlex(xt,yt))}const{id:pt,x:gt,y:mt}=ct;pt&&(ft.id=pt),gt!==void 0&&(ft.x=String(gt)),mt!==void 0&&(ft.y=String(mt)),dt!==void 0&&(ft.width=String(dt)),ut!==void 0&&(ft.height=String(ut)),setAttributes(it,ft)}function alignToFlex(it,rt){const lt={width:"100%",height:"100%",display:"flex",flexWrap:"wrap",wordBreak:"break-word",whiteSpace:"pre-wrap"};switch(it){case"LEFT":lt.textAlign="left",lt.justifyContent="flex-start";break;case"CENTER":lt.textAlign="center",lt.justifyContent="center";break;case"RIGHT":lt.textAlign="right",lt.justifyContent="flex-end";break}switch(rt){case"TOP":lt.alignContent="flex-start",lt.alignItems="flex-start";break;case"MIDDLE":lt.alignContent="center",lt.alignItems="center";break;case"BOTTOM":lt.alignContent="flex-end",lt.alignItems="flex-end";break}return lt}function getTextStyle(it){const St=it,{x:rt,y:lt,width:ct,height:ht,["data-horizontal-align"]:dt,["data-vertical-align"]:ut,["font-size"]:ft,["letter-spacing"]:pt,["line-height"]:gt,fill:mt,["stroke-width"]:xt,["text-anchor"]:yt,["dominant-baseline"]:bt,["font-family"]:wt}=St,Ct=Pe(St,["x","y","width","height","data-horizontal-align","data-vertical-align","font-size","letter-spacing","line-height","fill","stroke-width","text-anchor","dominant-baseline","font-family"]),vt={overflow:"visible"};return mt&&(vt.color=mt),Object.entries(Ct).forEach(([_t,Tt])=>{vt[camelCase(_t)]=Tt}),ft&&(vt.fontSize=`${ft}px`),gt&&(vt.lineHeight=typeof gt=="string"&&gt.endsWith("px")?gt:+gt),pt&&(vt.letterSpacing=`${pt}px`),xt&&(vt.strokeWidth=`${xt}px`),vt.fontFamily=wt?encodeFontFamily(wt):wt||"",vt}function measureTextSpan(it){const rt=it.parentNode;it.style.visibility="hidden",document.body.appendChild(it);const lt=it.getBoundingClientRect();return rt?rt.appendChild(it):document.body.removeChild(it),it.style.visibility="visible",lt}function getTextContent(it){var rt;return((rt=getTextEntity(it))==null?void 0:rt.innerText)||""}function setTextContent(it,rt){const lt=getTextEntity(it);lt&&(lt.innerText=rt)}function getTextElementProps(it){const rt=getTextEntity(it);if(!rt)return{};const{color:lt,fontSize:ct,fontFamily:ht,justifyContent:dt,alignContent:ut,fontWeight:ft}=rt.style,[pt,gt]=flexToAlign(dt,ut),mt={"data-horizontal-align":pt,"data-vertical-align":gt};return ht&&(mt["font-family"]=decodeFontFamily(ht)),ft&&(mt["font-weight"]=ft),ct&&(mt["font-size"]=String(parseInt(ct))),lt&&(mt.fill=lt),{attributes:mt,textContent:getTextContent(it)}}function flexToAlign(it,rt){let lt="LEFT",ct="TOP";switch(it){case"flex-start":lt="LEFT";break;case"center":lt="CENTER";break;case"flex-end":lt="RIGHT";break}switch(rt){case"flex-start":ct="TOP";break;case"center":ct="MIDDLE";break;case"flex-end":ct="BOTTOM";break}return[lt,ct]}const is=(it,rt)=>{var lt;return((lt=it==null?void 0:it.dataset)==null?void 0:lt.elementType)===rt},isTitle=it=>is(it,"title"),isDesc=it=>is(it,"desc"),isShape=it=>is(it,"shape"),isShapesGroup=it=>is(it,"shapes-group"),isIllus=it=>is(it,"illus"),isText=it=>it instanceof SVGElement&&it.tagName==="text",isGroup=it=>it instanceof SVGElement&&it.tagName==="g",isItemIcon=it=>is(it,"item-icon"),isItemIconGroup=it=>is(it,"item-icon-group"),isItemLabel=it=>is(it,"item-label"),isItemDesc=it=>is(it,"item-desc"),isItemValue=it=>is(it,"item-value"),isItemIllus=it=>is(it,"item-illus"),isEditArea=it=>is(it,"edit-area"),isBtnsGroup=it=>is(it,"btns-group"),isRoughElement=it=>is(it,"rough-element"),isRoughVolume=it=>is(it,"rough-volume");function isForeignObjectElement(it){return it.tagName==="foreignObject"}function isTextEntity(it){return it.tagName==="SPAN"}function isEditableText(it){const rt=getElementRole(it);return["title","desc","item-label","item-desc"].includes(rt)}function isEditingText(it){if(!it||!isEditableText(it))return!1;const rt=getTextEntity(it);return rt?rt.hasAttribute("contenteditable"):!1}function isGeometryElement(it){const rt=it.tagName.toLowerCase();return["rect","circle","ellipse","line","polygon","polyline","path"].includes(rt)}function isIconElement(it){return isItemIcon(it)||isItemIconGroup(it)}function isInfographicComponent(it){let rt=it;for(;rt;){if(getElementByRole(rt,COMPONENT_ROLE))return!0;rt=rt.parentElement}return!1}function setElementRole(it,rt){it.setAttribute("data-element-type",rt)}function getElementByRole(it,rt){return it.querySelector(`[data-element-type="${rt}"]`)}function getElementRole(it){return isIconElement(it)?"item-icon":it.getAttribute("data-element-type")||"unknown"}function flru(it){var rt,lt,ct,ht=it;function dt(ft,pt){++rt>ht&&(ct=lt,ut(1),++rt),lt[ft]=pt}function ut(ft){rt=0,lt=Object.create(null),ft||(ct=Object.create(null))}return ut(),{clear:ut,has:function(ft){return lt[ft]!==void 0||ct[ft]!==void 0},get:function(ft){var pt=lt[ft];if(pt!==void 0)return pt;if((pt=ct[ft])!==void 0)return dt(ft,pt),pt},set:function(ft,pt){lt[ft]!==void 0?lt[ft]=pt:dt(ft,pt)}}}const nativeFetch=globalThis.fetch,CACHE_MAX_ENTRIES=1024,responseCache=flru(CACHE_MAX_ENTRIES),pendingRequests=new Map;function buildHeadersKey(it){const rt=Array.from(it.headers.entries());return rt.length===0?"":(rt.sort(([lt],[ct])=>lt.toLowerCase().localeCompare(ct.toLowerCase())),rt.map(([lt,ct])=>`${lt.toLowerCase()}:${ct}`).join("|"))}function buildCacheKey(it){const rt=buildHeadersKey(it);return rt?`${it.method}:${it.url}:${rt}`:`${it.method}:${it.url}`}function buildResponse(it){return new Response(it.body.slice(0),it.init)}function fetchAndCache(it,rt){return ve(this,null,function*(){try{const lt=yield nativeFetch(it),ht={body:yield lt.arrayBuffer(),init:{status:lt.status,statusText:lt.statusText,headers:Array.from(lt.headers.entries())}};return lt.ok&&responseCache.set(rt,ht),ht}finally{pendingRequests.delete(rt)}})}function fetchWithCache(it,rt){return ve(this,null,function*(){const lt=new Request(it,rt);if(lt.method!=="GET")return nativeFetch(lt);const ct=buildCacheKey(lt);if(responseCache.has(ct))return buildResponse(responseCache.get(ct));let ht=pendingRequests.get(ct);ht||(ht=fetchAndCache(lt,ct),pendingRequests.set(ct,ht));const dt=yield ht;return buildResponse(dt)})}function getTypes(it,rt={title:"信息图标题",desc:"信息图描述",items:"信息图的内容项",label:"项目标签文本",value:"项目数值内容",icon:"项目图标",illus:"项目插图",children:"子级项目（多层结构）"}){const{structure:lt,items:ct}=it,ht=[],dt=pt=>"  ".repeat(pt);function ut(pt,gt,mt){const xt=rt[pt];return xt?`${dt(mt)}/** ${xt} */
${dt(mt)}${pt}: ${gt};`:`${dt(mt)}${pt}: ${gt};`}function ft(pt,gt){const mt=ct[pt],xt=[];for(const yt of mt){const bt=yt==="value"?"number":"string";xt.push(ut(yt,bt,gt+1))}return ct[pt+1]&&xt.push(ut("children",`Array<${ft(pt+1,gt+1)}>`,gt+1)),`{
${xt.join(`
`)}
${dt(gt)}}`}return ht.push("type InfographicType = {"),lt.includes("title")&&(ht.push(ut("title","string",1)),ht.push(ut("desc","string",1))),lt.includes("item")&&ct.length>0&&ht.push(ut("items",`Array<${ft(0,1)}>`,1)),ht.push("}"),ht.join(`
`)}function getSimpleHash(it){let rt=0;if(it.length===0)return rt.toString();for(let lt=0;lt<it.length;lt++){const ct=it.charCodeAt(lt);rt=(rt<<5)-rt+ct,rt=rt&rt}return Math.abs(rt).toString()}const SVG_LOAD_PROMISE_MAP=new WeakMap;function getSvgLoadPromises(it){const rt=SVG_LOAD_PROMISE_MAP.get(it);return rt?Array.from(rt.values()):[]}function getSvgLoadPromise(it,rt){var lt;return(lt=SVG_LOAD_PROMISE_MAP.get(it))==null?void 0:lt.get(rt)}function trackSvgLoadPromise(it,rt,lt){let ct=SVG_LOAD_PROMISE_MAP.get(it);return ct||(ct=new Map,SVG_LOAD_PROMISE_MAP.set(it,ct)),ct.set(rt,lt),lt.finally(()=>{const ht=SVG_LOAD_PROMISE_MAP.get(it);ht&&(ht.get(rt)===lt&&ht.delete(rt),ht.size===0&&SVG_LOAD_PROMISE_MAP.delete(it))}),lt}function waitForSvgLoads(it){return ve(this,null,function*(){for(yield Promise.resolve();;){const rt=getSvgLoadPromises(it);if(!rt.length)break;yield Promise.allSettled(rt),yield Promise.resolve()}})}function isImageBase64Resource(it){return it.startsWith("data:")}function loadImageBase64Resource(it){return ve(this,null,function*(){var pt;if(!it||!isImageBase64Resource(it))return null;const rt=(pt=it.match(/^data:([^;]+)/))==null?void 0:pt[1];if(!rt)return null;const lt=()=>new Promise((gt,mt)=>{const xt=new Image;xt.onload=()=>{const yt=xt.naturalWidth,bt=xt.naturalHeight,wt=document.createElement("canvas"),Ct=wt.getContext("2d");if(!Ct)return gt({width:yt,height:bt,hasAlpha:!1});if(["image/jpeg","image/jpg","image/webp","image/gif"].includes(rt))return gt({width:yt,height:bt,hasAlpha:!1});wt.width=yt,wt.height=bt,Ct.drawImage(xt,0,0);let vt=!1;const St=10;for(let _t=0;_t<yt&&!vt;_t+=St)for(let Tt=0;Tt<bt;Tt+=St)if(Ct.getImageData(_t,Tt,1,1).data[3]<255){vt=!0;break}gt({width:yt,height:bt,hasAlpha:vt})},xt.onerror=()=>mt(new Error("Failed to analysis image")),xt.src=it}),{width:ct,height:ht,hasAlpha:dt}=yield lt(),ft=(()=>{if(dt||rt!=null&&rt.includes("image/gif")||rt!=null&&rt.includes("image/svg")||Math.min(ct,ht)<=200)return"xMidYMid meet";const mt=ct/ht;return mt>=.6&&mt<=1.67||mt<.3||mt>3.33?"xMidYMid meet":"xMidYMid slice"})();return parseSVG(`
<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${ct} ${ht}" preserveAspectRatio="${ft}">
  <image href="${it}" width="${ct}" height="${ht}" />
</symbol>`)})}function isSVGResource(it){const rt=it.trim();return/^(?:<\?xml[^>]*>\s*)?<svg[\s>]/i.test(rt)||rt.startsWith("<symbol")}function loadSVGResource(it){if(!it||!isSVGResource(it))return null;const rt=it.replace(/<svg(?=[\s/>])/i,"<symbol").replace(/<\/svg>/i,"</symbol>");return parseSVG(rt)}function isRemoteResource(it){try{return!!new URL(it)}catch(rt){return!1}}function shouldParseAsSVG(it,rt){return!!(it.toLowerCase().includes("image/svg")||!it&&rt==="svg")}function loadRemoteResource(it,rt){return ve(this,null,function*(){if(!it||!isRemoteResource(it))return null;const lt=yield fetchWithCache(it);if(!lt.ok)throw new Error("Failed to load resource");const ct=lt.headers.get("Content-Type")||"";if(shouldParseAsSVG(ct,rt)){const ut=yield lt.text();return loadSVGResource(ut)}const ht=yield lt.blob(),dt=yield blobToBase64(ht);return loadImageBase64Resource(dt)})}function blobToBase64(it){return new Promise((rt,lt)=>{const ct=new FileReader;ct.onloadend=()=>{rt(ct.result)},ct.onerror=lt,ct.readAsDataURL(it)})}const queryIcon=it=>ve(null,null,function*(){var rt;try{const lt=new URLSearchParams({text:it,topK:"1"}),ct=`${ICON_SERVICE_URL}?${lt.toString()}`,ht=yield fetchWithCache(ct);if(!ht.ok)return null;const dt=yield ht.json();return!(dt!=null&&dt.status)||!Array.isArray((rt=dt.data)==null?void 0:rt.data)?null:dt.data.data[0]||null}catch(lt){return console.error(`Failed to query icon for "${it}":`,lt),null}});function isDataURI(it){return it.startsWith("data:")}function looksLikeSVG$1(it){const rt=it.trim();return rt.startsWith("<svg")||rt.startsWith("<symbol")}function loadSearchResource(it,rt){return ve(this,null,function*(){var ct;if(!it)return null;const lt=yield queryIcon(it);if(!lt)return null;if(looksLikeSVG$1(lt))return loadSVGResource(lt);if(isDataURI(lt)){const ht=((ct=lt.match(/^data:([^;]+)/))==null?void 0:ct[1])||"",dt=lt.includes(";base64,");if(ht==="image/svg+xml"&&!dt){const ut=lt.indexOf(","),ft=ut>=0?lt.slice(ut+1):lt;return loadSVGResource(ft)}return loadImageBase64Resource(lt)}return loadRemoteResource(lt,rt)})}let customResourceLoader=null;function getCustomResourceLoader(){return customResourceLoader}function parseDataURI(it){if(!it.startsWith("data:"))return null;const rt=it.indexOf(",");if(rt===-1)return null;const lt=it.slice(5,rt),ct=it.slice(rt+1),ht=lt.split(";"),dt=ht[0],ut=ht.includes("base64");return dt==="image/svg+xml"&&!ut?{source:"inline",format:"svg",encoding:"raw",data:ct.startsWith("%3C")?decodeURIComponent(ct):ct}:dt.startsWith("image/")?{source:"inline",format:dt==="image/svg+xml"?"svg":"image",encoding:ut?"base64":"data-uri",data:it}:null}const KNOWN_FORMATS=new Set(["svg","png","jpg","jpeg","webp","gif"]);function looksLikeSVG(it){const rt=it.trim();return rt.startsWith("<svg")||rt.startsWith("<symbol")}function inferFormatFromUrl(it){const rt=it.toLowerCase();if(rt.endsWith(".svg")||rt.includes(".svg?"))return"svg";if(rt.endsWith(".png")||rt.endsWith(".jpg")||rt.endsWith(".jpeg")||rt.endsWith(".webp")||rt.endsWith(".gif"))return"image"}function parseRefResource(it){var ft;if(!it.startsWith("ref:"))return null;const rt=it.slice(4),[lt,...ct]=rt.split(":");if(!lt||ct.length===0)return null;let ht;ct.length>1&&KNOWN_FORMATS.has(ct[0].toLowerCase())&&(ht=(ft=ct.shift())==null?void 0:ft.toLowerCase());const dt=ct.join(":");if(!dt)return null;const ut=lt==="url"?"remote":lt;return ut==="remote"?{source:"remote",format:ht||inferFormatFromUrl(dt)||void 0,data:dt}:ut==="search"?{source:"search",format:ht||"svg",data:dt}:ut==="svg"?{source:"inline",format:"svg",data:dt,encoding:"raw"}:{source:"custom",data:it,format:ht}}function parseResourceConfig(it){if(!it)return null;if(typeof it!="string"){if(it.source)return it;const ct=it;return ct.type==="image"?{source:"inline",format:"image",data:ct.data}:ct.type==="svg"?{source:"inline",format:"svg",encoding:"raw",data:ct.data}:ct.type==="remote"?{source:"remote",format:ct.format,data:ct.data}:ct.type==="search"?{source:"search",format:ct.format||"svg",data:ct.data}:ct.type==="custom"?{source:"custom",data:ct.data}:null}const rt=parseDataURI(it);if(rt)return rt;const lt=parseRefResource(it);return lt||(looksLikeSVG(it)?{source:"inline",format:"svg",encoding:"raw",data:it}:{source:"custom",data:it})}function getResourceId(it){const rt=typeof it=="string"?parseResourceConfig(it):it;return rt?"rsc-"+getSimpleHash(JSON.stringify(rt)):null}function getResourceHref(it){const rt=getResourceId(it);return rt?`#${rt}`:null}function getResource(it,rt,lt){return ve(this,null,function*(){const ct=parseResourceConfig(rt);if(!ct)return null;ct.scene||(ct.scene=it);const{source:ht,data:dt,format:ut,encoding:ft}=ct;let pt=null;try{if(ht==="inline"){const gt=dt.startsWith("data:");ut==="svg"&&ft==="raw"?pt=loadSVGResource(dt):ut==="svg"&&gt?pt=yield loadImageBase64Resource(dt):gt||ut==="image"?pt=yield loadImageBase64Resource(dt):pt=loadSVGResource(dt)}else if(ht==="remote")pt=yield loadRemoteResource(dt,ut);else if(ht==="search")pt=yield loadSearchResource(dt,ut);else{const gt=getCustomResourceLoader()}}catch(gt){pt=null}return pt||(yield loadSearchResource(getFallbackQuery(ct,it,lt),ut))})}const RESOURCE_MAP=new Map,RESOURCE_LOAD_MAP=new WeakMap;function loadResource(it,rt,lt,ct){return ve(this,null,function*(){if(!it)return null;const ht=parseResourceConfig(lt);if(!ht)return null;const dt=getResourceId(ht),ut=`resource:${dt}`,ft=RESOURCE_LOAD_MAP.get(it);if(ft!=null&&ft.has(dt))return dt;const pt=getSvgLoadPromise(it,ut);if(pt)return yield pt;const gt=ve(null,null,function*(){const mt=RESOURCE_MAP.has(dt)?RESOURCE_MAP.get(dt)||null:yield getResource(rt,ht,ct);if(!mt)return null;RESOURCE_LOAD_MAP.has(it)||RESOURCE_LOAD_MAP.set(it,new Map);const xt=RESOURCE_LOAD_MAP.get(it);if(xt.has(dt))return dt;const yt=getOrCreateDefs(it);return mt.id=dt,yt.appendChild(mt),xt.set(dt,mt),dt});return trackSvgLoadPromise(it,ut,gt),yield gt})}function getFallbackQuery(it,rt,lt){const ct=rt==="illus"?"illustration":"icon",ht=normalizeQuery(lt==null?void 0:lt.label)||normalizeQuery(lt==null?void 0:lt.desc);if(ht)return ht;const dt=normalizeQuery(it.data);return!dt||it.source==="inline"||dt.startsWith("data:")||dt.startsWith("<svg")||dt.startsWith("<symbol")?ct:dt}function normalizeQuery(it){if(typeof it!="string")return null;const rt=it.trim();return rt||null}const ICON_RESOURCE_CACHE=new WeakMap;function createIconElement(it,rt={}){const lt=createElement("use",te(Ft({},rt),{href:getResourceHref(it)}));return applyIconColor(lt),ICON_RESOURCE_CACHE.set(lt,it),lt}function applyIconColor(it){const{stroke:rt,fill:lt}=getAttributes(it,["fill","stroke"]);it.style.color=lt||rt||"currentColor"}function getIconEntity(it){return it.tagName==="use"?it:it.querySelector("use")}function getIconAttrs(it){const rt=getIconEntity(it);return rt?getAttributes(rt,["width","height","x","y","width","height","fill","fill-opacity","stroke","opacity"]):{}}function updateIconElement(it,rt,lt){const ct=getIconEntity(it);ct&&(lt&&setAttributes(ct,lt),applyIconColor(ct))}const DEFAULT_SEPARATOR=",",getIndexesFromItemKey=(it,rt=DEFAULT_SEPARATOR)=>it.split(rt).map(lt=>parseInt(lt,10)),getItemIndexes=it=>getIndexesFromItemKey(it);function join(...it){return it.map(rt=>rt.replace(/^\/+|\/+$/g,"")).filter(rt=>rt.trim().length>0).join("/")}const fontRegistry=new Map;let defaultFontFamily="sans-serif";const fallbackFontData={fontFamily:"sans-serif",fontWeight:400,fontStyle:"normal",unitsPerEm:2048,metrics:{ascender:2189,descender:-555,lineGap:0},glyphs:{'"':727,"%":1821,"'":391,"(":682,")":682,"*":797,"+":1196,"-":682,"<":1196,"=":1196,">":1196,"@":2079,C:1479,D:1479,F:1251,G:1593,H:1479,J:1024,M:1706,N:1479,O:1593,Q:1593,R:1479,T:1251,U:1479,W:1933,Z:1251,"^":961,_:1024,"`":682,c:1024,i:455,j:455,k:1024,l:455,m:1706,r:682,s:1024,v:1024,w:1479,x:1024,y:1024,z:1024,"{":684,"|":532,"}":684,"~":1196},glyphsByWidth:{569:" !,./:;I[\\]ft",1139:"#$0123456789?Labdeghnopqu",1366:"&ABEKPSVXY"},defaultWidth:1139};function normalizeWeight(it){if(it===void 0||it==="normal")return"400";if(it==="bold")return"700";const rt={thin:"100",hairline:"100","extra-light":"200","ultra-light":"200",light:"300",regular:"400",normal:"400",medium:"500","semi-bold":"600",semibold:"600","demi-bold":"600",demibold:"600","extra-bold":"800",extrabold:"800","ultra-bold":"800",ultrabold:"800",black:"900",heavy:"900","extra-black":"950",extrablack:"950","ultra-black":"950",ultrablack:"950",bolder:"900",lighter:"300"};if(typeof it=="string"){const lt=it.toLowerCase();return rt[lt]||it}return String(it)}function normalizeStyle(it){return it||"normal"}function registerFont$1(it){const rt=it.fontFamily,lt=normalizeWeight(it.fontWeight),ct=normalizeStyle(it.fontStyle);if(it.glyphsByWidth){const ut=Ft({},it.glyphs||{});for(const[ft,pt]of Object.entries(it.glyphsByWidth))if(typeof pt=="string"){const gt=Number(ft);for(const mt of pt)ut[mt]=gt}else ut[ft]=pt;it=te(Ft({},it),{glyphs:ut,glyphsByWidth:void 0})}fontRegistry.has(rt)||fontRegistry.set(rt,new Map);const ht=fontRegistry.get(rt);ht.has(lt)||ht.set(lt,new Map),ht.get(lt).set(ct,it)}function getFontData(it,rt,lt){const ct=it||defaultFontFamily,ht=normalizeWeight(rt),dt=normalizeStyle(lt),ut=fontRegistry.get(ct);if(!ut)return console.warn(`Font family "${ct}" not registered, using fallback font data`),fallbackFontData;let ft=ut.get(ht);if(ft){let gt=ft.get(dt);if(gt||dt!=="normal"&&(gt=ft.get("normal"),gt))return gt;const mt=ft.values().next().value;if(mt)return mt}if(ft=ut.get("400"),ft){let gt=ft.get(dt);if(gt||dt!=="normal"&&(gt=ft.get("normal"),gt))return gt;const mt=ft.values().next().value;if(mt)return mt}const pt=ut.values().next().value;if(pt){const gt=pt.values().next().value;if(gt)return gt}throw new Error(`No font data found for family "${ct}" with weight "${ht}" and style "${dt}"`)}function applyTextTransform(it,rt){if(!rt||rt==="none")return it;switch(rt){case"uppercase":return it.toUpperCase();case"lowercase":return it.toLowerCase();case"capitalize":return it.split(" ").map(lt=>lt.length===0?lt:lt[0].toUpperCase()+lt.slice(1).toLowerCase()).join(" ");default:return it}}function normalizeFontSize$1(it){if(it===void 0)return 14;if(typeof it=="number")return it;const rt=parseFloat(it);return isNaN(rt)?16:rt}function calculateLineHeight(it,rt){const lt=normalizeFontSize$1(it.fontSize),ct=it.lineHeight;if(ct===void 0){const{ascender:ht,descender:dt,lineGap:ut=0}=rt.metrics;return(ht-dt+ut)/rt.unitsPerEm*lt}return typeof ct=="number"?ct*lt:ct.type==="pixel"?ct.value:ct.type==="percent"?ct.value/100*lt:lt}function measureText$2(it,rt={}){var yt;const lt=applyTextTransform(it,rt.textTransform),ct=getFontData(rt.fontFamily,rt.fontWeight,rt.fontStyle),ht=normalizeFontSize$1(rt.fontSize),dt=rt.letterSpacing||0,ut=rt.wordSpacing||0;let ft=0;const pt=Array.from(lt);for(let bt=0;bt<pt.length;bt++){const wt=pt[bt],Ct=bt<pt.length-1?pt[bt+1]:void 0;let vt=(yt=ct.glyphs)==null?void 0:yt[wt];vt===void 0&&(vt=ct.defaultWidth||ct.unitsPerEm/2);const St=vt/ct.unitsPerEm*ht;if(ft+=St,Ct&&ct.kerning){const _t=wt+Ct,Tt=ct.kerning[_t];Tt!==void 0&&(ft+=Tt/ct.unitsPerEm*ht)}bt<pt.length-1&&(ft+=dt),wt===" "&&(ft+=ut)}const gt=calculateLineHeight(rt,ct),{ascender:mt}=ct.metrics,xt=mt/ct.unitsPerEm*ht;return{width:ft,height:gt,baseline:xt}}const AlibabaPuHuiTi={fontFamily:"Alibaba PuHuiTi",fontWeight:400,fontStyle:"normal",unitsPerEm:1e3,metrics:{ascender:1060,descender:-340,lineGap:0},glyphs:{" ":257,"!":361,'"':405,"#":600,"%":821,"&":640,"'":253,"(":359,")":359,"*":430,",":302,"-":440,".":302,"/":500,":":378,";":378,"?":431,"@":860,B:620,C:599,D:699,F:527,G:685,H:708,J:271,K:614,L:507,M:830,N:737,P:597,R:614,S:566,T:528,V:617,W:898,X:624,Y:594,Z:626,"[":294,"\\":510,"]":294,_:500,"`":346,b:635,c:497,d:635,f:349,g:636,k:518,l:286,m:921,p:635,q:636,r:379,s:479,t:337,v:526,w:828,x:516,y:527,z:506,"{":299,"|":183,"}":299," ":257,"¡":357,"¦":183,"§":479,"¨":346,"©":806,ª:483,"«":511,"­":440,"®":404,"¯":346,"°":363,"´":346,"¶":593,"·":357,"¸":346,º:445,"»":511,"¼":902,"½":914,"¾":902,"¿":431,Æ:889,Ç:599,Ð:719,Ñ:737,Ý:594,Þ:597,ß:610,æ:926,ç:497,ý:527,þ:635,ÿ:527,Ć:599,ć:497,Ĉ:599,ĉ:497,Ċ:599,ċ:497,Č:599,č:497,Ď:699,ď:640,Đ:719,đ:635,Ĝ:685,ĝ:636,Ğ:685,ğ:636,Ġ:685,ġ:636,Ģ:685,ģ:636,Ĥ:708,Ħ:708,Ĳ:545,ĳ:536,Ĵ:271,Ķ:614,ķ:518,ĸ:518,Ĺ:507,ĺ:286,Ļ:507,ļ:286,Ľ:507,ľ:290,Ŀ:507,ŀ:291,Ł:507,ł:286,Ń:737,Ņ:737,Ň:737,ŉ:669,Ŋ:737,Œ:987,œ:917,Ŕ:614,ŕ:379,Ŗ:614,ŗ:379,Ř:614,ř:379,Ś:566,ś:479,Ŝ:566,ŝ:479,Ş:566,ş:479,Š:566,š:479,Ţ:528,ţ:337,Ť:528,ť:340,Ŧ:528,ŧ:337,Ŵ:898,ŵ:828,Ŷ:594,ŷ:527,Ÿ:594,Ź:626,ź:506,Ż:626,ż:506,Ž:626,ž:506,ſ:310,Ə:719,ǎ:608,ǐ:265,ǒ:614,ǔ:609,ǖ:609,ǘ:609,ǚ:609,ǜ:609,Ǽ:889,ǽ:926,Ș:566,ș:479,Ț:528,ț:337,"ʹ":255,"͵":255,";":378,"΄":346,"΅":346,Ά:670,"·":357,Έ:628,Ή:779,Ί:346,Ό:765,Ύ:726,Ώ:765,ΐ:312,Β:620,Γ:507,Ζ:626,Η:708,Κ:614,Λ:617,Μ:830,Ν:737,Π:708,Ρ:597,Σ:596,Τ:528,Υ:594,Φ:831,Χ:624,Ψ:804,Ϋ:594,έ:509,ή:643,ί:312,ΰ:593,β:610,γ:526,ε:509,ζ:465,η:643,θ:638,ι:312,κ:518,λ:514,ν:526,ξ:465,π:616,ρ:619,ς:497,σ:639,τ:437,υ:593,φ:774,χ:509,ψ:745,ω:782,ϊ:312,ϋ:593,ύ:593,ώ:782,"‐":440,"‑":440,"–":495,"—":684,"―":684,"‗":500,"‘":270,"’":270,"‚":270,"‛":270,"“":784,"”":784,"„":468,"†":500,"‡":500,"•":308,"…":1085,"‰":1174,"′":256,"″":472,"‴":689,"‵":256,"‶":472,"‷":689,"‹":312,"›":312,"‼":589,"‽":433,"‾":500,"⁄":120,"⁺":407,"⁻":407,"⁼":407,"⁽":225,"⁾":225,ⁿ:486,"₊":407,"₋":407,"₌":407,"₍":225,"₎":225,"ₙ":486,"₡":599,"₣":527,"₤":600,"₥":921,"₦":625,"₨":1093,"₩":769,"₪":754,"₫":635,"₭":614,"₮":528,"₯":1288,"₰":950,"₲":685,"₴":576,"₵":599,"₶":576,"₷":700,"₸":528,"₻":750,"₼":683,"₾":577,"₿":620,"℃":915,"℅":825,"℉":868,ℓ:385,"№":1176,"℗":806,"℡":1022,"™":903,"℮":903,"⅛":930,"⅜":931,"⅝":931,"⅞":871,"Ⅶ":1166,"∂":587,"∈":663,"∏":708,"∑":596,"√":604,"∞":679,"∧":617,"∫":531,"∮":654,"≈":600,"≒":662,"◊":600,"　":0,"〞":472},glyphsByWidth:{268:"ijìíîïĩīĭįıĵȷ",274:"IÌÍÎÏĨĪĬĮİΙΪ",406:"²³¹⁰⁴⁵⁶⁷⁸⁹₀₁₂₃₄₅₆₇₈₉",552:"+<=>^~¬±×÷−∕∙≠≤≥≦≧≮≯",556:"EÈÉÊËĒĔĖĘĚΕΞ",575:"$0123456789¢£¤¥ƒ₢₧€₱₹₺₽",578:"eèéêëēĕėęě",612:"aàáâãäåāăąǻ",613:"uµùúûüũūŭůűųάαμ∨",618:"hnoðñòóôõöøĥħńņňŋōŏőǿδοό",667:"AÀÁÂÃÄÅĀĂĄǺΑΔ₳∆",701:"UÙÚÛÜŨŪŬŮŰŲ",743:"OQÒÓÔÕÖØŌŎŐǾΘΟΩΩ",1e3:"─━│┃┄┅┆┇┈┉┊┋┌┍┎┏┐┑┒┓└┕┖┗┘┙┚┛├┝┞┟┠┡┢┣┤┥┦┧┨┩┪┫┬┭┮┯┰┱┲┳┴┵┶┷┸┹┺┻┼┽┾┿╀╁╂╃╄╅╆╇╈╉╊╋═║╒╓╔╕╖╗╘╙╚╛╜╝╞╟╠╡╢╣╤╥╦╧╨╩╪╫╬╭╮╯╰╱╲╳▁▂▃▄▅▆▇█▉▊▋▌▍▎▏▓▔▕■□▲△▼▽◆◇○◎●◢◣◤◥★☆☉♀♂〾"},defaultWidth:984,kerning:{'""':-56,"\"'":-57,'",':-179,'".':-179,"'\"":-56,"''":-57,"',":-179,"'.":-179,"(j":60,',"':-160,",'":-160,",1":-140,",7":-41,",9":-39,'."':-160,".'":-160,".1":-140,".7":-41,".9":-39,"//":-120,"1,":-99,"1.":-99,"1:":-99,"1;":-99,"7,":-160,"7.":-160,"7:":-99,"7;":-99,":1":-79,":7":-59,";1":-79,";7":-59,'A"':-100,"A'":-100,AC:-20,AG:-20,AO:-20,AQ:-20,AT:-80,AU:-10,AV:-70,AW:-39,AY:-81,Af:-20,Al:-10,At:-20,Av:-20,Ay:-20,BC:-10,BG:-10,BO:-10,BQ:-10,BT:-40,BV:-20,BX:-20,BY:-21,"D,":-59,"D.":-59,DA:-20,DT:-36,DV:-30,DW:-19,DX:-20,DY:-40,DZ:-20,Da:-39,Ej:19,"F,":-159,"F.":-159,FA:-40,Fa:-59,Fh:1,Fk:1,GV:-11,GY:-21,JJ:7,KA:-19,KC:-20,KG:-20,KO:-20,KQ:-20,KT:-19,KU:-39,KV:-39,KW:-39,KY:-40,Kc:-39,Kd:-39,Ke:-39,Kg:-39,Kl:-39,Ko:-39,Kq:-39,Ks:-19,Kt:-10,Ku:-40,Kv:-60,Kw:-40,Ky:-60,'L"':-99,"L'":-99,LA:20,LC:-59,LG:-59,LO:-59,LQ:-59,LT:-79,LU:-19,LV:-79,LW:-39,LY:-100,Lv:-41,Lw:-21,Ly:-41,"O,":-59,"O.":-59,OA:-20,OT:-36,OV:-30,OW:-19,OX:-20,OY:-40,OZ:-20,Oa:-39,"P,":-199,"P.":-199,PA:-60,PT:-29,PV:-10,PW:-10,PX:-50,PY:-20,PZ:-39,Pa:-60,"Q,":-59,"Q.":-59,QA:-20,QJ:7,QT:-36,QV:-30,QW:-19,QX:-20,QY:-40,QZ:-20,Qa:-39,RC:-15,RG:-15,RO:-15,RQ:-15,RT:-40,RU:-10,RV:-21,RW:-10,RX:-29,RY:-41,Rc:-20,Rd:-20,Re:-20,Rg:-20,Ro:-20,Rq:-20,Rt:-20,Ru:-10,Rv:-10,Rx:20,Ry:-10,"S,":-20,"S.":-20,SS:-1,ST:-1,SV:-21,SW:-10,SY:-21,St:-1,Sv:-20,Sw:-10,Sx:-1,Sy:-20,'T"':2,"T'":2,"T,":-154,"T.":-154,TA:-80,TC:-20,TG:-20,TO:-20,TQ:-20,TS:-1,Ta:-80,Tc:-59,Td:-59,Te:-59,Tg:-59,Ti:-20,Tj:-19,Tm:-59,Tn:-59,To:-59,Tp:-58,Tq:-59,Tr:-59,Ts:-60,Tt:20,Tu:-79,Tv:-39,Tw:-19,Tx:-39,Ty:-39,Tz:-59,UA:-10,UX:-19,Ux:-1,"V,":-140,"V.":-140,"V:":-41,"V;":-41,VA:-70,VC:-30,VG:-30,VO:-30,VQ:-30,VS:-10,Va:-41,Vc:-21,Vd:-21,Ve:-21,Vg:-21,Vh:1,Vk:1,Vo:-21,Vq:-21,Vs:-21,Vv:-1,Vy:-1,"W,":-79,"W.":-79,"W:":-39,"W;":-39,WA:-40,WC:-19,WG:-19,WO:-19,WQ:-19,Wa:-40,Wc:-20,Wd:-20,We:-20,Wg:-20,Wo:-20,Wq:-20,Ws:-20,XA:-19,XC:-20,XG:-20,XO:-20,XQ:-20,XT:-19,XU:-39,XV:-39,XW:-39,XY:-40,Xc:-39,Xd:-39,Xe:-39,Xg:-39,Xl:-39,Xo:-39,Xq:-39,Xs:-19,Xt:-10,Xu:-40,Xv:-60,Xw:-40,Xy:-60,'Y"':1,"Y'":1,"Y,":-141,"Y.":-141,"Y:":-60,"Y;":-60,YA:-81,YC:-40,YG:-40,YO:-40,YQ:-40,YS:-1,Ya:-101,Yc:-60,Yd:-60,Ye:-60,Yf:-1,Yg:-60,Yh:1,Yi:-19,Yk:1,Ym:-41,Yn:-41,Yo:-60,Yp:-40,Yq:-60,Yr:-41,Ys:-61,Yt:-1,Yu:-40,Yv:-40,Yx:-41,Yy:-40,Yz:-41,ZC:-20,ZG:-20,ZO:-20,ZQ:-20,"[j":80,aT:-60,aV:-21,aY:-61,av:-10,aw:-10,ay:-10,"b,":-40,"b.":-40,bT:-59,bV:-21,bW:-20,bX:-39,bY:-60,bv:-10,bx:-20,by:-10,"e,":-20,"e.":-20,eT:-59,eY:-40,ej:20,'f"':3,"f'":3,"f)":1,"f*":61,"f,":-1,"f.":-1,"f?":40,fT:40,fV:21,fW:21,fX:21,fY:1,"f]":21,fa:-29,fc:-19,fd:-19,fe:-19,ff:1,fg:-39,fh:-19,fi:-19,fj:-19,fk:-19,fl:-19,fo:-19,fq:-19,fs:-19,ft:1,"f}":3,hT:-58,hY:-39,hv:-10,hy:-10,'i"':2,"i'":2,"i)":2,"i?":3,iT:-20,"i]":41,"i}":22,jT:-20,kT:-39,kU:-1,kW:-20,ka:-20,kc:-20,kd:-20,ke:-20,kg:-20,kl:-20,ko:-20,kq:-20,ku:-10,lf:-20,lv:-19,lw:-10,ly:-19,mT:-58,mY:-39,mv:-10,my:-10,nT:-58,nY:-39,nv:-10,ny:-10,"o,":-40,"o.":-40,oT:-59,oV:-21,oW:-20,oX:-39,oY:-60,ov:-10,ox:-20,oy:-10,"p,":-40,"p.":-40,pT:-59,pV:-21,pW:-20,pX:-39,pY:-60,pv:-10,px:-20,py:-10,qT:-19,qY:-19,qj:20,'r"':2,"r'":2,"r,":-90,"r.":-90,ra:-49,rc:-19,rd:-19,re:-19,rf:1,ro:-19,rq:-19,rt:20,sT:-59,sV:-21,sW:-20,sX:-19,sY:-60,sv:-19,sx:-10,sy:-19,tf:1,uT:-40,uY:-19,"v,":-90,"v.":-90,vT:-39,vX:-39,va:-35,vc:-10,vd:-10,ve:-10,vo:-10,vq:-10,"w,":-50,"w.":-50,wT:-19,wX:-39,wa:-30,xT:-39,xU:-1,xW:-20,xa:-20,xc:-20,xd:-20,xe:-20,xg:-20,xl:-20,xo:-20,xq:-20,xu:-10,"y,":-90,"y.":-90,yT:-39,yX:-39,ya:-35,yc:-10,yd:-10,ye:-10,yo:-10,yq:-10,zT:-59,"{h":2,"{j":79,"{k":2}},FONT_REGISTRY=new Map;let DEFAULT_FONT="Alibaba PuHuiTi";function getFont(it){const rt=splitFontFamily(it);for(const lt of rt){const ct=FONT_REGISTRY.get(decodeFontFamily(lt));if(ct)return ct}return null}function getFonts(){return Array.from(FONT_REGISTRY.values())}function registerFont(it){const rt=Ft({},it);return FONT_REGISTRY.set(rt.fontFamily,rt),rt.fontFamily=encodeFontFamily(rt.fontFamily),rt}function getFontURLs(it){const rt=splitFontFamily(it).flatMap(lt=>{const ct=getFont(lt);if(!ct)return[];const{baseUrl:ht,fontWeight:dt}=ct;return Object.values(dt).filter(ut=>!!ut).map(ut=>join(ht,ut))});return Array.from(new Set(rt))}function getWoff2BaseURL(it,rt){const lt=splitFontFamily(it);let ct=null;for(const ut of lt)if(ct=getFont(ut),ct)break;if(!ct)return null;const ht=normalizeFontWeightName(rt),dt=ct.fontWeight[ht];return dt?join(ct.baseUrl,dt.replace(/\/result.css$/,"")):null}const FONT_LOAD_MAP=new WeakMap,FONT_PROMISE_MAP=new WeakMap;function trackFontPromise(it,rt,lt){let ct=FONT_PROMISE_MAP.get(it);return ct||(ct=new Map,FONT_PROMISE_MAP.set(it,ct)),ct.set(rt,lt),lt.finally(()=>{const ht=FONT_PROMISE_MAP.get(it);ht&&(ht.get(rt)===lt&&ht.delete(rt),ht.size===0&&FONT_PROMISE_MAP.delete(it))}),lt}function isLinkLoaded(it){if(it.getAttribute("data-infographic-font-loaded")==="true")return!0;try{return!!it.sheet}catch(rt){return!1}}function getFontLoadPromise(it,rt,lt){var dt;const ct=(dt=FONT_PROMISE_MAP.get(it))==null?void 0:dt.get(rt);if(ct)return ct;if(!lt||isLinkLoaded(lt))return trackFontPromise(it,rt,Promise.resolve());const ht=new Promise(ut=>{const ft=()=>{lt.setAttribute("data-infographic-font-loaded","true"),ut()};lt.addEventListener("load",ft,{once:!0}),lt.addEventListener("error",ft,{once:!0})});return trackFontPromise(it,rt,ht)}function loadFont(it,rt){const lt=it.ownerDocument,ct=(lt==null?void 0:lt.head)||document.head;if(!ct)return;FONT_LOAD_MAP.has(ct)||FONT_LOAD_MAP.set(ct,new Map);const ht=FONT_LOAD_MAP.get(ct),dt=getFontURLs(rt);if(!dt.length)return;const ut=[];dt.forEach(ft=>{const pt=`${rt}-${ft}`,gt=`font:${pt}`;if(getSvgLoadPromise(it,gt))return;let mt=ht.get(pt);mt||(mt=lt.createElement("link"),mt.id=pt,mt.rel="stylesheet",mt.href=ft,ut.push(mt),ht.set(pt,mt));const xt=getFontLoadPromise(ct,pt,mt);trackSvgLoadPromise(it,gt,xt)}),ut.length&&ct.tagName==="HEAD"&&ut.forEach(ft=>ct.appendChild(ft))}function loadFonts(it){getFonts().forEach(lt=>loadFont(it,lt.fontFamily))}const BASE_FONT_URL="https://assets.antv.antgroup.com",getUrl=it=>`${it}/result.css`,BUILT_IN_FONTS=[{fontFamily:"Alibaba PuHuiTi",name:"阿里巴巴普惠体",baseUrl:BASE_FONT_URL,fontWeight:{regular:getUrl("AlibabaPuHuiTi-Regular"),bold:getUrl("AlibabaPuHuiTi-Bold")}},{fontFamily:"Source Han Sans",name:"黑体",baseUrl:BASE_FONT_URL,fontWeight:{regular:getUrl("SourceHanSansCN-Regular")}},{fontFamily:"Source Han Serif",name:"宋体",baseUrl:BASE_FONT_URL,fontWeight:{regular:getUrl("SourceHanSerifCN-Regular")}},{fontFamily:"LXGW WenKai",name:"楷体",baseUrl:BASE_FONT_URL,fontWeight:{regular:getUrl("LXGWWenKai-Regular")}},{fontFamily:"851tegakizatsu",name:"手写体",baseUrl:BASE_FONT_URL,fontWeight:{regular:getUrl("851tegakizatsu-Regular")}}];BUILT_IN_FONTS.forEach(registerFont);const PALETTE_REGISTRY=new Map;function registerPalette(it,rt){PALETTE_REGISTRY.set(it,rt)}function getPalette(it){return PALETTE_REGISTRY.get(it)}const antv=["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#70CAF8"];registerPalette("antv",antv);const spectral=(it,rt,lt)=>{const ct=[["#fc8d59","#ffffbf","#99d594"],["#d7191c","#fdae61","#abdda4","#2b83ba"],["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]],ht=Math.min(Math.max(lt,3),11);return ct[ht-3][rt%ht]};registerPalette("spectral",spectral);const getPaletteColor$1=(it=[],rt,lt)=>{var dt;const ct=typeof it=="string"?getPalette(it)||[]:it,ht=(dt=rt[0])!=null?dt:0;if(typeof ct=="function"){const ut=lt?ht/lt:0;return ct(ut,ht,lt!=null?lt:0)}if(Array.isArray(ct))return ct.length===0?void 0:ct[ht%ct.length]};function renderBackground(it,rt){var dt,ut;if(((dt=rt.svg)==null?void 0:dt.background)===!1)return;const{themeConfig:{colorBg:lt}}=rt;if(!lt)return;const ct=it.parentElement;ct&&(ct.style.backgroundColor=lt||"none");const ht=getElementByRole(it,"background");if(it.style.backgroundColor=lt,ht)ht.setAttribute("fill",lt);else if((ut=it.viewBox)!=null&&ut.baseVal){const{x:ft,y:pt,width:gt,height:mt}=it.viewBox.baseVal,xt=createElement("rect",{x:ft,y:pt,width:gt,height:mt,fill:lt,"data-element-type":"background"});it.prepend(xt)}}function parseDynamicAttributes(it,rt){return Object.entries(rt).reduce((ct,[ht,dt])=>{if(typeof dt=="function"){const ut=dt(it.getAttribute(ht),it);ut!=null&&(ct[ht]=ut)}else Object.assign(ct,{[ht]:dt});return ct},{})}function getSafetyId(it){return it.replace(/#|%|\.| |\/|\(|\)/g,"").replace(/,/g,"-")}function renderBaseElement(it,rt){rt&&Object.keys(rt).length>0&&traverse(it,lt=>{const ct=parseDynamicAttributes(lt,rt);setAttributes(lt,ct)})}const ADD_ICON_ID="btn-add-icon",REMOVE_ICON_ID="btn-remove-icon";function renderButtonsGroup(it,rt){setAttributes(rt,{display:"none"});const lt=rt.querySelectorAll('[id^="btn-add-"]'),ct=rt.querySelectorAll('[id^="btn-remove-"]');defineButtonIcon(it),lt.forEach(renderAddButton),ct.forEach(renderRemoveButton)}const btnIconDefRole="btn-icon-defs";function defineButtonIcon(it){const rt=createElement("defs");setElementRole(rt,btnIconDefRole);const lt=parseSVG(`<symbol class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
  <path
    d="M512 1024C229.216 1024 0 794.784 0 512S229.216 0 512 0s512 229.216 512 512-229.216 512-512 512z m0-960C264.576 64 64 264.576 64 512s200.576 448 448 448 448-200.576 448-448S759.424 64 512 64z m192 480h-160v160a32 32 0 0 1-64 0v-160h-160a32 32 0 0 1 0-64h160v-160a32 32 0 0 1 64 0v160h160a32 32 0 0 1 0 64z"
    fill="#339900"></path>
</symbol>`);lt&&(lt.setAttribute("id",ADD_ICON_ID),rt.appendChild(lt));const ct=parseSVG(`<symbol viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200">
  <path d="M874.971429 149.942857C776.228571 54.857143 648.228571 0 512.914286 0S245.942857 54.857143 150.857143 149.942857c-201.142857 201.142857-201.142857 522.971429 0 724.114286C245.942857 969.142857 377.6 1024 512.914286 1024s266.971429-54.857143 362.057143-149.942857c201.142857-201.142857 201.142857-522.971429 0-724.114286m-51.2 672.914286C739.657143 906.971429 629.942857 950.857143 512.914286 950.857143s-226.742857-43.885714-310.857143-128c-171.885714-171.885714-171.885714-449.828571 0-621.714286C286.171429 117.028571 395.885714 73.142857 512.914286 73.142857s226.742857 43.885714 310.857143 128c171.885714 171.885714 171.885714 449.828571 0 621.714286" fill="#E63C33"></path>
  <path d="M772.571429 475.428571H253.257143c-21.942857 0-36.571429 14.628571-36.571429 36.571429 0 10.971429 3.657143 18.285714 10.971429 25.6s14.628571 10.971429 25.6 10.971429H768.914286c21.942857 0 36.571429-14.628571 36.571428-36.571429s-14.628571-36.571429-32.914285-36.571429" fill="#E63C33"></path>
</symbol>`);ct&&(ct.setAttribute("id",REMOVE_ICON_ID),rt.appendChild(ct)),it.prepend(rt)}function renderButtonIcon(it,rt){const{id:lt,x:ct=0,y:ht=0,width:dt=0,height:ut=0}=getAttributes(it,["id","x","y","width","height"]),ft=createElement("g",{id:lt,class:"btn-group",transform:`translate(${ct}, ${ht})`}),pt=it.getAttribute("data-items");pt&&ft.setAttribute("data-items",pt);const gt=Math.max(+dt,+ut)/2,mt=createElement("circle",{cx:gt,cy:gt,r:gt,fill:"#fff",stroke:"transparent"});ft.appendChild(mt);const xt=createElement("use",{href:`#${rt}`,width:dt,height:ut});ft.appendChild(xt),ft.style.cursor="pointer",it.replaceWith(ft)}function renderAddButton(it){renderButtonIcon(it,ADD_ICON_ID)}function renderRemoveButton(it){renderButtonIcon(it,REMOVE_ICON_ID)}function renderItemIcon(it,rt,lt,ct){var pt;const ht=lt.icon;if(!ht)return null;const{themeConfig:dt}=ct,ut=Ft({},(pt=dt.item)==null?void 0:pt.icon),ft=parseDynamicAttributes(rt,ut);return createIcon$1(it,rt,ht,ft,lt)}function createIcon$1(it,rt,lt,ct,ht){return loadResource(it,"icon",lt,ht),createIconElement(lt,Ft(Ft({},getAttributes(rt,["id","x","y","width","height","fill","stroke","data-element-type","data-indexes"])),ct))}function renderIllus(it,rt,lt,ct){if(!lt)return null;const ht=parseResourceConfig(lt);if(!ht)return null;const dt=getResourceId(ht),ut=createClipPath(it,rt,dt);loadResource(it,"illus",ht,ct);const{data:ft,color:pt}=ht;return createIllusElement(dt,Ft(te(Ft({},parseIllusBounds(rt)),{"clip-path":`url(#${ut})`}),pt?{color:pt}:{}),ft)}function renderItemIllus(it,rt,lt){const ct=lt.illus;return renderIllus(it,rt,ct,lt)}function createClipPath(it,rt,lt){const ct=`clip-${lt}-${uuid()}`;if(it.querySelector(`#${ct}`))return ct;const ht=getOrCreateDefs(it),dt=createElement("clipPath",{id:ct}),ut=rt.cloneNode();return removeAttributes(ut,["id","data-illus-bounds","data-element-type"]),dt.appendChild(ut),ht.appendChild(dt),ct}function createIllusElement(it,rt,lt){const yt=rt,{"clip-path":ct}=yt,ht=Pe(yt,["clip-path"]),{x:dt="0",y:ut="0",width:ft="0",height:pt="0"}=ht,gt=createElement("rect",{id:`${it}-volume`,"data-element-type":"illus-volume",x:dt,y:ut,width:ft,height:pt,fill:"transparent"}),mt=createElement("g",{"data-element-type":"illus-group","clip-path":ct,id:`${it}-group`});mt.appendChild(gt);const xt=createElement("use",te(Ft({id:it,fill:"lightgray"},ht),{href:getResourceHref(lt),"data-element-type":"illus"}));return mt.appendChild(xt),mt}function parseIllusBounds(it){const rt=it.getAttribute("data-illus-bounds");if(!rt)return Ft({x:"0",y:"0",width:"0",height:"0"},getAttributes(it,["x","y","width","height"]));const[lt,ct,ht,dt]=rt.split(" ");return{x:lt,y:ct,width:ht,height:dt}}function _typeof(it){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},_typeof(it)}var trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(it,rt){if(it=it||"",rt=rt||{},it instanceof tinycolor)return it;if(!(this instanceof tinycolor))return new tinycolor(it,rt);var lt=inputToRGB(it);this._originalInput=it,this._r=lt.r,this._g=lt.g,this._b=lt.b,this._a=lt.a,this._roundA=Math.round(100*this._a)/100,this._format=rt.format||lt.format,this._gradientType=rt.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=lt.ok}tinycolor.prototype={isDark:function it(){return this.getBrightness()<128},isLight:function it(){return!this.isDark()},isValid:function it(){return this._ok},getOriginalInput:function it(){return this._originalInput},getFormat:function it(){return this._format},getAlpha:function it(){return this._a},getBrightness:function it(){var rt=this.toRgb();return(rt.r*299+rt.g*587+rt.b*114)/1e3},getLuminance:function it(){var rt=this.toRgb(),lt,ct,ht,dt,ut,ft;return lt=rt.r/255,ct=rt.g/255,ht=rt.b/255,lt<=.03928?dt=lt/12.92:dt=Math.pow((lt+.055)/1.055,2.4),ct<=.03928?ut=ct/12.92:ut=Math.pow((ct+.055)/1.055,2.4),ht<=.03928?ft=ht/12.92:ft=Math.pow((ht+.055)/1.055,2.4),.2126*dt+.7152*ut+.0722*ft},setAlpha:function it(rt){return this._a=boundAlpha(rt),this._roundA=Math.round(100*this._a)/100,this},toHsv:function it(){var rt=rgbToHsv(this._r,this._g,this._b);return{h:rt.h*360,s:rt.s,v:rt.v,a:this._a}},toHsvString:function it(){var rt=rgbToHsv(this._r,this._g,this._b),lt=Math.round(rt.h*360),ct=Math.round(rt.s*100),ht=Math.round(rt.v*100);return this._a==1?"hsv("+lt+", "+ct+"%, "+ht+"%)":"hsva("+lt+", "+ct+"%, "+ht+"%, "+this._roundA+")"},toHsl:function it(){var rt=rgbToHsl(this._r,this._g,this._b);return{h:rt.h*360,s:rt.s,l:rt.l,a:this._a}},toHslString:function it(){var rt=rgbToHsl(this._r,this._g,this._b),lt=Math.round(rt.h*360),ct=Math.round(rt.s*100),ht=Math.round(rt.l*100);return this._a==1?"hsl("+lt+", "+ct+"%, "+ht+"%)":"hsla("+lt+", "+ct+"%, "+ht+"%, "+this._roundA+")"},toHex:function it(rt){return rgbToHex(this._r,this._g,this._b,rt)},toHexString:function it(rt){return"#"+this.toHex(rt)},toHex8:function it(rt){return rgbaToHex(this._r,this._g,this._b,this._a,rt)},toHex8String:function it(rt){return"#"+this.toHex8(rt)},toRgb:function it(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function it(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function it(){return{r:Math.round(bound01(this._r,255)*100)+"%",g:Math.round(bound01(this._g,255)*100)+"%",b:Math.round(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function it(){return this._a==1?"rgb("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%)":"rgba("+Math.round(bound01(this._r,255)*100)+"%, "+Math.round(bound01(this._g,255)*100)+"%, "+Math.round(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function it(){return this._a===0?"transparent":this._a<1?!1:hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1},toFilter:function it(rt){var lt="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),ct=lt,ht=this._gradientType?"GradientType = 1, ":"";if(rt){var dt=tinycolor(rt);ct="#"+rgbaToArgbHex(dt._r,dt._g,dt._b,dt._a)}return"progid:DXImageTransform.Microsoft.gradient("+ht+"startColorstr="+lt+",endColorstr="+ct+")"},toString:function it(rt){var lt=!!rt;rt=rt||this._format;var ct=!1,ht=this._a<1&&this._a>=0,dt=!lt&&ht&&(rt==="hex"||rt==="hex6"||rt==="hex3"||rt==="hex4"||rt==="hex8"||rt==="name");return dt?rt==="name"&&this._a===0?this.toName():this.toRgbString():(rt==="rgb"&&(ct=this.toRgbString()),rt==="prgb"&&(ct=this.toPercentageRgbString()),(rt==="hex"||rt==="hex6")&&(ct=this.toHexString()),rt==="hex3"&&(ct=this.toHexString(!0)),rt==="hex4"&&(ct=this.toHex8String(!0)),rt==="hex8"&&(ct=this.toHex8String()),rt==="name"&&(ct=this.toName()),rt==="hsl"&&(ct=this.toHslString()),rt==="hsv"&&(ct=this.toHsvString()),ct||this.toHexString())},clone:function it(){return tinycolor(this.toString())},_applyModification:function it(rt,lt){var ct=rt.apply(null,[this].concat([].slice.call(lt)));return this._r=ct._r,this._g=ct._g,this._b=ct._b,this.setAlpha(ct._a),this},lighten:function it(){return this._applyModification(_lighten,arguments)},brighten:function it(){return this._applyModification(_brighten,arguments)},darken:function it(){return this._applyModification(_darken,arguments)},desaturate:function it(){return this._applyModification(_desaturate,arguments)},saturate:function it(){return this._applyModification(_saturate,arguments)},greyscale:function it(){return this._applyModification(_greyscale,arguments)},spin:function it(){return this._applyModification(_spin,arguments)},_applyCombination:function it(rt,lt){return rt.apply(null,[this].concat([].slice.call(lt)))},analogous:function it(){return this._applyCombination(_analogous,arguments)},complement:function it(){return this._applyCombination(_complement,arguments)},monochromatic:function it(){return this._applyCombination(_monochromatic,arguments)},splitcomplement:function it(){return this._applyCombination(_splitcomplement,arguments)},triad:function it(){return this._applyCombination(polyad,[3])},tetrad:function it(){return this._applyCombination(polyad,[4])}};tinycolor.fromRatio=function(it,rt){if(_typeof(it)=="object"){var lt={};for(var ct in it)it.hasOwnProperty(ct)&&(ct==="a"?lt[ct]=it[ct]:lt[ct]=convertToPercentage(it[ct]));it=lt}return tinycolor(it,rt)};function inputToRGB(it){var rt={r:0,g:0,b:0},lt=1,ct=null,ht=null,dt=null,ut=!1,ft=!1;return typeof it=="string"&&(it=stringInputToObject(it)),_typeof(it)=="object"&&(isValidCSSUnit(it.r)&&isValidCSSUnit(it.g)&&isValidCSSUnit(it.b)?(rt=rgbToRgb(it.r,it.g,it.b),ut=!0,ft=String(it.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(it.h)&&isValidCSSUnit(it.s)&&isValidCSSUnit(it.v)?(ct=convertToPercentage(it.s),ht=convertToPercentage(it.v),rt=hsvToRgb(it.h,ct,ht),ut=!0,ft="hsv"):isValidCSSUnit(it.h)&&isValidCSSUnit(it.s)&&isValidCSSUnit(it.l)&&(ct=convertToPercentage(it.s),dt=convertToPercentage(it.l),rt=hslToRgb(it.h,ct,dt),ut=!0,ft="hsl"),it.hasOwnProperty("a")&&(lt=it.a)),lt=boundAlpha(lt),{ok:ut,format:it.format||ft,r:Math.min(255,Math.max(rt.r,0)),g:Math.min(255,Math.max(rt.g,0)),b:Math.min(255,Math.max(rt.b,0)),a:lt}}function rgbToRgb(it,rt,lt){return{r:bound01(it,255)*255,g:bound01(rt,255)*255,b:bound01(lt,255)*255}}function rgbToHsl(it,rt,lt){it=bound01(it,255),rt=bound01(rt,255),lt=bound01(lt,255);var ct=Math.max(it,rt,lt),ht=Math.min(it,rt,lt),dt,ut,ft=(ct+ht)/2;if(ct==ht)dt=ut=0;else{var pt=ct-ht;switch(ut=ft>.5?pt/(2-ct-ht):pt/(ct+ht),ct){case it:dt=(rt-lt)/pt+(rt<lt?6:0);break;case rt:dt=(lt-it)/pt+2;break;case lt:dt=(it-rt)/pt+4;break}dt/=6}return{h:dt,s:ut,l:ft}}function hslToRgb(it,rt,lt){var ct,ht,dt;it=bound01(it,360),rt=bound01(rt,100),lt=bound01(lt,100);function ut(gt,mt,xt){return xt<0&&(xt+=1),xt>1&&(xt-=1),xt<1/6?gt+(mt-gt)*6*xt:xt<1/2?mt:xt<2/3?gt+(mt-gt)*(2/3-xt)*6:gt}if(rt===0)ct=ht=dt=lt;else{var ft=lt<.5?lt*(1+rt):lt+rt-lt*rt,pt=2*lt-ft;ct=ut(pt,ft,it+1/3),ht=ut(pt,ft,it),dt=ut(pt,ft,it-1/3)}return{r:ct*255,g:ht*255,b:dt*255}}function rgbToHsv(it,rt,lt){it=bound01(it,255),rt=bound01(rt,255),lt=bound01(lt,255);var ct=Math.max(it,rt,lt),ht=Math.min(it,rt,lt),dt,ut,ft=ct,pt=ct-ht;if(ut=ct===0?0:pt/ct,ct==ht)dt=0;else{switch(ct){case it:dt=(rt-lt)/pt+(rt<lt?6:0);break;case rt:dt=(lt-it)/pt+2;break;case lt:dt=(it-rt)/pt+4;break}dt/=6}return{h:dt,s:ut,v:ft}}function hsvToRgb(it,rt,lt){it=bound01(it,360)*6,rt=bound01(rt,100),lt=bound01(lt,100);var ct=Math.floor(it),ht=it-ct,dt=lt*(1-rt),ut=lt*(1-ht*rt),ft=lt*(1-(1-ht)*rt),pt=ct%6,gt=[lt,ut,dt,dt,ft,lt][pt],mt=[ft,lt,lt,ut,dt,dt][pt],xt=[dt,dt,ft,lt,lt,ut][pt];return{r:gt*255,g:mt*255,b:xt*255}}function rgbToHex(it,rt,lt,ct){var ht=[pad2(Math.round(it).toString(16)),pad2(Math.round(rt).toString(16)),pad2(Math.round(lt).toString(16))];return ct&&ht[0].charAt(0)==ht[0].charAt(1)&&ht[1].charAt(0)==ht[1].charAt(1)&&ht[2].charAt(0)==ht[2].charAt(1)?ht[0].charAt(0)+ht[1].charAt(0)+ht[2].charAt(0):ht.join("")}function rgbaToHex(it,rt,lt,ct,ht){var dt=[pad2(Math.round(it).toString(16)),pad2(Math.round(rt).toString(16)),pad2(Math.round(lt).toString(16)),pad2(convertDecimalToHex(ct))];return ht&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)&&dt[3].charAt(0)==dt[3].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0)+dt[3].charAt(0):dt.join("")}function rgbaToArgbHex(it,rt,lt,ct){var ht=[pad2(convertDecimalToHex(ct)),pad2(Math.round(it).toString(16)),pad2(Math.round(rt).toString(16)),pad2(Math.round(lt).toString(16))];return ht.join("")}tinycolor.equals=function(it,rt){return!it||!rt?!1:tinycolor(it).toRgbString()==tinycolor(rt).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function _desaturate(it,rt){rt=rt===0?0:rt||10;var lt=tinycolor(it).toHsl();return lt.s-=rt/100,lt.s=clamp01$1(lt.s),tinycolor(lt)}function _saturate(it,rt){rt=rt===0?0:rt||10;var lt=tinycolor(it).toHsl();return lt.s+=rt/100,lt.s=clamp01$1(lt.s),tinycolor(lt)}function _greyscale(it){return tinycolor(it).desaturate(100)}function _lighten(it,rt){rt=rt===0?0:rt||10;var lt=tinycolor(it).toHsl();return lt.l+=rt/100,lt.l=clamp01$1(lt.l),tinycolor(lt)}function _brighten(it,rt){rt=rt===0?0:rt||10;var lt=tinycolor(it).toRgb();return lt.r=Math.max(0,Math.min(255,lt.r-Math.round(255*-(rt/100)))),lt.g=Math.max(0,Math.min(255,lt.g-Math.round(255*-(rt/100)))),lt.b=Math.max(0,Math.min(255,lt.b-Math.round(255*-(rt/100)))),tinycolor(lt)}function _darken(it,rt){rt=rt===0?0:rt||10;var lt=tinycolor(it).toHsl();return lt.l-=rt/100,lt.l=clamp01$1(lt.l),tinycolor(lt)}function _spin(it,rt){var lt=tinycolor(it).toHsl(),ct=(lt.h+rt)%360;return lt.h=ct<0?360+ct:ct,tinycolor(lt)}function _complement(it){var rt=tinycolor(it).toHsl();return rt.h=(rt.h+180)%360,tinycolor(rt)}function polyad(it,rt){if(isNaN(rt)||rt<=0)throw new Error("Argument to polyad must be a positive number");for(var lt=tinycolor(it).toHsl(),ct=[tinycolor(it)],ht=360/rt,dt=1;dt<rt;dt++)ct.push(tinycolor({h:(lt.h+dt*ht)%360,s:lt.s,l:lt.l}));return ct}function _splitcomplement(it){var rt=tinycolor(it).toHsl(),lt=rt.h;return[tinycolor(it),tinycolor({h:(lt+72)%360,s:rt.s,l:rt.l}),tinycolor({h:(lt+216)%360,s:rt.s,l:rt.l})]}function _analogous(it,rt,lt){rt=rt||6,lt=lt||30;var ct=tinycolor(it).toHsl(),ht=360/lt,dt=[tinycolor(it)];for(ct.h=(ct.h-(ht*rt>>1)+720)%360;--rt;)ct.h=(ct.h+ht)%360,dt.push(tinycolor(ct));return dt}function _monochromatic(it,rt){rt=rt||6;for(var lt=tinycolor(it).toHsv(),ct=lt.h,ht=lt.s,dt=lt.v,ut=[],ft=1/rt;rt--;)ut.push(tinycolor({h:ct,s:ht,v:dt})),dt=(dt+ft)%1;return ut}tinycolor.mix=function(it,rt,lt){lt=lt===0?0:lt||50;var ct=tinycolor(it).toRgb(),ht=tinycolor(rt).toRgb(),dt=lt/100,ut={r:(ht.r-ct.r)*dt+ct.r,g:(ht.g-ct.g)*dt+ct.g,b:(ht.b-ct.b)*dt+ct.b,a:(ht.a-ct.a)*dt+ct.a};return tinycolor(ut)};tinycolor.readability=function(it,rt){var lt=tinycolor(it),ct=tinycolor(rt);return(Math.max(lt.getLuminance(),ct.getLuminance())+.05)/(Math.min(lt.getLuminance(),ct.getLuminance())+.05)};tinycolor.isReadable=function(it,rt,lt){var ct=tinycolor.readability(it,rt),ht,dt;switch(dt=!1,ht=validateWCAG2Parms(lt),ht.level+ht.size){case"AAsmall":case"AAAlarge":dt=ct>=4.5;break;case"AAlarge":dt=ct>=3;break;case"AAAsmall":dt=ct>=7;break}return dt};tinycolor.mostReadable=function(it,rt,lt){var ct=null,ht=0,dt,ut,ft,pt;lt=lt||{},ut=lt.includeFallbackColors,ft=lt.level,pt=lt.size;for(var gt=0;gt<rt.length;gt++)dt=tinycolor.readability(it,rt[gt]),dt>ht&&(ht=dt,ct=tinycolor(rt[gt]));return tinycolor.isReadable(it,ct,{level:ft,size:pt})||!ut?ct:(lt.includeFallbackColors=!1,tinycolor.mostReadable(it,["#fff","#000"],lt))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(it){var rt={};for(var lt in it)it.hasOwnProperty(lt)&&(rt[it[lt]]=lt);return rt}function boundAlpha(it){return it=parseFloat(it),(isNaN(it)||it<0||it>1)&&(it=1),it}function bound01(it,rt){isOnePointZero(it)&&(it="100%");var lt=isPercentage(it);return it=Math.min(rt,Math.max(0,parseFloat(it))),lt&&(it=parseInt(it*rt,10)/100),Math.abs(it-rt)<1e-6?1:it%rt/parseFloat(rt)}function clamp01$1(it){return Math.min(1,Math.max(0,it))}function parseIntFromHex(it){return parseInt(it,16)}function isOnePointZero(it){return typeof it=="string"&&it.indexOf(".")!=-1&&parseFloat(it)===1}function isPercentage(it){return typeof it=="string"&&it.indexOf("%")!=-1}function pad2(it){return it.length==1?"0"+it:""+it}function convertToPercentage(it){return it<=1&&(it=it*100+"%"),it}function convertDecimalToHex(it){return Math.round(parseFloat(it)*255).toString(16)}function convertHexToDecimal(it){return parseIntFromHex(it)/255}var matchers=function(){var it="[-\\+]?\\d+%?",rt="[-\\+]?\\d*\\.\\d+%?",lt="(?:"+rt+")|(?:"+it+")",ct="[\\s|\\(]+("+lt+")[,|\\s]+("+lt+")[,|\\s]+("+lt+")\\s*\\)?",ht="[\\s|\\(]+("+lt+")[,|\\s]+("+lt+")[,|\\s]+("+lt+")[,|\\s]+("+lt+")\\s*\\)?";return{CSS_UNIT:new RegExp(lt),rgb:new RegExp("rgb"+ct),rgba:new RegExp("rgba"+ht),hsl:new RegExp("hsl"+ct),hsla:new RegExp("hsla"+ht),hsv:new RegExp("hsv"+ct),hsva:new RegExp("hsva"+ht),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function isValidCSSUnit(it){return!!matchers.CSS_UNIT.exec(it)}function stringInputToObject(it){it=it.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var rt=!1;if(names[it])it=names[it],rt=!0;else if(it=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var lt;return(lt=matchers.rgb.exec(it))?{r:lt[1],g:lt[2],b:lt[3]}:(lt=matchers.rgba.exec(it))?{r:lt[1],g:lt[2],b:lt[3],a:lt[4]}:(lt=matchers.hsl.exec(it))?{h:lt[1],s:lt[2],l:lt[3]}:(lt=matchers.hsla.exec(it))?{h:lt[1],s:lt[2],l:lt[3],a:lt[4]}:(lt=matchers.hsv.exec(it))?{h:lt[1],s:lt[2],v:lt[3]}:(lt=matchers.hsva.exec(it))?{h:lt[1],s:lt[2],v:lt[3],a:lt[4]}:(lt=matchers.hex8.exec(it))?{r:parseIntFromHex(lt[1]),g:parseIntFromHex(lt[2]),b:parseIntFromHex(lt[3]),a:convertHexToDecimal(lt[4]),format:rt?"name":"hex8"}:(lt=matchers.hex6.exec(it))?{r:parseIntFromHex(lt[1]),g:parseIntFromHex(lt[2]),b:parseIntFromHex(lt[3]),format:rt?"name":"hex"}:(lt=matchers.hex4.exec(it))?{r:parseIntFromHex(lt[1]+""+lt[1]),g:parseIntFromHex(lt[2]+""+lt[2]),b:parseIntFromHex(lt[3]+""+lt[3]),a:convertHexToDecimal(lt[4]+""+lt[4]),format:rt?"name":"hex8"}:(lt=matchers.hex3.exec(it))?{r:parseIntFromHex(lt[1]+""+lt[1]),g:parseIntFromHex(lt[2]+""+lt[2]),b:parseIntFromHex(lt[3]+""+lt[3]),format:rt?"name":"hex"}:!1}function validateWCAG2Parms(it){var rt,lt;return it=it||{level:"AA",size:"small"},rt=(it.level||"AA").toUpperCase(),lt=(it.size||"small").toLowerCase(),rt!=="AA"&&rt!=="AAA"&&(rt="AA"),lt!=="small"&&lt!=="large"&&(lt="small"),{level:rt,size:lt}}function applyGradientStyle(it,rt,lt,ct){const ht=it.getAttribute(ct),dt=inferGradientConfig(ht,lt),{type:ut,colors:ft=[]}=dt,pt=ft.length-1,gt=ft.map((bt,wt)=>typeof bt=="string"?createElement("stop",{offset:`${wt/pt}`,"stop-color":bt}):createElement("stop",{offset:`${bt.offset}`,"stop-color":bt.color})),mt=getGradientId(dt);if(ut==="linear-gradient"){const{angle:bt=0}=dt,[[wt,Ct],[vt,St]]=angleToUnitVector(bt),_t=createElement("linearGradient",{id:mt,x1:wt,y1:Ct,x2:vt,y2:St});gt.forEach(Tt=>_t.appendChild(Tt)),upsertGradient(rt,mt,_t)}else if(ut==="radial-gradient"){const bt=createElement("radialGradient",{id:mt});gt.forEach(wt=>bt.appendChild(wt)),upsertGradient(rt,mt,bt)}const xt=it.getAttribute("fill"),yt=it.getAttribute("stroke");hasColor(xt)&&it.setAttribute("fill",`url(#${mt})`),hasColor(yt)&&it.setAttribute("stroke",`url(#${mt})`)}function upsertGradient(it,rt,lt){const ct=getOrCreateDefs(it);lt.setAttribute("id",rt);const ht=ct.querySelector(`#${rt}`);ht?ht.replaceWith(lt):ct.appendChild(lt)}function inferGradientConfig(it,rt){var ht;if((ht=rt.colors)!=null&&ht.length||!it)return rt;const lt=tinycolor(it),ct=Ft({},rt);return ct.colors=lt.isDark()?[it,lt.lighten(20).toHexString()]:[lt.darken(20).toHexString(),it],!("angle"in rt)&&ct.type==="linear-gradient"&&(ct.angle=225),ct}function getGradientId(it){const{type:rt,colors:lt=[]}=it,ct=getSafetyId(lt.map(ht=>typeof ht=="string"?ht:`${ht.color}_${ht.offset}`).join("-"));if(rt==="linear-gradient"){const{angle:ht=0}=it;return`${rt}-${ct}-${ht}`}return`${rt}-${ct}`}function angleToUnitVector(it){const rt=Math.PI/180*it,lt=Math.cos(rt),ct=Math.sin(rt);return[[.5-lt/2,.5-ct/2],[.5+lt/2,.5+ct/2]]}const diamond=({scale:it=.5,backgroundColor:rt,foregroundColor:lt})=>{const ct=createElement("pattern",{id:"pattern-diamond",width:"20",height:"20",patternTransform:`scale(${it})`,patternUnits:"userSpaceOnUse"}),ht=createElement("rect",{width:"100%",height:"100%",fill:rt}),dt=createElement("path",{d:"M0,0 L20,20 M20,0 L0,20",stroke:lt,"stroke-width":"1"});return ct.appendChild(ht),ct.appendChild(dt),ct},dot=({scale:it=1,backgroundColor:rt,foregroundColor:lt})=>{const ct=createElement("pattern",{id:"pattern-dot",width:"20",height:"20",patternTransform:`scale(${it})`,patternUnits:"userSpaceOnUse"}),ht=createElement("rect",{width:"100%",height:"100%",fill:rt}),dt=createElement("circle",{cx:"5",cy:"5",r:"3",fill:lt}),ut=createElement("circle",{cx:"15",cy:"15",r:"3",fill:lt});return ct.appendChild(ht),ct.appendChild(dt),ct.appendChild(ut),ct},hex$1=({scale:it=.3,backgroundColor:rt,foregroundColor:lt})=>{const ct=createElement("pattern",{id:"pattern-hex",width:"20",height:"20",patternTransform:`scale(${it})`,patternUnits:"userSpaceOnUse"}),ht=createElement("rect",{width:"100%",height:"100%",fill:rt}),dt=createElement("path",{d:"M10,0 L20,5 L20,15 L10,20 L0,15 L0,5 Z",fill:lt});return ct.appendChild(ht),ct.appendChild(dt),ct},line$1=({scale:it=1,backgroundColor:rt,foregroundColor:lt})=>{const dt=createElement("pattern",{id:"pattern-line",width:"20",height:"20",patternTransform:`scale(${it})`,patternUnits:"userSpaceOnUse"}),ut=createElement("rect",{width:"100%",height:"100%",fill:rt}),ft=createElement("line",{x1:"7",y1:"-3",x2:"23",y2:"13",stroke:lt,"stroke-width":6,"stroke-opacity":"0.5"}),pt=createElement("line",{x1:"-3",y1:"7",x2:"13",y2:"23",stroke:lt,"stroke-width":6,"stroke-opacity":"0.5"});return dt.appendChild(ut),dt.appendChild(ft),dt.appendChild(pt),dt},mosaic=({scale:it=1,backgroundColor:rt="#ffffff",foregroundColor:lt="#000000"})=>{const ft=createElement("pattern",{id:"pattern-mosaic",width:20,height:20,patternUnits:"userSpaceOnUse",patternTransform:`scale(${it})`}),pt=createElement("rect",{width:"100%",height:"100%",fill:rt});ft.appendChild(pt);for(let gt=0;gt<4;gt++)for(let mt=0;mt<4;mt++)if((mt+gt)%2===0){const xt=createElement("rect",{x:mt*5,y:gt*5,width:5,height:5,fill:lt});ft.appendChild(xt)}return ft},square=({scale:it=.3,backgroundColor:rt,foregroundColor:lt})=>{const ct=createElement("pattern",{id:"pattern-square",width:"20",height:"20",patternTransform:`scale(${it})`,patternUnits:"userSpaceOnUse"}),ht=createElement("rect",{width:"100%",height:"100%",fill:rt}),dt=createElement("path",{d:"M0,0 L20,0 L20,20 L0,20 Z",fill:lt});return ct.appendChild(ht),ct.appendChild(dt),ct},builtInPatterns=Object.freeze(Object.defineProperty({__proto__:null,diamond,dot,hex:hex$1,line:line$1,mosaic,square},Symbol.toStringTag,{value:"Module"})),PATTERNS=new Map;function registerPattern(it,rt){PATTERNS.has(it)&&console.warn(`Pattern ${it} will be overwritten`),PATTERNS.set(it,rt)}for(const[it,rt]of Object.entries(builtInPatterns))registerPattern(it,rt);function applyPatternStyle(it,rt,lt){const ct=lt.themeConfig.stylize;if(!ct||ct.type!=="pattern")return;const xt=ct,{pattern:ht}=xt,dt=Pe(xt,["pattern"]),ut=PATTERNS.get(ht);if(!ut)return console.warn(`Pattern ${ht} not found`);const{fill:ft}=getAttributes(it,["fill","stroke"]),pt=ft,gt=Ft({backgroundColor:pt&&tinycolor(pt).setAlpha(.5).toRgbString(),foregroundColor:pt},dt),mt=getPatternId(Ft(Ft({},ct),gt));upsertPattern(rt,mt,ut(gt)),hasColor(ft)&&(it.setAttribute("fill",`url(#${mt})`),!it.getAttribute("stroke")&&ft&&it.setAttribute("stroke",ft))}function upsertPattern(it,rt,lt){const ct=getOrCreateDefs(it);lt.setAttribute("id",rt);const ht=ct.querySelector(`pattern#${rt}`);ht?ht.replaceWith(lt):ct.appendChild(lt)}function getPatternId(it){const{pattern:rt,foregroundColor:lt="unset",backgroundColor:ct="unset",scale:ht="unset"}=it;return getSafetyId(`pattern-${rt}-${lt}-${ct}-${ht}`)}function t(it,rt,lt){if(it&&it.length){const[ct,ht]=rt,dt=Math.PI/180*lt,ut=Math.cos(dt),ft=Math.sin(dt);for(const pt of it){const[gt,mt]=pt;pt[0]=(gt-ct)*ut-(mt-ht)*ft+ct,pt[1]=(gt-ct)*ft+(mt-ht)*ut+ht}}}function e$1(it,rt){return it[0]===rt[0]&&it[1]===rt[1]}function s(it,rt,lt,ct=1){const ht=lt,dt=Math.max(rt,.1),ut=it[0]&&it[0][0]&&typeof it[0][0]=="number"?[it]:it,ft=[0,0];if(ht)for(const gt of ut)t(gt,ft,ht);const pt=function(gt,mt,xt){const yt=[];for(const _t of gt){const Tt=[..._t];e$1(Tt[0],Tt[Tt.length-1])||Tt.push([Tt[0][0],Tt[0][1]]),Tt.length>2&&yt.push(Tt)}const bt=[];mt=Math.max(mt,.1);const wt=[];for(const _t of yt)for(let Tt=0;Tt<_t.length-1;Tt++){const Et=_t[Tt],At=_t[Tt+1];if(Et[1]!==At[1]){const Mt=Math.min(Et[1],At[1]);wt.push({ymin:Mt,ymax:Math.max(Et[1],At[1]),x:Mt===Et[1]?Et[0]:At[0],islope:(At[0]-Et[0])/(At[1]-Et[1])})}}if(wt.sort((_t,Tt)=>_t.ymin<Tt.ymin?-1:_t.ymin>Tt.ymin?1:_t.x<Tt.x?-1:_t.x>Tt.x?1:_t.ymax===Tt.ymax?0:(_t.ymax-Tt.ymax)/Math.abs(_t.ymax-Tt.ymax)),!wt.length)return bt;let Ct=[],vt=wt[0].ymin,St=0;for(;Ct.length||wt.length;){if(wt.length){let _t=-1;for(let Tt=0;Tt<wt.length&&!(wt[Tt].ymin>vt);Tt++)_t=Tt;wt.splice(0,_t+1).forEach(Tt=>{Ct.push({s:vt,edge:Tt})})}if(Ct=Ct.filter(_t=>!(_t.edge.ymax<=vt)),Ct.sort((_t,Tt)=>_t.edge.x===Tt.edge.x?0:(_t.edge.x-Tt.edge.x)/Math.abs(_t.edge.x-Tt.edge.x)),(xt!==1||St%mt==0)&&Ct.length>1)for(let _t=0;_t<Ct.length;_t+=2){const Tt=_t+1;if(Tt>=Ct.length)break;const Et=Ct[_t].edge,At=Ct[Tt].edge;bt.push([[Math.round(Et.x),vt],[Math.round(At.x),vt]])}vt+=xt,Ct.forEach(_t=>{_t.edge.x=_t.edge.x+xt*_t.edge.islope}),St++}return bt}(ut,dt,ct);if(ht){for(const gt of ut)t(gt,ft,-ht);(function(gt,mt,xt){const yt=[];gt.forEach(bt=>yt.push(...bt)),t(yt,mt,xt)})(pt,ft,-ht)}return pt}function n$1(it,rt){var lt;const ct=rt.hachureAngle+90;let ht=rt.hachureGap;ht<0&&(ht=4*rt.strokeWidth),ht=Math.round(Math.max(ht,.1));let dt=1;return rt.roughness>=1&&(((lt=rt.randomizer)===null||lt===void 0?void 0:lt.next())||Math.random())>.7&&(dt=ht),s(it,ht,ct,dt||1)}class o{constructor(rt){this.helper=rt}fillPolygons(rt,lt){return this._fillPolygons(rt,lt)}_fillPolygons(rt,lt){const ct=n$1(rt,lt);return{type:"fillSketch",ops:this.renderLines(ct,lt)}}renderLines(rt,lt){const ct=[];for(const ht of rt)ct.push(...this.helper.doubleLineOps(ht[0][0],ht[0][1],ht[1][0],ht[1][1],lt));return ct}}function a$1(it){const rt=it[0],lt=it[1];return Math.sqrt(Math.pow(rt[0]-lt[0],2)+Math.pow(rt[1]-lt[1],2))}let h$1=class extends o{fillPolygons(rt,lt){let ct=lt.hachureGap;ct<0&&(ct=4*lt.strokeWidth),ct=Math.max(ct,.1);const ht=n$1(rt,Object.assign({},lt,{hachureGap:ct})),dt=Math.PI/180*lt.hachureAngle,ut=[],ft=.5*ct*Math.cos(dt),pt=.5*ct*Math.sin(dt);for(const[gt,mt]of ht)a$1([gt,mt])&&ut.push([[gt[0]-ft,gt[1]+pt],[...mt]],[[gt[0]+ft,gt[1]-pt],[...mt]]);return{type:"fillSketch",ops:this.renderLines(ut,lt)}}},r$1=class extends o{fillPolygons(rt,lt){const ct=this._fillPolygons(rt,lt),ht=Object.assign({},lt,{hachureAngle:lt.hachureAngle+90}),dt=this._fillPolygons(rt,ht);return ct.ops=ct.ops.concat(dt.ops),ct}},i$1=class{constructor(rt){this.helper=rt}fillPolygons(rt,lt){const ct=n$1(rt,lt=Object.assign({},lt,{hachureAngle:0}));return this.dotsOnLines(ct,lt)}dotsOnLines(rt,lt){const ct=[];let ht=lt.hachureGap;ht<0&&(ht=4*lt.strokeWidth),ht=Math.max(ht,.1);let dt=lt.fillWeight;dt<0&&(dt=lt.strokeWidth/2);const ut=ht/4;for(const ft of rt){const pt=a$1(ft),gt=pt/ht,mt=Math.ceil(gt)-1,xt=pt-mt*ht,yt=(ft[0][0]+ft[1][0])/2-ht/4,bt=Math.min(ft[0][1],ft[1][1]);for(let wt=0;wt<mt;wt++){const Ct=bt+xt+wt*ht,vt=yt-ut+2*Math.random()*ut,St=Ct-ut+2*Math.random()*ut,_t=this.helper.ellipse(vt,St,dt,dt,lt);ct.push(..._t.ops)}}return{type:"fillSketch",ops:ct}}},c$1=class{constructor(rt){this.helper=rt}fillPolygons(rt,lt){const ct=n$1(rt,lt);return{type:"fillSketch",ops:this.dashedLine(ct,lt)}}dashedLine(rt,lt){const ct=lt.dashOffset<0?lt.hachureGap<0?4*lt.strokeWidth:lt.hachureGap:lt.dashOffset,ht=lt.dashGap<0?lt.hachureGap<0?4*lt.strokeWidth:lt.hachureGap:lt.dashGap,dt=[];return rt.forEach(ut=>{const ft=a$1(ut),pt=Math.floor(ft/(ct+ht)),gt=(ft+ht-pt*(ct+ht))/2;let mt=ut[0],xt=ut[1];mt[0]>xt[0]&&(mt=ut[1],xt=ut[0]);const yt=Math.atan((xt[1]-mt[1])/(xt[0]-mt[0]));for(let bt=0;bt<pt;bt++){const wt=bt*(ct+ht),Ct=wt+ct,vt=[mt[0]+wt*Math.cos(yt)+gt*Math.cos(yt),mt[1]+wt*Math.sin(yt)+gt*Math.sin(yt)],St=[mt[0]+Ct*Math.cos(yt)+gt*Math.cos(yt),mt[1]+Ct*Math.sin(yt)+gt*Math.sin(yt)];dt.push(...this.helper.doubleLineOps(vt[0],vt[1],St[0],St[1],lt))}}),dt}};class l{constructor(rt){this.helper=rt}fillPolygons(rt,lt){const ct=lt.hachureGap<0?4*lt.strokeWidth:lt.hachureGap,ht=lt.zigzagOffset<0?ct:lt.zigzagOffset,dt=n$1(rt,lt=Object.assign({},lt,{hachureGap:ct+ht}));return{type:"fillSketch",ops:this.zigzagLines(dt,ht,lt)}}zigzagLines(rt,lt,ct){const ht=[];return rt.forEach(dt=>{const ut=a$1(dt),ft=Math.round(ut/(2*lt));let pt=dt[0],gt=dt[1];pt[0]>gt[0]&&(pt=dt[1],gt=dt[0]);const mt=Math.atan((gt[1]-pt[1])/(gt[0]-pt[0]));for(let xt=0;xt<ft;xt++){const yt=2*xt*lt,bt=2*(xt+1)*lt,wt=Math.sqrt(2*Math.pow(lt,2)),Ct=[pt[0]+yt*Math.cos(mt),pt[1]+yt*Math.sin(mt)],vt=[pt[0]+bt*Math.cos(mt),pt[1]+bt*Math.sin(mt)],St=[Ct[0]+wt*Math.cos(mt+Math.PI/4),Ct[1]+wt*Math.sin(mt+Math.PI/4)];ht.push(...this.helper.doubleLineOps(Ct[0],Ct[1],St[0],St[1],ct),...this.helper.doubleLineOps(St[0],St[1],vt[0],vt[1],ct))}}),ht}}const u$1={};let p$1=class{constructor(rt){this.seed=rt}next(){return this.seed?(Ye(2,31)-1&(this.seed=Math.imul(48271,this.seed)))/Ye(2,31):Math.random()}};const f=0,d=1,g$1=2,M={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function k(it,rt){return it.type===rt}function b(it){const rt=[],lt=function(ut){const ft=new Array;for(;ut!=="";)if(ut.match(/^([ \t\r\n,]+)/))ut=ut.substr(RegExp.$1.length);else if(ut.match(/^([aAcChHlLmMqQsStTvVzZ])/))ft[ft.length]={type:f,text:RegExp.$1},ut=ut.substr(RegExp.$1.length);else{if(!ut.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];ft[ft.length]={type:d,text:`${parseFloat(RegExp.$1)}`},ut=ut.substr(RegExp.$1.length)}return ft[ft.length]={type:g$1,text:""},ft}(it);let ct="BOD",ht=0,dt=lt[ht];for(;!k(dt,g$1);){let ut=0;const ft=[];if(ct==="BOD"){if(dt.text!=="M"&&dt.text!=="m")return b("M0,0"+it);ht++,ut=M[dt.text],ct=dt.text}else k(dt,d)?ut=M[ct]:(ht++,ut=M[dt.text],ct=dt.text);if(!(ht+ut<lt.length))throw new Error("Path data ended short");for(let pt=ht;pt<ht+ut;pt++){const gt=lt[pt];if(!k(gt,d))throw new Error("Param not a number: "+ct+","+gt.text);ft[ft.length]=+gt.text}if(typeof M[ct]!="number")throw new Error("Bad segment: "+ct);{const pt={key:ct,data:ft};rt.push(pt),ht+=ut,dt=lt[ht],ct==="M"&&(ct="L"),ct==="m"&&(ct="l")}}return rt}function y$4(it){let rt=0,lt=0,ct=0,ht=0;const dt=[];for(const{key:ut,data:ft}of it)switch(ut){case"M":dt.push({key:"M",data:[...ft]}),[rt,lt]=ft,[ct,ht]=ft;break;case"m":rt+=ft[0],lt+=ft[1],dt.push({key:"M",data:[rt,lt]}),ct=rt,ht=lt;break;case"L":dt.push({key:"L",data:[...ft]}),[rt,lt]=ft;break;case"l":rt+=ft[0],lt+=ft[1],dt.push({key:"L",data:[rt,lt]});break;case"C":dt.push({key:"C",data:[...ft]}),rt=ft[4],lt=ft[5];break;case"c":{const pt=ft.map((gt,mt)=>mt%2?gt+lt:gt+rt);dt.push({key:"C",data:pt}),rt=pt[4],lt=pt[5];break}case"Q":dt.push({key:"Q",data:[...ft]}),rt=ft[2],lt=ft[3];break;case"q":{const pt=ft.map((gt,mt)=>mt%2?gt+lt:gt+rt);dt.push({key:"Q",data:pt}),rt=pt[2],lt=pt[3];break}case"A":dt.push({key:"A",data:[...ft]}),rt=ft[5],lt=ft[6];break;case"a":rt+=ft[5],lt+=ft[6],dt.push({key:"A",data:[ft[0],ft[1],ft[2],ft[3],ft[4],rt,lt]});break;case"H":dt.push({key:"H",data:[...ft]}),rt=ft[0];break;case"h":rt+=ft[0],dt.push({key:"H",data:[rt]});break;case"V":dt.push({key:"V",data:[...ft]}),lt=ft[0];break;case"v":lt+=ft[0],dt.push({key:"V",data:[lt]});break;case"S":dt.push({key:"S",data:[...ft]}),rt=ft[2],lt=ft[3];break;case"s":{const pt=ft.map((gt,mt)=>mt%2?gt+lt:gt+rt);dt.push({key:"S",data:pt}),rt=pt[2],lt=pt[3];break}case"T":dt.push({key:"T",data:[...ft]}),rt=ft[0],lt=ft[1];break;case"t":rt+=ft[0],lt+=ft[1],dt.push({key:"T",data:[rt,lt]});break;case"Z":case"z":dt.push({key:"Z",data:[]}),rt=ct,lt=ht}return dt}function m$1(it){const rt=[];let lt="",ct=0,ht=0,dt=0,ut=0,ft=0,pt=0;for(const{key:gt,data:mt}of it){switch(gt){case"M":rt.push({key:"M",data:[...mt]}),[ct,ht]=mt,[dt,ut]=mt;break;case"C":rt.push({key:"C",data:[...mt]}),ct=mt[4],ht=mt[5],ft=mt[2],pt=mt[3];break;case"L":rt.push({key:"L",data:[...mt]}),[ct,ht]=mt;break;case"H":ct=mt[0],rt.push({key:"L",data:[ct,ht]});break;case"V":ht=mt[0],rt.push({key:"L",data:[ct,ht]});break;case"S":{let xt=0,yt=0;lt==="C"||lt==="S"?(xt=ct+(ct-ft),yt=ht+(ht-pt)):(xt=ct,yt=ht),rt.push({key:"C",data:[xt,yt,...mt]}),ft=mt[0],pt=mt[1],ct=mt[2],ht=mt[3];break}case"T":{const[xt,yt]=mt;let bt=0,wt=0;lt==="Q"||lt==="T"?(bt=ct+(ct-ft),wt=ht+(ht-pt)):(bt=ct,wt=ht);const Ct=ct+2*(bt-ct)/3,vt=ht+2*(wt-ht)/3,St=xt+2*(bt-xt)/3,_t=yt+2*(wt-yt)/3;rt.push({key:"C",data:[Ct,vt,St,_t,xt,yt]}),ft=bt,pt=wt,ct=xt,ht=yt;break}case"Q":{const[xt,yt,bt,wt]=mt,Ct=ct+2*(xt-ct)/3,vt=ht+2*(yt-ht)/3,St=bt+2*(xt-bt)/3,_t=wt+2*(yt-wt)/3;rt.push({key:"C",data:[Ct,vt,St,_t,bt,wt]}),ft=xt,pt=yt,ct=bt,ht=wt;break}case"A":{const xt=Math.abs(mt[0]),yt=Math.abs(mt[1]),bt=mt[2],wt=mt[3],Ct=mt[4],vt=mt[5],St=mt[6];xt===0||yt===0?(rt.push({key:"C",data:[ct,ht,vt,St,vt,St]}),ct=vt,ht=St):(ct!==vt||ht!==St)&&(x$4(ct,ht,vt,St,xt,yt,bt,wt,Ct).forEach(function(_t){rt.push({key:"C",data:_t})}),ct=vt,ht=St);break}case"Z":rt.push({key:"Z",data:[]}),ct=dt,ht=ut}lt=gt}return rt}function w(it,rt,lt){return[it*Math.cos(lt)-rt*Math.sin(lt),it*Math.sin(lt)+rt*Math.cos(lt)]}function x$4(it,rt,lt,ct,ht,dt,ut,ft,pt,gt){const mt=(xt=ut,Math.PI*xt/180);var xt;let yt=[],bt=0,wt=0,Ct=0,vt=0;if(gt)[bt,wt,Ct,vt]=gt;else{[it,rt]=w(it,rt,-mt),[lt,ct]=w(lt,ct,-mt);const kt=(it-lt)/2,Ht=(rt-ct)/2;let Xt=kt*kt/(ht*ht)+Ht*Ht/(dt*dt);Xt>1&&(Xt=Math.sqrt(Xt),ht*=Xt,dt*=Xt);const zt=ht*ht,Nt=dt*dt,Bt=zt*Nt-zt*Ht*Ht-Nt*kt*kt,Vt=zt*Ht*Ht+Nt*kt*kt,Yt=(ft===pt?-1:1)*Math.sqrt(Math.abs(Bt/Vt));Ct=Yt*ht*Ht/dt+(it+lt)/2,vt=Yt*-dt*kt/ht+(rt+ct)/2,bt=Math.asin(parseFloat(((rt-vt)/dt).toFixed(9))),wt=Math.asin(parseFloat(((ct-vt)/dt).toFixed(9))),it<Ct&&(bt=Math.PI-bt),lt<Ct&&(wt=Math.PI-wt),bt<0&&(bt=2*Math.PI+bt),wt<0&&(wt=2*Math.PI+wt),pt&&bt>wt&&(bt-=2*Math.PI),!pt&&wt>bt&&(wt-=2*Math.PI)}let St=wt-bt;if(Math.abs(St)>120*Math.PI/180){const kt=wt,Ht=lt,Xt=ct;wt=pt&&wt>bt?bt+120*Math.PI/180*1:bt+120*Math.PI/180*-1,yt=x$4(lt=Ct+ht*Math.cos(wt),ct=vt+dt*Math.sin(wt),Ht,Xt,ht,dt,ut,0,pt,[wt,kt,Ct,vt])}St=wt-bt;const _t=Math.cos(bt),Tt=Math.sin(bt),Et=Math.cos(wt),At=Math.sin(wt),Mt=Math.tan(St/4),It=4/3*ht*Mt,Lt=4/3*dt*Mt,jt=[it,rt],Ot=[it+It*Tt,rt-Lt*_t],Pt=[lt+It*At,ct-Lt*Et],Gt=[lt,ct];if(Ot[0]=2*jt[0]-Ot[0],Ot[1]=2*jt[1]-Ot[1],gt)return[Ot,Pt,Gt].concat(yt);{yt=[Ot,Pt,Gt].concat(yt);const kt=[];for(let Ht=0;Ht<yt.length;Ht+=3){const Xt=w(yt[Ht][0],yt[Ht][1],mt),zt=w(yt[Ht+1][0],yt[Ht+1][1],mt),Nt=w(yt[Ht+2][0],yt[Ht+2][1],mt);kt.push([Xt[0],Xt[1],zt[0],zt[1],Nt[0],Nt[1]])}return kt}}const P$1={randOffset:function(it,rt){return G$1(it,rt)},randOffsetWithRange:function(it,rt,lt){return E(it,rt,lt)},ellipse:function(it,rt,lt,ct,ht){const dt=T(lt,ct,ht);return D$1(it,rt,ht,dt).opset},doubleLineOps:function(it,rt,lt,ct,ht){return $(it,rt,lt,ct,ht,!0)}};function v(it,rt,lt,ct,ht){return{type:"path",ops:$(it,rt,lt,ct,ht)}}function S(it,rt,lt){const ct=(it||[]).length;if(ct>2){const ht=[];for(let dt=0;dt<ct-1;dt++)ht.push(...$(it[dt][0],it[dt][1],it[dt+1][0],it[dt+1][1],lt));return rt&&ht.push(...$(it[ct-1][0],it[ct-1][1],it[0][0],it[0][1],lt)),{type:"path",ops:ht}}return ct===2?v(it[0][0],it[0][1],it[1][0],it[1][1],lt):{type:"path",ops:[]}}function O(it,rt,lt,ct,ht){return function(dt,ut){return S(dt,!0,ut)}([[it,rt],[it+lt,rt],[it+lt,rt+ct],[it,rt+ct]],ht)}function L(it,rt){if(it.length){const lt=typeof it[0][0]=="number"?[it]:it,ct=j(lt[0],1*(1+.2*rt.roughness),rt),ht=rt.disableMultiStroke?[]:j(lt[0],1.5*(1+.22*rt.roughness),z(rt));for(let dt=1;dt<lt.length;dt++){const ut=lt[dt];if(ut.length){const ft=j(ut,1*(1+.2*rt.roughness),rt),pt=rt.disableMultiStroke?[]:j(ut,1.5*(1+.22*rt.roughness),z(rt));for(const gt of ft)gt.op!=="move"&&ct.push(gt);for(const gt of pt)gt.op!=="move"&&ht.push(gt)}}return{type:"path",ops:ct.concat(ht)}}return{type:"path",ops:[]}}function T(it,rt,lt){const ct=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(it/2,2)+Math.pow(rt/2,2))/2)),ht=Math.ceil(Math.max(lt.curveStepCount,lt.curveStepCount/Math.sqrt(200)*ct)),dt=2*Math.PI/ht;let ut=Math.abs(it/2),ft=Math.abs(rt/2);const pt=1-lt.curveFitting;return ut+=G$1(ut*pt,lt),ft+=G$1(ft*pt,lt),{increment:dt,rx:ut,ry:ft}}function D$1(it,rt,lt,ct){const[ht,dt]=F$1(ct.increment,it,rt,ct.rx,ct.ry,1,ct.increment*E(.1,E(.4,1,lt),lt),lt);let ut=q(ht,null,lt);if(!lt.disableMultiStroke&&lt.roughness!==0){const[ft]=F$1(ct.increment,it,rt,ct.rx,ct.ry,1.5,0,lt),pt=q(ft,null,lt);ut=ut.concat(pt)}return{estimatedPoints:dt,opset:{type:"path",ops:ut}}}function A$1(it,rt,lt,ct,ht,dt,ut,ft,pt){const gt=it,mt=rt;let xt=Math.abs(lt/2),yt=Math.abs(ct/2);xt+=G$1(.01*xt,pt),yt+=G$1(.01*yt,pt);let bt=ht,wt=dt;for(;bt<0;)bt+=2*Math.PI,wt+=2*Math.PI;wt-bt>2*Math.PI&&(bt=0,wt=2*Math.PI);const Ct=2*Math.PI/pt.curveStepCount,vt=Math.min(Ct/2,(wt-bt)/2),St=V(vt,gt,mt,xt,yt,bt,wt,1,pt);if(!pt.disableMultiStroke){const _t=V(vt,gt,mt,xt,yt,bt,wt,1.5,pt);St.push(..._t)}return ut&&(ft?St.push(...$(gt,mt,gt+xt*Math.cos(bt),mt+yt*Math.sin(bt),pt),...$(gt,mt,gt+xt*Math.cos(wt),mt+yt*Math.sin(wt),pt)):St.push({op:"lineTo",data:[gt,mt]},{op:"lineTo",data:[gt+xt*Math.cos(bt),mt+yt*Math.sin(bt)]})),{type:"path",ops:St}}function _(it,rt){const lt=m$1(y$4(b(it))),ct=[];let ht=[0,0],dt=[0,0];for(const{key:ut,data:ft}of lt)switch(ut){case"M":dt=[ft[0],ft[1]],ht=[ft[0],ft[1]];break;case"L":ct.push(...$(dt[0],dt[1],ft[0],ft[1],rt)),dt=[ft[0],ft[1]];break;case"C":{const[pt,gt,mt,xt,yt,bt]=ft;ct.push(...Z(pt,gt,mt,xt,yt,bt,dt,rt)),dt=[yt,bt];break}case"Z":ct.push(...$(dt[0],dt[1],ht[0],ht[1],rt)),dt=[ht[0],ht[1]]}return{type:"path",ops:ct}}function I$1(it,rt){const lt=[];for(const ct of it)if(ct.length){const ht=rt.maxRandomnessOffset||0,dt=ct.length;if(dt>2){lt.push({op:"move",data:[ct[0][0]+G$1(ht,rt),ct[0][1]+G$1(ht,rt)]});for(let ut=1;ut<dt;ut++)lt.push({op:"lineTo",data:[ct[ut][0]+G$1(ht,rt),ct[ut][1]+G$1(ht,rt)]})}}return{type:"fillPath",ops:lt}}function C(it,rt){return function(lt,ct){let ht=lt.fillStyle||"hachure";if(!u$1[ht])switch(ht){case"zigzag":u$1[ht]||(u$1[ht]=new h$1(ct));break;case"cross-hatch":u$1[ht]||(u$1[ht]=new r$1(ct));break;case"dots":u$1[ht]||(u$1[ht]=new i$1(ct));break;case"dashed":u$1[ht]||(u$1[ht]=new c$1(ct));break;case"zigzag-line":u$1[ht]||(u$1[ht]=new l(ct));break;default:ht="hachure",u$1[ht]||(u$1[ht]=new o(ct))}return u$1[ht]}(rt,P$1).fillPolygons(it,rt)}function z(it){const rt=Object.assign({},it);return rt.randomizer=void 0,it.seed&&(rt.seed=it.seed+1),rt}function W(it){return it.randomizer||(it.randomizer=new p$1(it.seed||0)),it.randomizer.next()}function E(it,rt,lt,ct=1){return lt.roughness*ct*(W(lt)*(rt-it)+it)}function G$1(it,rt,lt=1){return E(-it,it,rt,lt)}function $(it,rt,lt,ct,ht,dt=!1){const ut=dt?ht.disableMultiStrokeFill:ht.disableMultiStroke,ft=R(it,rt,lt,ct,ht,!0,!1);if(ut)return ft;const pt=R(it,rt,lt,ct,ht,!0,!0);return ft.concat(pt)}function R(it,rt,lt,ct,ht,dt,ut){const ft=Math.pow(it-lt,2)+Math.pow(rt-ct,2),pt=Math.sqrt(ft);let gt=1;gt=pt<200?1:pt>500?.4:-.0016668*pt+1.233334;let mt=ht.maxRandomnessOffset||0;mt*mt*100>ft&&(mt=pt/10);const xt=mt/2,yt=.2+.2*W(ht);let bt=ht.bowing*ht.maxRandomnessOffset*(ct-rt)/200,wt=ht.bowing*ht.maxRandomnessOffset*(it-lt)/200;bt=G$1(bt,ht,gt),wt=G$1(wt,ht,gt);const Ct=[],vt=()=>G$1(xt,ht,gt),St=()=>G$1(mt,ht,gt),_t=ht.preserveVertices;return ut?Ct.push({op:"move",data:[it+(_t?0:vt()),rt+(_t?0:vt())]}):Ct.push({op:"move",data:[it+(_t?0:G$1(mt,ht,gt)),rt+(_t?0:G$1(mt,ht,gt))]}),ut?Ct.push({op:"bcurveTo",data:[bt+it+(lt-it)*yt+vt(),wt+rt+(ct-rt)*yt+vt(),bt+it+2*(lt-it)*yt+vt(),wt+rt+2*(ct-rt)*yt+vt(),lt+(_t?0:vt()),ct+(_t?0:vt())]}):Ct.push({op:"bcurveTo",data:[bt+it+(lt-it)*yt+St(),wt+rt+(ct-rt)*yt+St(),bt+it+2*(lt-it)*yt+St(),wt+rt+2*(ct-rt)*yt+St(),lt+(_t?0:St()),ct+(_t?0:St())]}),Ct}function j(it,rt,lt){if(!it.length)return[];const ct=[];ct.push([it[0][0]+G$1(rt,lt),it[0][1]+G$1(rt,lt)]),ct.push([it[0][0]+G$1(rt,lt),it[0][1]+G$1(rt,lt)]);for(let ht=1;ht<it.length;ht++)ct.push([it[ht][0]+G$1(rt,lt),it[ht][1]+G$1(rt,lt)]),ht===it.length-1&&ct.push([it[ht][0]+G$1(rt,lt),it[ht][1]+G$1(rt,lt)]);return q(ct,null,lt)}function q(it,rt,lt){const ct=it.length,ht=[];if(ct>3){const dt=[],ut=1-lt.curveTightness;ht.push({op:"move",data:[it[1][0],it[1][1]]});for(let ft=1;ft+2<ct;ft++){const pt=it[ft];dt[0]=[pt[0],pt[1]],dt[1]=[pt[0]+(ut*it[ft+1][0]-ut*it[ft-1][0])/6,pt[1]+(ut*it[ft+1][1]-ut*it[ft-1][1])/6],dt[2]=[it[ft+1][0]+(ut*it[ft][0]-ut*it[ft+2][0])/6,it[ft+1][1]+(ut*it[ft][1]-ut*it[ft+2][1])/6],dt[3]=[it[ft+1][0],it[ft+1][1]],ht.push({op:"bcurveTo",data:[dt[1][0],dt[1][1],dt[2][0],dt[2][1],dt[3][0],dt[3][1]]})}}else ct===3?(ht.push({op:"move",data:[it[1][0],it[1][1]]}),ht.push({op:"bcurveTo",data:[it[1][0],it[1][1],it[2][0],it[2][1],it[2][0],it[2][1]]})):ct===2&&ht.push(...R(it[0][0],it[0][1],it[1][0],it[1][1],lt,!0,!0));return ht}function F$1(it,rt,lt,ct,ht,dt,ut,ft){const pt=[],gt=[];if(ft.roughness===0){it/=4,gt.push([rt+ct*Math.cos(-it),lt+ht*Math.sin(-it)]);for(let mt=0;mt<=2*Math.PI;mt+=it){const xt=[rt+ct*Math.cos(mt),lt+ht*Math.sin(mt)];pt.push(xt),gt.push(xt)}gt.push([rt+ct*Math.cos(0),lt+ht*Math.sin(0)]),gt.push([rt+ct*Math.cos(it),lt+ht*Math.sin(it)])}else{const mt=G$1(.5,ft)-Math.PI/2;gt.push([G$1(dt,ft)+rt+.9*ct*Math.cos(mt-it),G$1(dt,ft)+lt+.9*ht*Math.sin(mt-it)]);const xt=2*Math.PI+mt-.01;for(let yt=mt;yt<xt;yt+=it){const bt=[G$1(dt,ft)+rt+ct*Math.cos(yt),G$1(dt,ft)+lt+ht*Math.sin(yt)];pt.push(bt),gt.push(bt)}gt.push([G$1(dt,ft)+rt+ct*Math.cos(mt+2*Math.PI+.5*ut),G$1(dt,ft)+lt+ht*Math.sin(mt+2*Math.PI+.5*ut)]),gt.push([G$1(dt,ft)+rt+.98*ct*Math.cos(mt+ut),G$1(dt,ft)+lt+.98*ht*Math.sin(mt+ut)]),gt.push([G$1(dt,ft)+rt+.9*ct*Math.cos(mt+.5*ut),G$1(dt,ft)+lt+.9*ht*Math.sin(mt+.5*ut)])}return[gt,pt]}function V(it,rt,lt,ct,ht,dt,ut,ft,pt){const gt=dt+G$1(.1,pt),mt=[];mt.push([G$1(ft,pt)+rt+.9*ct*Math.cos(gt-it),G$1(ft,pt)+lt+.9*ht*Math.sin(gt-it)]);for(let xt=gt;xt<=ut;xt+=it)mt.push([G$1(ft,pt)+rt+ct*Math.cos(xt),G$1(ft,pt)+lt+ht*Math.sin(xt)]);return mt.push([rt+ct*Math.cos(ut),lt+ht*Math.sin(ut)]),mt.push([rt+ct*Math.cos(ut),lt+ht*Math.sin(ut)]),q(mt,null,pt)}function Z(it,rt,lt,ct,ht,dt,ut,ft){const pt=[],gt=[ft.maxRandomnessOffset||1,(ft.maxRandomnessOffset||1)+.3];let mt=[0,0];const xt=ft.disableMultiStroke?1:2,yt=ft.preserveVertices;for(let bt=0;bt<xt;bt++)bt===0?pt.push({op:"move",data:[ut[0],ut[1]]}):pt.push({op:"move",data:[ut[0]+(yt?0:G$1(gt[0],ft)),ut[1]+(yt?0:G$1(gt[0],ft))]}),mt=yt?[ht,dt]:[ht+G$1(gt[bt],ft),dt+G$1(gt[bt],ft)],pt.push({op:"bcurveTo",data:[it+G$1(gt[bt],ft),rt+G$1(gt[bt],ft),lt+G$1(gt[bt],ft),ct+G$1(gt[bt],ft),mt[0],mt[1]]});return pt}function Q(it){return[...it]}function H(it,rt=0){const lt=it.length;if(lt<3)throw new Error("A curve must have at least three points.");const ct=[];if(lt===3)ct.push(Q(it[0]),Q(it[1]),Q(it[2]),Q(it[2]));else{const ht=[];ht.push(it[0],it[0]);for(let ft=1;ft<it.length;ft++)ht.push(it[ft]),ft===it.length-1&&ht.push(it[ft]);const dt=[],ut=1-rt;ct.push(Q(ht[0]));for(let ft=1;ft+2<ht.length;ft++){const pt=ht[ft];dt[0]=[pt[0],pt[1]],dt[1]=[pt[0]+(ut*ht[ft+1][0]-ut*ht[ft-1][0])/6,pt[1]+(ut*ht[ft+1][1]-ut*ht[ft-1][1])/6],dt[2]=[ht[ft+1][0]+(ut*ht[ft][0]-ut*ht[ft+2][0])/6,ht[ft+1][1]+(ut*ht[ft][1]-ut*ht[ft+2][1])/6],dt[3]=[ht[ft+1][0],ht[ft+1][1]],ct.push(dt[1],dt[2],dt[3])}}return ct}function N(it,rt){return Math.pow(it[0]-rt[0],2)+Math.pow(it[1]-rt[1],2)}function B(it,rt,lt){const ct=N(rt,lt);if(ct===0)return N(it,rt);let ht=((it[0]-rt[0])*(lt[0]-rt[0])+(it[1]-rt[1])*(lt[1]-rt[1]))/ct;return ht=Math.max(0,Math.min(1,ht)),N(it,J(rt,lt,ht))}function J(it,rt,lt){return[it[0]+(rt[0]-it[0])*lt,it[1]+(rt[1]-it[1])*lt]}function K(it,rt,lt,ct){const ht=ct||[];if(function(ft,pt){const gt=ft[pt+0],mt=ft[pt+1],xt=ft[pt+2],yt=ft[pt+3];let bt=3*mt[0]-2*gt[0]-yt[0];bt*=bt;let wt=3*mt[1]-2*gt[1]-yt[1];wt*=wt;let Ct=3*xt[0]-2*yt[0]-gt[0];Ct*=Ct;let vt=3*xt[1]-2*yt[1]-gt[1];return vt*=vt,bt<Ct&&(bt=Ct),wt<vt&&(wt=vt),bt+wt}(it,rt)<lt){const ft=it[rt+0];ht.length?(dt=ht[ht.length-1],ut=ft,Math.sqrt(N(dt,ut))>1&&ht.push(ft)):ht.push(ft),ht.push(it[rt+3])}else{const pt=it[rt+0],gt=it[rt+1],mt=it[rt+2],xt=it[rt+3],yt=J(pt,gt,.5),bt=J(gt,mt,.5),wt=J(mt,xt,.5),Ct=J(yt,bt,.5),vt=J(bt,wt,.5),St=J(Ct,vt,.5);K([pt,yt,Ct,St],0,lt,ht),K([St,vt,wt,xt],0,lt,ht)}var dt,ut;return ht}function U(it,rt){return X(it,0,it.length,rt)}function X(it,rt,lt,ct,ht){const dt=ht||[],ut=it[rt],ft=it[lt-1];let pt=0,gt=1;for(let mt=rt+1;mt<lt-1;++mt){const xt=B(it[mt],ut,ft);xt>pt&&(pt=xt,gt=mt)}return Math.sqrt(pt)>ct?(X(it,rt,gt+1,ct,dt),X(it,gt,lt,ct,dt)):(dt.length||dt.push(ut),dt.push(ft)),dt}function Y$1(it,rt=.15,lt){const ct=[],ht=(it.length-1)/3;for(let dt=0;dt<ht;dt++)K(it,3*dt,rt,ct);return lt&&lt>0?X(ct,0,ct.length,lt):ct}const tt="none";class et{constructor(rt){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=rt||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*Ye(2,31))}_o(rt){return rt?Object.assign({},this.defaultOptions,rt):this.defaultOptions}_d(rt,lt,ct){return{shape:rt,sets:lt||[],options:ct||this.defaultOptions}}line(rt,lt,ct,ht,dt){const ut=this._o(dt);return this._d("line",[v(rt,lt,ct,ht,ut)],ut)}rectangle(rt,lt,ct,ht,dt){const ut=this._o(dt),ft=[],pt=O(rt,lt,ct,ht,ut);if(ut.fill){const gt=[[rt,lt],[rt+ct,lt],[rt+ct,lt+ht],[rt,lt+ht]];ut.fillStyle==="solid"?ft.push(I$1([gt],ut)):ft.push(C([gt],ut))}return ut.stroke!==tt&&ft.push(pt),this._d("rectangle",ft,ut)}ellipse(rt,lt,ct,ht,dt){const ut=this._o(dt),ft=[],pt=T(ct,ht,ut),gt=D$1(rt,lt,ut,pt);if(ut.fill)if(ut.fillStyle==="solid"){const mt=D$1(rt,lt,ut,pt).opset;mt.type="fillPath",ft.push(mt)}else ft.push(C([gt.estimatedPoints],ut));return ut.stroke!==tt&&ft.push(gt.opset),this._d("ellipse",ft,ut)}circle(rt,lt,ct,ht){const dt=this.ellipse(rt,lt,ct,ct,ht);return dt.shape="circle",dt}linearPath(rt,lt){const ct=this._o(lt);return this._d("linearPath",[S(rt,!1,ct)],ct)}arc(rt,lt,ct,ht,dt,ut,ft=!1,pt){const gt=this._o(pt),mt=[],xt=A$1(rt,lt,ct,ht,dt,ut,ft,!0,gt);if(ft&&gt.fill)if(gt.fillStyle==="solid"){const yt=Object.assign({},gt);yt.disableMultiStroke=!0;const bt=A$1(rt,lt,ct,ht,dt,ut,!0,!1,yt);bt.type="fillPath",mt.push(bt)}else mt.push(function(yt,bt,wt,Ct,vt,St,_t){const Tt=yt,Et=bt;let At=Math.abs(wt/2),Mt=Math.abs(Ct/2);At+=G$1(.01*At,_t),Mt+=G$1(.01*Mt,_t);let It=vt,Lt=St;for(;It<0;)It+=2*Math.PI,Lt+=2*Math.PI;Lt-It>2*Math.PI&&(It=0,Lt=2*Math.PI);const jt=(Lt-It)/_t.curveStepCount,Ot=[];for(let Pt=It;Pt<=Lt;Pt+=jt)Ot.push([Tt+At*Math.cos(Pt),Et+Mt*Math.sin(Pt)]);return Ot.push([Tt+At*Math.cos(Lt),Et+Mt*Math.sin(Lt)]),Ot.push([Tt,Et]),C([Ot],_t)}(rt,lt,ct,ht,dt,ut,gt));return gt.stroke!==tt&&mt.push(xt),this._d("arc",mt,gt)}curve(rt,lt){const ct=this._o(lt),ht=[],dt=L(rt,ct);if(ct.fill&&ct.fill!==tt)if(ct.fillStyle==="solid"){const ut=L(rt,Object.assign(Object.assign({},ct),{disableMultiStroke:!0,roughness:ct.roughness?ct.roughness+ct.fillShapeRoughnessGain:0}));ht.push({type:"fillPath",ops:this._mergedShape(ut.ops)})}else{const ut=[],ft=rt;if(ft.length){const pt=typeof ft[0][0]=="number"?[ft]:ft;for(const gt of pt)gt.length<3?ut.push(...gt):gt.length===3?ut.push(...Y$1(H([gt[0],gt[0],gt[1],gt[2]]),10,(1+ct.roughness)/2)):ut.push(...Y$1(H(gt),10,(1+ct.roughness)/2))}ut.length&&ht.push(C([ut],ct))}return ct.stroke!==tt&&ht.push(dt),this._d("curve",ht,ct)}polygon(rt,lt){const ct=this._o(lt),ht=[],dt=S(rt,!0,ct);return ct.fill&&(ct.fillStyle==="solid"?ht.push(I$1([rt],ct)):ht.push(C([rt],ct))),ct.stroke!==tt&&ht.push(dt),this._d("polygon",ht,ct)}path(rt,lt){const ct=this._o(lt),ht=[];if(!rt)return this._d("path",ht,ct);rt=(rt||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const dt=ct.fill&&ct.fill!=="transparent"&&ct.fill!==tt,ut=ct.stroke!==tt,ft=!!(ct.simplification&&ct.simplification<1),pt=function(mt,xt,yt){const bt=m$1(y$4(b(mt))),wt=[];let Ct=[],vt=[0,0],St=[];const _t=()=>{St.length>=4&&Ct.push(...Y$1(St,xt)),St=[]},Tt=()=>{_t(),Ct.length&&(wt.push(Ct),Ct=[])};for(const{key:At,data:Mt}of bt)switch(At){case"M":Tt(),vt=[Mt[0],Mt[1]],Ct.push(vt);break;case"L":_t(),Ct.push([Mt[0],Mt[1]]);break;case"C":if(!St.length){const It=Ct.length?Ct[Ct.length-1]:vt;St.push([It[0],It[1]])}St.push([Mt[0],Mt[1]]),St.push([Mt[2],Mt[3]]),St.push([Mt[4],Mt[5]]);break;case"Z":_t(),Ct.push([vt[0],vt[1]])}if(Tt(),!yt)return wt;const Et=[];for(const At of wt){const Mt=U(At,yt);Mt.length&&Et.push(Mt)}return Et}(rt,1,ft?4-4*(ct.simplification||1):(1+ct.roughness)/2),gt=_(rt,ct);if(dt)if(ct.fillStyle==="solid")if(pt.length===1){const mt=_(rt,Object.assign(Object.assign({},ct),{disableMultiStroke:!0,roughness:ct.roughness?ct.roughness+ct.fillShapeRoughnessGain:0}));ht.push({type:"fillPath",ops:this._mergedShape(mt.ops)})}else ht.push(I$1(pt,ct));else ht.push(C(pt,ct));return ut&&(ft?pt.forEach(mt=>{ht.push(S(mt,!1,ct))}):ht.push(gt)),this._d("path",ht,ct)}opsToPath(rt,lt){let ct="";for(const ht of rt.ops){const dt=typeof lt=="number"&&lt>=0?ht.data.map(ut=>+ut.toFixed(lt)):ht.data;switch(ht.op){case"move":ct+=`M${dt[0]} ${dt[1]} `;break;case"bcurveTo":ct+=`C${dt[0]} ${dt[1]}, ${dt[2]} ${dt[3]}, ${dt[4]} ${dt[5]} `;break;case"lineTo":ct+=`L${dt[0]} ${dt[1]} `}}return ct.trim()}toPaths(rt){const lt=rt.sets||[],ct=rt.options||this.defaultOptions,ht=[];for(const dt of lt){let ut=null;switch(dt.type){case"path":ut={d:this.opsToPath(dt),stroke:ct.stroke,strokeWidth:ct.strokeWidth,fill:tt};break;case"fillPath":ut={d:this.opsToPath(dt),stroke:tt,strokeWidth:0,fill:ct.fill||tt};break;case"fillSketch":ut=this.fillSketch(dt,ct)}ut&&ht.push(ut)}return ht}fillSketch(rt,lt){let ct=lt.fillWeight;return ct<0&&(ct=lt.strokeWidth/2),{d:this.opsToPath(rt),stroke:lt.fill||tt,strokeWidth:ct,fill:tt}}_mergedShape(rt){return rt.filter((lt,ct)=>ct===0||lt.op!=="move")}}class st{constructor(rt,lt){this.canvas=rt,this.ctx=this.canvas.getContext("2d"),this.gen=new et(lt)}draw(rt){const lt=rt.sets||[],ct=rt.options||this.getDefaultOptions(),ht=this.ctx,dt=rt.options.fixedDecimalPlaceDigits;for(const ut of lt)switch(ut.type){case"path":ht.save(),ht.strokeStyle=ct.stroke==="none"?"transparent":ct.stroke,ht.lineWidth=ct.strokeWidth,ct.strokeLineDash&&ht.setLineDash(ct.strokeLineDash),ct.strokeLineDashOffset&&(ht.lineDashOffset=ct.strokeLineDashOffset),this._drawToContext(ht,ut,dt),ht.restore();break;case"fillPath":{ht.save(),ht.fillStyle=ct.fill||"";const ft=rt.shape==="curve"||rt.shape==="polygon"||rt.shape==="path"?"evenodd":"nonzero";this._drawToContext(ht,ut,dt,ft),ht.restore();break}case"fillSketch":this.fillSketch(ht,ut,ct)}}fillSketch(rt,lt,ct){let ht=ct.fillWeight;ht<0&&(ht=ct.strokeWidth/2),rt.save(),ct.fillLineDash&&rt.setLineDash(ct.fillLineDash),ct.fillLineDashOffset&&(rt.lineDashOffset=ct.fillLineDashOffset),rt.strokeStyle=ct.fill||"",rt.lineWidth=ht,this._drawToContext(rt,lt,ct.fixedDecimalPlaceDigits),rt.restore()}_drawToContext(rt,lt,ct,ht="nonzero"){rt.beginPath();for(const dt of lt.ops){const ut=typeof ct=="number"&&ct>=0?dt.data.map(ft=>+ft.toFixed(ct)):dt.data;switch(dt.op){case"move":rt.moveTo(ut[0],ut[1]);break;case"bcurveTo":rt.bezierCurveTo(ut[0],ut[1],ut[2],ut[3],ut[4],ut[5]);break;case"lineTo":rt.lineTo(ut[0],ut[1])}}lt.type==="fillPath"?rt.fill(ht):rt.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(rt,lt,ct,ht,dt){const ut=this.gen.line(rt,lt,ct,ht,dt);return this.draw(ut),ut}rectangle(rt,lt,ct,ht,dt){const ut=this.gen.rectangle(rt,lt,ct,ht,dt);return this.draw(ut),ut}ellipse(rt,lt,ct,ht,dt){const ut=this.gen.ellipse(rt,lt,ct,ht,dt);return this.draw(ut),ut}circle(rt,lt,ct,ht){const dt=this.gen.circle(rt,lt,ct,ht);return this.draw(dt),dt}linearPath(rt,lt){const ct=this.gen.linearPath(rt,lt);return this.draw(ct),ct}polygon(rt,lt){const ct=this.gen.polygon(rt,lt);return this.draw(ct),ct}arc(rt,lt,ct,ht,dt,ut,ft=!1,pt){const gt=this.gen.arc(rt,lt,ct,ht,dt,ut,ft,pt);return this.draw(gt),gt}curve(rt,lt){const ct=this.gen.curve(rt,lt);return this.draw(ct),ct}path(rt,lt){const ct=this.gen.path(rt,lt);return this.draw(ct),ct}}const nt="http://www.w3.org/2000/svg";class ot{constructor(rt,lt){this.svg=rt,this.gen=new et(lt)}draw(rt){const lt=rt.sets||[],ct=rt.options||this.getDefaultOptions(),ht=this.svg.ownerDocument||window.document,dt=ht.createElementNS(nt,"g"),ut=rt.options.fixedDecimalPlaceDigits;for(const ft of lt){let pt=null;switch(ft.type){case"path":pt=ht.createElementNS(nt,"path"),pt.setAttribute("d",this.opsToPath(ft,ut)),pt.setAttribute("stroke",ct.stroke),pt.setAttribute("stroke-width",ct.strokeWidth+""),pt.setAttribute("fill","none"),ct.strokeLineDash&&pt.setAttribute("stroke-dasharray",ct.strokeLineDash.join(" ").trim()),ct.strokeLineDashOffset&&pt.setAttribute("stroke-dashoffset",`${ct.strokeLineDashOffset}`);break;case"fillPath":pt=ht.createElementNS(nt,"path"),pt.setAttribute("d",this.opsToPath(ft,ut)),pt.setAttribute("stroke","none"),pt.setAttribute("stroke-width","0"),pt.setAttribute("fill",ct.fill||""),rt.shape!=="curve"&&rt.shape!=="polygon"||pt.setAttribute("fill-rule","evenodd");break;case"fillSketch":pt=this.fillSketch(ht,ft,ct)}pt&&dt.appendChild(pt)}return dt}fillSketch(rt,lt,ct){let ht=ct.fillWeight;ht<0&&(ht=ct.strokeWidth/2);const dt=rt.createElementNS(nt,"path");return dt.setAttribute("d",this.opsToPath(lt,ct.fixedDecimalPlaceDigits)),dt.setAttribute("stroke",ct.fill||""),dt.setAttribute("stroke-width",ht+""),dt.setAttribute("fill","none"),ct.fillLineDash&&dt.setAttribute("stroke-dasharray",ct.fillLineDash.join(" ").trim()),ct.fillLineDashOffset&&dt.setAttribute("stroke-dashoffset",`${ct.fillLineDashOffset}`),dt}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(rt,lt){return this.gen.opsToPath(rt,lt)}line(rt,lt,ct,ht,dt){const ut=this.gen.line(rt,lt,ct,ht,dt);return this.draw(ut)}rectangle(rt,lt,ct,ht,dt){const ut=this.gen.rectangle(rt,lt,ct,ht,dt);return this.draw(ut)}ellipse(rt,lt,ct,ht,dt){const ut=this.gen.ellipse(rt,lt,ct,ht,dt);return this.draw(ut)}circle(rt,lt,ct,ht){const dt=this.gen.circle(rt,lt,ct,ht);return this.draw(dt)}linearPath(rt,lt){const ct=this.gen.linearPath(rt,lt);return this.draw(ct)}polygon(rt,lt){const ct=this.gen.polygon(rt,lt);return this.draw(ct)}arc(rt,lt,ct,ht,dt,ut,ft=!1,pt){const gt=this.gen.arc(rt,lt,ct,ht,dt,ut,ft,pt);return this.draw(gt)}curve(rt,lt){const ct=this.gen.curve(rt,lt);return this.draw(ct)}path(rt,lt){const ct=this.gen.path(rt,lt);return this.draw(ct)}}var at={canvas:(it,rt)=>new st(it,rt),svg:(it,rt)=>new ot(it,rt),generator:it=>new et(it),newSeed:()=>et.newSeed()};function applyRoughStyle(it,rt,lt){if(!it||!rt){console.warn("Invalid node or svg element");return}const ct=at.svg(rt,{options:{seed:1e3}}),ht=createElement("g");it.hasAttribute("transform")&&ht.setAttribute("transform",it.getAttribute("transform")||"");const dt=it.cloneNode();setAttributes(dt,{opacity:.5}),dt.hasAttribute("transform")&&dt.removeAttribute("transform"),dt.dataset.elementType="rough-volume",ht.appendChild(dt);const ut=createRoughShape(ct,it,lt);if(ut){const{element:pt,svgAttributes:gt}=ut;pt.dataset.elementType="rough-element",pt.style.pointerEvents="none",applySVGAttributes(pt,gt),ht.appendChild(pt)}it.id&&(ht.id=it.id),Array.from(it.classList).forEach(pt=>{ht.classList.contains(pt)||ht.classList.add(pt)}),Array.from(it.attributes).forEach(pt=>{pt.name.startsWith("data-")&&ht.setAttribute(pt.name,pt.value)}),ht.childElementCount>0?it.replaceWith(ht):it.remove()}function applySVGAttributes(it,rt){rt.opacity!==void 0&&it.setAttribute("opacity",String(rt.opacity)),rt.fillOpacity!==void 0&&it.setAttribute("fill-opacity",String(rt.fillOpacity)),rt.strokeOpacity!==void 0&&it.setAttribute("stroke-opacity",String(rt.strokeOpacity)),rt.strokeLinecap&&it.setAttribute("stroke-linecap",rt.strokeLinecap),rt.strokeLinejoin&&it.setAttribute("stroke-linejoin",rt.strokeLinejoin),rt.strokeDasharray&&it.setAttribute("stroke-dasharray",rt.strokeDasharray),rt.filter&&it.setAttribute("filter",rt.filter),rt.clipPath&&it.setAttribute("clip-path",rt.clipPath),rt.mask&&it.setAttribute("mask",rt.mask)}function createRoughShape(it,rt,lt){const ct=rt.nodeName.toLowerCase(),ht=(dt,ut)=>{const ft=getAttributes(dt,[...ut,"fill","fill-opacity","stroke","stroke-opacity","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin","opacity","filter","clip-path","mask"],!0),pt={},gt=Ft({},lt),mt={};ut.forEach(It=>{ft[It]!==void 0&&(pt[It]=ft[It])});const{fill:xt,"fill-opacity":yt,stroke:bt,"stroke-opacity":wt,"stroke-width":Ct,"stroke-dasharray":vt,"stroke-linecap":St,"stroke-linejoin":_t,opacity:Tt,filter:Et,"clip-path":At,mask:Mt}=ft;if(gt.fill=xt||"none",gt.stroke=bt||(xt&&xt!=="none"?xt:"currentColor"),Ct&&(gt.strokeWidth=parseFloat(Ct)),vt&&vt!=="none"){const It=vt.split(/[\s,]+/).map(Lt=>parseFloat(Lt)).filter(Lt=>!isNaN(Lt));It.length>0&&(gt.strokeLineDash=It)}return yt&&(mt.fillOpacity=parseFloat(yt)),wt&&(mt.strokeOpacity=parseFloat(wt)),Tt&&(mt.opacity=parseFloat(Tt)),St&&(mt.strokeLinecap=St),_t&&(mt.strokeLinejoin=_t),vt&&vt!=="none"&&(mt.strokeDasharray=vt),Et&&(mt.filter=Et),At&&(mt.clipPath=At),Mt&&(mt.mask=Mt),[pt,gt,mt]};try{let dt=null,ut={};switch(ct){case"circle":{const[ft,pt,gt]=ht(rt,["cx","cy","r"]),mt=parseFloat(ft.cx)||0,xt=parseFloat(ft.cy)||0,yt=parseFloat(ft.r)||0;dt=it.circle(mt,xt,yt*2,pt),ut=gt;break}case"ellipse":{const[ft,pt,gt]=ht(rt,["cx","cy","rx","ry"]),mt=parseFloat(ft.cx)||0,xt=parseFloat(ft.cy)||0,yt=parseFloat(ft.rx)||0,bt=parseFloat(ft.ry)||0;dt=it.ellipse(mt,xt,yt*2,bt*2,pt),ut=gt;break}case"line":{const[ft,pt,gt]=ht(rt,["x1","y1","x2","y2"]),mt=parseFloat(ft.x1)||0,xt=parseFloat(ft.y1)||0,yt=parseFloat(ft.x2)||0,bt=parseFloat(ft.y2)||0;dt=it.line(mt,xt,yt,bt,pt),ut=gt;break}case"rect":{const[ft,pt,gt]=ht(rt,["x","y","width","height","rx","ry"]),mt=parseFloat(ft.x)||0,xt=parseFloat(ft.y)||0,yt=parseFloat(ft.width)||0,bt=parseFloat(ft.height)||0,wt=parseFloat(ft.rx)||0,Ct=parseFloat(ft.ry)||0;if(wt>0||Ct>0){const _t=createRoundedRectPath(mt,xt,yt,bt,wt||Ct,Ct||wt);dt=it.path(_t,pt)}else dt=it.rectangle(mt,xt,yt,bt,pt);ut=gt;break}case"path":{const[ft,pt,gt]=ht(rt,["d"]),mt=ft.d||"";if(!mt)return console.warn("Path element has no d attribute"),null;dt=it.path(mt,pt),ut=gt;break}case"polygon":{const[ft,pt,gt]=ht(rt,["points"]),mt=parsePolygonPoints(ft.points||"");if(mt.length<3)return console.warn("Polygon needs at least 3 points"),null;dt=it.polygon(mt,pt),ut=gt;break}case"polyline":{const[ft,pt,gt]=ht(rt,["points"]),mt=parsePolygonPoints(ft.points||"");if(mt.length<2)return console.warn("Polyline needs at least 2 points"),null;dt=it.linearPath(mt,pt),ut=gt;break}default:return console.warn(`Unsupported shape type: ${ct}`),null}return dt?{element:dt,svgAttributes:ut}:null}catch(dt){return console.error(`Error creating rough shape for ${ct}:`,dt),null}}function createRoundedRectPath(it,rt,lt,ct,ht,dt){return ht=Math.min(ht,lt/2),dt=Math.min(dt,ct/2),`
    M ${it+ht} ${rt}
    L ${it+lt-ht} ${rt}
    A ${ht} ${dt} 0 0 1 ${it+lt} ${rt+dt}
    L ${it+lt} ${rt+ct-dt}
    A ${ht} ${dt} 0 0 1 ${it+lt-ht} ${rt+ct}
    L ${it+ht} ${rt+ct}
    A ${ht} ${dt} 0 0 1 ${it} ${rt+ct-dt}
    L ${it} ${rt+dt}
    A ${ht} ${dt} 0 0 1 ${it+ht} ${rt}
    Z
  `.replace(/\s+/g," ").trim()}function parsePolygonPoints(it){if(!it||typeof it!="string")return[];try{const lt=it.trim().replace(/,/g," ").replace(/\s+/g," ").split(" ").filter(Boolean),ct=[];for(let ht=0;ht<lt.length-1;ht+=2){const dt=parseFloat(lt[ht]),ut=parseFloat(lt[ht+1]);if(isNaN(dt)||isNaN(ut)){console.warn(`Invalid coordinate pair at index ${ht}: "${lt[ht]}", "${lt[ht+1]}"`);continue}ct.push([dt,ut])}return lt.length%2!==0&&console.warn(`Odd number of coordinates in points attribute, last value ignored: "${lt[lt.length-1]}"`),ct}catch(rt){return console.error("Failed to parse polygon points:",it,rt),[]}}function renderShape(it,rt,lt){var ut;const{themeConfig:ct}=lt,ht=Object.assign({},(ut=ct.base)==null?void 0:ut.shape,ct.shape),dt=parseDynamicAttributes(rt,ht);return setAttributes(rt,dt),stylizeShape(rt,it,lt),rt}function renderStaticShape(it,rt){var lt;setAttributes(it,((lt=rt.themeConfig.base)==null?void 0:lt.shape)||{})}function stylizeShape(it,rt,lt){const ct=lt.themeConfig.stylize;if(!ct)return it;const{type:ht}=ct;if(!ht)return it;if(ht==="rough")return applyRoughStyle(it,rt,ct);if(ht==="pattern")return applyPatternStyle(it,rt,lt);if(ht==="linear-gradient"||ht==="radial-gradient"){const{fill:dt,stroke:ut}=getAttributes(it,["fill","stroke"]);hasColor(dt)&&applyGradientStyle(it,rt,ct,"fill"),hasColor(ut)&&applyGradientStyle(it,rt,ct,"stroke");return}}function renderSVG$1(it,rt){var ht;const{themeConfig:lt}=rt,{"font-family":ct=DEFAULT_FONT}=((ht=lt.base)==null?void 0:ht.text)||{};it.setAttribute("font-family",ct)}function renderText(it,rt,lt={}){if(!rt)return null;const ct=it,ht=parseDynamicAttributes(ct,lt);setAttributes(ct,ht);const dt=layoutText(rt,ct);for(const ut in ct.dataset)dt.setAttribute(`data-${kebabCase(ut)}`,ct.dataset[ut]);return dt}function renderItemText(it,rt,lt){var mt,xt;const ct=rt.nodeName==="text"?rt:null;if(!ct)return null;const{data:ht,themeConfig:dt}=lt,ut=getItemIndexes(rt.dataset.indexes||"0"),ft=String(get$2(getDatumByIndexes(ht,ut),it,"")),pt=Object.assign({},(mt=dt.base)==null?void 0:mt.text,(xt=dt.item)==null?void 0:xt[it]),gt=parseDynamicAttributes(ct,pt);return renderText(rt,rt.textContent||ft,gt)}function renderStaticText(it,rt){var ct;const lt=((ct=rt.themeConfig.base)==null?void 0:ct.text)||{};setAttributes(it,lt),lt["font-family"]&&it.setAttribute("font-family",encodeFontFamily(lt["font-family"])),it.style.userSelect="none",it.style.pointerEvents="none"}const norm=(it,rt)=>it?parseFloat(it):rt;function layoutText(it,rt){const lt=norm(rt.dataset.x,0),ct=norm(rt.dataset.y,0),ht=norm(rt.getAttribute("width")),dt=norm(rt.getAttribute("height")),ut=getTextAttributes(rt);return Object.assign(ut,{x:lt,y:ct,width:ht,height:dt,"data-horizontal-align":rt.dataset.horizontalAlign||"LEFT","data-vertical-align":rt.dataset.verticalAlign||"TOP"}),createTextElement(it,ut)}function getTextAttributes(it){return getAttributes(it,["font-family","font-size","font-weight","font-style","font-variant","letter-spacing","line-height","fill","stroke","stroke-width"])}const upsert=(it,rt)=>{it!==rt&&(rt?it.replaceWith(rt):it.remove())};class Renderer{constructor(rt,lt){this.options=rt,this.template=lt,this.rendered=!1}getOptions(){return this.options}getSVG(){return this.template}render(){const rt=this.getSVG();if(this.rendered)return rt;renderTemplate(rt,this.options),rt.style.visibility="hidden";const lt=()=>{setView(this.template,this.options),loadFonts(this.template),rt.style.visibility=""},ct=new MutationObserver(ht=>{ht.forEach(dt=>{dt.addedNodes.forEach(ut=>{(ut===rt||ut.contains(rt))&&(lt(),ct.disconnect())})})});try{ct.observe(document,{childList:!0,subtree:!0})}catch(ht){lt(),console.error(ht)}return this.rendered=!0,rt}}function renderTemplate(it,rt){fill(it,rt),setSVG(it,rt),renderBackground(it,rt)}function fill(it,rt){var dt;const{themeConfig:lt,data:ct}=rt;renderBaseElement(it,(dt=lt.base)==null?void 0:dt.global),it.querySelectorAll("[data-element-type]").forEach(ut=>{var pt,gt,mt,xt;const ft=ut.id||"";if(isTitle(ut)){const yt=renderText(ut,ct.title||"",Object.assign({},(pt=lt.base)==null?void 0:pt.text,lt.title));return upsert(ut,yt)}if(isDesc(ut)){const yt=renderText(ut,ct.desc||"",Object.assign({},(gt=lt.base)==null?void 0:gt.text,lt.desc));return upsert(ut,yt)}if(isIllus(ut)){const yt=renderIllus(it,ut,(mt=ct.illus)==null?void 0:mt[ft]);return upsert(ut,yt)}if(isShapesGroup(ut))return Array.from(ut.children).forEach(yt=>{renderShape(it,yt,rt)});if(isShape(ut)){const yt=renderShape(it,ut,rt);return upsert(ut,yt)}if(isBtnsGroup(ut))return renderButtonsGroup(it,ut);if((xt=ut.dataset.elementType)!=null&&xt.startsWith("item-")){const yt=getItemIndexes(ut.dataset.indexes||"0"),bt=ut.dataset.elementType.replace("item-",""),wt=getDatumByIndexes(ct,yt);if(isItemLabel(ut)||isItemDesc(ut)||isItemValue(ut)){const Ct=renderItemText(bt,ut,rt);return upsert(ut,Ct)}if(!wt)return;if(isItemIllus(ut)){const Ct=renderItemIllus(it,ut,wt);return upsert(ut,Ct)}if(isItemIcon(ut)){const Ct=renderItemIcon(it,ut,wt,rt);return upsert(ut,Ct)}}if(isText(ut))return renderStaticText(ut,rt);if(!isGroup(ut))return renderStaticShape(ut,rt)}),renderSVG$1(it,rt)}function setSVG(it,rt){const{width:lt,height:ct}=rt,{style:ht={},attributes:dt={},id:ut,className:ft}=rt.svg||{};ut&&(it.id=ut),ft&&it.classList.add(ft),lt!==void 0&&it.setAttribute("width",typeof lt=="number"?`${lt}px`:lt),ct!==void 0&&it.setAttribute("height",typeof ct=="number"?`${ct}px`:ct),Object.assign(it.style,ht),setAttributes(it,dt)}function setView(it,rt){const{padding:lt=0,viewBox:ct}=rt;ct?it.setAttribute("viewBox",ct):lt!==void 0&&setSVGPadding(it,parsePadding(lt))}let _isBrowser;function isBrowser(){if(_isBrowser!==void 0)return _isBrowser;if(typeof window=="undefined"||typeof document=="undefined")return _isBrowser=!1,!1;const it=document.body;if(!it)return _isBrowser=!1,!1;let rt=!1;try{const ct=document.createElement("div");ct.style.cssText=`
      position: absolute;
      left: 11px;
      top: 13px;
      width: 37px;
      height: 19px;
      padding: 0;
      margin: 0;
      border: 0;
      visibility: hidden;
    `,it.appendChild(ct),ct.offsetHeight;const ht=ct.getBoundingClientRect();it.removeChild(ct),rt=ht.width===37&&ht.height===19&&ht.left!==0&&ht.top!==0}catch(ct){rt=!1}if(!rt)return _isBrowser=!1,!1;let lt=!1;try{const ct=document.createElement("canvas");ct.width=100,ct.height=50;const ht=ct.getContext("2d");if(!ht)return _isBrowser=!1,!1;ht.font="20px sans-serif";const dt=ht.measureText("Hello");lt=typeof dt.width=="number"&&dt.width>0&&dt.width<1e3}catch(ct){lt=!1}return _isBrowser=lt,lt}const isNode=!!(typeof process!="undefined"&&process.versions&&process.versions.node);let FONT_EXTEND_FACTOR=1.01;isNode&&registerFont$1(AlibabaPuHuiTi);let canvasContext=null,measureSpan=null;function getCanvasContext(){return canvasContext||(canvasContext=document.createElement("canvas").getContext("2d"),canvasContext)}function getMeasureSpan(){return document.body?measureSpan||(measureSpan=document.createElement("span"),measureSpan.style.position="absolute",measureSpan.style.top="-10000px",measureSpan.style.left="-10000px",measureSpan.style.visibility="hidden",measureSpan.style.pointerEvents="none",measureSpan.style.whiteSpace="pre",measureSpan.style.display="inline-block",measureSpan.style.padding="0",measureSpan.style.margin="0",document.body.appendChild(measureSpan),measureSpan):null}function resolveLineHeight(it,rt){if(rt==null)return it*1.4;if(typeof rt=="string"){const lt=rt.trim();if(lt.endsWith("px")){const ct=Number.parseFloat(lt);return Number.isFinite(ct)?ct:it*1.4}rt=Number(lt)}return typeof rt!="number"||!Number.isFinite(rt)?it*1.4:rt>4?rt:rt*it}function measureTextInBrowser(it,{fontFamily:rt,fontSize:lt,fontWeight:ct,lineHeight:ht}){const dt=it.split(/\r?\n/),ut=encodeFontFamily(rt),ft=ct||"normal",pt=resolveLineHeight(lt,ht),gt=getCanvasContext();if(gt)return gt.font=`${ft} ${lt}px ${ut}`,{width:dt.reduce((bt,wt)=>{const Ct=gt.measureText(wt);return Math.max(bt,Ct.width)},0),height:pt*Math.max(dt.length,1)};const mt=getMeasureSpan();if(!mt)return null;mt.style.fontFamily=ut,mt.style.fontSize=`${lt}px`,mt.style.fontWeight=String(ft),mt.style.lineHeight=`${pt}px`,mt.textContent=it;const xt=mt.getBoundingClientRect();return{width:xt.width,height:xt.height}}function measureText$1(it="",rt){var mt;if(rt.width&&rt.height)return{width:rt.width,height:rt.height};const{fontFamily:lt=DEFAULT_FONT,fontSize:ct=14,fontWeight:ht="normal",lineHeight:dt=1.4}=rt,ut=it.toString(),ft={fontFamily:lt,fontSize:parseFloat(ct.toString()),fontWeight:ht,lineHeight:dt},pt=()=>measureText$2(ut,ft),gt=isBrowser()&&(mt=measureTextInBrowser(ut,ft))!=null?mt:pt();return{width:Math.ceil(gt.width*FONT_EXTEND_FACTOR),height:Math.ceil(gt.height*FONT_EXTEND_FACTOR)}}function getViewBox(it){const rt=it.getAttribute("viewBox");if(rt){const[ut,ft,pt,gt]=rt.split(" ").map(Number);return{x:ut,y:ft,width:pt,height:gt}}const lt=it.getAttribute("width"),ct=it.getAttribute("height"),ht=Number(lt)||0,dt=Number(ct)||0;return{x:0,y:0,width:ht,height:dt}}function parsePadding(it){return it?typeof it=="number"?[it,it,it,it]:it.length===1?[it[0],it[0],it[0],it[0]]:it.length===2?[it[0],it[1],it[0],it[1]]:it.length===3?[it[0],it[1],it[2],it[1]]:it.length===4?[it[0],it[1],it[2],it[3]]:[0,0,0,0]:[0,0,0,0]}function setSVGPadding(it,rt){if(isNode)setSVGPaddingInNode(it,rt);else if(document.contains(it))setSVGPaddingInBrowser(it,rt);else try{const lt=new MutationObserver(ct=>{ct.forEach(ht=>{ht.addedNodes.forEach(dt=>{(dt===it||dt.contains(it))&&(waitForLayout(it,()=>{setSVGPaddingInBrowser(it,rt)}),lt.disconnect())})})});lt.observe(document,{childList:!0,subtree:!0})}catch(lt){setSVGPaddingInNode(it,rt)}}function setSVGPaddingInNode(it,rt){const lt=getViewBox(it),[ct,ht,dt,ut]=rt;setAttributes(it,{viewBox:`${lt.x-ut} ${lt.y-ct} ${lt.width+ut+ht} ${lt.height+ct+dt}`})}function setSVGPaddingInBrowser(it,rt){const lt=it.getBBox(),ct=it.getBoundingClientRect(),ht=ct.width>0?lt.width/ct.width:1,dt=ct.height>0?lt.height/ct.height:1,[ut,ft,pt,gt]=rt,mt=ut*dt,xt=ft*ht,yt=pt*dt,bt=gt*ht,wt=lt.x-bt,Ct=lt.y-mt,vt=lt.width+bt+xt,St=lt.height+mt+yt;setAttributes(it,{viewBox:`${wt} ${Ct} ${vt} ${St}`})}function waitForLayout(it,rt){requestAnimationFrame(()=>{const lt=()=>{const ct=it.getBoundingClientRect();ct.width>0&&ct.height>0?rt():requestAnimationFrame(lt)};lt()})}function injectStyleOnce(it,rt){if(document.getElementById(it))return;const lt=document.createElement("style");lt.id=it,lt.textContent=rt,document.head.appendChild(lt)}function uuid(){return crypto&&crypto.randomUUID?crypto.randomUUID():"xxxx-xxxx-4xxx-yxxx".replace(/[xy]/g,function(it){const rt=Math.random()*16|0;return(it==="x"?rt:rt&3|8).toString(16)})}function Text(it){const Vt=it,{id:rt,x:lt=0,y:ct=0,width:ht,height:dt,alignHorizontal:ut="left",alignVertical:ft="top",children:pt,fontSize:gt=14,fontFamily:mt,fontStyle:xt,fontWeight:yt,textDecoration:bt,letterSpacing:wt,wordSpacing:Ct,opacity:vt,fill:St="black",lineHeight:_t,wordWrap:Tt,backgroundColor:Et="none",backgroundOpacity:At=1,backgroundRadius:Mt=0}=Vt,It=Pe(Vt,["id","x","y","width","height","alignHorizontal","alignVertical","children","fontSize","fontFamily","fontStyle","fontWeight","textDecoration","letterSpacing","wordSpacing","opacity","fill","lineHeight","wordWrap","backgroundColor","backgroundOpacity","backgroundRadius"]);let Lt=ht,jt=dt,Ot=0,Pt=0;if(!Lt||!jt){const Yt=measureText$1(pt,it);Lt||(Lt=Yt.width),jt||(jt=Yt.height)}ht&&(Ot=ut==="center"?Lt/2:ut==="right"?Lt:0),dt&&(Pt=ft==="middle"?jt/2:ft==="bottom"?jt:0);const Gt=Object.entries(Ft(Ft({width:Lt,height:jt},_t!==void 0&&{"line-height":_t}),Tt!==void 0&&{"data-word-wrap":Tt})).reduce((Yt,[Kt,Dt])=>te(Ft({},Yt),{[Kt]:Dt}),{}),Xt=Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft(Ft({"data-element-type":"text",width:Lt,height:jt,x:Ot,y:Pt,"data-x":0,"data-y":0,fill:St,fontSize:gt,textAnchor:ut==="center"?"middle":ut==="right"?"end":"start",dominantBaseline:ft==="middle"?"central":ft==="bottom"?"baseline":"hanging","data-horizontal-align":ut.toUpperCase(),"data-vertical-align":ft.toUpperCase(),children:pt},Gt),It),mt&&{fontFamily:mt}),xt&&{fontStyle:xt}),yt&&{fontWeight:yt}),bt&&bt!=="none"&&{textDecoration:bt}),wt&&{letterSpacing:wt}),Ct&&{wordSpacing:Ct}),vt!==void 0&&vt!==1&&{opacity:vt}),zt=Ft(te(Ft({},lt!==0||ct!==0?{x:lt,y:ct,transform:`translate(${lt}, ${ct})`}:{}),{width:Lt,height:jt}),rt&&{id:rt}),Bt=Et&&Et!=="none"?{"data-element-type":"shape",x:0,y:0,width:Lt,height:jt,fill:Et,fillOpacity:At,rx:Mt,ry:Mt}:void 0;return{type:"g",props:te(Ft({},zt),{children:[...Bt?[{type:"rect",props:Bt}]:[],{type:"text",props:Xt}]})}}function isFragment(it){return!it||typeof it!="object"||Array.isArray(it)?!1:it.type===Fragment}function isJSXElement(it){return it!==null&&typeof it=="object"&&!Array.isArray(it)&&"type"in it}function nodeToElements(it){return nodeToRenderableNodes(it).filter(isJSXElement)}function nodeToRenderableNodes(it,rt=[]){var lt;if(!it||typeof it=="boolean")return rt;if(Array.isArray(it))it.forEach(ct=>nodeToRenderableNodes(ct,rt));else if(isFragment(it)){const ct=(lt=it.props)==null?void 0:lt.children;(Array.isArray(ct)?ct:[ct]).filter(Boolean).forEach(ht=>{nodeToRenderableNodes(ht,rt)})}else rt.push(it);return rt}function isNumber(it){return typeof it=="number"&&!Number.isNaN(it)&&Number.isFinite(it)}const zero$2=()=>({x:0,y:0,width:0,height:0});function getCombinedBounds(it){if(!it||it.length===0)return zero$2();let rt=1/0,lt=1/0,ct=-1/0,ht=-1/0;for(const dt of it){const{x:ut,y:ft,width:pt,height:gt}=dt,mt=ut+pt,xt=ft+gt;ut<rt&&(rt=ut),ft<lt&&(lt=ft),mt>ct&&(ct=mt),xt>ht&&(ht=xt)}return rt===1/0||lt===1/0||ct===-1/0||ht===-1/0?{x:0,y:0,width:0,height:0}:{x:rt,y:lt,width:Math.max(0,ct-rt),height:Math.max(0,ht-lt)}}function getElementBounds(it){var gt,mt,xt,yt;if(!it)return zero$2();if(Array.isArray(it)){const bt=nodeToElements(it);return getElementsBounds(bt)}if(typeof it!="object")return zero$2();const{type:rt,props:lt={}}=it;if(isLayoutComponent(it)){const bt=performLayout(it);return getElementBounds(bt)}if(typeof rt=="function"){const bt=(gt=lt.x)!=null?gt:0,wt=(mt=lt.y)!=null?mt:0,Ct=lt.width,vt=lt.height;if(isNumber(Ct)&&isNumber(vt))return{x:bt,y:wt,width:Ct,height:vt};const St=rt(lt);if(!St)return{x:bt,y:wt,width:Ct!=null?Ct:0,height:vt!=null?vt:0};if(Array.isArray(St)){const _t=nodeToElements(St),Tt=getElementsBounds(_t);if(isNumber(Ct)&&isNumber(vt))return{x:bt,y:wt,width:Ct,height:vt};const Et=Tt.width!==0?Tt.width:Ct!=null?Ct:0,At=Tt.height!==0?Tt.height:vt!=null?vt:0;return{x:bt+Tt.x,y:wt+Tt.y,width:Et,height:At}}if(isJSXElement(St)){const _t=St,Tt=getElementBounds(_t);if(isPassthrough(_t,lt))return Tt;const Et=_t.props&&isNumber(_t.props.width)&&isNumber(_t.props.height),It=getChildrenFromElement(_t).flatMap(Pt=>nodeToElements(Pt)).length>0,Lt=_t.props&&_t.props.x===lt.x&&_t.props.y===lt.y;if(Et)return{x:Lt?Tt.x:bt+Tt.x,y:Lt?Tt.y:wt+Tt.y,width:Tt.width,height:Tt.height};if(isNumber(Ct)&&isNumber(vt))return It?{x:Lt?Tt.x:bt,y:Lt?Tt.y:wt,width:Ct,height:vt}:{x:Lt?Tt.x:bt+Tt.x,y:Lt?Tt.y:wt+Tt.y,width:Ct,height:vt};const jt=Tt.width!==0?Tt.width:Ct!=null?Ct:0,Ot=Tt.height!==0?Tt.height:vt!=null?vt:0;return{x:Lt?Tt.x:bt+Tt.x,y:Lt?Tt.y:wt+Tt.y,width:jt,height:Ot}}return{x:bt,y:wt,width:Ct!=null?Ct:0,height:vt!=null?vt:0}}const ct=(xt=lt.x)!=null?xt:0,ht=(yt=lt.y)!=null?yt:0,dt=isNumber(lt.width)?lt.width:void 0,ut=isNumber(lt.height)?lt.height:void 0;if(isNumber(dt)&&isNumber(ut))return{x:ct,y:ht,width:dt,height:ut};const pt=getChildrenFromElement(it).flatMap(bt=>nodeToElements(bt));if(pt.length>0){const bt=getElementsBounds(pt);return{x:ct+bt.x,y:ht+bt.y,width:isNumber(dt)?dt:bt.width,height:isNumber(ut)?ut:bt.height}}return{x:ct,y:ht,width:dt!=null?dt:0,height:ut!=null?ut:0}}function getElementsBounds(it){if(!it||!Array.isArray(it)||it.length===0)return zero$2();const rt=[];for(const lt of it){const ct=nodeToElements(lt);for(const ht of ct){const dt=getElementBounds(ht);dt&&rt.push(dt)}}return getCombinedBounds(rt)}function isPassthrough(it,rt){if(!(it!=null&&it.props)||!rt)return!1;const lt=it.props;if(isNumber(lt.x)&&isNumber(lt.y)&&isNumber(rt.x)&&isNumber(rt.y)&&lt.x===rt.x&&lt.y===rt.y){const ct=isNumber(lt.width)&&isNumber(lt.height),ht=isNumber(rt.width)&&isNumber(rt.height);if(!ct&&!ht)return!0}return isNumber(lt.x)&&isNumber(lt.y)&&isNumber(lt.width)&&isNumber(lt.height)&&isNumber(rt.x)&&isNumber(rt.y)&&isNumber(rt.width)&&isNumber(rt.height)?lt.x===rt.x&&lt.y===rt.y&&lt.width===rt.width&&lt.height===rt.height:!1}function getChildrenFromElement(it){var lt;const rt=(lt=it.props)==null?void 0:lt.children;return rt?Array.isArray(rt)?rt:[rt]:[]}function getRenderableChildrenOf(it){var rt;return it==null||typeof it=="boolean"?[]:Array.isArray(it)?nodeToRenderableNodes(it):typeof it=="object"?nodeToRenderableNodes((rt=it.props)==null?void 0:rt.children):[it]}const cloneElement=(it,rt)=>{const dt=it,{type:lt,props:ct}=dt,ht=Pe(dt,["type","props"]);return Ft({type:lt,props:Ft(Ft({},ct),rt)},ht)},createDefaultContext=()=>({defs:new Map});function escapeHtml(it){const rt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(it).replace(/[&<>"']/g,lt=>rt[lt])}const SPECIFIC_ATTRS_MAP={className:"class",viewBox:"viewBox",preserveAspectRatio:"preserveAspectRatio",gradientUnits:"gradientUnits",gradientTransform:"gradientTransform",patternUnits:"patternUnits",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",maskUnits:"maskUnits",maskContentUnits:"maskContentUnits",clipPathUnits:"clipPathUnits",primitiveUnits:"primitiveUnits",filterUnits:"filterUnits",markerUnits:"markerUnits",markerWidth:"markerWidth",markerHeight:"markerHeight",refX:"refX",refY:"refY",xmlLang:"xml:lang",xmlSpace:"xml:space",xmlnsXlink:"xmlns:xlink",xlinkHref:"href",xlinkTitle:"xlink:title",xlinkShow:"xlink:show",xlinkActuate:"xlink:actuate",textLength:"textLength",lengthAdjust:"lengthAdjust",repeatCount:"repeatCount",repeatDur:"repeatDur",calcMode:"calcMode",keyTimes:"keyTimes",keySplines:"keySplines",keyPoints:"keyPoints",stdDeviation:"stdDeviation",baseFrequency:"baseFrequency",numOctaves:"numOctaves",pathLength:"pathLength",systemLanguage:"systemLanguage",requiredFeatures:"requiredFeatures",requiredExtensions:"requiredExtensions"};function toSVGAttr(it){return SPECIFIC_ATTRS_MAP[it]?SPECIFIC_ATTRS_MAP[it]:it.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}const LAYOUT_FN_MAP=new Map;function createLayout(it){const rt=Symbol("layout");return LAYOUT_FN_MAP.set(rt,it),ct=>({type:rt,props:ct})}function isLayoutComponent(it){return it!=null&&typeof it=="object"&&!Array.isArray(it)&&typeof it.type=="symbol"&&LAYOUT_FN_MAP.has(it.type)}function performLayout(it,rt=createDefaultContext()){const lt=LAYOUT_FN_MAP.get(it.type);if(!lt)return console.warn("Layout function not found for symbol:",it.type),it;const ct=getRenderableChildrenOf(it).filter(ht=>typeof ht=="object");return lt(ct,it.props,rt)}function processElement(it,rt){if(it==null||typeof it=="boolean")return null;if(typeof it=="string"||typeof it=="number")return it;if(Array.isArray(it))return it.map(ct=>processElement(ct,rt)).filter(Boolean);if(isLayoutComponent(it)){const ct=performLayout(it,rt);return processElement(ct,rt)}if(typeof it.type=="function"){const ct=it.type(it.props);return processElement(ct,rt)}const lt=getRenderableChildrenOf(it).map(ct=>processElement(ct,rt)).filter(Boolean);return it.type===Fragment?lt:it.type===DefsSymbol?(lt.forEach(ct=>{typeof ct=="object"&&ct.props.id&&rt.defs.set(ct.props.id,ct)}),null):lt.length?cloneElement(it,{children:lt}):it}function render(it,rt){if(it==null)return"";if(typeof it=="string")return escapeHtml(it);if(typeof it=="number")return String(it);const{type:lt,props:ct}=it;if(!lt)return"";const ht=getRenderableChildrenOf(it);if(lt===Fragment)return ht.map(pt=>render(pt)).filter(Boolean).join("");if(lt===DefsSymbol)return"";if(typeof lt=="function"||isLayoutComponent(it))return console.warn("Unexpected unprocessed component in render:",it),"";const dt=renderAttrs(ct),ut=ht.map(pt=>render(pt)).filter(Boolean).join(""),ft=String(lt);return ut?`<${ft}${dt}>${ut}</${ft}>`:`<${ft}${dt} />`}function renderSVG(it,rt={}){const lt=createDefaultContext(),ct=processElement(it,lt);if(!ct)return"";const ht=Array.isArray(ct)?ct.map(vt=>render(vt)).join(""):render(ct),Ct=rt,{x:dt,y:ut,width:ft,height:pt,style:gt}=Ct,mt=Pe(Ct,["x","y","width","height","style"]),xt=te(Ft({},mt),{xmlns:"http://www.w3.org/2000/svg"});if(!xt.viewBox)if(ft&&pt)xt.viewBox=`${dt!=null?dt:0} ${ut!=null?ut:0} ${ft!=null?ft:0} ${pt!=null?pt:0}`;else{const vt=getElementBounds(ct);if(vt){const{x:St,y:_t,width:Tt,height:Et}=vt;xt.viewBox=`${St} ${_t} ${Tt} ${Et}`}}const yt=renderAttrs(xt),bt=renderStyle(gt),wt=lt.defs.size?`<defs>${Array.from(lt.defs.values()).map(vt=>render(vt)).join("")}</defs>`:"";return`<svg${yt}${bt}>${wt}${ht}</svg>`}function renderAttrs(it){if(!it)return"";const ct=it,{children:rt}=ct,lt=Pe(ct,["children"]);return Object.entries(lt).filter(([,ht])=>ht!=null).map(([ht,dt])=>{const ut=toSVGAttr(ht),ft=typeof dt=="string"?escapeHtml(String(dt)):String(dt);return` ${ut}="${ft}"`}).join("")}function renderStyle(it){if(!it||Object.keys(it).length===0)return"";const rt=Object.entries(it).map(([lt,ct])=>`${lt.replace(/[A-Z]/g,dt=>`-${dt.toLowerCase()}`)}: ${ct};`).join("");return` style="${escapeHtml(rt)}"`}const BtnAdd=it=>{const ht=it,{indexes:rt}=ht,lt=Pe(ht,["indexes"]);return jsx(Rect,Ft(Ft({},{fill:"#B9EBCA",fillOpacity:.3,width:20,height:20,"data-indexes":rt,"data-element-type":"btn-add"}),lt))},BtnRemove=it=>{const ht=it,{indexes:rt}=ht,lt=Pe(ht,["indexes"]);return jsx(Rect,Ft(Ft({},{fill:"#F9C0C0",fillOpacity:.3,width:20,height:20,"data-indexes":rt,"data-element-type":"btn-remove"}),lt))},BtnsGroup=it=>jsx(Group,te(Ft({"data-element-type":"btns-group",width:0,height:0},it),{display:"none"})),Gap=()=>jsx(Fragment,{}),Illus=lt=>{var ct=lt,{indexes:it}=ct,rt=Pe(ct,["indexes"]);const dt=Ft(Ft({},{fill:"lightgray"}),rt);return it?(dt["data-indexes"]=it,dt["data-element-type"]="item-illus"):dt["data-element-type"]="illus",jsx(Rect,Ft({},dt))},ItemDesc=ht=>{var dt=ht,{indexes:it,lineNumber:rt=2,children:lt}=dt,ct=Pe(dt,["indexes","lineNumber","children"]);var ft;if(!lt)return null;const ut=Ft({fontSize:14,fill:"#666",wordWrap:!0,lineHeight:1.4,children:lt},ct);return(ft=ut.height)!=null||(ut.height=Math.ceil(rt*+ut.lineHeight*+ut.fontSize)),jsx(Text,te(Ft({},ut),{"data-indexes":it,"data-element-type":"item-desc"}))},ItemIcon=it=>{const dt=it,{indexes:rt,size:lt=32}=dt,ct=Pe(dt,["indexes","size"]),ht=Ft({fill:"lightgray",width:lt,height:lt},ct);return jsx(Rect,te(Ft({},ht),{"data-indexes":rt,"data-element-type":"item-icon"}))},ItemIconCircle=it=>{const gt=it,{indexes:rt,size:lt=50,fill:ct,colorBg:ht="white"}=gt,dt=Pe(gt,["indexes","size","fill","colorBg"]),ut=lt/Math.SQRT2*.9,ft=(lt-ut)/2,pt=te(Ft({fill:ht},dt),{x:ft,y:ft,width:ut,height:ut});return jsxs(Group,te(Ft({},dt),{width:lt,height:lt,"data-element-type":"item-icon-group",children:[jsx(Ellipse,{width:lt,height:lt,fill:ct,"data-element-type":"shape"}),jsx(Rect,te(Ft({},pt),{"data-indexes":rt,"data-element-type":"item-icon"}))]}))},ItemLabel=ct=>{var ht=ct,{indexes:it,children:rt}=ht,lt=Pe(ht,["indexes","children"]);var ut;const dt=Ft({fontSize:18,fontWeight:"bold",fill:"#252525",lineHeight:1.4,children:rt},lt);return(ut=dt.height)!=null||(dt.height=Math.ceil(+dt.lineHeight*+dt.fontSize)),jsx(Text,te(Ft({},dt),{"data-indexes":it,"data-element-type":"item-label"}))},ItemsGroup=it=>jsx(Group,Ft({"data-element-type":"items-group"},it)),ItemValue=ht=>{var dt=ht,{indexes:it,value:rt,formatter:lt=ut=>String(ut)}=dt,ct=Pe(dt,["indexes","value","formatter"]);var ft;const ut=Ft({fontSize:14,fill:"#666",wordWrap:!0,lineHeight:1.4,children:lt(rt),"data-value":rt},ct);return(ft=ut.height)!=null||(ut.height=Math.ceil(+ut.lineHeight*+ut.fontSize)),jsx(Text,te(Ft({},ut),{"data-indexes":it,"data-element-type":"item-value"}))},ShapesGroup=it=>jsx(Group,Ft({"data-element-type":"shapes-group"},it)),AlignLayout=createLayout((it,ht)=>{var dt=ht,{horizontal:rt,vertical:lt}=dt,ct=Pe(dt,["horizontal","vertical"]);var wt,Ct,vt,St;if(!it||it.length===0)return jsx(Group,Ft({},ct));const ut=it.map(_t=>getElementBounds(_t)),ft=getElementsBounds(it),pt=(wt=ct.x)!=null?wt:ft.x,gt=(Ct=ct.y)!=null?Ct:ft.y,mt=(vt=ct.width)!=null?vt:ft.width,xt=(St=ct.height)!=null?St:ft.height,yt=it.map((_t,Tt)=>{const Et=ut[Tt],At=Ft({},_t.props);if(rt!==void 0)switch(rt){case"left":At.x=-Et.x;break;case"center":At.x=(mt-Et.width)/2-Et.x;break;case"right":At.x=mt-Et.width-Et.x;break}else At.x===void 0&&(At.x=Et.x-pt);if(lt!==void 0)switch(lt){case"top":At.y=-Et.y;break;case"middle":At.y=(xt-Et.height)/2-Et.y;break;case"bottom":At.y=xt-Et.height-Et.y;break}else At.y===void 0&&(At.y=Et.y-gt);return cloneElement(_t,At)}),bt=te(Ft({},ct),{x:pt,y:gt,width:mt,height:xt});return jsx(Group,te(Ft({},bt),{children:yt}))}),FlexLayout=createLayout((it,pt)=>{var gt=pt,{flexDirection:rt="row",justifyContent:lt="flex-start",alignItems:ct="flex-start",alignContent:ht="flex-start",flexWrap:dt="nowrap",gap:ut=0}=gt,ft=Pe(gt,["flexDirection","justifyContent","alignItems","alignContent","flexWrap","gap"]);var It,Lt,jt,Ot,Pt,Gt;if(!it||it.length===0)return jsx(Group,Ft({},ft));const mt=rt==="row"||rt==="row-reverse",xt=rt==="row-reverse"||rt==="column-reverse",yt=it.map(kt=>getElementBounds(kt)),bt=getElementsBounds(it),wt=(It=ft.width)!=null?It:bt.width,Ct=(Lt=ft.height)!=null?Lt:bt.height,vt=ft.width!==void 0&&ft.height!==void 0,St=[];if(dt==="wrap"&&vt){let kt=[],Ht=[],Xt=0;for(let zt=0;zt<it.length;zt++){const Nt=it[zt],Bt=yt[zt],Vt=mt?Bt.width:Bt.height,Yt=mt?wt:Ct;kt.length===0||Xt+ut+Vt<=Yt?(kt.push(Nt),Ht.push(Bt),Xt+=(kt.length>1?ut:0)+Vt):(St.push({children:kt,bounds:Ht}),kt=[Nt],Ht=[Bt],Xt=Vt)}kt.length>0&&St.push({children:kt,bounds:Ht})}else St.push({children:it,bounds:yt});const _t=[];let Tt=0;const Et=[];if(St.forEach(kt=>{const{children:Ht,bounds:Xt}=kt,zt=Xt.reduce((Dt,Rt,Wt)=>{const qt=mt?Rt.width:Rt.height;return Dt+qt+(Wt>0?ut:0)},0),Nt=Math.max(...Xt.map(Dt=>mt?Dt.height:Dt.width));Et.push(Nt);let Bt=0;const Vt=(mt?wt:Ct)-zt;if(vt)switch(lt){case"flex-end":Bt=Vt;break;case"center":Bt=Vt/2;break;case"space-between":Bt=0;break;default:Bt=0;break}let Yt=ut;vt&&lt==="space-between"&&Ht.length>1&&(Yt=Vt/(Ht.length-1)+ut);let Kt=Bt;Ht.forEach((Dt,Rt)=>{const Wt=Xt[Rt],qt=mt?Wt.width:Wt.height,Zt=mt?Wt.height:Wt.width,Ut=mt?Wt.x:Wt.y,Qt=mt?Wt.y:Wt.x;let Jt=Tt;if(vt)switch(ct){case"flex-end":Jt=Tt+Nt-Zt;break;case"center":Jt=Tt+(Nt-Zt)/2;break;default:Jt=Tt;break}let oe,ce;mt?(oe=xt?wt-Kt-qt-Ut:Kt-Ut,ce=Jt-Qt):(oe=Jt-Qt,ce=xt?Ct-Kt-qt-Ut:Kt-Ut);const ie=cloneElement(Dt,{x:oe,y:ce});_t.push(ie),Kt+=qt+Yt}),Tt+=Nt+ut}),St.length>1&&vt){const kt=Et.reduce((zt,Nt)=>zt+Nt,0)+(St.length-1)*ut,Ht=(mt?Ct:wt)-kt;let Xt=0;switch(ht){case"flex-end":Xt=Ht;break;case"center":Xt=Ht/2;break;case"space-between":if(St.length>1){const zt=Ht/(St.length-1);let Nt=0;St.forEach((Bt,Vt)=>{const Yt=St.slice(0,Vt).reduce((Dt,Rt)=>Dt+Rt.children.length,0),Kt=Yt+Bt.children.length;for(let Dt=Yt;Dt<Kt;Dt++){const Rt=_t[Dt],Wt=Ft({},Rt.props);mt?Wt.y=(Wt.y||0)+Nt:Wt.x=(Wt.x||0)+Nt,_t[Dt]=cloneElement(Rt,Wt)}Nt+=Et[Vt]+ut+(Vt<St.length-1?zt:0)});break}break;default:Xt=0;break}Xt!==0&&ht!=="space-between"&&_t.forEach((zt,Nt)=>{const Bt=Ft({},zt.props);mt?Bt.y=(Bt.y||0)+Xt:Bt.x=(Bt.x||0)+Xt,_t[Nt]=cloneElement(zt,Bt)})}if(!vt&&ct==="center")if(mt){const kt=Math.max(...yt.map(Ht=>Ht.height));_t.forEach((Ht,Xt)=>{const zt=yt[Xt],Nt=(kt-zt.height)/2,Bt=Ft({},Ht.props);Bt.y=(Bt.y||0)+Nt,_t[Xt]=cloneElement(Ht,Bt)})}else{const kt=Math.max(...yt.map(Ht=>Ht.width));_t.forEach((Ht,Xt)=>{const zt=yt[Xt],Nt=(kt-zt.width)/2,Bt=Ft({},Ht.props);Bt.x=(Bt.x||0)+Nt,_t[Xt]=cloneElement(Ht,Bt)})}const At=getElementsBounds(_t),Mt=te(Ft({},ft),{x:(jt=ft.x)!=null?jt:bt.x,y:(Ot=ft.y)!=null?Ot:bt.y,width:(Pt=ft.width)!=null?Pt:At.width,height:(Gt=ft.height)!=null?Gt:At.height});return jsx(Group,te(Ft({},Mt),{children:_t}))}),Title=it=>{const{x:rt=0,y:lt=0,alignHorizontal:ct="center",title:ht,desc:dt,descLineNumber:ut=2,themeColors:ft}=it,pt=mt=>{const xt={fontSize:24,fill:ft.colorPrimaryText,lineHeight:1.4,alignHorizontal:ct};return jsx(Text,te(Ft(Ft({},xt),mt),{"data-element-type":"title",children:ht}))},gt=mt=>{const xt={fontSize:16,fill:ft.colorTextSecondary,alignHorizontal:ct,lineHeight:1.4,height:ut*24};return jsx(Text,te(Ft(Ft({},xt),mt),{"data-element-type":"desc",children:dt}))};return!ht&&!dt?null:jsxs(FlexLayout,{flexDirection:"column",justifyContent:"center",alignItems:"center",x:rt,y:lt,gap:8,children:[ht&&jsx(pt,{}),dt&&jsx(gt,{})]})},THEME_REGISTRY=new Map;function registerTheme(it,rt){THEME_REGISTRY.set(it,rt)}function getTheme(it){return THEME_REGISTRY.get(it)}registerTheme("dark",{colorBg:"#1F1F1F",base:{text:{fill:"#fff"}}});registerTheme("hand-drawn",{base:{text:{"font-family":"851tegakizatsu"}},stylize:{type:"rough"}});useMode(definition$7);const generateThemeColors=({colorPrimary:it,colorBg:rt="#ffffff",isDarkMode:lt=!1})=>{const ct=parse$2(it),ht=parse$2(rt),dt=createBaseTheme({primaryColor:ct,bgColor:ht});return addDerivedColors(dt,{primaryColor:ct,bgColor:ht,isDarkMode:lt})},generatePrimaryBg=(it,rt)=>formatHex8(te(Ft({},it),{alpha:rt?.2:.1}))||"#ffffff",generateTextColor=(it,rt)=>{if(rt)return"#ffffff";const lt=parse$2("#262626");return contrast(lt,it)>=7?formatHex(lt):"#000000"},generateSecondaryTextColor=it=>{const rt=oklch(parse$2(it)),lt=te(Ft({},rt),{l:Math.min(1,rt.l+.2)});return formatHex(lt)},generatePrimaryTextColor=(it,rt)=>{const lt=parse$2(it),ct=parse$2("#262626"),ht=parse$2("#ffffff"),dt=contrast(ct,lt);return contrast(ht,lt)>=3?formatHex(ht):dt>=4.5?formatHex(ct):"#ffffff"},generateElevatedBg=(it,rt)=>{const lt=oklch(it);if(rt){const ct=te(Ft({},lt),{l:Math.min(1,lt.l+.1)});return safeFormatHex(ct,"#1f1f1f")}else{if(lt.l>.95)return"#ffffff";{const ct=te(Ft({},lt),{l:Math.min(1,lt.l+.05)});return safeFormatHex(ct,"#ffffff")}}},createBaseTheme=({primaryColor:it,bgColor:rt})=>({colorPrimary:safeFormatHex(it,"#FF356A"),colorBg:safeFormatHex(rt,"#ffffff"),colorWhite:"#ffffff"}),addDerivedColors=(it,{primaryColor:rt,bgColor:lt,isDarkMode:ct})=>{const ht=generateTextColor(lt,ct),dt=generatePrimaryBg(rt,ct);return te(Ft({},it),{isDarkMode:ct,colorPrimaryBg:dt,colorText:ht,colorTextSecondary:generateSecondaryTextColor(ht),colorPrimaryText:generatePrimaryTextColor(dt,ct),colorBgElevated:generateElevatedBg(lt,ct)})};function safeFormatHex(it,rt="#000000"){var lt;return(lt=formatHex(it))!=null?lt:rt}const DEFAULT_COLOR$3="#FF356A";function getColorPrimary(it){var rt;return((rt=it==null?void 0:it.themeConfig)==null?void 0:rt.colorPrimary)||DEFAULT_COLOR$3}function getPaletteColors(it){var dt;const{themeConfig:rt={},data:lt}=it,{colorPrimary:ct,palette:ht}=rt;return!ht||ht.length===0?Array(((dt=lt==null?void 0:lt.items)==null?void 0:dt.length)||1).fill(ct||DEFAULT_COLOR$3):lt.items.map((ut,ft)=>getPaletteColor$1(ht,[ft],lt.items.length)||DEFAULT_COLOR$3)}function getPaletteColor(it,rt){var lt,ct,ht;return getPaletteColor$1((lt=it==null?void 0:it.themeConfig)==null?void 0:lt.palette,rt,(ht=(ct=it.data)==null?void 0:ct.items)==null?void 0:ht.length)}function getThemeColors(it,rt){var ht;const{colorBg:lt=((ht=rt==null?void 0:rt.themeConfig)==null?void 0:ht.colorBg)||"white",colorPrimary:ct=rt?getColorPrimary(rt):"black"}=it;return generateThemeColors({colorPrimary:ct,isDarkMode:isDarkColor(lt),colorBg:lt})}function getHierarchyColorIndexes(it,rt){const{depth:lt,originalIndexes:ct,flatIndex:ht}=it;switch(rt){case"level":return[lt];case"branch":return lt===0?[0]:lt===1?[ct[1]+1]:[ct[1]+1];case"node":return ct;case"node-flat":return ht!==void 0?[ht]:(console.warn("node-flat mode requires flatIndex in HierarchyNode, falling back to originalIndexes"),ct);default:return[0]}}function getItemProps(it,rt=[]){const lt=Ft({},it),ct={};return["indexes","data","datum","positionH","positionV","themeColors","valueFormatter",...rt].forEach(dt=>{dt in lt&&(ct[dt]=lt[dt],delete lt[dt])}),["x","y","width","height"].forEach(dt=>{dt in it&&(lt[dt]=it[dt])}),[ct,lt]}function getItemComponent(it,rt){var lt;return it.length===0?()=>null:rt===void 0?it[0]:(lt=it[rt])!=null?lt:it[0]}const ITEM_REGISTRY=new Map;function registerItem(it,rt){ITEM_REGISTRY.set(it,rt)}function getItem(it){return ITEM_REGISTRY.get(it)}const BadgeCard=it=>{const[{datum:rt,indexes:lt,width:ct=200,height:ht=80,iconSize:dt=24,badgeSize:ut=32,gap:ft=8,positionH:pt="normal",themeColors:gt,valueFormatter:mt},xt]=getItemProps(it,["width","height","iconSize","badgeSize","gap"]),yt=rt.value,bt=yt!==void 0,wt=!!rt.desc,Ct=!!rt.icon,vt=`${gt.colorPrimary}-badge`,St=pt==="flipped"?ct-ft-ut:ft,_t=Ct?pt==="flipped"?ft:ut+2*ft:ft,Tt=ct-ft*2,Et=Ct?ct-ut-3*ft:Tt,At=ft+14+18+8,Mt=At-ft,It=wt?ft:(ht-ut)/2,Lt=!bt&&!wt?(ht-14)/2:ft;return jsxs(Group,te(Ft({},xt),{width:ct,height:ht,children:[jsx(Defs,{children:jsxs("radialGradient",{id:vt,cx:"50%",cy:"50%",r:"50%",children:[jsx("stop",{offset:"0%",stopColor:gt.colorPrimary}),jsx("stop",{offset:"100%",stopColor:tinycolor(gt.colorPrimary).darken(20).toHexString()})]})}),jsx(Rect,{"data-element-type":"shape",x:0,y:0,width:ct,height:ht,fill:gt.colorPrimaryBg,rx:8,ry:8}),Ct&&jsxs(Fragment,{children:[jsx(Ellipse,{x:St,y:It,width:ut,height:ut,fill:`url(#${vt})`}),jsx(ItemIcon,{indexes:lt,x:St+(ut-dt)/2,y:It+(ut-dt)/2,size:dt,fill:gt.colorWhite})]}),jsxs(FlexLayout,{flexDirection:"column",x:_t,y:Lt,width:Et,height:!bt&&!wt?void 0:Mt,alignItems:"center",justifyContent:"center",children:[jsx(ItemLabel,{indexes:lt,width:Et,alignHorizontal:pt==="flipped"?"right":"left",alignVertical:"middle",fontSize:14,fill:gt.colorText,children:rt.label}),bt&&jsx(ItemValue,{indexes:lt,width:Et,alignHorizontal:pt==="flipped"?"right":"left",alignVertical:"middle",fontSize:18,lineHeight:1,fontWeight:"bold",fill:gt.colorPrimary,value:yt,formatter:mt})]}),wt&&jsx(ItemDesc,{indexes:lt,x:ft,y:At,width:Tt,alignHorizontal:pt==="flipped"?"right":"left",fontSize:11,fill:gt.colorTextSecondary,lineNumber:2,lineHeight:1.2,wordWrap:!0,children:rt.desc})]}))};registerItem("badge-card",{component:BadgeCard,composites:["icon","label","value","desc"]});const CandyCardLite=it=>{const[{indexes:rt,datum:lt,width:ct=280,height:ht=140,themeColors:dt},ut]=getItemProps(it,["width","height"]);return jsxs(Group,te(Ft({},ut),{children:[jsx("rect",{x:0,y:0,width:ct,height:ht,rx:22,ry:22,fill:dt.colorPrimaryBg,stroke:dt.colorPrimary,"data-element-type":"shape"}),jsx(Path$1,{x:ct-85,y:.5,width:85,height:65,d:"M0 0H62.4495C74.9557 0 85.4549 10.8574 84.4557 23.1875V60.1875L77.8772 62.5839C64.3776 67.6876 48.51 64.6893 37.8662 53.7441L10.2361 25.3312C4.91402 19.8571 1.65356 13.1736 0.435652 6.21819L0 0Z",fill:dt.colorBg,"data-element-type":"shape"}),jsx(ItemLabel,{indexes:rt,x:20,y:24,width:200,alignHorizontal:"left",alignVertical:"middle",fill:dt.colorText,children:lt.label}),jsx(ItemDesc,{indexes:rt,x:20,y:58,width:220,height:70,fill:dt.colorTextSecondary,alignHorizontal:"left",alignVertical:"top",children:lt.desc}),jsx(ItemIcon,{indexes:rt,x:ct-48,y:12,width:32,height:32,fill:dt.colorPrimary})]}))};registerItem("candy-card-lite",{component:CandyCardLite,composites:["icon","label","desc"]});const DropShadow=it=>{const ht=it,{color:rt="black",opacity:lt=.8}=ht,ct=Pe(ht,["color","opacity"]);return jsx("filter",te(Ft({id:"drop-shadow",x:"-25%",y:"-25%",width:"200%",height:"200%"},ct),{children:jsx("feDropShadow",{dx:"4",dy:"4",stdDeviation:"4","flood-color":rt,"flood-opacity":lt})}))},LinearGradient=it=>{const{id:rt="linear-gradient",startColor:lt="black",stopColor:ct="white",direction:ht="left-right"}=it;return jsxs("linearGradient",te(Ft({id:rt},{"left-right":{x1:"0%",y1:"0%",x2:"100%",y2:"0%"},"right-left":{x1:"100%",y1:"0%",x2:"0%",y2:"0%"},"top-bottom":{x1:"0%",y1:"0%",x2:"0%",y2:"100%"},"bottom-top":{x1:"0%",y1:"100%",x2:"0%",y2:"0%"}}[ht]),{children:[jsx("stop",{offset:"0%",stopColor:lt}),jsx("stop",{offset:"100%",stopColor:ct})]}))},CapsuleItem=it=>{const[{datum:rt,indexes:lt,width:ct=300,height:ht=80,gap:dt=12,positionH:ut="normal",iconPadding:ft=ht/10,themeColors:pt},gt]=getItemProps(it,["width","height","gap","iconPadding"]),mt=ht/2,xt=ht-ft*2,yt=ut==="flipped",bt=!!rt.icon,wt=bt?ct-ht-dt:ct-dt*2,Ct=bt?yt?dt:ht:dt,vt=bt?yt?"right":"left":"center",St={indexes:lt,width:wt,alignHorizontal:vt,alignVertical:"middle",fontSize:16,fontWeight:"600",fill:pt.colorWhite},_t=getElementBounds(jsx(ItemLabel,te(Ft({},St),{children:rt.label}))),Tt={indexes:lt,width:wt,alignHorizontal:vt,alignVertical:"top",fontSize:12,lineNumber:1,fill:pt.colorWhite},Et=getElementBounds(rt.desc?jsx(ItemDesc,te(Ft({},Tt),{children:rt.desc})):null),At=4,Mt=_t.height+At+Et.height,Lt=(ht-Mt)/2,jt=Lt+_t.height+At,Ot=yt?ct-ht+ft:ft,Pt=ft;return jsxs(Group,te(Ft({},gt),{children:[jsx(Defs,{children:jsx(DropShadow,{})}),jsx(Rect,{x:0,y:0,width:ct,height:ht,fill:pt.colorPrimary,rx:mt,ry:mt,"data-element-type":"shape"}),rt.icon&&jsxs(Fragment,{children:[jsx(Ellipse,{x:Ot,y:Pt,width:xt,height:xt,fillOpacity:.5,fill:pt.colorBg,filter:"url(#drop-shadow)"}),jsx(ItemIconCircle,{indexes:lt,x:Ot,y:Pt,size:xt,fill:pt.colorBg,colorBg:pt.colorPrimary})]}),rt.label&&jsx(ItemLabel,te(Ft({x:Ct,y:Lt},St),{children:rt.label})),rt.desc&&jsx(ItemDesc,te(Ft({x:Ct,y:jt},Tt),{children:rt.desc}))]}))};registerItem("capsule-item",{component:CapsuleItem,composites:["icon","label","desc"]});const CircleNode=it=>{const[{indexes:rt,datum:lt,themeColors:ct,positionH:ht="normal",width:dt=240,height:ut=dt},ft]=getItemProps(it,["width","height"]),pt=Math.min(dt,ut),gt=pt*.7,mt=(pt-gt)/2,xt=gt*Math.sqrt(2)/2,yt=(pt-xt)/2,bt=tinycolor(ct.colorPrimary),wt=fadeWithWhite(bt,80,.2),Ct=fadeWithWhite(bt,20,.8),vt=fadeWithWhite(bt,75,.32),St=fadeWithWhite(bt,45,.4),_t=bt.clone().darken(5).toRgbString(),Tt=`${ct.colorPrimary}-${ht}-outer`,Et=`${ct.colorPrimary}-${ht}-inner`,At=ht==="flipped"?{x1:"0%",y1:"0%",x2:"100%",y2:"0%"}:{x1:"100%",y1:"0%",x2:"0%",y2:"0%"};return jsxs(Group,te(Ft({},ft),{children:[jsxs(Defs,{children:[jsxs("linearGradient",te(Ft({id:Tt},At),{children:[jsx("stop",{offset:"0%",stopColor:wt}),jsx("stop",{offset:"100%",stopColor:Ct})]})),jsxs("linearGradient",te(Ft({id:Et},At),{children:[jsx("stop",{offset:"0%",stopColor:vt}),jsx("stop",{offset:"100%",stopColor:St})]}))]}),jsx(Ellipse,{width:pt,height:pt,fill:`url(#${Tt})`,"data-element-type":"shape"}),jsx(Ellipse,{x:mt,y:mt,width:gt,height:gt,fill:`url(#${Et})`,stroke:"#FFFFFF",strokeWidth:1,"data-element-type":"shape"}),jsx(ItemLabel,{indexes:rt,x:yt,y:yt,width:xt,height:xt,lineHeight:1.1,alignHorizontal:"center",alignVertical:"middle",fill:_t,fontWeight:"500",children:lt.label})]}))};registerItem("circle-node",{component:CircleNode,composites:["label"]});function fadeWithWhite(it,rt,lt){return tinycolor.mix(it,"#ffffff",rt).setAlpha(lt).toRgbString()}const CircularProgress=it=>{var Et;const[{datum:rt,indexes:lt,size:ct=120,strokeWidth:ht=12,gap:dt=8,themeColors:ut,valueFormatter:ft=At=>`${Math.round(At)}%`},pt]=getItemProps(it,["size","strokeWidth","gap"]),gt=(Et=rt.value)!=null?Et:0,xt=Math.min(Math.max(gt/100,0),1),yt=(ct-ht)/2,bt=ct/2,wt=ht/2,Ct=ct-ht,vt=xt>=1,St=xt*360,_t=describeArc(bt,bt,yt,0,St),Tt={x:wt,y:wt,width:Ct,height:Ct};return jsxs(Group,te(Ft({},pt),{width:ct,height:ct+dt+20,children:[jsx(Rect,{width:ct,height:ct,fill:"none"}),jsx(Ellipse,te(Ft({},Tt),{fill:"none",stroke:"#f0f0f0",strokeWidth:ht,"data-element-type":"shape"})),vt?jsx(Ellipse,te(Ft({},Tt),{fill:"none",stroke:ut.colorPrimary,strokeWidth:ht,"data-element-type":"shape"})):jsx(Path$1,{d:_t,fill:"none",stroke:ut.colorPrimary,strokeWidth:ht,strokeLinecap:"round","data-element-type":"shape"}),jsx(ItemValue,{indexes:lt,x:ht,y:ht,width:Ct-ht,height:Ct-ht,fontSize:24,fontWeight:"bold",fill:ut.colorPrimary,alignHorizontal:"center",alignVertical:"middle",value:gt,formatter:ft}),jsx(ItemLabel,{indexes:lt,x:0,y:ct+dt,width:ct,alignHorizontal:"center",fontSize:12,fill:ut.colorTextSecondary,children:rt.label})]}))};function describeArc(it,rt,lt,ct,ht){const dt=polarToCartesian(it,rt,lt,ht),ut=polarToCartesian(it,rt,lt,ct),ft=ht-ct<=180?"0":"1";return`M ${dt.x} ${dt.y} A ${lt} ${lt} 0 ${ft} 0 ${ut.x} ${ut.y}`}function polarToCartesian(it,rt,lt,ct){const ht=(ct-90)*Math.PI/180;return{x:it+lt*Math.cos(ht),y:rt+lt*Math.sin(ht)}}registerItem("circular-progress",{component:CircularProgress,composites:["label","value"]});const CompactCard=it=>{const[{datum:rt,indexes:lt,width:ct=200,height:ht=60,iconSize:dt=20,gap:ut=8,positionH:ft="normal",themeColors:pt,valueFormatter:gt},mt]=getItemProps(it,["width","height","iconSize","gap"]),xt=rt.value,yt=xt!=null,bt="compact-shadow",wt=ft==="flipped"?ct-ut-dt:ut,Ct=ft==="flipped"?ut:dt+2*ut,vt=ct-dt-3*ut,St=yt?vt*.8:vt,_t=yt?vt*.2:0;return jsxs(Group,te(Ft({},mt),{children:[jsx(Defs,{children:jsx("filter",{id:bt,children:jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"2",floodOpacity:"0.15"})})}),jsx(Rect,{x:0,y:0,width:ct,height:ht,fill:pt.colorBgElevated,stroke:pt.colorBgElevated,strokeWidth:1,rx:6,ry:6,filter:`url(#${bt})`,"data-element-type":"shape"}),jsx(Rect,{x:ft==="flipped"?ct-3:0,y:0,width:3,height:ht,fill:pt.colorPrimary,rx:1.5,ry:1.5,"data-element-type":"shape"}),jsx(ItemIcon,{indexes:lt,x:wt,y:(ht-dt)/2,size:dt,fill:pt.colorPrimary}),jsxs(FlexLayout,{x:Ct,y:ut,width:vt,height:ht-ut*2,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",children:[jsxs(FlexLayout,{width:vt,flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[jsx(ItemLabel,{indexes:lt,width:St,alignHorizontal:"left",fontSize:12,fill:pt.colorText,children:rt.label}),yt&&jsx(ItemValue,{indexes:lt,width:_t,alignHorizontal:"right",fontSize:12,fontWeight:"bold",fill:pt.colorPrimary,value:xt,formatter:gt})]}),jsx(ItemDesc,{indexes:lt,width:vt,alignHorizontal:"left",alignVertical:"middle",fontSize:10,fill:pt.colorTextSecondary,lineNumber:2,wordWrap:!0,children:rt.desc})]})]}))};registerItem("compact-card",{component:CompactCard,composites:["icon","label","value","desc"]});const DoneList=it=>{const[{datum:rt,indexes:lt,width:ct=300,height:ht=30,iconSize:dt=30,gap:ut=5,positionH:ft="normal",positionV:pt="middle",themeColors:gt},mt]=getItemProps(it,["width","height","iconSize","gap"]),xt=ct-dt-ut,yt=pt==="middle"?(ht-dt)/2:pt==="flipped"?ht-dt:0;return jsxs(Group,te(Ft({},mt),{children:[jsx(Path$1,{"data-element-type":"shape",x:ft==="flipped"?xt+ut:0,y:yt,fill:gt.colorPrimary,width:dt,height:dt,d:"M14.7273 30C6.54538 30 0 22.9077 0 14.7269C0 6.54617 6.54538 0 14.7273 0C22.9092 0 30 6.54617 30 14.7269C30 22.9077 22.9092 30 14.7273 30ZM24.5454 10.9077C22.9092 9.27307 22.9092 9.27307 22.9092 9.27307C22.3638 8.72692 22.3638 8.7269 21.8181 8.7269C21.2727 8.7269 21.2727 8.72692 20.7273 9.27307C13.0908 16.9077 13.0908 16.9077 13.0908 16.9077C8.72731 12.5461 8.72731 12.5462 8.72731 12.5462C8.18193 12.5462 8.18193 12 7.63654 12L7.09077 12.5462C4.90923 14.1808 4.90923 14.1808 4.90923 14.1808C4.90923 14.7269 4.90923 14.7269 4.90923 15.2731C4.90923 15.8192 4.90923 15.8192 4.90923 16.3654C12 23.4539 12 23.4538 12 23.4538C12.5454 23.4538 12.5454 23.4538 13.0908 23.4538C13.6365 23.4538 13.6365 23.4538 14.1819 23.4538C24.5454 12.5461 24.5454 12.5462 24.5454 12.5462L25.0908 12C25.0908 11.4538 24.5454 10.9077 24.5454 10.9077Z"}),jsx(ItemLabel,{indexes:lt,x:ft==="flipped"?0:dt+ut,width:xt,height:ht,fontWeight:"normal",alignVertical:"middle",wordWrap:!1,fill:"#666",children:rt.label||rt.desc})]}))};registerItem("done-list",{component:DoneList,composites:["label"]});const HorizontalIconArrow=it=>{const[{indexes:rt,datum:lt,width:ct=140,themeColors:ht,positionV:dt="normal"},ut]=getItemProps(it,["width"]),ft=dt!=="flipped",pt=dt==="normal"?"bottom":"top",gt=jsx(ItemLabel,{indexes:rt,width:ct,fill:ht.colorText,alignHorizontal:"center",alignVertical:pt,fontSize:14,children:lt.label}),mt=jsx(ItemDesc,{indexes:rt,width:ct,fill:ht.colorTextSecondary,alignHorizontal:"center",alignVertical:pt,children:lt.desc}),xt=jsx(ItemIconCircle,{indexes:rt,fill:ht.colorPrimary,colorBg:ht.colorWhite}),yt=jsx(DotLine$2,{width:8,height:30,fill:ht.colorPrimary,positionV:dt}),bt=5,wt=25,Ct=30,vt=getElementBounds(gt),St=getElementBounds(mt),_t=getElementBounds(xt),Tt=getElementBounds(yt),Et=vt.height+St.height+bt+Tt.height-_t.height-wt,At=_t.height+wt+Ct+Tt.height+bt+vt.height+St.height;return jsx(Group,te(Ft({width:ct,height:At},ut),{children:jsxs(FlexLayout,{flexDirection:"column",alignItems:"center",children:[ft?jsxs(Fragment,{children:[mt,gt,jsx(Gap,{height:bt}),yt]}):jsxs(Fragment,{children:[jsx(Gap,{height:Et}),xt,jsx(Gap,{height:wt})]}),jsxs(AlignLayout,{horizontal:"center",vertical:"middle",width:ct,height:Ct,children:[jsx(HorizontalArrow$1,{width:ct,height:Ct,fill:ht.colorPrimary}),jsx(Text,{width:ct,height:Ct,alignHorizontal:"center",alignVertical:"middle",fill:ht.colorWhite,fontWeight:"bold",fontSize:16,children:lt.time?lt.time:String(rt[0]+1).padStart(2,"0").slice(-2)})]}),ft?jsxs(Fragment,{children:[jsx(Gap,{height:wt}),xt]}):jsxs(Fragment,{children:[yt,jsx(Gap,{height:bt}),gt,mt]})]})}))},HorizontalArrow$1=it=>{const{x:rt=0,y:lt=0,width:ct=100,height:ht=40,fill:dt="#FF356A",size:ut=10}=it;return jsx(Polygon,{width:ct,height:ht,points:[{x:rt,y:lt},{x:rt+ct-ut,y:lt},{x:rt+ct,y:lt+ht/2},{x:rt+ct-ut,y:lt+ht},{x:rt,y:lt+ht},{x:rt+ut,y:lt+ht/2}],fill:dt,"data-element-type":"shape"})},DotLine$2=it=>{const{x:rt=0,y:lt=0,width:ct=10,height:ht=50,fill:dt,positionV:ut="top"}=it,ft=ct/2,pt=ht-ft,gt=2,mt=ft;return jsxs(ShapesGroup,{x:rt,y:lt,width:ct,height:ht,children:[jsx(Ellipse,{width:ct,height:ct,fill:dt,y:ut==="top"?0:pt-ft}),jsx(Path$1,{d:ut==="top"?`M${mt},${ft} L${mt},${ft+pt}`:`M${mt},0 L${mt},${pt-ft}`,strokeWidth:gt,stroke:dt})]})};registerItem("horizontal-icon-arrow",{component:HorizontalIconArrow,composites:["icon","label","desc","time"]});const HorizontalIconLine=it=>{const[{indexes:rt,datum:lt,width:ct=160,themeColors:ht,positionH:dt="center",positionV:ut="normal"},ft]=getItemProps(it,["width"]),pt=dt==="normal"?"left":dt==="flipped"?"right":"center",gt=jsx(ItemLabel,{indexes:rt,width:ct,alignHorizontal:pt,fill:ht.colorPrimary,children:lt.label}),mt=getElementBounds(gt),xt=lt.desc?jsx(ItemDesc,{indexes:rt,width:ct,fill:ht.colorTextSecondary,alignHorizontal:pt,alignVertical:ut==="flipped"?"top":"bottom",children:lt.desc}):null,yt=getElementBounds(xt),wt=lt.icon?jsx(ItemIconCircle,{size:45,indexes:rt,colorBg:ht.colorBg,fill:ht.colorPrimary}):null,Ct=getElementBounds(wt),vt=lt.time?jsx(Text,{width:ct,height:30,alignHorizontal:"center",alignVertical:"middle",fill:ht.colorPrimary,fontSize:18,fontWeight:"bold",children:lt.time}):null,St=getElementBounds(vt),_t=18,Tt=jsxs(AlignLayout,{horizontal:"center",vertical:"middle",width:ct,height:_t,children:[jsx(Rect,{width:ct,height:_t,fill:ht.colorPrimary,"data-element-type":"shape"}),jsx(Ellipse,{width:_t+6,height:_t+6,fill:ht.colorBg,fillOpacity:.5,"data-element-type":"shape"}),jsx(Ellipse,{width:12,height:12,fill:"white","data-element-type":"shape"})]}),Et=mt.height+yt.height,At=Ct.height+St.height+5,Mt=Math.abs(At-Et),It=At>Et?Mt:0,Lt=Et>At?Mt:0;return ut==="flipped"?jsxs(FlexLayout,te(Ft({},ft),{flexDirection:"column",alignItems:"center",children:[jsx(Gap,{height:Lt}),vt,wt,jsx(Gap,{height:5}),Tt,gt,xt,jsx(Gap,{height:It})]})):jsxs(FlexLayout,te(Ft({},ft),{flexDirection:"column",alignItems:"center",children:[jsx(Gap,{height:It}),gt,xt,Tt,jsx(Gap,{height:5}),wt,vt,jsx(Gap,{height:Lt})]}))};registerItem("horizontal-icon-line",{component:HorizontalIconLine,composites:["icon","label","desc"]});const IconBadge=it=>{var wt;const[{datum:rt,indexes:lt,size:ct=80,iconSize:ht=28,badgeSize:dt=24,gap:ut=8,themeColors:ft,width:pt=84,height:gt=105},mt]=getItemProps(it,["size","iconSize","badgeSize","gap"]),xt=(wt=rt.value)!=null?wt:0,yt=`${ft.colorPrimary}-icon`,bt="#ff6b6b-badge";return jsxs(Group,te(Ft({},mt),{width:pt,height:gt,children:[jsxs(Defs,{children:[jsxs("radialGradient",{id:yt,cx:"50%",cy:"30%",r:"70%",children:[jsx("stop",{offset:"0%",stopColor:tinycolor(ft.colorPrimary).lighten(30).toHexString()}),jsx("stop",{offset:"100%",stopColor:ft.colorPrimary})]}),jsxs("linearGradient",{id:bt,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:"#ff6b6b"}),jsx("stop",{offset:"100%",stopColor:"#ee5a52"})]})]}),jsx(Ellipse,{x:0,y:0,width:ct,height:ct,fill:`url(#${yt})`,"data-element-type":"shape"}),jsx(ItemIcon,{indexes:lt,x:(ct-ht)/2,y:(ct-ht)/2,size:ht,fill:ft.colorPrimaryText}),jsx(Ellipse,{x:ct-dt+4,width:dt,height:dt,fill:`url(#${bt})`}),jsx(Text,{x:ct-dt+4,width:dt,height:dt,fontSize:10,fontWeight:"bold",fill:ft.colorWhite,alignHorizontal:"center",alignVertical:"middle",children:xt>99?"99+":Math.round(xt)}),jsx(ItemLabel,{indexes:lt,x:0,y:ct+ut,width:ct,alignHorizontal:"center",fontSize:12,fill:ft.colorText,children:rt.label})]}))};registerItem("icon-badge",{component:IconBadge,composites:["icon","label"]});const IndexedCard=it=>{const[{datum:rt,indexes:lt,width:ct=200,borderRadius:ht=12,padding:dt=16,separatorHeight:ut=2,indexFontSize:ft=20,labelFontSize:pt=16,gap:gt=8,themeColors:mt},xt]=getItemProps(it,["width","height","borderRadius","padding","separatorHeight","indexFontSize","labelFontSize","gap"]),yt=lt[0]+1,bt=String(yt).padStart(2,"0"),wt=rt.label!==void 0,Ct=rt.desc!==void 0,vt=tinycolor.mix(mt.colorPrimary,mt.colorWhite,40).toHexString(),St=mt.colorBgElevated||mt.colorWhite,_t=ct-2*dt,Tt=getElementBounds(jsx(Text,{fontSize:ft,fontWeight:"bold",children:bt})),Et=_t-Tt.width-gt,At=wt?getElementBounds(jsx(ItemLabel,{indexes:lt,width:Et,fontSize:pt,fontWeight:"bold",x:ft,children:rt.label})):{height:0},Mt=Ct?getElementBounds(jsx(ItemDesc,{indexes:lt,width:_t,fontSize:14,lineHeight:1.5,wordWrap:!0,children:rt.desc})):{height:0},It=Math.max(Tt.height,At.height),Lt=dt*2+It+(wt||Ct?gt:0)+ut+(Ct?gt:0)+Mt.height;return jsxs(Group,te(Ft({},xt),{width:ct,height:Lt,children:[jsx(Rect,{x:0,y:0,width:ct,height:Lt,rx:ht,ry:ht,fill:St,stroke:tinycolor(St).darken(5).toHexString(),strokeWidth:.5,"data-element-type":"shape"}),jsxs(Group,{x:dt,y:dt,children:[jsxs(Group,{x:0,y:0,children:[jsx(Text,{x:0,y:0,fontSize:ft,fontWeight:"bold",fill:mt.colorPrimary,alignVertical:"top",children:bt}),wt&&jsx(ItemLabel,{indexes:lt,x:ft+gt,y:0,width:Et,fontSize:pt,fontWeight:"bold",fill:mt.colorTextSecondary,alignVertical:"top",children:rt.label})]}),jsx(Rect,{x:0,y:It+gt,width:_t,height:ut,fill:vt,"data-element-type":"shape"}),Ct&&jsx(ItemDesc,{indexes:lt,x:0,y:It+gt+ut+gt,width:_t,fontSize:14,lineHeight:1.5,wordWrap:!0,fill:mt.colorTextSecondary,children:rt.desc})]})]}))};registerItem("indexed-card",{component:IndexedCard,composites:["label","desc"]});const LCornerCard=it=>{const[{indexes:rt,datum:lt,width:ct=140,iconSize:ht=24,themeColors:dt},ut]=getItemProps(it,["width","iconSize"]),{label:ft,desc:pt}=lt,gt=8,mt=16,xt=12,yt=mt+xt,bt=ct-yt,wt=60,Ct=ht+44,vt=mt,St=wt+xt,_t=wt+mt+xt,Tt=[{x:0,y:_t},{x:vt,y:St},{x:vt,y:_t}],Et=ct-vt-xt,At=vt+xt,Mt=At+Et,It=St+gt/2,Lt=It+Ct,jt=`M ${At} ${Lt} L ${At} ${It} L ${Mt} ${It}`,Ot=gt/2,Pt=At+Ot,Gt=It+Ot,kt=8;return jsxs(Group,te(Ft({},ut),{children:[jsx(ItemDesc,{indexes:rt,x:yt,width:bt,height:wt,fontSize:12,alignHorizontal:"left",alignVertical:"bottom",fill:dt.colorTextSecondary,children:pt}),jsx(Polygon,{points:Tt,fill:dt.colorPrimary,opacity:.9,width:mt,height:mt,"data-element-type":"shape"}),jsx(Path$1,{d:jt,stroke:dt.colorPrimary,strokeWidth:gt,fill:"none","data-element-type":"shape"}),jsx(ItemIcon,{indexes:rt,x:Pt+Et/2-ht/2,y:Gt+kt,size:ht,fill:dt.colorPrimary}),jsx(ItemLabel,{indexes:rt,x:Pt,y:Gt+ht+kt*2,width:Et,fontSize:14,fontWeight:"bold",alignHorizontal:"center",alignVertical:"middle",fill:dt.colorText,children:ft})]}))};registerItem("l-corner-card",{component:LCornerCard,composites:["icon","label","desc"]});const LetterCard=it=>{var Dt,Rt;const[{datum:rt,indexes:lt,width:ct=280,height:ht=160,showStripe:dt=!0,showGradient:ut=!0,showBottomShade:ft=!0,themeColors:pt},gt]=getItemProps(it,["width","height","showStripe","showGradient","showBottomShade"]),mt=(Dt=rt.label)==null?void 0:Dt[0].toUpperCase(),xt=(Rt=rt.label)==null?void 0:Rt.toUpperCase(),yt=pt.colorPrimary,bt=tinycolor(yt),wt=4,Ct=6,vt=45,St=40,_t=12,Et=bt.clone().darken(4).toHexString(),At=bt.clone().lighten(_t).toHexString(),Mt="rgba(255, 255, 255, 0)",It="rgba(0, 0, 0, 0.03)",Lt=`letter-card-${lt.join("-")}`,jt=`${Lt}-gradient`,Ot=`${Lt}-pattern`,Pt=`${Lt}-shade`,Gt=wt+Ct,kt=1,Ht=96,Xt=Ht*kt,zt=16,Nt=zt*kt,Bt=ht/16,Vt=Xt+Bt+Nt,Yt=(ht-Vt)/2,Kt=Yt+Xt+Bt;return jsxs(Group,te(Ft({},gt),{width:ct,height:ht,children:[jsxs(Defs,{children:[ut&&jsxs("linearGradient",{id:jt,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:Et}),jsx("stop",{offset:"100%",stopColor:At})]}),dt&&jsxs("pattern",{id:Ot,patternUnits:"userSpaceOnUse",width:Gt,height:Gt,patternTransform:`rotate(${vt})`,children:[jsx("rect",{x:"0",y:"0",width:Gt,height:Gt,fill:Mt}),jsx("rect",{x:"0",y:"0",width:wt,height:Gt,fill:It})]}),ft&&jsxs("linearGradient",{id:Pt,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:"rgba(0,0,0,0)"}),jsx("stop",{offset:"100%",stopColor:"rgba(0,0,0,0.16)"})]})]}),jsx(Rect,{x:0,y:0,width:ct,height:ht,fill:ut?`url(#${jt})`:yt,rx:0,ry:0,"data-element-type":"shape"}),dt&&jsx(Rect,{x:0,y:0,width:ct,height:ht,fill:`url(#${Ot})`,rx:0,ry:0}),ft&&jsx(Rect,{x:0,y:ht-St,width:ct,height:St,fill:`url(#${Pt})`,rx:0,ry:0}),mt&&jsx(ItemLabel,{indexes:lt,x:0,y:Yt,width:ct,fontSize:Ht,fontWeight:"bold",fill:"#FFFFFF",alignHorizontal:"center",alignVertical:"top",lineHeight:1,children:mt}),jsx(ItemLabel,{indexes:lt,x:0,y:Kt,width:ct,fontSize:zt,fontWeight:"bold",fill:"#FFFFFF",alignHorizontal:"center",alignVertical:"middle",lineHeight:1,children:xt})]}))};registerItem("letter-card",{component:LetterCard,composites:["label"]});const LinedText=it=>{var Gt,kt,Ht;const[{datum:rt,indexes:lt,width:ct,themeColors:ht,positionH:dt="normal",positionV:ut="center",formatter:ft=Xt=>Xt||"",usePaletteColor:pt=!1,showUnderline:gt=!1,underlineGap:mt=6,underlineExtend:xt=8,underlineThickness:yt=2},bt]=getItemProps(it,["width","formatter","usePaletteColor","showUnderline","underlineGap","underlineExtend","underlineThickness"]),wt=ft((kt=(Gt=rt.label)!=null?Gt:rt.desc)!=null?kt:""),Ct=dt==="flipped"?"right":dt==="center"?"center":"left",vt=getElementBounds(jsx(ItemLabel,{indexes:lt,width:ct,children:wt})),St=ct!=null?ct:vt.width,_t=vt.height,Tt=gt?St+xt*2:0,Et=_t+(gt?mt+yt:0),At=gt?Math.max(St,Tt):St,Mt=(Ht=bt.height)!=null?Ht:Et,It=ut==="middle"?(Mt-Et)/2:ut==="flipped"?Mt-Et:0,Lt=Ct==="right"?At-St:Ct==="center"?(At-St)/2:0,jt=It,Ot=Ct==="right"?At-Tt:Ct==="center"?(At-Tt)/2:0,Pt=Mt;return jsxs(Group,te(Ft({},bt),{width:At,height:Mt,children:[jsx(ItemLabel,{indexes:lt,x:Lt,y:jt,width:St,height:_t,alignHorizontal:Ct,alignVertical:ut==="flipped"?"bottom":ut==="center"?"middle":"top",fill:pt?ht.colorPrimary:ht.colorText,children:wt}),gt&&jsx(Path$1,{d:`M 0 ${yt/2} L ${Tt} ${yt/2}`,x:Ot,y:Pt-yt/2,width:Tt,height:yt,stroke:ht.colorPrimary,strokeWidth:yt,fill:"none",strokeLinecap:"round","data-element-type":"shape"})]}))};registerItem("lined-text",{component:LinedText,composites:["label"]});const PillBadge=it=>{const[{datum:rt,indexes:lt,width:ct=300,pillWidth:ht=120,pillHeight:dt=36,gap:ut=16,positionH:ft="normal",themeColors:pt},gt]=getItemProps(it,["width","pillWidth","pillHeight","gap"]),mt=!!rt.desc,xt=mt?ct:ht,yt=mt?ft==="center"?(xt-ht)/2:ft==="flipped"?xt-ht:0:0,bt=0,wt=0,Ct=dt+ut,vt=xt,St=`drop-shadow-${pt.colorPrimary}`,_t="linear-gradient-white-top-bottom";return jsxs(Group,te(Ft({},gt),{children:[jsxs(Defs,{children:[jsx(DropShadow,{id:St,color:pt.colorPrimary}),jsx(LinearGradient,{id:_t,startColor:"#fff",stopColor:"#ffffff33",direction:"top-bottom"})]}),jsx(Rect,{x:yt,y:bt,width:ht,height:dt,fill:pt.colorPrimaryBg,stroke:pt.colorPrimary,rx:dt/2,ry:dt/2,filter:`url(#${St})`,"data-element-type":"shape"}),jsx(Rect,{x:yt,y:bt,width:ht,height:dt,fill:`url(#${_t})`,opacity:pt.isDarkMode?.4:.7,rx:dt/2,ry:dt/2}),jsx(ItemLabel,{indexes:lt,x:yt,y:bt,width:ht,height:dt,alignHorizontal:"center",alignVertical:"middle",fontSize:14,fontWeight:"500",fill:pt.colorText,children:rt.label}),rt.desc&&jsx(ItemDesc,{indexes:lt,x:wt,y:Ct,width:vt,alignHorizontal:ft==="center"?"center":ft==="flipped"?"right":"left",fontSize:12,fill:pt.colorTextSecondary,lineNumber:2,wordWrap:!0,children:rt.desc})]}))};registerItem("pill-badge",{component:PillBadge,composites:["label","desc"]});const LabelText=it=>{var wt;const[{indexes:rt,datum:lt,width:ct=120,themeColors:ht,positionH:dt="normal",positionV:ut="center",formatter:ft=Ct=>Ct||"",usePaletteColor:pt=!1,lineNumber:gt=1},mt]=getItemProps(it,["width","formatter","usePaletteColor","lineNumber"]),xt=14,yt=1.4,bt=(wt=mt.height)!=null?wt:Math.ceil(gt*yt*xt);return jsx(ItemLabel,te(Ft({},mt),{indexes:rt,width:ct,height:bt,lineHeight:yt,fill:pt?ht.colorPrimary:ht.colorText,fontSize:xt,fontWeight:"regular",alignHorizontal:dt==="flipped"?"right":dt==="center"?"center":"left",alignVertical:ut==="flipped"?"bottom":ut==="center"?"middle":"top",children:ft(lt.label||lt.desc)}))};registerItem("plain-text",{component:LabelText,composites:["label"]});function ascending$1(it,rt){return it==null||rt==null?NaN:it<rt?-1:it>rt?1:it>=rt?0:NaN}function descending$1(it,rt){return it==null||rt==null?NaN:rt<it?-1:rt>it?1:rt>=it?0:NaN}function bisector(it){let rt,lt,ct;it.length!==2?(rt=ascending$1,lt=(ft,pt)=>ascending$1(it(ft),pt),ct=(ft,pt)=>it(ft)-pt):(rt=it===ascending$1||it===descending$1?it:zero$1,lt=it,ct=it);function ht(ft,pt,gt=0,mt=ft.length){if(gt<mt){if(rt(pt,pt)!==0)return mt;do{const xt=gt+mt>>>1;lt(ft[xt],pt)<0?gt=xt+1:mt=xt}while(gt<mt)}return gt}function dt(ft,pt,gt=0,mt=ft.length){if(gt<mt){if(rt(pt,pt)!==0)return mt;do{const xt=gt+mt>>>1;lt(ft[xt],pt)<=0?gt=xt+1:mt=xt}while(gt<mt)}return gt}function ut(ft,pt,gt=0,mt=ft.length){const xt=ht(ft,pt,gt,mt-1);return xt>gt&&ct(ft[xt-1],pt)>-ct(ft[xt],pt)?xt-1:xt}return{left:ht,center:ut,right:dt}}function zero$1(){return 0}function number$2(it){return it===null?NaN:+it}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$2).center;const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(it,rt,lt){const ct=(rt-it)/Math.max(0,lt),ht=Math.floor(Math.log10(ct)),dt=ct/Math.pow(10,ht),ut=dt>=e10?10:dt>=e5?5:dt>=e2?2:1;let ft,pt,gt;return ht<0?(gt=Math.pow(10,-ht)/ut,ft=Math.round(it*gt),pt=Math.round(rt*gt),ft/gt<it&&++ft,pt/gt>rt&&--pt,gt=-gt):(gt=Math.pow(10,ht)*ut,ft=Math.round(it/gt),pt=Math.round(rt/gt),ft*gt<it&&++ft,pt*gt>rt&&--pt),pt<ft&&.5<=lt&&lt<2?tickSpec(it,rt,lt*2):[ft,pt,gt]}function ticks(it,rt,lt){if(rt=+rt,it=+it,lt=+lt,!(lt>0))return[];if(it===rt)return[it];const ct=rt<it,[ht,dt,ut]=ct?tickSpec(rt,it,lt):tickSpec(it,rt,lt);if(!(dt>=ht))return[];const ft=dt-ht+1,pt=new Array(ft);if(ct)if(ut<0)for(let gt=0;gt<ft;++gt)pt[gt]=(dt-gt)/-ut;else for(let gt=0;gt<ft;++gt)pt[gt]=(dt-gt)*ut;else if(ut<0)for(let gt=0;gt<ft;++gt)pt[gt]=(ht+gt)/-ut;else for(let gt=0;gt<ft;++gt)pt[gt]=(ht+gt)*ut;return pt}function tickIncrement(it,rt,lt){return rt=+rt,it=+it,lt=+lt,tickSpec(it,rt,lt)[2]}function tickStep(it,rt,lt){rt=+rt,it=+it,lt=+lt;const ct=rt<it,ht=ct?tickIncrement(rt,it,lt):tickIncrement(it,rt,lt);return(ct?-1:1)*(ht<0?1/-ht:ht)}var noop={value:()=>{}};function dispatch(){for(var it=0,rt=arguments.length,lt={},ct;it<rt;++it){if(!(ct=arguments[it]+"")||ct in lt||/[\s.]/.test(ct))throw new Error("illegal type: "+ct);lt[ct]=[]}return new Dispatch(lt)}function Dispatch(it){this._=it}function parseTypenames$1(it,rt){return it.trim().split(/^|\s+/).map(function(lt){var ct="",ht=lt.indexOf(".");if(ht>=0&&(ct=lt.slice(ht+1),lt=lt.slice(0,ht)),lt&&!rt.hasOwnProperty(lt))throw new Error("unknown type: "+lt);return{type:lt,name:ct}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(it,rt){var lt=this._,ct=parseTypenames$1(it+"",lt),ht,dt=-1,ut=ct.length;if(arguments.length<2){for(;++dt<ut;)if((ht=(it=ct[dt]).type)&&(ht=get$1(lt[ht],it.name)))return ht;return}if(rt!=null&&typeof rt!="function")throw new Error("invalid callback: "+rt);for(;++dt<ut;)if(ht=(it=ct[dt]).type)lt[ht]=set$1(lt[ht],it.name,rt);else if(rt==null)for(ht in lt)lt[ht]=set$1(lt[ht],it.name,null);return this},copy:function(){var it={},rt=this._;for(var lt in rt)it[lt]=rt[lt].slice();return new Dispatch(it)},call:function(it,rt){if((ht=arguments.length-2)>0)for(var lt=new Array(ht),ct=0,ht,dt;ct<ht;++ct)lt[ct]=arguments[ct+2];if(!this._.hasOwnProperty(it))throw new Error("unknown type: "+it);for(dt=this._[it],ct=0,ht=dt.length;ct<ht;++ct)dt[ct].value.apply(rt,lt)},apply:function(it,rt,lt){if(!this._.hasOwnProperty(it))throw new Error("unknown type: "+it);for(var ct=this._[it],ht=0,dt=ct.length;ht<dt;++ht)ct[ht].value.apply(rt,lt)}};function get$1(it,rt){for(var lt=0,ct=it.length,ht;lt<ct;++lt)if((ht=it[lt]).name===rt)return ht.value}function set$1(it,rt,lt){for(var ct=0,ht=it.length;ct<ht;++ct)if(it[ct].name===rt){it[ct]=noop,it=it.slice(0,ct).concat(it.slice(ct+1));break}return lt!=null&&it.push({name:rt,value:lt}),it}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(it){var rt=it+="",lt=rt.indexOf(":");return lt>=0&&(rt=it.slice(0,lt))!=="xmlns"&&(it=it.slice(lt+1)),namespaces.hasOwnProperty(rt)?{space:namespaces[rt],local:it}:it}function creatorInherit(it){return function(){var rt=this.ownerDocument,lt=this.namespaceURI;return lt===xhtml&&rt.documentElement.namespaceURI===xhtml?rt.createElement(it):rt.createElementNS(lt,it)}}function creatorFixed(it){return function(){return this.ownerDocument.createElementNS(it.space,it.local)}}function creator(it){var rt=namespace(it);return(rt.local?creatorFixed:creatorInherit)(rt)}function none(){}function selector(it){return it==null?none:function(){return this.querySelector(it)}}function selection_select(it){typeof it!="function"&&(it=selector(it));for(var rt=this._groups,lt=rt.length,ct=new Array(lt),ht=0;ht<lt;++ht)for(var dt=rt[ht],ut=dt.length,ft=ct[ht]=new Array(ut),pt,gt,mt=0;mt<ut;++mt)(pt=dt[mt])&&(gt=it.call(pt,pt.__data__,mt,dt))&&("__data__"in pt&&(gt.__data__=pt.__data__),ft[mt]=gt);return new Selection$1(ct,this._parents)}function array$2(it){return it==null?[]:Array.isArray(it)?it:Array.from(it)}function empty(){return[]}function selectorAll(it){return it==null?empty:function(){return this.querySelectorAll(it)}}function arrayAll(it){return function(){return array$2(it.apply(this,arguments))}}function selection_selectAll(it){typeof it=="function"?it=arrayAll(it):it=selectorAll(it);for(var rt=this._groups,lt=rt.length,ct=[],ht=[],dt=0;dt<lt;++dt)for(var ut=rt[dt],ft=ut.length,pt,gt=0;gt<ft;++gt)(pt=ut[gt])&&(ct.push(it.call(pt,pt.__data__,gt,ut)),ht.push(pt));return new Selection$1(ct,ht)}function matcher(it){return function(){return this.matches(it)}}function childMatcher(it){return function(rt){return rt.matches(it)}}var find$1=Array.prototype.find;function childFind(it){return function(){return find$1.call(this.children,it)}}function childFirst(){return this.firstElementChild}function selection_selectChild(it){return this.select(it==null?childFirst:childFind(typeof it=="function"?it:childMatcher(it)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(it){return function(){return filter.call(this.children,it)}}function selection_selectChildren(it){return this.selectAll(it==null?children:childrenFilter(typeof it=="function"?it:childMatcher(it)))}function selection_filter(it){typeof it!="function"&&(it=matcher(it));for(var rt=this._groups,lt=rt.length,ct=new Array(lt),ht=0;ht<lt;++ht)for(var dt=rt[ht],ut=dt.length,ft=ct[ht]=[],pt,gt=0;gt<ut;++gt)(pt=dt[gt])&&it.call(pt,pt.__data__,gt,dt)&&ft.push(pt);return new Selection$1(ct,this._parents)}function sparse(it){return new Array(it.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(it,rt){this.ownerDocument=it.ownerDocument,this.namespaceURI=it.namespaceURI,this._next=null,this._parent=it,this.__data__=rt}EnterNode.prototype={constructor:EnterNode,appendChild:function(it){return this._parent.insertBefore(it,this._next)},insertBefore:function(it,rt){return this._parent.insertBefore(it,rt)},querySelector:function(it){return this._parent.querySelector(it)},querySelectorAll:function(it){return this._parent.querySelectorAll(it)}};function constant$3(it){return function(){return it}}function bindIndex(it,rt,lt,ct,ht,dt){for(var ut=0,ft,pt=rt.length,gt=dt.length;ut<gt;++ut)(ft=rt[ut])?(ft.__data__=dt[ut],ct[ut]=ft):lt[ut]=new EnterNode(it,dt[ut]);for(;ut<pt;++ut)(ft=rt[ut])&&(ht[ut]=ft)}function bindKey(it,rt,lt,ct,ht,dt,ut){var ft,pt,gt=new Map,mt=rt.length,xt=dt.length,yt=new Array(mt),bt;for(ft=0;ft<mt;++ft)(pt=rt[ft])&&(yt[ft]=bt=ut.call(pt,pt.__data__,ft,rt)+"",gt.has(bt)?ht[ft]=pt:gt.set(bt,pt));for(ft=0;ft<xt;++ft)bt=ut.call(it,dt[ft],ft,dt)+"",(pt=gt.get(bt))?(ct[ft]=pt,pt.__data__=dt[ft],gt.delete(bt)):lt[ft]=new EnterNode(it,dt[ft]);for(ft=0;ft<mt;++ft)(pt=rt[ft])&&gt.get(yt[ft])===pt&&(ht[ft]=pt)}function datum(it){return it.__data__}function selection_data(it,rt){if(!arguments.length)return Array.from(this,datum);var lt=rt?bindKey:bindIndex,ct=this._parents,ht=this._groups;typeof it!="function"&&(it=constant$3(it));for(var dt=ht.length,ut=new Array(dt),ft=new Array(dt),pt=new Array(dt),gt=0;gt<dt;++gt){var mt=ct[gt],xt=ht[gt],yt=xt.length,bt=arraylike(it.call(mt,mt&&mt.__data__,gt,ct)),wt=bt.length,Ct=ft[gt]=new Array(wt),vt=ut[gt]=new Array(wt),St=pt[gt]=new Array(yt);lt(mt,xt,Ct,vt,St,bt,rt);for(var _t=0,Tt=0,Et,At;_t<wt;++_t)if(Et=Ct[_t]){for(_t>=Tt&&(Tt=_t+1);!(At=vt[Tt])&&++Tt<wt;);Et._next=At||null}}return ut=new Selection$1(ut,ct),ut._enter=ft,ut._exit=pt,ut}function arraylike(it){return typeof it=="object"&&"length"in it?it:Array.from(it)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(it,rt,lt){var ct=this.enter(),ht=this,dt=this.exit();return typeof it=="function"?(ct=it(ct),ct&&(ct=ct.selection())):ct=ct.append(it+""),rt!=null&&(ht=rt(ht),ht&&(ht=ht.selection())),lt==null?dt.remove():lt(dt),ct&&ht?ct.merge(ht).order():ht}function selection_merge(it){for(var rt=it.selection?it.selection():it,lt=this._groups,ct=rt._groups,ht=lt.length,dt=ct.length,ut=Math.min(ht,dt),ft=new Array(ht),pt=0;pt<ut;++pt)for(var gt=lt[pt],mt=ct[pt],xt=gt.length,yt=ft[pt]=new Array(xt),bt,wt=0;wt<xt;++wt)(bt=gt[wt]||mt[wt])&&(yt[wt]=bt);for(;pt<ht;++pt)ft[pt]=lt[pt];return new Selection$1(ft,this._parents)}function selection_order(){for(var it=this._groups,rt=-1,lt=it.length;++rt<lt;)for(var ct=it[rt],ht=ct.length-1,dt=ct[ht],ut;--ht>=0;)(ut=ct[ht])&&(dt&&ut.compareDocumentPosition(dt)^4&&dt.parentNode.insertBefore(ut,dt),dt=ut);return this}function selection_sort(it){it||(it=ascending);function rt(xt,yt){return xt&&yt?it(xt.__data__,yt.__data__):!xt-!yt}for(var lt=this._groups,ct=lt.length,ht=new Array(ct),dt=0;dt<ct;++dt){for(var ut=lt[dt],ft=ut.length,pt=ht[dt]=new Array(ft),gt,mt=0;mt<ft;++mt)(gt=ut[mt])&&(pt[mt]=gt);pt.sort(rt)}return new Selection$1(ht,this._parents).order()}function ascending(it,rt){return it<rt?-1:it>rt?1:it>=rt?0:NaN}function selection_call(){var it=arguments[0];return arguments[0]=this,it.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var it=this._groups,rt=0,lt=it.length;rt<lt;++rt)for(var ct=it[rt],ht=0,dt=ct.length;ht<dt;++ht){var ut=ct[ht];if(ut)return ut}return null}function selection_size(){let it=0;for(const rt of this)++it;return it}function selection_empty(){return!this.node()}function selection_each(it){for(var rt=this._groups,lt=0,ct=rt.length;lt<ct;++lt)for(var ht=rt[lt],dt=0,ut=ht.length,ft;dt<ut;++dt)(ft=ht[dt])&&it.call(ft,ft.__data__,dt,ht);return this}function attrRemove$1(it){return function(){this.removeAttribute(it)}}function attrRemoveNS$1(it){return function(){this.removeAttributeNS(it.space,it.local)}}function attrConstant$1(it,rt){return function(){this.setAttribute(it,rt)}}function attrConstantNS$1(it,rt){return function(){this.setAttributeNS(it.space,it.local,rt)}}function attrFunction$1(it,rt){return function(){var lt=rt.apply(this,arguments);lt==null?this.removeAttribute(it):this.setAttribute(it,lt)}}function attrFunctionNS$1(it,rt){return function(){var lt=rt.apply(this,arguments);lt==null?this.removeAttributeNS(it.space,it.local):this.setAttributeNS(it.space,it.local,lt)}}function selection_attr(it,rt){var lt=namespace(it);if(arguments.length<2){var ct=this.node();return lt.local?ct.getAttributeNS(lt.space,lt.local):ct.getAttribute(lt)}return this.each((rt==null?lt.local?attrRemoveNS$1:attrRemove$1:typeof rt=="function"?lt.local?attrFunctionNS$1:attrFunction$1:lt.local?attrConstantNS$1:attrConstant$1)(lt,rt))}function defaultView(it){return it.ownerDocument&&it.ownerDocument.defaultView||it.document&&it||it.defaultView}function styleRemove$1(it){return function(){this.style.removeProperty(it)}}function styleConstant$1(it,rt,lt){return function(){this.style.setProperty(it,rt,lt)}}function styleFunction$1(it,rt,lt){return function(){var ct=rt.apply(this,arguments);ct==null?this.style.removeProperty(it):this.style.setProperty(it,ct,lt)}}function selection_style(it,rt,lt){return arguments.length>1?this.each((rt==null?styleRemove$1:typeof rt=="function"?styleFunction$1:styleConstant$1)(it,rt,lt==null?"":lt)):styleValue(this.node(),it)}function styleValue(it,rt){return it.style.getPropertyValue(rt)||defaultView(it).getComputedStyle(it,null).getPropertyValue(rt)}function propertyRemove(it){return function(){delete this[it]}}function propertyConstant(it,rt){return function(){this[it]=rt}}function propertyFunction(it,rt){return function(){var lt=rt.apply(this,arguments);lt==null?delete this[it]:this[it]=lt}}function selection_property(it,rt){return arguments.length>1?this.each((rt==null?propertyRemove:typeof rt=="function"?propertyFunction:propertyConstant)(it,rt)):this.node()[it]}function classArray(it){return it.trim().split(/^|\s+/)}function classList(it){return it.classList||new ClassList(it)}function ClassList(it){this._node=it,this._names=classArray(it.getAttribute("class")||"")}ClassList.prototype={add:function(it){var rt=this._names.indexOf(it);rt<0&&(this._names.push(it),this._node.setAttribute("class",this._names.join(" ")))},remove:function(it){var rt=this._names.indexOf(it);rt>=0&&(this._names.splice(rt,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(it){return this._names.indexOf(it)>=0}};function classedAdd(it,rt){for(var lt=classList(it),ct=-1,ht=rt.length;++ct<ht;)lt.add(rt[ct])}function classedRemove(it,rt){for(var lt=classList(it),ct=-1,ht=rt.length;++ct<ht;)lt.remove(rt[ct])}function classedTrue(it){return function(){classedAdd(this,it)}}function classedFalse(it){return function(){classedRemove(this,it)}}function classedFunction(it,rt){return function(){(rt.apply(this,arguments)?classedAdd:classedRemove)(this,it)}}function selection_classed(it,rt){var lt=classArray(it+"");if(arguments.length<2){for(var ct=classList(this.node()),ht=-1,dt=lt.length;++ht<dt;)if(!ct.contains(lt[ht]))return!1;return!0}return this.each((typeof rt=="function"?classedFunction:rt?classedTrue:classedFalse)(lt,rt))}function textRemove(){this.textContent=""}function textConstant$1(it){return function(){this.textContent=it}}function textFunction$1(it){return function(){var rt=it.apply(this,arguments);this.textContent=rt==null?"":rt}}function selection_text(it){return arguments.length?this.each(it==null?textRemove:(typeof it=="function"?textFunction$1:textConstant$1)(it)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(it){return function(){this.innerHTML=it}}function htmlFunction(it){return function(){var rt=it.apply(this,arguments);this.innerHTML=rt==null?"":rt}}function selection_html(it){return arguments.length?this.each(it==null?htmlRemove:(typeof it=="function"?htmlFunction:htmlConstant)(it)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(it){var rt=typeof it=="function"?it:creator(it);return this.select(function(){return this.appendChild(rt.apply(this,arguments))})}function constantNull(){return null}function selection_insert(it,rt){var lt=typeof it=="function"?it:creator(it),ct=rt==null?constantNull:typeof rt=="function"?rt:selector(rt);return this.select(function(){return this.insertBefore(lt.apply(this,arguments),ct.apply(this,arguments)||null)})}function remove(){var it=this.parentNode;it&&it.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var it=this.cloneNode(!1),rt=this.parentNode;return rt?rt.insertBefore(it,this.nextSibling):it}function selection_cloneDeep(){var it=this.cloneNode(!0),rt=this.parentNode;return rt?rt.insertBefore(it,this.nextSibling):it}function selection_clone(it){return this.select(it?selection_cloneDeep:selection_cloneShallow)}function selection_datum(it){return arguments.length?this.property("__data__",it):this.node().__data__}function contextListener(it){return function(rt){it.call(this,rt,this.__data__)}}function parseTypenames(it){return it.trim().split(/^|\s+/).map(function(rt){var lt="",ct=rt.indexOf(".");return ct>=0&&(lt=rt.slice(ct+1),rt=rt.slice(0,ct)),{type:rt,name:lt}})}function onRemove(it){return function(){var rt=this.__on;if(rt){for(var lt=0,ct=-1,ht=rt.length,dt;lt<ht;++lt)dt=rt[lt],(!it.type||dt.type===it.type)&&dt.name===it.name?this.removeEventListener(dt.type,dt.listener,dt.options):rt[++ct]=dt;++ct?rt.length=ct:delete this.__on}}}function onAdd(it,rt,lt){return function(){var ct=this.__on,ht,dt=contextListener(rt);if(ct){for(var ut=0,ft=ct.length;ut<ft;++ut)if((ht=ct[ut]).type===it.type&&ht.name===it.name){this.removeEventListener(ht.type,ht.listener,ht.options),this.addEventListener(ht.type,ht.listener=dt,ht.options=lt),ht.value=rt;return}}this.addEventListener(it.type,dt,lt),ht={type:it.type,name:it.name,value:rt,listener:dt,options:lt},ct?ct.push(ht):this.__on=[ht]}}function selection_on(it,rt,lt){var ct=parseTypenames(it+""),ht,dt=ct.length,ut;if(arguments.length<2){var ft=this.node().__on;if(ft){for(var pt=0,gt=ft.length,mt;pt<gt;++pt)for(ht=0,mt=ft[pt];ht<dt;++ht)if((ut=ct[ht]).type===mt.type&&ut.name===mt.name)return mt.value}return}for(ft=rt?onAdd:onRemove,ht=0;ht<dt;++ht)this.each(ft(ct[ht],rt,lt));return this}function dispatchEvent(it,rt,lt){var ct=defaultView(it),ht=ct.CustomEvent;typeof ht=="function"?ht=new ht(rt,lt):(ht=ct.document.createEvent("Event"),lt?(ht.initEvent(rt,lt.bubbles,lt.cancelable),ht.detail=lt.detail):ht.initEvent(rt,!1,!1)),it.dispatchEvent(ht)}function dispatchConstant(it,rt){return function(){return dispatchEvent(this,it,rt)}}function dispatchFunction(it,rt){return function(){return dispatchEvent(this,it,rt.apply(this,arguments))}}function selection_dispatch(it,rt){return this.each((typeof rt=="function"?dispatchFunction:dispatchConstant)(it,rt))}function*selection_iterator(){for(var it=this._groups,rt=0,lt=it.length;rt<lt;++rt)for(var ct=it[rt],ht=0,dt=ct.length,ut;ht<dt;++ht)(ut=ct[ht])&&(yield ut)}var root=[null];function Selection$1(it,rt){this._groups=it,this._parents=rt}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function define(it,rt,lt){it.prototype=rt.prototype=lt,lt.constructor=it}function extend(it,rt){var lt=Object.create(it.prototype);for(var ct in rt)lt[ct]=rt[ct];return lt}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(it){return Object.assign(new this.constructor,this,it)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(it){var rt,lt;return it=(it+"").trim().toLowerCase(),(rt=reHex.exec(it))?(lt=rt[1].length,rt=parseInt(rt[1],16),lt===6?rgbn(rt):lt===3?new Rgb(rt>>8&15|rt>>4&240,rt>>4&15|rt&240,(rt&15)<<4|rt&15,1):lt===8?rgba(rt>>24&255,rt>>16&255,rt>>8&255,(rt&255)/255):lt===4?rgba(rt>>12&15|rt>>8&240,rt>>8&15|rt>>4&240,rt>>4&15|rt&240,((rt&15)<<4|rt&15)/255):null):(rt=reRgbInteger.exec(it))?new Rgb(rt[1],rt[2],rt[3],1):(rt=reRgbPercent.exec(it))?new Rgb(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,1):(rt=reRgbaInteger.exec(it))?rgba(rt[1],rt[2],rt[3],rt[4]):(rt=reRgbaPercent.exec(it))?rgba(rt[1]*255/100,rt[2]*255/100,rt[3]*255/100,rt[4]):(rt=reHslPercent.exec(it))?hsla(rt[1],rt[2]/100,rt[3]/100,1):(rt=reHslaPercent.exec(it))?hsla(rt[1],rt[2]/100,rt[3]/100,rt[4]):named.hasOwnProperty(it)?rgbn(named[it]):it==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(it){return new Rgb(it>>16&255,it>>8&255,it&255,1)}function rgba(it,rt,lt,ct){return ct<=0&&(it=rt=lt=NaN),new Rgb(it,rt,lt,ct)}function rgbConvert(it){return it instanceof Color||(it=color$1(it)),it?(it=it.rgb(),new Rgb(it.r,it.g,it.b,it.opacity)):new Rgb}function rgb(it,rt,lt,ct){return arguments.length===1?rgbConvert(it):new Rgb(it,rt,lt,ct==null?1:ct)}function Rgb(it,rt,lt,ct){this.r=+it,this.g=+rt,this.b=+lt,this.opacity=+ct}define(Rgb,rgb,extend(Color,{brighter(it){return it=it==null?brighter:Math.pow(brighter,it),new Rgb(this.r*it,this.g*it,this.b*it,this.opacity)},darker(it){return it=it==null?darker:Math.pow(darker,it),new Rgb(this.r*it,this.g*it,this.b*it,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const it=clampa(this.opacity);return`${it===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${it===1?")":`, ${it})`}`}function clampa(it){return isNaN(it)?1:Math.max(0,Math.min(1,it))}function clampi(it){return Math.max(0,Math.min(255,Math.round(it)||0))}function hex(it){return it=clampi(it),(it<16?"0":"")+it.toString(16)}function hsla(it,rt,lt,ct){return ct<=0?it=rt=lt=NaN:lt<=0||lt>=1?it=rt=NaN:rt<=0&&(it=NaN),new Hsl(it,rt,lt,ct)}function hslConvert(it){if(it instanceof Hsl)return new Hsl(it.h,it.s,it.l,it.opacity);if(it instanceof Color||(it=color$1(it)),!it)return new Hsl;if(it instanceof Hsl)return it;it=it.rgb();var rt=it.r/255,lt=it.g/255,ct=it.b/255,ht=Math.min(rt,lt,ct),dt=Math.max(rt,lt,ct),ut=NaN,ft=dt-ht,pt=(dt+ht)/2;return ft?(rt===dt?ut=(lt-ct)/ft+(lt<ct)*6:lt===dt?ut=(ct-rt)/ft+2:ut=(rt-lt)/ft+4,ft/=pt<.5?dt+ht:2-dt-ht,ut*=60):ft=pt>0&&pt<1?0:ut,new Hsl(ut,ft,pt,it.opacity)}function hsl(it,rt,lt,ct){return arguments.length===1?hslConvert(it):new Hsl(it,rt,lt,ct==null?1:ct)}function Hsl(it,rt,lt,ct){this.h=+it,this.s=+rt,this.l=+lt,this.opacity=+ct}define(Hsl,hsl,extend(Color,{brighter(it){return it=it==null?brighter:Math.pow(brighter,it),new Hsl(this.h,this.s,this.l*it,this.opacity)},darker(it){return it=it==null?darker:Math.pow(darker,it),new Hsl(this.h,this.s,this.l*it,this.opacity)},rgb(){var it=this.h%360+(this.h<0)*360,rt=isNaN(it)||isNaN(this.s)?0:this.s,lt=this.l,ct=lt+(lt<.5?lt:1-lt)*rt,ht=2*lt-ct;return new Rgb(hsl2rgb(it>=240?it-240:it+120,ht,ct),hsl2rgb(it,ht,ct),hsl2rgb(it<120?it+240:it-120,ht,ct),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const it=clampa(this.opacity);return`${it===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${it===1?")":`, ${it})`}`}}));function clamph(it){return it=(it||0)%360,it<0?it+360:it}function clampt(it){return Math.max(0,Math.min(1,it||0))}function hsl2rgb(it,rt,lt){return(it<60?rt+(lt-rt)*it/60:it<180?lt:it<240?rt+(lt-rt)*(240-it)/60:rt)*255}const constant$2=it=>()=>it;function linear$1(it,rt){return function(lt){return it+lt*rt}}function exponential(it,rt,lt){return it=Math.pow(it,lt),rt=Math.pow(rt,lt)-it,lt=1/lt,function(ct){return Math.pow(it+ct*rt,lt)}}function gamma(it){return(it=+it)==1?nogamma:function(rt,lt){return lt-rt?exponential(rt,lt,it):constant$2(isNaN(rt)?lt:rt)}}function nogamma(it,rt){var lt=rt-it;return lt?linear$1(it,lt):constant$2(isNaN(it)?rt:it)}const interpolateRgb=function it(rt){var lt=gamma(rt);function ct(ht,dt){var ut=lt((ht=rgb(ht)).r,(dt=rgb(dt)).r),ft=lt(ht.g,dt.g),pt=lt(ht.b,dt.b),gt=nogamma(ht.opacity,dt.opacity);return function(mt){return ht.r=ut(mt),ht.g=ft(mt),ht.b=pt(mt),ht.opacity=gt(mt),ht+""}}return ct.gamma=it,ct}(1);function numberArray(it,rt){rt||(rt=[]);var lt=it?Math.min(rt.length,it.length):0,ct=rt.slice(),ht;return function(dt){for(ht=0;ht<lt;++ht)ct[ht]=it[ht]*(1-dt)+rt[ht]*dt;return ct}}function isNumberArray(it){return ArrayBuffer.isView(it)&&!(it instanceof DataView)}function genericArray(it,rt){var lt=rt?rt.length:0,ct=it?Math.min(lt,it.length):0,ht=new Array(ct),dt=new Array(lt),ut;for(ut=0;ut<ct;++ut)ht[ut]=interpolate$1(it[ut],rt[ut]);for(;ut<lt;++ut)dt[ut]=rt[ut];return function(ft){for(ut=0;ut<ct;++ut)dt[ut]=ht[ut](ft);return dt}}function date(it,rt){var lt=new Date;return it=+it,rt=+rt,function(ct){return lt.setTime(it*(1-ct)+rt*ct),lt}}function interpolateNumber(it,rt){return it=+it,rt=+rt,function(lt){return it*(1-lt)+rt*lt}}function object$1(it,rt){var lt={},ct={},ht;(it===null||typeof it!="object")&&(it={}),(rt===null||typeof rt!="object")&&(rt={});for(ht in rt)ht in it?lt[ht]=interpolate$1(it[ht],rt[ht]):ct[ht]=rt[ht];return function(dt){for(ht in lt)ct[ht]=lt[ht](dt);return ct}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(it){return function(){return it}}function one(it){return function(rt){return it(rt)+""}}function interpolateString(it,rt){var lt=reA.lastIndex=reB.lastIndex=0,ct,ht,dt,ut=-1,ft=[],pt=[];for(it=it+"",rt=rt+"";(ct=reA.exec(it))&&(ht=reB.exec(rt));)(dt=ht.index)>lt&&(dt=rt.slice(lt,dt),ft[ut]?ft[ut]+=dt:ft[++ut]=dt),(ct=ct[0])===(ht=ht[0])?ft[ut]?ft[ut]+=ht:ft[++ut]=ht:(ft[++ut]=null,pt.push({i:ut,x:interpolateNumber(ct,ht)})),lt=reB.lastIndex;return lt<rt.length&&(dt=rt.slice(lt),ft[ut]?ft[ut]+=dt:ft[++ut]=dt),ft.length<2?pt[0]?one(pt[0].x):zero(rt):(rt=pt.length,function(gt){for(var mt=0,xt;mt<rt;++mt)ft[(xt=pt[mt]).i]=xt.x(gt);return ft.join("")})}function interpolate$1(it,rt){var lt=typeof rt,ct;return rt==null||lt==="boolean"?constant$2(rt):(lt==="number"?interpolateNumber:lt==="string"?(ct=color$1(rt))?(rt=ct,interpolateRgb):interpolateString:rt instanceof color$1?interpolateRgb:rt instanceof Date?date:isNumberArray(rt)?numberArray:Array.isArray(rt)?genericArray:typeof rt.valueOf!="function"&&typeof rt.toString!="function"||isNaN(rt)?object$1:interpolateNumber)(it,rt)}function interpolateRound(it,rt){return it=+it,rt=+rt,function(lt){return Math.round(it*(1-lt)+rt*lt)}}var degrees=180/Math.PI,identity$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(it,rt,lt,ct,ht,dt){var ut,ft,pt;return(ut=Math.sqrt(it*it+rt*rt))&&(it/=ut,rt/=ut),(pt=it*lt+rt*ct)&&(lt-=it*pt,ct-=rt*pt),(ft=Math.sqrt(lt*lt+ct*ct))&&(lt/=ft,ct/=ft,pt/=ft),it*ct<rt*lt&&(it=-it,rt=-rt,pt=-pt,ut=-ut),{translateX:ht,translateY:dt,rotate:Math.atan2(rt,it)*degrees,skewX:Math.atan(pt)*degrees,scaleX:ut,scaleY:ft}}var svgNode;function parseCss(it){const rt=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(it+"");return rt.isIdentity?identity$3:decompose(rt.a,rt.b,rt.c,rt.d,rt.e,rt.f)}function parseSvg(it){return it==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",it),!(it=svgNode.transform.baseVal.consolidate()))?identity$3:(it=it.matrix,decompose(it.a,it.b,it.c,it.d,it.e,it.f))}function interpolateTransform(it,rt,lt,ct){function ht(gt){return gt.length?gt.pop()+" ":""}function dt(gt,mt,xt,yt,bt,wt){if(gt!==xt||mt!==yt){var Ct=bt.push("translate(",null,rt,null,lt);wt.push({i:Ct-4,x:interpolateNumber(gt,xt)},{i:Ct-2,x:interpolateNumber(mt,yt)})}else(xt||yt)&&bt.push("translate("+xt+rt+yt+lt)}function ut(gt,mt,xt,yt){gt!==mt?(gt-mt>180?mt+=360:mt-gt>180&&(gt+=360),yt.push({i:xt.push(ht(xt)+"rotate(",null,ct)-2,x:interpolateNumber(gt,mt)})):mt&&xt.push(ht(xt)+"rotate("+mt+ct)}function ft(gt,mt,xt,yt){gt!==mt?yt.push({i:xt.push(ht(xt)+"skewX(",null,ct)-2,x:interpolateNumber(gt,mt)}):mt&&xt.push(ht(xt)+"skewX("+mt+ct)}function pt(gt,mt,xt,yt,bt,wt){if(gt!==xt||mt!==yt){var Ct=bt.push(ht(bt)+"scale(",null,",",null,")");wt.push({i:Ct-4,x:interpolateNumber(gt,xt)},{i:Ct-2,x:interpolateNumber(mt,yt)})}else(xt!==1||yt!==1)&&bt.push(ht(bt)+"scale("+xt+","+yt+")")}return function(gt,mt){var xt=[],yt=[];return gt=it(gt),mt=it(mt),dt(gt.translateX,gt.translateY,mt.translateX,mt.translateY,xt,yt),ut(gt.rotate,mt.rotate,xt,yt),ft(gt.skewX,mt.skewX,xt,yt),pt(gt.scaleX,gt.scaleY,mt.scaleX,mt.scaleY,xt,yt),gt=mt=null,function(bt){for(var wt=-1,Ct=yt.length,vt;++wt<Ct;)xt[(vt=yt[wt]).i]=vt.x(bt);return xt.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(it){setTimeout(it,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(it,rt,lt){if(typeof it!="function")throw new TypeError("callback is not a function");lt=(lt==null?now():+lt)+(rt==null?0:+rt),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=it,this._time=lt,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(it,rt,lt){var ct=new Timer;return ct.restart(it,rt,lt),ct}function timerFlush(){now(),++frame;for(var it=taskHead,rt;it;)(rt=clockNow-it._time)>=0&&it._call.call(void 0,rt),it=it._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var it=clock.now(),rt=it-clockLast;rt>pokeDelay&&(clockSkew-=rt,clockLast=it)}function nap(){for(var it,rt=taskHead,lt,ct=1/0;rt;)rt._call?(ct>rt._time&&(ct=rt._time),it=rt,rt=rt._next):(lt=rt._next,rt._next=null,rt=it?it._next=lt:taskHead=lt);taskTail=it,sleep(ct)}function sleep(it){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var rt=it-clockNow;rt>24?(it<1/0&&(timeout$1=setTimeout(wake,it-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(it,rt,lt){var ct=new Timer;return rt=rt==null?0:+rt,ct.restart(ht=>{ct.stop(),it(ht+rt)},rt,lt),ct}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(it,rt,lt,ct,ht,dt){var ut=it.__transition;if(!ut)it.__transition={};else if(lt in ut)return;create(it,lt,{name:rt,index:ct,group:ht,on:emptyOn,tween:emptyTween,time:dt.time,delay:dt.delay,duration:dt.duration,ease:dt.ease,timer:null,state:CREATED})}function init(it,rt){var lt=get(it,rt);if(lt.state>CREATED)throw new Error("too late; already scheduled");return lt}function set(it,rt){var lt=get(it,rt);if(lt.state>STARTED)throw new Error("too late; already running");return lt}function get(it,rt){var lt=it.__transition;if(!lt||!(lt=lt[rt]))throw new Error("transition not found");return lt}function create(it,rt,lt){var ct=it.__transition,ht;ct[rt]=lt,lt.timer=timer(dt,0,lt.time);function dt(gt){lt.state=SCHEDULED,lt.timer.restart(ut,lt.delay,lt.time),lt.delay<=gt&&ut(gt-lt.delay)}function ut(gt){var mt,xt,yt,bt;if(lt.state!==SCHEDULED)return pt();for(mt in ct)if(bt=ct[mt],bt.name===lt.name){if(bt.state===STARTED)return timeout(ut);bt.state===RUNNING?(bt.state=ENDED,bt.timer.stop(),bt.on.call("interrupt",it,it.__data__,bt.index,bt.group),delete ct[mt]):+mt<rt&&(bt.state=ENDED,bt.timer.stop(),bt.on.call("cancel",it,it.__data__,bt.index,bt.group),delete ct[mt])}if(timeout(function(){lt.state===STARTED&&(lt.state=RUNNING,lt.timer.restart(ft,lt.delay,lt.time),ft(gt))}),lt.state=STARTING,lt.on.call("start",it,it.__data__,lt.index,lt.group),lt.state===STARTING){for(lt.state=STARTED,ht=new Array(yt=lt.tween.length),mt=0,xt=-1;mt<yt;++mt)(bt=lt.tween[mt].value.call(it,it.__data__,lt.index,lt.group))&&(ht[++xt]=bt);ht.length=xt+1}}function ft(gt){for(var mt=gt<lt.duration?lt.ease.call(null,gt/lt.duration):(lt.timer.restart(pt),lt.state=ENDING,1),xt=-1,yt=ht.length;++xt<yt;)ht[xt].call(it,mt);lt.state===ENDING&&(lt.on.call("end",it,it.__data__,lt.index,lt.group),pt())}function pt(){lt.state=ENDED,lt.timer.stop(),delete ct[rt];for(var gt in ct)return;delete it.__transition}}function interrupt(it,rt){var lt=it.__transition,ct,ht,dt=!0,ut;if(lt){rt=rt==null?null:rt+"";for(ut in lt){if((ct=lt[ut]).name!==rt){dt=!1;continue}ht=ct.state>STARTING&&ct.state<ENDING,ct.state=ENDED,ct.timer.stop(),ct.on.call(ht?"interrupt":"cancel",it,it.__data__,ct.index,ct.group),delete lt[ut]}dt&&delete it.__transition}}function selection_interrupt(it){return this.each(function(){interrupt(this,it)})}function tweenRemove(it,rt){var lt,ct;return function(){var ht=set(this,it),dt=ht.tween;if(dt!==lt){ct=lt=dt;for(var ut=0,ft=ct.length;ut<ft;++ut)if(ct[ut].name===rt){ct=ct.slice(),ct.splice(ut,1);break}}ht.tween=ct}}function tweenFunction(it,rt,lt){var ct,ht;if(typeof lt!="function")throw new Error;return function(){var dt=set(this,it),ut=dt.tween;if(ut!==ct){ht=(ct=ut).slice();for(var ft={name:rt,value:lt},pt=0,gt=ht.length;pt<gt;++pt)if(ht[pt].name===rt){ht[pt]=ft;break}pt===gt&&ht.push(ft)}dt.tween=ht}}function transition_tween(it,rt){var lt=this._id;if(it+="",arguments.length<2){for(var ct=get(this.node(),lt).tween,ht=0,dt=ct.length,ut;ht<dt;++ht)if((ut=ct[ht]).name===it)return ut.value;return null}return this.each((rt==null?tweenRemove:tweenFunction)(lt,it,rt))}function tweenValue(it,rt,lt){var ct=it._id;return it.each(function(){var ht=set(this,ct);(ht.value||(ht.value={}))[rt]=lt.apply(this,arguments)}),function(ht){return get(ht,ct).value[rt]}}function interpolate(it,rt){var lt;return(typeof rt=="number"?interpolateNumber:rt instanceof color$1?interpolateRgb:(lt=color$1(rt))?(rt=lt,interpolateRgb):interpolateString)(it,rt)}function attrRemove(it){return function(){this.removeAttribute(it)}}function attrRemoveNS(it){return function(){this.removeAttributeNS(it.space,it.local)}}function attrConstant(it,rt,lt){var ct,ht=lt+"",dt;return function(){var ut=this.getAttribute(it);return ut===ht?null:ut===ct?dt:dt=rt(ct=ut,lt)}}function attrConstantNS(it,rt,lt){var ct,ht=lt+"",dt;return function(){var ut=this.getAttributeNS(it.space,it.local);return ut===ht?null:ut===ct?dt:dt=rt(ct=ut,lt)}}function attrFunction(it,rt,lt){var ct,ht,dt;return function(){var ut,ft=lt(this),pt;return ft==null?void this.removeAttribute(it):(ut=this.getAttribute(it),pt=ft+"",ut===pt?null:ut===ct&&pt===ht?dt:(ht=pt,dt=rt(ct=ut,ft)))}}function attrFunctionNS(it,rt,lt){var ct,ht,dt;return function(){var ut,ft=lt(this),pt;return ft==null?void this.removeAttributeNS(it.space,it.local):(ut=this.getAttributeNS(it.space,it.local),pt=ft+"",ut===pt?null:ut===ct&&pt===ht?dt:(ht=pt,dt=rt(ct=ut,ft)))}}function transition_attr(it,rt){var lt=namespace(it),ct=lt==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(it,typeof rt=="function"?(lt.local?attrFunctionNS:attrFunction)(lt,ct,tweenValue(this,"attr."+it,rt)):rt==null?(lt.local?attrRemoveNS:attrRemove)(lt):(lt.local?attrConstantNS:attrConstant)(lt,ct,rt))}function attrInterpolate(it,rt){return function(lt){this.setAttribute(it,rt.call(this,lt))}}function attrInterpolateNS(it,rt){return function(lt){this.setAttributeNS(it.space,it.local,rt.call(this,lt))}}function attrTweenNS(it,rt){var lt,ct;function ht(){var dt=rt.apply(this,arguments);return dt!==ct&&(lt=(ct=dt)&&attrInterpolateNS(it,dt)),lt}return ht._value=rt,ht}function attrTween(it,rt){var lt,ct;function ht(){var dt=rt.apply(this,arguments);return dt!==ct&&(lt=(ct=dt)&&attrInterpolate(it,dt)),lt}return ht._value=rt,ht}function transition_attrTween(it,rt){var lt="attr."+it;if(arguments.length<2)return(lt=this.tween(lt))&&lt._value;if(rt==null)return this.tween(lt,null);if(typeof rt!="function")throw new Error;var ct=namespace(it);return this.tween(lt,(ct.local?attrTweenNS:attrTween)(ct,rt))}function delayFunction(it,rt){return function(){init(this,it).delay=+rt.apply(this,arguments)}}function delayConstant(it,rt){return rt=+rt,function(){init(this,it).delay=rt}}function transition_delay(it){var rt=this._id;return arguments.length?this.each((typeof it=="function"?delayFunction:delayConstant)(rt,it)):get(this.node(),rt).delay}function durationFunction(it,rt){return function(){set(this,it).duration=+rt.apply(this,arguments)}}function durationConstant(it,rt){return rt=+rt,function(){set(this,it).duration=rt}}function transition_duration(it){var rt=this._id;return arguments.length?this.each((typeof it=="function"?durationFunction:durationConstant)(rt,it)):get(this.node(),rt).duration}function easeConstant(it,rt){if(typeof rt!="function")throw new Error;return function(){set(this,it).ease=rt}}function transition_ease(it){var rt=this._id;return arguments.length?this.each(easeConstant(rt,it)):get(this.node(),rt).ease}function easeVarying(it,rt){return function(){var lt=rt.apply(this,arguments);if(typeof lt!="function")throw new Error;set(this,it).ease=lt}}function transition_easeVarying(it){if(typeof it!="function")throw new Error;return this.each(easeVarying(this._id,it))}function transition_filter(it){typeof it!="function"&&(it=matcher(it));for(var rt=this._groups,lt=rt.length,ct=new Array(lt),ht=0;ht<lt;++ht)for(var dt=rt[ht],ut=dt.length,ft=ct[ht]=[],pt,gt=0;gt<ut;++gt)(pt=dt[gt])&&it.call(pt,pt.__data__,gt,dt)&&ft.push(pt);return new Transition(ct,this._parents,this._name,this._id)}function transition_merge(it){if(it._id!==this._id)throw new Error;for(var rt=this._groups,lt=it._groups,ct=rt.length,ht=lt.length,dt=Math.min(ct,ht),ut=new Array(ct),ft=0;ft<dt;++ft)for(var pt=rt[ft],gt=lt[ft],mt=pt.length,xt=ut[ft]=new Array(mt),yt,bt=0;bt<mt;++bt)(yt=pt[bt]||gt[bt])&&(xt[bt]=yt);for(;ft<ct;++ft)ut[ft]=rt[ft];return new Transition(ut,this._parents,this._name,this._id)}function start(it){return(it+"").trim().split(/^|\s+/).every(function(rt){var lt=rt.indexOf(".");return lt>=0&&(rt=rt.slice(0,lt)),!rt||rt==="start"})}function onFunction(it,rt,lt){var ct,ht,dt=start(rt)?init:set;return function(){var ut=dt(this,it),ft=ut.on;ft!==ct&&(ht=(ct=ft).copy()).on(rt,lt),ut.on=ht}}function transition_on(it,rt){var lt=this._id;return arguments.length<2?get(this.node(),lt).on.on(it):this.each(onFunction(lt,it,rt))}function removeFunction(it){return function(){var rt=this.parentNode;for(var lt in this.__transition)if(+lt!==it)return;rt&&rt.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(it){var rt=this._name,lt=this._id;typeof it!="function"&&(it=selector(it));for(var ct=this._groups,ht=ct.length,dt=new Array(ht),ut=0;ut<ht;++ut)for(var ft=ct[ut],pt=ft.length,gt=dt[ut]=new Array(pt),mt,xt,yt=0;yt<pt;++yt)(mt=ft[yt])&&(xt=it.call(mt,mt.__data__,yt,ft))&&("__data__"in mt&&(xt.__data__=mt.__data__),gt[yt]=xt,schedule(gt[yt],rt,lt,yt,gt,get(mt,lt)));return new Transition(dt,this._parents,rt,lt)}function transition_selectAll(it){var rt=this._name,lt=this._id;typeof it!="function"&&(it=selectorAll(it));for(var ct=this._groups,ht=ct.length,dt=[],ut=[],ft=0;ft<ht;++ft)for(var pt=ct[ft],gt=pt.length,mt,xt=0;xt<gt;++xt)if(mt=pt[xt]){for(var yt=it.call(mt,mt.__data__,xt,pt),bt,wt=get(mt,lt),Ct=0,vt=yt.length;Ct<vt;++Ct)(bt=yt[Ct])&&schedule(bt,rt,lt,Ct,yt,wt);dt.push(yt),ut.push(mt)}return new Transition(dt,ut,rt,lt)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(it,rt){var lt,ct,ht;return function(){var dt=styleValue(this,it),ut=(this.style.removeProperty(it),styleValue(this,it));return dt===ut?null:dt===lt&&ut===ct?ht:ht=rt(lt=dt,ct=ut)}}function styleRemove(it){return function(){this.style.removeProperty(it)}}function styleConstant(it,rt,lt){var ct,ht=lt+"",dt;return function(){var ut=styleValue(this,it);return ut===ht?null:ut===ct?dt:dt=rt(ct=ut,lt)}}function styleFunction(it,rt,lt){var ct,ht,dt;return function(){var ut=styleValue(this,it),ft=lt(this),pt=ft+"";return ft==null&&(pt=ft=(this.style.removeProperty(it),styleValue(this,it))),ut===pt?null:ut===ct&&pt===ht?dt:(ht=pt,dt=rt(ct=ut,ft))}}function styleMaybeRemove(it,rt){var lt,ct,ht,dt="style."+rt,ut="end."+dt,ft;return function(){var pt=set(this,it),gt=pt.on,mt=pt.value[dt]==null?ft||(ft=styleRemove(rt)):void 0;(gt!==lt||ht!==mt)&&(ct=(lt=gt).copy()).on(ut,ht=mt),pt.on=ct}}function transition_style(it,rt,lt){var ct=(it+="")=="transform"?interpolateTransformCss:interpolate;return rt==null?this.styleTween(it,styleNull(it,ct)).on("end.style."+it,styleRemove(it)):typeof rt=="function"?this.styleTween(it,styleFunction(it,ct,tweenValue(this,"style."+it,rt))).each(styleMaybeRemove(this._id,it)):this.styleTween(it,styleConstant(it,ct,rt),lt).on("end.style."+it,null)}function styleInterpolate(it,rt,lt){return function(ct){this.style.setProperty(it,rt.call(this,ct),lt)}}function styleTween(it,rt,lt){var ct,ht;function dt(){var ut=rt.apply(this,arguments);return ut!==ht&&(ct=(ht=ut)&&styleInterpolate(it,ut,lt)),ct}return dt._value=rt,dt}function transition_styleTween(it,rt,lt){var ct="style."+(it+="");if(arguments.length<2)return(ct=this.tween(ct))&&ct._value;if(rt==null)return this.tween(ct,null);if(typeof rt!="function")throw new Error;return this.tween(ct,styleTween(it,rt,lt==null?"":lt))}function textConstant(it){return function(){this.textContent=it}}function textFunction(it){return function(){var rt=it(this);this.textContent=rt==null?"":rt}}function transition_text(it){return this.tween("text",typeof it=="function"?textFunction(tweenValue(this,"text",it)):textConstant(it==null?"":it+""))}function textInterpolate(it){return function(rt){this.textContent=it.call(this,rt)}}function textTween(it){var rt,lt;function ct(){var ht=it.apply(this,arguments);return ht!==lt&&(rt=(lt=ht)&&textInterpolate(ht)),rt}return ct._value=it,ct}function transition_textTween(it){var rt="text";if(arguments.length<1)return(rt=this.tween(rt))&&rt._value;if(it==null)return this.tween(rt,null);if(typeof it!="function")throw new Error;return this.tween(rt,textTween(it))}function transition_transition(){for(var it=this._name,rt=this._id,lt=newId(),ct=this._groups,ht=ct.length,dt=0;dt<ht;++dt)for(var ut=ct[dt],ft=ut.length,pt,gt=0;gt<ft;++gt)if(pt=ut[gt]){var mt=get(pt,rt);schedule(pt,it,lt,gt,ut,{time:mt.time+mt.delay+mt.duration,delay:0,duration:mt.duration,ease:mt.ease})}return new Transition(ct,this._parents,it,lt)}function transition_end(){var it,rt,lt=this,ct=lt._id,ht=lt.size();return new Promise(function(dt,ut){var ft={value:ut},pt={value:function(){--ht===0&&dt()}};lt.each(function(){var gt=set(this,ct),mt=gt.on;mt!==it&&(rt=(it=mt).copy(),rt._.cancel.push(ft),rt._.interrupt.push(ft),rt._.end.push(pt)),gt.on=rt}),ht===0&&dt()})}var id=0;function Transition(it,rt,lt,ct){this._groups=it,this._parents=rt,this._name=lt,this._id=ct}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(it){return((it*=2)<=1?it*it*it:(it-=2)*it*it+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(it,rt){for(var lt;!(lt=it.__transition)||!(lt=lt[rt]);)if(!(it=it.parentNode))throw new Error(`transition ${rt} not found`);return lt}function selection_transition(it){var rt,lt;it instanceof Transition?(rt=it._id,it=it._name):(rt=newId(),(lt=defaultTiming).time=now(),it=it==null?null:it+"");for(var ct=this._groups,ht=ct.length,dt=0;dt<ht;++dt)for(var ut=ct[dt],ft=ut.length,pt,gt=0;gt<ft;++gt)(pt=ut[gt])&&schedule(pt,it,rt,gt,ut,lt||inherit(pt,rt));return new Transition(ct,this._parents,it,rt)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$1=Math.PI,tau$1=2*pi$1,epsilon$1=1e-6,tauEpsilon=tau$1-epsilon$1;function append(it){this._+=it[0];for(let rt=1,lt=it.length;rt<lt;++rt)this._+=arguments[rt]+it[rt]}function appendRound(it){let rt=Math.floor(it);if(!(rt>=0))throw new Error(`invalid digits: ${it}`);if(rt>15)return append;const lt=Ye(10,rt);return function(ct){this._+=ct[0];for(let ht=1,dt=ct.length;ht<dt;++ht)this._+=Math.round(arguments[ht]*lt)/lt+ct[ht]}}class Path{constructor(rt){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=rt==null?append:appendRound(rt)}moveTo(rt,lt){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+lt}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(rt,lt){this._append`L${this._x1=+rt},${this._y1=+lt}`}quadraticCurveTo(rt,lt,ct,ht){this._append`Q${+rt},${+lt},${this._x1=+ct},${this._y1=+ht}`}bezierCurveTo(rt,lt,ct,ht,dt,ut){this._append`C${+rt},${+lt},${+ct},${+ht},${this._x1=+dt},${this._y1=+ut}`}arcTo(rt,lt,ct,ht,dt){if(rt=+rt,lt=+lt,ct=+ct,ht=+ht,dt=+dt,dt<0)throw new Error(`negative radius: ${dt}`);let ut=this._x1,ft=this._y1,pt=ct-rt,gt=ht-lt,mt=ut-rt,xt=ft-lt,yt=mt*mt+xt*xt;if(this._x1===null)this._append`M${this._x1=rt},${this._y1=lt}`;else if(yt>epsilon$1)if(!(Math.abs(xt*pt-gt*mt)>epsilon$1)||!dt)this._append`L${this._x1=rt},${this._y1=lt}`;else{let bt=ct-ut,wt=ht-ft,Ct=pt*pt+gt*gt,vt=bt*bt+wt*wt,St=Math.sqrt(Ct),_t=Math.sqrt(yt),Tt=dt*Math.tan((pi$1-Math.acos((Ct+yt-vt)/(2*St*_t)))/2),Et=Tt/_t,At=Tt/St;Math.abs(Et-1)>epsilon$1&&this._append`L${rt+Et*mt},${lt+Et*xt}`,this._append`A${dt},${dt},0,0,${+(xt*bt>mt*wt)},${this._x1=rt+At*pt},${this._y1=lt+At*gt}`}}arc(rt,lt,ct,ht,dt,ut){if(rt=+rt,lt=+lt,ct=+ct,ut=!!ut,ct<0)throw new Error(`negative radius: ${ct}`);let ft=ct*Math.cos(ht),pt=ct*Math.sin(ht),gt=rt+ft,mt=lt+pt,xt=1^ut,yt=ut?ht-dt:dt-ht;this._x1===null?this._append`M${gt},${mt}`:(Math.abs(this._x1-gt)>epsilon$1||Math.abs(this._y1-mt)>epsilon$1)&&this._append`L${gt},${mt}`,ct&&(yt<0&&(yt=yt%tau$1+tau$1),yt>tauEpsilon?this._append`A${ct},${ct},0,1,${xt},${rt-ft},${lt-pt}A${ct},${ct},0,1,${xt},${this._x1=gt},${this._y1=mt}`:yt>epsilon$1&&this._append`A${ct},${ct},0,${+(yt>=pi$1)},${xt},${this._x1=rt+ct*Math.cos(dt)},${this._y1=lt+ct*Math.sin(dt)}`)}rect(rt,lt,ct,ht){this._append`M${this._x0=this._x1=+rt},${this._y0=this._y1=+lt}h${ct=+ct}v${+ht}h${-ct}Z`}toString(){return this._}}function center(it,rt){var lt,ct=1;it==null&&(it=0),rt==null&&(rt=0);function ht(){var dt,ut=lt.length,ft,pt=0,gt=0;for(dt=0;dt<ut;++dt)ft=lt[dt],pt+=ft.x,gt+=ft.y;for(pt=(pt/ut-it)*ct,gt=(gt/ut-rt)*ct,dt=0;dt<ut;++dt)ft=lt[dt],ft.x-=pt,ft.y-=gt}return ht.initialize=function(dt){lt=dt},ht.x=function(dt){return arguments.length?(it=+dt,ht):it},ht.y=function(dt){return arguments.length?(rt=+dt,ht):rt},ht.strength=function(dt){return arguments.length?(ct=+dt,ht):ct},ht}function tree_add(it){const rt=+this._x.call(null,it),lt=+this._y.call(null,it);return add(this.cover(rt,lt),rt,lt,it)}function add(it,rt,lt,ct){if(isNaN(rt)||isNaN(lt))return it;var ht,dt=it._root,ut={data:ct},ft=it._x0,pt=it._y0,gt=it._x1,mt=it._y1,xt,yt,bt,wt,Ct,vt,St,_t;if(!dt)return it._root=ut,it;for(;dt.length;)if((Ct=rt>=(xt=(ft+gt)/2))?ft=xt:gt=xt,(vt=lt>=(yt=(pt+mt)/2))?pt=yt:mt=yt,ht=dt,!(dt=dt[St=vt<<1|Ct]))return ht[St]=ut,it;if(bt=+it._x.call(null,dt.data),wt=+it._y.call(null,dt.data),rt===bt&&lt===wt)return ut.next=dt,ht?ht[St]=ut:it._root=ut,it;do ht=ht?ht[St]=new Array(4):it._root=new Array(4),(Ct=rt>=(xt=(ft+gt)/2))?ft=xt:gt=xt,(vt=lt>=(yt=(pt+mt)/2))?pt=yt:mt=yt;while((St=vt<<1|Ct)===(_t=(wt>=yt)<<1|bt>=xt));return ht[_t]=dt,ht[St]=ut,it}function addAll(it){var rt,lt,ct=it.length,ht,dt,ut=new Array(ct),ft=new Array(ct),pt=1/0,gt=1/0,mt=-1/0,xt=-1/0;for(lt=0;lt<ct;++lt)isNaN(ht=+this._x.call(null,rt=it[lt]))||isNaN(dt=+this._y.call(null,rt))||(ut[lt]=ht,ft[lt]=dt,ht<pt&&(pt=ht),ht>mt&&(mt=ht),dt<gt&&(gt=dt),dt>xt&&(xt=dt));if(pt>mt||gt>xt)return this;for(this.cover(pt,gt).cover(mt,xt),lt=0;lt<ct;++lt)add(this,ut[lt],ft[lt],it[lt]);return this}function tree_cover(it,rt){if(isNaN(it=+it)||isNaN(rt=+rt))return this;var lt=this._x0,ct=this._y0,ht=this._x1,dt=this._y1;if(isNaN(lt))ht=(lt=Math.floor(it))+1,dt=(ct=Math.floor(rt))+1;else{for(var ut=ht-lt||1,ft=this._root,pt,gt;lt>it||it>=ht||ct>rt||rt>=dt;)switch(gt=(rt<ct)<<1|it<lt,pt=new Array(4),pt[gt]=ft,ft=pt,ut*=2,gt){case 0:ht=lt+ut,dt=ct+ut;break;case 1:lt=ht-ut,dt=ct+ut;break;case 2:ht=lt+ut,ct=dt-ut;break;case 3:lt=ht-ut,ct=dt-ut;break}this._root&&this._root.length&&(this._root=ft)}return this._x0=lt,this._y0=ct,this._x1=ht,this._y1=dt,this}function tree_data(){var it=[];return this.visit(function(rt){if(!rt.length)do it.push(rt.data);while(rt=rt.next)}),it}function tree_extent(it){return arguments.length?this.cover(+it[0][0],+it[0][1]).cover(+it[1][0],+it[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(it,rt,lt,ct,ht){this.node=it,this.x0=rt,this.y0=lt,this.x1=ct,this.y1=ht}function tree_find(it,rt,lt){var ct,ht=this._x0,dt=this._y0,ut,ft,pt,gt,mt=this._x1,xt=this._y1,yt=[],bt=this._root,wt,Ct;for(bt&&yt.push(new Quad(bt,ht,dt,mt,xt)),lt==null?lt=1/0:(ht=it-lt,dt=rt-lt,mt=it+lt,xt=rt+lt,lt*=lt);wt=yt.pop();)if(!(!(bt=wt.node)||(ut=wt.x0)>mt||(ft=wt.y0)>xt||(pt=wt.x1)<ht||(gt=wt.y1)<dt))if(bt.length){var vt=(ut+pt)/2,St=(ft+gt)/2;yt.push(new Quad(bt[3],vt,St,pt,gt),new Quad(bt[2],ut,St,vt,gt),new Quad(bt[1],vt,ft,pt,St),new Quad(bt[0],ut,ft,vt,St)),(Ct=(rt>=St)<<1|it>=vt)&&(wt=yt[yt.length-1],yt[yt.length-1]=yt[yt.length-1-Ct],yt[yt.length-1-Ct]=wt)}else{var _t=it-+this._x.call(null,bt.data),Tt=rt-+this._y.call(null,bt.data),Et=_t*_t+Tt*Tt;if(Et<lt){var At=Math.sqrt(lt=Et);ht=it-At,dt=rt-At,mt=it+At,xt=rt+At,ct=bt.data}}return ct}function tree_remove(it){if(isNaN(mt=+this._x.call(null,it))||isNaN(xt=+this._y.call(null,it)))return this;var rt,lt=this._root,ct,ht,dt,ut=this._x0,ft=this._y0,pt=this._x1,gt=this._y1,mt,xt,yt,bt,wt,Ct,vt,St;if(!lt)return this;if(lt.length)for(;;){if((wt=mt>=(yt=(ut+pt)/2))?ut=yt:pt=yt,(Ct=xt>=(bt=(ft+gt)/2))?ft=bt:gt=bt,rt=lt,!(lt=lt[vt=Ct<<1|wt]))return this;if(!lt.length)break;(rt[vt+1&3]||rt[vt+2&3]||rt[vt+3&3])&&(ct=rt,St=vt)}for(;lt.data!==it;)if(ht=lt,!(lt=lt.next))return this;return(dt=lt.next)&&delete lt.next,ht?(dt?ht.next=dt:delete ht.next,this):rt?(dt?rt[vt]=dt:delete rt[vt],(lt=rt[0]||rt[1]||rt[2]||rt[3])&&lt===(rt[3]||rt[2]||rt[1]||rt[0])&&!lt.length&&(ct?ct[St]=lt:this._root=lt),this):(this._root=dt,this)}function removeAll(it){for(var rt=0,lt=it.length;rt<lt;++rt)this.remove(it[rt]);return this}function tree_root(){return this._root}function tree_size(){var it=0;return this.visit(function(rt){if(!rt.length)do++it;while(rt=rt.next)}),it}function tree_visit(it){var rt=[],lt,ct=this._root,ht,dt,ut,ft,pt;for(ct&&rt.push(new Quad(ct,this._x0,this._y0,this._x1,this._y1));lt=rt.pop();)if(!it(ct=lt.node,dt=lt.x0,ut=lt.y0,ft=lt.x1,pt=lt.y1)&&ct.length){var gt=(dt+ft)/2,mt=(ut+pt)/2;(ht=ct[3])&&rt.push(new Quad(ht,gt,mt,ft,pt)),(ht=ct[2])&&rt.push(new Quad(ht,dt,mt,gt,pt)),(ht=ct[1])&&rt.push(new Quad(ht,gt,ut,ft,mt)),(ht=ct[0])&&rt.push(new Quad(ht,dt,ut,gt,mt))}return this}function tree_visitAfter(it){var rt=[],lt=[],ct;for(this._root&&rt.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));ct=rt.pop();){var ht=ct.node;if(ht.length){var dt,ut=ct.x0,ft=ct.y0,pt=ct.x1,gt=ct.y1,mt=(ut+pt)/2,xt=(ft+gt)/2;(dt=ht[0])&&rt.push(new Quad(dt,ut,ft,mt,xt)),(dt=ht[1])&&rt.push(new Quad(dt,mt,ft,pt,xt)),(dt=ht[2])&&rt.push(new Quad(dt,ut,xt,mt,gt)),(dt=ht[3])&&rt.push(new Quad(dt,mt,xt,pt,gt))}lt.push(ct)}for(;ct=lt.pop();)it(ct.node,ct.x0,ct.y0,ct.x1,ct.y1);return this}function defaultX(it){return it[0]}function tree_x(it){return arguments.length?(this._x=it,this):this._x}function defaultY(it){return it[1]}function tree_y(it){return arguments.length?(this._y=it,this):this._y}function quadtree(it,rt,lt){var ct=new Quadtree(rt==null?defaultX:rt,lt==null?defaultY:lt,NaN,NaN,NaN,NaN);return it==null?ct:ct.addAll(it)}function Quadtree(it,rt,lt,ct,ht,dt){this._x=it,this._y=rt,this._x0=lt,this._y0=ct,this._x1=ht,this._y1=dt,this._root=void 0}function leaf_copy(it){for(var rt={data:it.data},lt=rt;it=it.next;)lt=lt.next={data:it.data};return rt}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var it=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),rt=this._root,lt,ct;if(!rt)return it;if(!rt.length)return it._root=leaf_copy(rt),it;for(lt=[{source:rt,target:it._root=new Array(4)}];rt=lt.pop();)for(var ht=0;ht<4;++ht)(ct=rt.source[ht])&&(ct.length?lt.push({source:ct,target:rt.target[ht]=new Array(4)}):rt.target[ht]=leaf_copy(ct));return it};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$1(it){return function(){return it}}function jiggle(it){return(it()-.5)*1e-6}function x$3(it){return it.x+it.vx}function y$3(it){return it.y+it.vy}function collide(it){var rt,lt,ct,ht=1,dt=1;typeof it!="function"&&(it=constant$1(it==null?1:+it));function ut(){for(var gt,mt=rt.length,xt,yt,bt,wt,Ct,vt,St=0;St<dt;++St)for(xt=quadtree(rt,x$3,y$3).visitAfter(ft),gt=0;gt<mt;++gt)yt=rt[gt],Ct=lt[yt.index],vt=Ct*Ct,bt=yt.x+yt.vx,wt=yt.y+yt.vy,xt.visit(_t);function _t(Tt,Et,At,Mt,It){var Lt=Tt.data,jt=Tt.r,Ot=Ct+jt;if(Lt){if(Lt.index>yt.index){var Pt=bt-Lt.x-Lt.vx,Gt=wt-Lt.y-Lt.vy,kt=Pt*Pt+Gt*Gt;kt<Ot*Ot&&(Pt===0&&(Pt=jiggle(ct),kt+=Pt*Pt),Gt===0&&(Gt=jiggle(ct),kt+=Gt*Gt),kt=(Ot-(kt=Math.sqrt(kt)))/kt*ht,yt.vx+=(Pt*=kt)*(Ot=(jt*=jt)/(vt+jt)),yt.vy+=(Gt*=kt)*Ot,Lt.vx-=Pt*(Ot=1-Ot),Lt.vy-=Gt*Ot)}return}return Et>bt+Ot||Mt<bt-Ot||At>wt+Ot||It<wt-Ot}}function ft(gt){if(gt.data)return gt.r=lt[gt.data.index];for(var mt=gt.r=0;mt<4;++mt)gt[mt]&&gt[mt].r>gt.r&&(gt.r=gt[mt].r)}function pt(){if(rt){var gt,mt=rt.length,xt;for(lt=new Array(mt),gt=0;gt<mt;++gt)xt=rt[gt],lt[xt.index]=+it(xt,gt,rt)}}return ut.initialize=function(gt,mt){rt=gt,ct=mt,pt()},ut.iterations=function(gt){return arguments.length?(dt=+gt,ut):dt},ut.strength=function(gt){return arguments.length?(ht=+gt,ut):ht},ut.radius=function(gt){return arguments.length?(it=typeof gt=="function"?gt:constant$1(+gt),pt(),ut):it},ut}function index(it){return it.index}function find(it,rt){var lt=it.get(rt);if(!lt)throw new Error("node not found: "+rt);return lt}function link(it){var rt=index,lt=xt,ct,ht=constant$1(30),dt,ut,ft,pt,gt,mt=1;it==null&&(it=[]);function xt(vt){return 1/Math.min(ft[vt.source.index],ft[vt.target.index])}function yt(vt){for(var St=0,_t=it.length;St<mt;++St)for(var Tt=0,Et,At,Mt,It,Lt,jt,Ot;Tt<_t;++Tt)Et=it[Tt],At=Et.source,Mt=Et.target,It=Mt.x+Mt.vx-At.x-At.vx||jiggle(gt),Lt=Mt.y+Mt.vy-At.y-At.vy||jiggle(gt),jt=Math.sqrt(It*It+Lt*Lt),jt=(jt-dt[Tt])/jt*vt*ct[Tt],It*=jt,Lt*=jt,Mt.vx-=It*(Ot=pt[Tt]),Mt.vy-=Lt*Ot,At.vx+=It*(Ot=1-Ot),At.vy+=Lt*Ot}function bt(){if(ut){var vt,St=ut.length,_t=it.length,Tt=new Map(ut.map((At,Mt)=>[rt(At,Mt,ut),At])),Et;for(vt=0,ft=new Array(St);vt<_t;++vt)Et=it[vt],Et.index=vt,typeof Et.source!="object"&&(Et.source=find(Tt,Et.source)),typeof Et.target!="object"&&(Et.target=find(Tt,Et.target)),ft[Et.source.index]=(ft[Et.source.index]||0)+1,ft[Et.target.index]=(ft[Et.target.index]||0)+1;for(vt=0,pt=new Array(_t);vt<_t;++vt)Et=it[vt],pt[vt]=ft[Et.source.index]/(ft[Et.source.index]+ft[Et.target.index]);ct=new Array(_t),wt(),dt=new Array(_t),Ct()}}function wt(){if(ut)for(var vt=0,St=it.length;vt<St;++vt)ct[vt]=+lt(it[vt],vt,it)}function Ct(){if(ut)for(var vt=0,St=it.length;vt<St;++vt)dt[vt]=+ht(it[vt],vt,it)}return yt.initialize=function(vt,St){ut=vt,gt=St,bt()},yt.links=function(vt){return arguments.length?(it=vt,bt(),yt):it},yt.id=function(vt){return arguments.length?(rt=vt,yt):rt},yt.iterations=function(vt){return arguments.length?(mt=+vt,yt):mt},yt.strength=function(vt){return arguments.length?(lt=typeof vt=="function"?vt:constant$1(+vt),wt(),yt):lt},yt.distance=function(vt){return arguments.length?(ht=typeof vt=="function"?vt:constant$1(+vt),Ct(),yt):ht},yt}const a=1664525,c=1013904223,m=4294967296;function lcg(){let it=1;return()=>(it=(a*it+c)%m)/m}function x$2(it){return it.x}function y$2(it){return it.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(it){var rt,lt=1,ct=.001,ht=1-Math.pow(ct,1/300),dt=0,ut=.6,ft=new Map,pt=timer(xt),gt=dispatch("tick","end"),mt=lcg();it==null&&(it=[]);function xt(){yt(),gt.call("tick",rt),lt<ct&&(pt.stop(),gt.call("end",rt))}function yt(Ct){var vt,St=it.length,_t;Ct===void 0&&(Ct=1);for(var Tt=0;Tt<Ct;++Tt)for(lt+=(dt-lt)*ht,ft.forEach(function(Et){Et(lt)}),vt=0;vt<St;++vt)_t=it[vt],_t.fx==null?_t.x+=_t.vx*=ut:(_t.x=_t.fx,_t.vx=0),_t.fy==null?_t.y+=_t.vy*=ut:(_t.y=_t.fy,_t.vy=0);return rt}function bt(){for(var Ct=0,vt=it.length,St;Ct<vt;++Ct){if(St=it[Ct],St.index=Ct,St.fx!=null&&(St.x=St.fx),St.fy!=null&&(St.y=St.fy),isNaN(St.x)||isNaN(St.y)){var _t=initialRadius*Math.sqrt(.5+Ct),Tt=Ct*initialAngle;St.x=_t*Math.cos(Tt),St.y=_t*Math.sin(Tt)}(isNaN(St.vx)||isNaN(St.vy))&&(St.vx=St.vy=0)}}function wt(Ct){return Ct.initialize&&Ct.initialize(it,mt),Ct}return bt(),rt={tick:yt,restart:function(){return pt.restart(xt),rt},stop:function(){return pt.stop(),rt},nodes:function(Ct){return arguments.length?(it=Ct,bt(),ft.forEach(wt),rt):it},alpha:function(Ct){return arguments.length?(lt=+Ct,rt):lt},alphaMin:function(Ct){return arguments.length?(ct=+Ct,rt):ct},alphaDecay:function(Ct){return arguments.length?(ht=+Ct,rt):+ht},alphaTarget:function(Ct){return arguments.length?(dt=+Ct,rt):dt},velocityDecay:function(Ct){return arguments.length?(ut=1-Ct,rt):1-ut},randomSource:function(Ct){return arguments.length?(mt=Ct,ft.forEach(wt),rt):mt},force:function(Ct,vt){return arguments.length>1?(vt==null?ft.delete(Ct):ft.set(Ct,wt(vt)),rt):ft.get(Ct)},find:function(Ct,vt,St){var _t=0,Tt=it.length,Et,At,Mt,It,Lt;for(St==null?St=1/0:St*=St,_t=0;_t<Tt;++_t)It=it[_t],Et=Ct-It.x,At=vt-It.y,Mt=Et*Et+At*At,Mt<St&&(Lt=It,St=Mt);return Lt},on:function(Ct,vt){return arguments.length>1?(gt.on(Ct,vt),rt):gt.on(Ct)}}}function manyBody(){var it,rt,lt,ct,ht=constant$1(-30),dt,ut=1,ft=1/0,pt=.81;function gt(bt){var wt,Ct=it.length,vt=quadtree(it,x$2,y$2).visitAfter(xt);for(ct=bt,wt=0;wt<Ct;++wt)rt=it[wt],vt.visit(yt)}function mt(){if(it){var bt,wt=it.length,Ct;for(dt=new Array(wt),bt=0;bt<wt;++bt)Ct=it[bt],dt[Ct.index]=+ht(Ct,bt,it)}}function xt(bt){var wt=0,Ct,vt,St=0,_t,Tt,Et;if(bt.length){for(_t=Tt=Et=0;Et<4;++Et)(Ct=bt[Et])&&(vt=Math.abs(Ct.value))&&(wt+=Ct.value,St+=vt,_t+=vt*Ct.x,Tt+=vt*Ct.y);bt.x=_t/St,bt.y=Tt/St}else{Ct=bt,Ct.x=Ct.data.x,Ct.y=Ct.data.y;do wt+=dt[Ct.data.index];while(Ct=Ct.next)}bt.value=wt}function yt(bt,wt,Ct,vt){if(!bt.value)return!0;var St=bt.x-rt.x,_t=bt.y-rt.y,Tt=vt-wt,Et=St*St+_t*_t;if(Tt*Tt/pt<Et)return Et<ft&&(St===0&&(St=jiggle(lt),Et+=St*St),_t===0&&(_t=jiggle(lt),Et+=_t*_t),Et<ut&&(Et=Math.sqrt(ut*Et)),rt.vx+=St*bt.value*ct/Et,rt.vy+=_t*bt.value*ct/Et),!0;if(bt.length||Et>=ft)return;(bt.data!==rt||bt.next)&&(St===0&&(St=jiggle(lt),Et+=St*St),_t===0&&(_t=jiggle(lt),Et+=_t*_t),Et<ut&&(Et=Math.sqrt(ut*Et)));do bt.data!==rt&&(Tt=dt[bt.data.index]*ct/Et,rt.vx+=St*Tt,rt.vy+=_t*Tt);while(bt=bt.next)}return gt.initialize=function(bt,wt){it=bt,lt=wt,mt()},gt.strength=function(bt){return arguments.length?(ht=typeof bt=="function"?bt:constant$1(+bt),mt(),gt):ht},gt.distanceMin=function(bt){return arguments.length?(ut=bt*bt,gt):Math.sqrt(ut)},gt.distanceMax=function(bt){return arguments.length?(ft=bt*bt,gt):Math.sqrt(ft)},gt.theta=function(bt){return arguments.length?(pt=bt*bt,gt):Math.sqrt(pt)},gt}function formatDecimal(it){return Math.abs(it=Math.round(it))>=1e21?it.toLocaleString("en").replace(/,/g,""):it.toString(10)}function formatDecimalParts(it,rt){if((lt=(it=rt?it.toExponential(rt-1):it.toExponential()).indexOf("e"))<0)return null;var lt,ct=it.slice(0,lt);return[ct.length>1?ct[0]+ct.slice(2):ct,+it.slice(lt+1)]}function exponent(it){return it=formatDecimalParts(Math.abs(it)),it?it[1]:NaN}function formatGroup(it,rt){return function(lt,ct){for(var ht=lt.length,dt=[],ut=0,ft=it[0],pt=0;ht>0&&ft>0&&(pt+ft+1>ct&&(ft=Math.max(1,ct-pt)),dt.push(lt.substring(ht-=ft,ht+ft)),!((pt+=ft+1)>ct));)ft=it[ut=(ut+1)%it.length];return dt.reverse().join(rt)}}function formatNumerals(it){return function(rt){return rt.replace(/[0-9]/g,function(lt){return it[+lt]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(it){if(!(rt=re.exec(it)))throw new Error("invalid format: "+it);var rt;return new FormatSpecifier({fill:rt[1],align:rt[2],sign:rt[3],symbol:rt[4],zero:rt[5],width:rt[6],comma:rt[7],precision:rt[8]&&rt[8].slice(1),trim:rt[9],type:rt[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(it){this.fill=it.fill===void 0?" ":it.fill+"",this.align=it.align===void 0?">":it.align+"",this.sign=it.sign===void 0?"-":it.sign+"",this.symbol=it.symbol===void 0?"":it.symbol+"",this.zero=!!it.zero,this.width=it.width===void 0?void 0:+it.width,this.comma=!!it.comma,this.precision=it.precision===void 0?void 0:+it.precision,this.trim=!!it.trim,this.type=it.type===void 0?"":it.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(it){t:for(var rt=it.length,lt=1,ct=-1,ht;lt<rt;++lt)switch(it[lt]){case".":ct=ht=lt;break;case"0":ct===0&&(ct=lt),ht=lt;break;default:if(!+it[lt])break t;ct>0&&(ct=0);break}return ct>0?it.slice(0,ct)+it.slice(ht+1):it}var prefixExponent;function formatPrefixAuto(it,rt){var lt=formatDecimalParts(it,rt);if(!lt)return it+"";var ct=lt[0],ht=lt[1],dt=ht-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(ht/3)))*3)+1,ut=ct.length;return dt===ut?ct:dt>ut?ct+new Array(dt-ut+1).join("0"):dt>0?ct.slice(0,dt)+"."+ct.slice(dt):"0."+new Array(1-dt).join("0")+formatDecimalParts(it,Math.max(0,rt+dt-1))[0]}function formatRounded(it,rt){var lt=formatDecimalParts(it,rt);if(!lt)return it+"";var ct=lt[0],ht=lt[1];return ht<0?"0."+new Array(-ht).join("0")+ct:ct.length>ht+1?ct.slice(0,ht+1)+"."+ct.slice(ht+1):ct+new Array(ht-ct.length+2).join("0")}const formatTypes={"%":(it,rt)=>(it*100).toFixed(rt),b:it=>Math.round(it).toString(2),c:it=>it+"",d:formatDecimal,e:(it,rt)=>it.toExponential(rt),f:(it,rt)=>it.toFixed(rt),g:(it,rt)=>it.toPrecision(rt),o:it=>Math.round(it).toString(8),p:(it,rt)=>formatRounded(it*100,rt),r:formatRounded,s:formatPrefixAuto,X:it=>Math.round(it).toString(16).toUpperCase(),x:it=>Math.round(it).toString(16)};function identity$2(it){return it}var map=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(it){var rt=it.grouping===void 0||it.thousands===void 0?identity$2:formatGroup(map.call(it.grouping,Number),it.thousands+""),lt=it.currency===void 0?"":it.currency[0]+"",ct=it.currency===void 0?"":it.currency[1]+"",ht=it.decimal===void 0?".":it.decimal+"",dt=it.numerals===void 0?identity$2:formatNumerals(map.call(it.numerals,String)),ut=it.percent===void 0?"%":it.percent+"",ft=it.minus===void 0?"−":it.minus+"",pt=it.nan===void 0?"NaN":it.nan+"";function gt(xt){xt=formatSpecifier(xt);var yt=xt.fill,bt=xt.align,wt=xt.sign,Ct=xt.symbol,vt=xt.zero,St=xt.width,_t=xt.comma,Tt=xt.precision,Et=xt.trim,At=xt.type;At==="n"?(_t=!0,At="g"):formatTypes[At]||(Tt===void 0&&(Tt=12),Et=!0,At="g"),(vt||yt==="0"&&bt==="=")&&(vt=!0,yt="0",bt="=");var Mt=Ct==="$"?lt:Ct==="#"&&/[boxX]/.test(At)?"0"+At.toLowerCase():"",It=Ct==="$"?ct:/[%p]/.test(At)?ut:"",Lt=formatTypes[At],jt=/[defgprs%]/.test(At);Tt=Tt===void 0?6:/[gprs]/.test(At)?Math.max(1,Math.min(21,Tt)):Math.max(0,Math.min(20,Tt));function Ot(Pt){var Gt=Mt,kt=It,Ht,Xt,zt;if(At==="c")kt=Lt(Pt)+kt,Pt="";else{Pt=+Pt;var Nt=Pt<0||1/Pt<0;if(Pt=isNaN(Pt)?pt:Lt(Math.abs(Pt),Tt),Et&&(Pt=formatTrim(Pt)),Nt&&+Pt==0&&wt!=="+"&&(Nt=!1),Gt=(Nt?wt==="("?wt:ft:wt==="-"||wt==="("?"":wt)+Gt,kt=(At==="s"?prefixes[8+prefixExponent/3]:"")+kt+(Nt&&wt==="("?")":""),jt){for(Ht=-1,Xt=Pt.length;++Ht<Xt;)if(zt=Pt.charCodeAt(Ht),48>zt||zt>57){kt=(zt===46?ht+Pt.slice(Ht+1):Pt.slice(Ht))+kt,Pt=Pt.slice(0,Ht);break}}}_t&&!vt&&(Pt=rt(Pt,1/0));var Bt=Gt.length+Pt.length+kt.length,Vt=Bt<St?new Array(St-Bt+1).join(yt):"";switch(_t&&vt&&(Pt=rt(Vt+Pt,Vt.length?St-kt.length:1/0),Vt=""),bt){case"<":Pt=Gt+Pt+kt+Vt;break;case"=":Pt=Gt+Vt+Pt+kt;break;case"^":Pt=Vt.slice(0,Bt=Vt.length>>1)+Gt+Pt+kt+Vt.slice(Bt);break;default:Pt=Vt+Gt+Pt+kt;break}return dt(Pt)}return Ot.toString=function(){return xt+""},Ot}function mt(xt,yt){var bt=gt((xt=formatSpecifier(xt),xt.type="f",xt)),wt=Math.max(-8,Math.min(8,Math.floor(exponent(yt)/3)))*3,Ct=Math.pow(10,-wt),vt=prefixes[8+wt/3];return function(St){return bt(Ct*St)+vt}}return{format:gt,formatPrefix:mt}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(it){return locale=formatLocale(it),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(it){return Math.max(0,-exponent(Math.abs(it)))}function precisionPrefix(it,rt){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(rt)/3)))*3-exponent(Math.abs(it)))}function precisionRound(it,rt){return it=Math.abs(it),rt=Math.abs(rt)-it,Math.max(0,exponent(rt)-exponent(it))+1}function count(it){var rt=0,lt=it.children,ct=lt&&lt.length;if(!ct)rt=1;else for(;--ct>=0;)rt+=lt[ct].value;it.value=rt}function node_count(){return this.eachAfter(count)}function node_each(it,rt){let lt=-1;for(const ct of this)it.call(rt,ct,++lt,this);return this}function node_eachBefore(it,rt){for(var lt=this,ct=[lt],ht,dt,ut=-1;lt=ct.pop();)if(it.call(rt,lt,++ut,this),ht=lt.children)for(dt=ht.length-1;dt>=0;--dt)ct.push(ht[dt]);return this}function node_eachAfter(it,rt){for(var lt=this,ct=[lt],ht=[],dt,ut,ft,pt=-1;lt=ct.pop();)if(ht.push(lt),dt=lt.children)for(ut=0,ft=dt.length;ut<ft;++ut)ct.push(dt[ut]);for(;lt=ht.pop();)it.call(rt,lt,++pt,this);return this}function node_find(it,rt){let lt=-1;for(const ct of this)if(it.call(rt,ct,++lt,this))return ct}function node_sum(it){return this.eachAfter(function(rt){for(var lt=+it(rt.data)||0,ct=rt.children,ht=ct&&ct.length;--ht>=0;)lt+=ct[ht].value;rt.value=lt})}function node_sort(it){return this.eachBefore(function(rt){rt.children&&rt.children.sort(it)})}function node_path(it){for(var rt=this,lt=leastCommonAncestor(rt,it),ct=[rt];rt!==lt;)rt=rt.parent,ct.push(rt);for(var ht=ct.length;it!==lt;)ct.splice(ht,0,it),it=it.parent;return ct}function leastCommonAncestor(it,rt){if(it===rt)return it;var lt=it.ancestors(),ct=rt.ancestors(),ht=null;for(it=lt.pop(),rt=ct.pop();it===rt;)ht=it,it=lt.pop(),rt=ct.pop();return ht}function node_ancestors(){for(var it=this,rt=[it];it=it.parent;)rt.push(it);return rt}function node_descendants(){return Array.from(this)}function node_leaves(){var it=[];return this.eachBefore(function(rt){rt.children||it.push(rt)}),it}function node_links(){var it=this,rt=[];return it.each(function(lt){lt!==it&&rt.push({source:lt.parent,target:lt})}),rt}function*node_iterator(){var it=this,rt,lt=[it],ct,ht,dt;do for(rt=lt.reverse(),lt=[];it=rt.pop();)if(yield it,ct=it.children)for(ht=0,dt=ct.length;ht<dt;++ht)lt.push(ct[ht]);while(lt.length)}function hierarchy(it,rt){it instanceof Map?(it=[void 0,it],rt===void 0&&(rt=mapChildren)):rt===void 0&&(rt=objectChildren);for(var lt=new Node$1(it),ct,ht=[lt],dt,ut,ft,pt;ct=ht.pop();)if((ut=rt(ct.data))&&(pt=(ut=Array.from(ut)).length))for(ct.children=ut,ft=pt-1;ft>=0;--ft)ht.push(dt=ut[ft]=new Node$1(ut[ft])),dt.parent=ct,dt.depth=ct.depth+1;return lt.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function objectChildren(it){return it.children}function mapChildren(it){return Array.isArray(it)?it[1]:null}function copyData(it){it.data.value!==void 0&&(it.value=it.data.value),it.data=it.data.data}function computeHeight(it){var rt=0;do it.height=rt;while((it=it.parent)&&it.height<++rt)}function Node$1(it){this.data=it,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,find:node_find,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy,[Symbol.iterator]:node_iterator};function defaultSeparation(it,rt){return it.parent===rt.parent?1:2}function nextLeft(it){var rt=it.children;return rt?rt[0]:it.t}function nextRight(it){var rt=it.children;return rt?rt[rt.length-1]:it.t}function moveSubtree(it,rt,lt){var ct=lt/(rt.i-it.i);rt.c-=ct,rt.s+=lt,it.c+=ct,rt.z+=lt,rt.m+=lt}function executeShifts(it){for(var rt=0,lt=0,ct=it.children,ht=ct.length,dt;--ht>=0;)dt=ct[ht],dt.z+=rt,dt.m+=rt,rt+=dt.s+(lt+=dt.c)}function nextAncestor(it,rt,lt){return it.a.parent===rt.parent?it.a:lt}function TreeNode(it,rt){this._=it,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=rt}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(it){for(var rt=new TreeNode(it,0),lt,ct=[rt],ht,dt,ut,ft;lt=ct.pop();)if(dt=lt._.children)for(lt.children=new Array(ft=dt.length),ut=ft-1;ut>=0;--ut)ct.push(ht=lt.children[ut]=new TreeNode(dt[ut],ut)),ht.parent=lt;return(rt.parent=new TreeNode(null,0)).children=[rt],rt}function tree(){var it=defaultSeparation,rt=1,lt=1,ct=null;function ht(gt){var mt=treeRoot(gt);if(mt.eachAfter(dt),mt.parent.m=-mt.z,mt.eachBefore(ut),ct)gt.eachBefore(pt);else{var xt=gt,yt=gt,bt=gt;gt.eachBefore(function(_t){_t.x<xt.x&&(xt=_t),_t.x>yt.x&&(yt=_t),_t.depth>bt.depth&&(bt=_t)});var wt=xt===yt?1:it(xt,yt)/2,Ct=wt-xt.x,vt=rt/(yt.x+wt+Ct),St=lt/(bt.depth||1);gt.eachBefore(function(_t){_t.x=(_t.x+Ct)*vt,_t.y=_t.depth*St})}return gt}function dt(gt){var mt=gt.children,xt=gt.parent.children,yt=gt.i?xt[gt.i-1]:null;if(mt){executeShifts(gt);var bt=(mt[0].z+mt[mt.length-1].z)/2;yt?(gt.z=yt.z+it(gt._,yt._),gt.m=gt.z-bt):gt.z=bt}else yt&&(gt.z=yt.z+it(gt._,yt._));gt.parent.A=ft(gt,yt,gt.parent.A||xt[0])}function ut(gt){gt._.x=gt.z+gt.parent.m,gt.m+=gt.parent.m}function ft(gt,mt,xt){if(mt){for(var yt=gt,bt=gt,wt=mt,Ct=yt.parent.children[0],vt=yt.m,St=bt.m,_t=wt.m,Tt=Ct.m,Et;wt=nextRight(wt),yt=nextLeft(yt),wt&&yt;)Ct=nextLeft(Ct),bt=nextRight(bt),bt.a=gt,Et=wt.z+_t-yt.z-vt+it(wt._,yt._),Et>0&&(moveSubtree(nextAncestor(wt,gt,xt),gt,Et),vt+=Et,St+=Et),_t+=wt.m,vt+=yt.m,Tt+=Ct.m,St+=bt.m;wt&&!nextRight(bt)&&(bt.t=wt,bt.m+=_t-St),yt&&!nextLeft(Ct)&&(Ct.t=yt,Ct.m+=vt-Tt,xt=gt)}return xt}function pt(gt){gt.x*=rt,gt.y=gt.depth*lt}return ht.separation=function(gt){return arguments.length?(it=gt,ht):it},ht.size=function(gt){return arguments.length?(ct=!1,rt=+gt[0],lt=+gt[1],ht):ct?null:[rt,lt]},ht.nodeSize=function(gt){return arguments.length?(ct=!0,rt=+gt[0],lt=+gt[1],ht):ct?[rt,lt]:null},ht}function initRange(it,rt){switch(arguments.length){case 0:break;case 1:this.range(it);break;default:this.range(rt).domain(it);break}return this}function constants(it){return function(){return it}}function number$1(it){return+it}var unit=[0,1];function identity$1(it){return it}function normalize(it,rt){return(rt-=it=+it)?function(lt){return(lt-it)/rt}:constants(isNaN(rt)?NaN:.5)}function clamper(it,rt){var lt;return it>rt&&(lt=it,it=rt,rt=lt),function(ct){return Math.max(it,Math.min(rt,ct))}}function bimap(it,rt,lt){var ct=it[0],ht=it[1],dt=rt[0],ut=rt[1];return ht<ct?(ct=normalize(ht,ct),dt=lt(ut,dt)):(ct=normalize(ct,ht),dt=lt(dt,ut)),function(ft){return dt(ct(ft))}}function polymap(it,rt,lt){var ct=Math.min(it.length,rt.length)-1,ht=new Array(ct),dt=new Array(ct),ut=-1;for(it[ct]<it[0]&&(it=it.slice().reverse(),rt=rt.slice().reverse());++ut<ct;)ht[ut]=normalize(it[ut],it[ut+1]),dt[ut]=lt(rt[ut],rt[ut+1]);return function(ft){var pt=bisectRight(it,ft,1,ct)-1;return dt[pt](ht[pt](ft))}}function copy(it,rt){return rt.domain(it.domain()).range(it.range()).interpolate(it.interpolate()).clamp(it.clamp()).unknown(it.unknown())}function transformer(){var it=unit,rt=unit,lt=interpolate$1,ct,ht,dt,ut=identity$1,ft,pt,gt;function mt(){var yt=Math.min(it.length,rt.length);return ut!==identity$1&&(ut=clamper(it[0],it[yt-1])),ft=yt>2?polymap:bimap,pt=gt=null,xt}function xt(yt){return yt==null||isNaN(yt=+yt)?dt:(pt||(pt=ft(it.map(ct),rt,lt)))(ct(ut(yt)))}return xt.invert=function(yt){return ut(ht((gt||(gt=ft(rt,it.map(ct),interpolateNumber)))(yt)))},xt.domain=function(yt){return arguments.length?(it=Array.from(yt,number$1),mt()):it.slice()},xt.range=function(yt){return arguments.length?(rt=Array.from(yt),mt()):rt.slice()},xt.rangeRound=function(yt){return rt=Array.from(yt),lt=interpolateRound,mt()},xt.clamp=function(yt){return arguments.length?(ut=yt?!0:identity$1,mt()):ut!==identity$1},xt.interpolate=function(yt){return arguments.length?(lt=yt,mt()):lt},xt.unknown=function(yt){return arguments.length?(dt=yt,xt):dt},function(yt,bt){return ct=yt,ht=bt,mt()}}function continuous(){return transformer()(identity$1,identity$1)}function tickFormat(it,rt,lt,ct){var ht=tickStep(it,rt,lt),dt;switch(ct=formatSpecifier(ct==null?",f":ct),ct.type){case"s":{var ut=Math.max(Math.abs(it),Math.abs(rt));return ct.precision==null&&!isNaN(dt=precisionPrefix(ht,ut))&&(ct.precision=dt),formatPrefix(ct,ut)}case"":case"e":case"g":case"p":case"r":{ct.precision==null&&!isNaN(dt=precisionRound(ht,Math.max(Math.abs(it),Math.abs(rt))))&&(ct.precision=dt-(ct.type==="e"));break}case"f":case"%":{ct.precision==null&&!isNaN(dt=precisionFixed(ht))&&(ct.precision=dt-(ct.type==="%")*2);break}}return format(ct)}function linearish(it){var rt=it.domain;return it.ticks=function(lt){var ct=rt();return ticks(ct[0],ct[ct.length-1],lt==null?10:lt)},it.tickFormat=function(lt,ct){var ht=rt();return tickFormat(ht[0],ht[ht.length-1],lt==null?10:lt,ct)},it.nice=function(lt){lt==null&&(lt=10);var ct=rt(),ht=0,dt=ct.length-1,ut=ct[ht],ft=ct[dt],pt,gt,mt=10;for(ft<ut&&(gt=ut,ut=ft,ft=gt,gt=ht,ht=dt,dt=gt);mt-- >0;){if(gt=tickIncrement(ut,ft,lt),gt===pt)return ct[ht]=ut,ct[dt]=ft,rt(ct);if(gt>0)ut=Math.floor(ut/gt)*gt,ft=Math.ceil(ft/gt)*gt;else if(gt<0)ut=Math.ceil(ut*gt)/gt,ft=Math.floor(ft*gt)/gt;else break;pt=gt}return it},it}function linear(){var it=continuous();return it.copy=function(){return copy(it,linear())},initRange.apply(it,arguments),linearish(it)}function constant(it){return function(){return it}}const abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(it){return it>1?0:it<-1?pi:Math.acos(it)}function asin(it){return it>=1?halfPi:it<=-1?-halfPi:Math.asin(it)}function withPath(it){let rt=3;return it.digits=function(lt){if(!arguments.length)return rt;if(lt==null)rt=null;else{const ct=Math.floor(lt);if(!(ct>=0))throw new RangeError(`invalid digits: ${lt}`);rt=ct}return it},()=>new Path(rt)}function arcInnerRadius(it){return it.innerRadius}function arcOuterRadius(it){return it.outerRadius}function arcStartAngle(it){return it.startAngle}function arcEndAngle(it){return it.endAngle}function arcPadAngle(it){return it&&it.padAngle}function intersect(it,rt,lt,ct,ht,dt,ut,ft){var pt=lt-it,gt=ct-rt,mt=ut-ht,xt=ft-dt,yt=xt*pt-mt*gt;if(!(yt*yt<epsilon))return yt=(mt*(rt-dt)-xt*(it-ht))/yt,[it+yt*pt,rt+yt*gt]}function cornerTangents(it,rt,lt,ct,ht,dt,ut){var ft=it-lt,pt=rt-ct,gt=(ut?dt:-dt)/sqrt(ft*ft+pt*pt),mt=gt*pt,xt=-gt*ft,yt=it+mt,bt=rt+xt,wt=lt+mt,Ct=ct+xt,vt=(yt+wt)/2,St=(bt+Ct)/2,_t=wt-yt,Tt=Ct-bt,Et=_t*_t+Tt*Tt,At=ht-dt,Mt=yt*Ct-wt*bt,It=(Tt<0?-1:1)*sqrt(max(0,At*At*Et-Mt*Mt)),Lt=(Mt*Tt-_t*It)/Et,jt=(-Mt*_t-Tt*It)/Et,Ot=(Mt*Tt+_t*It)/Et,Pt=(-Mt*_t+Tt*It)/Et,Gt=Lt-vt,kt=jt-St,Ht=Ot-vt,Xt=Pt-St;return Gt*Gt+kt*kt>Ht*Ht+Xt*Xt&&(Lt=Ot,jt=Pt),{cx:Lt,cy:jt,x01:-mt,y01:-xt,x11:Lt*(ht/At-1),y11:jt*(ht/At-1)}}function arc(){var it=arcInnerRadius,rt=arcOuterRadius,lt=constant(0),ct=null,ht=arcStartAngle,dt=arcEndAngle,ut=arcPadAngle,ft=null,pt=withPath(gt);function gt(){var mt,xt,yt=+it.apply(this,arguments),bt=+rt.apply(this,arguments),wt=ht.apply(this,arguments)-halfPi,Ct=dt.apply(this,arguments)-halfPi,vt=abs(Ct-wt),St=Ct>wt;if(ft||(ft=mt=pt()),bt<yt&&(xt=bt,bt=yt,yt=xt),!(bt>epsilon))ft.moveTo(0,0);else if(vt>tau-epsilon)ft.moveTo(bt*cos(wt),bt*sin(wt)),ft.arc(0,0,bt,wt,Ct,!St),yt>epsilon&&(ft.moveTo(yt*cos(Ct),yt*sin(Ct)),ft.arc(0,0,yt,Ct,wt,St));else{var _t=wt,Tt=Ct,Et=wt,At=Ct,Mt=vt,It=vt,Lt=ut.apply(this,arguments)/2,jt=Lt>epsilon&&(ct?+ct.apply(this,arguments):sqrt(yt*yt+bt*bt)),Ot=min(abs(bt-yt)/2,+lt.apply(this,arguments)),Pt=Ot,Gt=Ot,kt,Ht;if(jt>epsilon){var Xt=asin(jt/yt*sin(Lt)),zt=asin(jt/bt*sin(Lt));(Mt-=Xt*2)>epsilon?(Xt*=St?1:-1,Et+=Xt,At-=Xt):(Mt=0,Et=At=(wt+Ct)/2),(It-=zt*2)>epsilon?(zt*=St?1:-1,_t+=zt,Tt-=zt):(It=0,_t=Tt=(wt+Ct)/2)}var Nt=bt*cos(_t),Bt=bt*sin(_t),Vt=yt*cos(At),Yt=yt*sin(At);if(Ot>epsilon){var Kt=bt*cos(Tt),Dt=bt*sin(Tt),Rt=yt*cos(Et),Wt=yt*sin(Et),qt;if(vt<pi)if(qt=intersect(Nt,Bt,Rt,Wt,Kt,Dt,Vt,Yt)){var Zt=Nt-qt[0],Ut=Bt-qt[1],Qt=Kt-qt[0],Jt=Dt-qt[1],oe=1/sin(acos((Zt*Qt+Ut*Jt)/(sqrt(Zt*Zt+Ut*Ut)*sqrt(Qt*Qt+Jt*Jt)))/2),ce=sqrt(qt[0]*qt[0]+qt[1]*qt[1]);Pt=min(Ot,(yt-ce)/(oe-1)),Gt=min(Ot,(bt-ce)/(oe+1))}else Pt=Gt=0}It>epsilon?Gt>epsilon?(kt=cornerTangents(Rt,Wt,Nt,Bt,bt,Gt,St),Ht=cornerTangents(Kt,Dt,Vt,Yt,bt,Gt,St),ft.moveTo(kt.cx+kt.x01,kt.cy+kt.y01),Gt<Ot?ft.arc(kt.cx,kt.cy,Gt,atan2(kt.y01,kt.x01),atan2(Ht.y01,Ht.x01),!St):(ft.arc(kt.cx,kt.cy,Gt,atan2(kt.y01,kt.x01),atan2(kt.y11,kt.x11),!St),ft.arc(0,0,bt,atan2(kt.cy+kt.y11,kt.cx+kt.x11),atan2(Ht.cy+Ht.y11,Ht.cx+Ht.x11),!St),ft.arc(Ht.cx,Ht.cy,Gt,atan2(Ht.y11,Ht.x11),atan2(Ht.y01,Ht.x01),!St))):(ft.moveTo(Nt,Bt),ft.arc(0,0,bt,_t,Tt,!St)):ft.moveTo(Nt,Bt),!(yt>epsilon)||!(Mt>epsilon)?ft.lineTo(Vt,Yt):Pt>epsilon?(kt=cornerTangents(Vt,Yt,Kt,Dt,yt,-Pt,St),Ht=cornerTangents(Nt,Bt,Rt,Wt,yt,-Pt,St),ft.lineTo(kt.cx+kt.x01,kt.cy+kt.y01),Pt<Ot?ft.arc(kt.cx,kt.cy,Pt,atan2(kt.y01,kt.x01),atan2(Ht.y01,Ht.x01),!St):(ft.arc(kt.cx,kt.cy,Pt,atan2(kt.y01,kt.x01),atan2(kt.y11,kt.x11),!St),ft.arc(0,0,yt,atan2(kt.cy+kt.y11,kt.cx+kt.x11),atan2(Ht.cy+Ht.y11,Ht.cx+Ht.x11),St),ft.arc(Ht.cx,Ht.cy,Pt,atan2(Ht.y11,Ht.x11),atan2(Ht.y01,Ht.x01),!St))):ft.arc(0,0,yt,At,Et,St)}if(ft.closePath(),mt)return ft=null,mt+""||null}return gt.centroid=function(){var mt=(+it.apply(this,arguments)+ +rt.apply(this,arguments))/2,xt=(+ht.apply(this,arguments)+ +dt.apply(this,arguments))/2-pi/2;return[cos(xt)*mt,sin(xt)*mt]},gt.innerRadius=function(mt){return arguments.length?(it=typeof mt=="function"?mt:constant(+mt),gt):it},gt.outerRadius=function(mt){return arguments.length?(rt=typeof mt=="function"?mt:constant(+mt),gt):rt},gt.cornerRadius=function(mt){return arguments.length?(lt=typeof mt=="function"?mt:constant(+mt),gt):lt},gt.padRadius=function(mt){return arguments.length?(ct=mt==null?null:typeof mt=="function"?mt:constant(+mt),gt):ct},gt.startAngle=function(mt){return arguments.length?(ht=typeof mt=="function"?mt:constant(+mt),gt):ht},gt.endAngle=function(mt){return arguments.length?(dt=typeof mt=="function"?mt:constant(+mt),gt):dt},gt.padAngle=function(mt){return arguments.length?(ut=typeof mt=="function"?mt:constant(+mt),gt):ut},gt.context=function(mt){return arguments.length?(ft=mt==null?null:mt,gt):ft},gt}function array$1(it){return typeof it=="object"&&"length"in it?it:Array.from(it)}function Linear(it){this._context=it}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(it,rt){switch(it=+it,rt=+rt,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,rt):this._context.moveTo(it,rt);break;case 1:this._point=2;default:this._context.lineTo(it,rt);break}}};function curveLinear(it){return new Linear(it)}function x$1(it){return it[0]}function y$1(it){return it[1]}function line(it,rt){var lt=constant(!0),ct=null,ht=curveLinear,dt=null,ut=withPath(ft);it=typeof it=="function"?it:it===void 0?x$1:constant(it),rt=typeof rt=="function"?rt:rt===void 0?y$1:constant(rt);function ft(pt){var gt,mt=(pt=array$1(pt)).length,xt,yt=!1,bt;for(ct==null&&(dt=ht(bt=ut())),gt=0;gt<=mt;++gt)!(gt<mt&&lt(xt=pt[gt],gt,pt))===yt&&((yt=!yt)?dt.lineStart():dt.lineEnd()),yt&&dt.point(+it(xt,gt,pt),+rt(xt,gt,pt));if(bt)return dt=null,bt+""||null}return ft.x=function(pt){return arguments.length?(it=typeof pt=="function"?pt:constant(+pt),ft):it},ft.y=function(pt){return arguments.length?(rt=typeof pt=="function"?pt:constant(+pt),ft):rt},ft.defined=function(pt){return arguments.length?(lt=typeof pt=="function"?pt:constant(!!pt),ft):lt},ft.curve=function(pt){return arguments.length?(ht=pt,ct!=null&&(dt=ht(ct)),ft):ht},ft.context=function(pt){return arguments.length?(pt==null?ct=dt=null:dt=ht(ct=pt),ft):ct},ft}function descending(it,rt){return rt<it?-1:rt>it?1:rt>=it?0:NaN}function identity(it){return it}function pie(){var it=identity,rt=descending,lt=null,ct=constant(0),ht=constant(tau),dt=constant(0);function ut(ft){var pt,gt=(ft=array$1(ft)).length,mt,xt,yt=0,bt=new Array(gt),wt=new Array(gt),Ct=+ct.apply(this,arguments),vt=Math.min(tau,Math.max(-tau,ht.apply(this,arguments)-Ct)),St,_t=Math.min(Math.abs(vt)/gt,dt.apply(this,arguments)),Tt=_t*(vt<0?-1:1),Et;for(pt=0;pt<gt;++pt)(Et=wt[bt[pt]=pt]=+it(ft[pt],pt,ft))>0&&(yt+=Et);for(rt!=null?bt.sort(function(At,Mt){return rt(wt[At],wt[Mt])}):lt!=null&&bt.sort(function(At,Mt){return lt(ft[At],ft[Mt])}),pt=0,xt=yt?(vt-gt*Tt)/yt:0;pt<gt;++pt,Ct=St)mt=bt[pt],Et=wt[mt],St=Ct+(Et>0?Et*xt:0)+Tt,wt[mt]={data:ft[mt],index:pt,value:Et,startAngle:Ct,endAngle:St,padAngle:_t};return wt}return ut.value=function(ft){return arguments.length?(it=typeof ft=="function"?ft:constant(+ft),ut):it},ut.sortValues=function(ft){return arguments.length?(rt=ft,lt=null,ut):rt},ut.sort=function(ft){return arguments.length?(lt=ft,rt=null,ut):lt},ut.startAngle=function(ft){return arguments.length?(ct=typeof ft=="function"?ft:constant(+ft),ut):ct},ut.endAngle=function(ft){return arguments.length?(ht=typeof ft=="function"?ft:constant(+ft),ut):ht},ut.padAngle=function(ft){return arguments.length?(dt=typeof ft=="function"?ft:constant(+ft),ut):dt},ut}function Transform(it,rt,lt){this.k=it,this.x=rt,this.y=lt}Transform.prototype={constructor:Transform,scale:function(it){return it===1?this:new Transform(this.k*it,this.x,this.y)},translate:function(it,rt){return it===0&rt===0?this:new Transform(this.k,this.x+this.k*it,this.y+this.k*rt)},apply:function(it){return[it[0]*this.k+this.x,it[1]*this.k+this.y]},applyX:function(it){return it*this.k+this.x},applyY:function(it){return it*this.k+this.y},invert:function(it){return[(it[0]-this.x)/this.k,(it[1]-this.y)/this.k]},invertX:function(it){return(it-this.x)/this.k},invertY:function(it){return(it-this.y)/this.k},rescaleX:function(it){return it.copy().domain(it.range().map(this.invertX,this).map(it.invert,it))},rescaleY:function(it){return it.copy().domain(it.range().map(this.invertY,this).map(it.invert,it))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;const ProgressCard=it=>{const[{datum:rt,data:lt,indexes:ct,width:ht=280,height:dt=120,iconSize:ut=32,gap:ft=12,progressHeight:pt=8,borderRadius:gt=12,positionH:mt="normal",themeColors:xt,valueFormatter:yt=Xt=>`${Xt}%`},bt]=getItemProps(it,["width","height","iconSize","gap","progressHeight","borderRadius"]),wt=rt.value,Ct=wt!=null?wt:0,vt=Math.max(...lt.items.map(Xt=>{var zt;return(zt=Xt.value)!=null?zt:0}),100),St=ht-2*ft,Tt=linear().domain([0,vt]).range([0,St])(Ct),Et=`${xt.colorPrimary}-progress`,At=`${xt.colorPrimaryBg}-progress-bg`,Mt=getElementBounds(jsx(ItemLabel,{indexes:ct})),It=ft,Lt=mt==="flipped"?ht-ft-ut:ft,jt=It,Ot=mt==="flipped"?ft:ut+2*ft,Pt=ht-ut-3*ft,Gt=jt,kt=dt-ft-pt,Ht=wt!==void 0;return jsxs(Group,te(Ft({},bt),{children:[jsxs(Defs,{children:[jsxs("linearGradient",{id:Et,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[jsx("stop",{offset:"0%",stopColor:xt.colorPrimary}),jsx("stop",{offset:"100%",stopColor:tinycolor.mix(xt.colorPrimary,"#fff",20).toHexString()})]}),jsxs("linearGradient",{id:At,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[jsx("stop",{offset:"0%",stopColor:xt.colorPrimaryBg}),jsx("stop",{offset:"100%",stopColor:xt.colorBg})]})]}),jsx(Rect,{x:0,y:0,width:ht,height:dt,fill:xt.colorBgElevated,stroke:xt.colorPrimaryBg,strokeWidth:1,rx:gt,ry:gt,"data-element-type":"shape"}),jsx(ItemIcon,{indexes:ct,x:Lt,y:jt,size:ut,fill:xt.colorPrimary}),jsx(ItemLabel,{indexes:ct,x:Ot,y:Gt,width:Pt,alignHorizontal:mt==="flipped"?"right":"left",alignVertical:"top",fontSize:16,fontWeight:"medium",fill:xt.colorText,children:rt.label}),Ht&&jsx(ItemValue,{indexes:ct,x:Ot,y:Gt+Mt.height,width:Pt,alignHorizontal:mt==="flipped"?"right":"left",alignVertical:"top",lineHeight:1,fontSize:24,fontWeight:"bold",fill:xt.colorPrimary,value:Ct,formatter:yt}),jsx(ItemDesc,{indexes:ct,x:Ot,y:Gt+Mt.height+(Ht?27:4),width:Pt,alignHorizontal:mt==="flipped"?"right":"left",alignVertical:"top",fontSize:11,fill:xt.colorTextSecondary,lineNumber:Ht?2:3,wordWrap:!0,children:rt.desc}),jsx(Rect,{x:ft,y:kt,width:St,height:pt,fill:`url(#${At})`,rx:pt/2,ry:pt/2,"data-element-type":"shape"}),jsx(Rect,{x:ft,y:kt,width:Tt,height:pt,fill:`url(#${Et})`,rx:pt/2,ry:pt/2,"data-element-type":"shape"})]}))};registerItem("progress-card",{component:ProgressCard,composites:["icon","label","value","desc"]});const QuarterCircular=it=>{const[{datum:rt,indexes:lt,width:ct=280,height:ht=120,iconSize:dt=30,circleRadius:ut=80,positionH:ft="normal",positionV:pt="normal",themeColors:gt},mt]=getItemProps(it,["width","height","iconSize","circleRadius"]),xt=4*ut/(3*Math.PI),yt=2,bt=4,wt=28,Ct=20,vt=Ct+20,St=Ct,_t=8,Tt=35,Et=40,At=30,Mt=String(lt[0]+1).padStart(2,"0"),It=ft==="flipped",Lt=pt==="flipped",jt=()=>It?{diagonalStartX:ct-bt,diagonalStartY:Lt?ht-Tt:Tt,diagonalEndX:ct-Et,diagonalEndY:Lt?ht-bt:bt,topLineStartX:ct-Et,topLineEndX:xt,topLineY:Lt?ht-bt:bt}:{diagonalStartX:bt,diagonalStartY:Lt?ht-Tt:Tt,diagonalEndX:Et,diagonalEndY:Lt?ht-bt:bt,topLineStartX:Et,topLineEndX:ct-xt,topLineY:Lt?ht-bt:bt},Ot=()=>{if(It){const Nt=ut+10,Bt=ct-Nt-Et;return{valueX:ct-At,contentX:Nt,contentWidth:Bt,circleX:0,circleY:Lt?0:ht,iconX:xt-dt/2}}else return{valueX:0,contentX:Et,contentWidth:ct-Et-ut-10,circleX:ct,circleY:Lt?0:ht,iconX:ct-xt-dt/2}},Pt=jt(),Gt=Ot(),kt=Lt?xt-dt/2:ht-xt-dt/2,Ht=getElementBounds(jsx(ItemLabel,{indexes:lt,width:Gt.contentWidth,children:rt.label})),Xt=St+Ht.height+_t,zt=()=>{const{circleX:Nt,circleY:Bt}=Gt;return It?Lt?`M ${Nt} ${Bt} L ${Nt} ${Bt+ut} A ${ut} ${ut} 0 0 0 ${Nt+ut} ${Bt} Z`:`M ${Nt} ${Bt} L ${Nt} ${Bt-ut} A ${ut} ${ut} 0 0 1 ${Nt+ut} ${Bt} Z`:Lt?`M ${Nt} ${Bt} L ${Nt} ${Bt+ut} A ${ut} ${ut} 0 0 1 ${Nt-ut} ${Bt} Z`:`M ${Nt} ${Bt} L ${Nt} ${Bt-ut} A ${ut} ${ut} 0 0 0 ${Nt-ut} ${Bt} Z`};return jsxs(Group,te(Ft({},mt),{width:ct,height:ht,children:[jsxs(ShapesGroup,{children:[jsx(Path$1,{d:`M ${Pt.diagonalStartX} ${Pt.diagonalStartY} L ${Pt.diagonalEndX} ${Pt.diagonalEndY}`,stroke:gt.colorPrimary,strokeWidth:yt,fill:"none"}),jsx(Path$1,{d:`M ${Pt.topLineStartX} ${Pt.topLineY} L ${Pt.topLineEndX} ${Pt.topLineY}`,stroke:gt.colorPrimary,strokeWidth:yt,fill:"none"}),jsx(Ellipse,{x:Pt.diagonalStartX-bt,y:Pt.diagonalStartY-bt,width:bt*2,height:bt*2,fill:gt.colorPrimary}),jsx(Ellipse,{x:Pt.topLineEndX-bt,y:Pt.topLineY-bt,width:bt*2,height:bt*2,fill:gt.colorPrimary})]}),jsxs(Group,{children:[jsx(Text,{x:Gt.valueX,y:vt,fontSize:wt,fontWeight:"bold",fill:gt.colorPrimary,children:Mt}),jsx(Path$1,{d:zt(),fill:gt.colorPrimary,"data-element-type":"shape"}),rt.icon&&jsx(ItemIcon,{indexes:lt,x:Gt.iconX,y:kt,size:dt,fill:gt.colorWhite}),rt.label&&jsx(ItemLabel,{indexes:lt,x:Gt.contentX,y:St,width:Gt.contentWidth,fontWeight:"bold",fill:gt.colorText,alignHorizontal:It?"right":"left",children:rt.label}),rt.desc&&jsx(ItemDesc,{indexes:lt,x:Gt.contentX,y:Xt,width:Gt.contentWidth,fill:gt.colorTextSecondary,alignHorizontal:It?"right":"left",children:rt.desc})]})]}))};registerItem("quarter-circular",{component:QuarterCircular,composites:["icon","label","desc"]});const QuarterSimpleCard=it=>{const[{datum:rt,indexes:lt,width:ct=150,height:ht=150,iconSize:dt=30,padding:ut=20,borderRadius:ft=16,positionH:pt="center",positionV:gt="middle",themeColors:mt},xt]=getItemProps(it,["width","height","iconSize","padding","borderRadius"]),yt=ct-ut*2,bt=ut,wt=ut,Ct=pt==="flipped"?ct-ut-dt:pt==="center"?(ct-dt)/2:bt,vt=wt,St=vt+dt+8,_t=getElementBounds(jsx(ItemLabel,{indexes:lt,width:yt,children:rt.label})),Tt=pt==="flipped"?ct-ut-yt:pt==="center"?ut:bt,Et=St+_t.height+4,At=Tt,Mt=ft;let It="";return pt==="center"&&gt==="middle"?It=`
  M ${Mt} 0
  L ${ct-Mt} 0
  Q ${ct} 0 ${ct} ${Mt}
  L ${ct} ${ht-Mt}
  Q ${ct} ${ht} ${ct-Mt} ${ht}
  L ${Mt} ${ht}
  Q 0 ${ht} 0 ${ht-Mt}
  L 0 ${Mt}
  Q 0 0 ${Mt} 0
  Z
`:pt==="flipped"&&gt==="flipped"?It=`
  M ${Mt} 0
  L ${ct-Mt} 0
  Q ${ct} 0 ${ct} ${Mt}
  L ${ct} ${ht-Mt}
  Q ${ct} ${ht} ${ct-Mt} ${ht}
  L ${Mt} ${ht}
  Q 0 ${ht} 0 ${ht-Mt}
  L 0 0
  L ${Mt} 0
  Z
`:pt==="normal"&&gt==="flipped"?It=`
  M 0 0
  L ${ct} 0
  L ${ct} ${ht-Mt}
  Q ${ct} ${ht} ${ct-Mt} ${ht}
  L ${Mt} ${ht}
  Q 0 ${ht} 0 ${ht-Mt}
  L 0 ${Mt}
  Q 0 0 ${Mt} 0
  Z
`:pt==="flipped"?It=`
  M ${Mt} 0
  L ${ct-Mt} 0
  Q ${ct} 0 ${ct} ${Mt}
  L ${ct} ${ht-Mt}
  Q ${ct} ${ht} ${ct-Mt} ${ht}
  L 0 ${ht}
  L 0 ${Mt}
  Q 0 0 ${Mt} 0
  Z
`:It=`
  M ${Mt} 0
  L ${ct-Mt} 0
  Q ${ct} 0 ${ct} ${Mt}
  L ${ct} ${ht}
  L ${Mt} ${ht}
  Q 0 ${ht} 0 ${ht-Mt}
  L 0 ${Mt}
  Q 0 0 ${Mt} 0
  Z
`,jsxs(Group,te(Ft({},xt),{children:[jsx(Path$1,{d:It,x:0,y:0,width:ct,height:ht,fill:mt.colorPrimary,"data-element-type":"shape"}),jsx(ItemIcon,{indexes:lt,x:Ct,y:vt,size:dt,fill:mt.colorBg}),jsx(ItemLabel,{indexes:lt,x:Tt,y:St,width:yt,fontSize:14,fontWeight:"bold",fill:mt.colorBg,alignHorizontal:pt==="flipped"?"right":"left",children:rt.label}),rt.desc&&jsx(ItemDesc,{indexes:lt,x:At,y:Et,width:yt,fontSize:11,wordWrap:!0,fill:mt.colorBg,alignHorizontal:pt==="flipped"?"right":"left",children:rt.desc})]}))};registerItem("quarter-simple-card",{component:QuarterSimpleCard,composites:["icon","label","desc"]});const RibbonCard=it=>{const[{datum:rt,indexes:lt,width:ct=240,height:ht=140,iconSize:dt=28,gap:ut=12,ribbonHeight:ft=32,themeColors:pt},gt]=getItemProps(it,["width","height","iconSize","gap","ribbonHeight"]),mt=`${pt.colorPrimary}-ribbon`;return jsxs(Group,te(Ft({},gt),{children:[jsx(Defs,{children:jsxs("linearGradient",{id:mt,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[jsx("stop",{offset:"0%",stopColor:pt.colorPrimary}),jsx("stop",{offset:"100%",stopColor:tinycolor(pt.colorPrimary).darken(15).toHexString()})]})}),jsxs(ShapesGroup,{children:[jsx(Rect,{x:0,y:0,width:ct,height:ht,fill:pt.colorBgElevated,stroke:pt.colorPrimaryBg,strokeWidth:1,rx:8,ry:8}),jsx(Rect,{x:0,y:0,width:ct,height:ft,fill:`url(#${mt})`,rx:8,ry:8}),jsx(Rect,{x:0,y:8,width:ct,height:ft-8,fill:`url(#${mt})`}),jsx(Path$1,{x:ct-20,y:ft,width:20,height:8,fill:tinycolor(pt.colorPrimary).darken(25).toHexString(),d:"M0,0 L20,0 L15,8 L5,8 Z"})]}),jsx(ItemIcon,{indexes:lt,x:ut,y:ft+ut,size:dt,fill:pt.colorPrimary}),jsx(ItemLabel,{indexes:lt,x:dt+2*ut,y:ft+ut,width:ct-dt-3*ut,height:dt,alignHorizontal:"left",alignVertical:"middle",lineHeight:1,fontWeight:"bold",fill:pt.colorText,children:rt.label}),jsx(ItemDesc,{indexes:lt,x:ut,y:ft+dt+ut+5,width:ct-2*ut,alignHorizontal:"left",fill:pt.colorTextSecondary,lineNumber:3,wordWrap:!0,children:rt.desc}),jsx(ItemIcon,{indexes:lt,x:ct-ut-8,y:ut/2,size:16,fill:pt.colorWhite})]}))};registerItem("ribbon-card",{component:RibbonCard,composites:["icon","label","desc"]});const RoundedRectNode=it=>{const[{indexes:rt,datum:lt,themeColors:ct,width:ht=300,height:dt=40,padding:ut=4,positionH:ft="normal"},pt]=getItemProps(it,["width","height","borderRadius","padding"]),gt=dt/2,mt=gt,xt=ut,yt=ht-gt*2,bt=dt-ut*2;return jsxs(Group,te(Ft({},pt),{children:[jsx(Rect,{"data-element-type":"shape",width:ht,height:dt,rx:gt,ry:gt,fill:ct.colorPrimaryBg,stroke:ct.colorPrimary,strokeWidth:1,opacity:.8}),jsx(ItemLabel,{indexes:rt,x:mt,y:xt,width:yt,height:bt,alignHorizontal:ft==="flipped"?"right":ft==="center"?"center":"left",alignVertical:"middle",fontSize:14,fontWeight:"500",fill:ct.colorText,children:lt.label})]}))};registerItem("rounded-rect-node",{component:RoundedRectNode,composites:["label"]});const SimpleHorizontalArrow=it=>{const[{indexes:rt,datum:lt,width:ct=140,themeColors:ht,positionV:dt="normal"},ut]=getItemProps(it,["width"]),ft=dt!=="flipped",pt=ft?"bottom":"top",gt=jsx(ItemLabel,{indexes:rt,width:ct,fill:ht.colorText,alignHorizontal:"center",alignVertical:pt,fontSize:14,children:lt.label}),mt=jsx(ItemDesc,{indexes:rt,width:ct,fill:ht.colorTextSecondary,alignHorizontal:"center",alignVertical:pt,children:lt.desc}),xt=30,yt=10,bt=getElementBounds(gt),wt=getElementBounds(mt),Ct=bt.height+wt.height,vt=Ct+yt+xt+yt+Ct;return jsx(Group,te(Ft({width:ct,height:vt},ut),{children:jsxs(FlexLayout,{flexDirection:"column",alignItems:"center",children:[ft?jsxs(Fragment,{children:[mt,gt,jsx(Gap,{height:yt})]}):jsx(Fragment,{children:jsx(Gap,{height:Ct+yt})}),jsxs(AlignLayout,{horizontal:"center",vertical:"middle",children:[jsx(HorizontalArrow,{width:ct,height:xt,fill:ht.colorPrimary}),jsx(Text,{width:ct,height:xt,alignHorizontal:"center",alignVertical:"middle",fill:ht.colorWhite,fontWeight:"bold",fontSize:16,children:lt.time?lt.time:String(rt[0]+1).padStart(2,"0").slice(-2)})]}),ft?jsx(Fragment,{children:jsx(Gap,{height:Ct+yt})}):jsxs(Fragment,{children:[jsx(Gap,{height:yt}),gt,mt]})]})}))},HorizontalArrow=it=>{const{x:rt=0,y:lt=0,width:ct=100,height:ht=40,fill:dt="#FF356A",size:ut=10}=it;return jsx(Polygon,{width:ct,height:ht,points:[{x:rt,y:lt},{x:rt+ct-ut,y:lt},{x:rt+ct,y:lt+ht/2},{x:rt+ct-ut,y:lt+ht},{x:rt,y:lt+ht},{x:rt+ut,y:lt+ht/2}],fill:dt,"data-element-type":"shape"})};registerItem("simple-horizontal-arrow",{component:SimpleHorizontalArrow,composites:["label","desc","time"]});const SimpleIllusItem=it=>{const[{indexes:rt,datum:lt,width:ct=180,illusSize:ht=ct,gap:dt=8,themeColors:ut,usePaletteColor:ft=!1},pt]=getItemProps(it,["width","illusSize","gap","usePaletteColor"]),{label:gt,desc:mt}=lt,xt=ft?ut.colorPrimary:ut.colorText,yt=jsx(ItemLabel,{indexes:rt,width:ct,alignHorizontal:"center",alignVertical:"middle",fill:xt,children:gt}),bt=getElementBounds(yt);return jsxs(FlexLayout,te(Ft({},pt),{width:ct,height:ht+dt+bt.height+dt+48,flexDirection:"column",alignItems:"center",justifyContent:"center",gap:dt,children:[jsx(Illus,{indexes:rt,width:ht,height:ht}),yt,jsx(ItemDesc,{indexes:rt,width:ct,alignHorizontal:"center",alignVertical:"top",fill:ut.colorTextSecondary,lineNumber:3,children:mt})]}))};registerItem("simple-illus",{component:SimpleIllusItem,composites:["illus","label","desc"]});const SimpleItem=it=>{const[{indexes:rt,datum:lt,width:ct=200,height:ht,gap:dt=4,showIcon:ut=!0,iconSize:ft=30,iconType:pt="default",positionH:gt="normal",positionV:mt="normal",usePaletteColor:xt=!1,themeColors:yt},bt]=getItemProps(it,["width","height","gap","showIcon","iconSize","iconType","usePaletteColor"]),{label:wt,desc:Ct,icon:vt}=lt,_t=(zt=>zt==="normal"?"left":zt==="flipped"?"right":"center")(gt),Tt=xt?yt.colorPrimary:yt.colorText,Et=14,At=1.4,Mt=jsx(ItemLabel,{indexes:rt,width:ct,alignHorizontal:"center",alignVertical:"middle",fill:Tt,children:wt}),It=getElementBounds(Mt),Lt=ut?pt==="circle"?jsx(ItemIconCircle,{indexes:rt,size:ft,fill:yt.colorPrimary,colorBg:yt.colorBg}):jsx(ItemIcon,{indexes:rt,size:ft,fill:yt.colorTextSecondary}):null;if(!ut||!vt){const zt=ht?Math.max(0,ht-It.height-dt):void 0,Nt=zt?zt<=60?1:Math.floor(zt/(At*Et)):2,Bt=ht?mt==="middle"?(ht-It.height-(zt||0)-dt)/2:mt==="flipped"?ht-It.height-(zt||0)-dt:0:0;return jsxs(Group,te(Ft({},bt),{children:[jsx(ItemLabel,{indexes:rt,width:ct,y:Bt,alignHorizontal:_t,alignVertical:"middle",fill:Tt,children:wt}),jsx(ItemDesc,{indexes:rt,width:ct,height:zt,y:Bt+It.height+dt,alignHorizontal:_t,alignVertical:Ht(),lineNumber:Nt,fill:yt.colorTextSecondary,children:Ct})]}))}if(gt==="center"){const zt=ut&&vt?ft:0,Nt=ht?Math.max(0,ht-It.height-zt-dt*2):void 0,Bt=Nt?Nt<=60?1:Math.floor(Nt/(At*Et)):2,Vt=It.height+(Nt||0)+dt,Yt=ht?mt==="middle"?(ht-Vt-zt-dt)/2:mt==="flipped"?ht-Vt-zt-dt:0:0;return jsx(FlexLayout,te(Ft({},bt),{flexDirection:"column",gap:dt,alignItems:"center",children:mt==="flipped"?jsxs(Fragment,{children:[jsxs(Group,{children:[jsx(ItemLabel,{indexes:rt,width:ct,y:Yt,alignHorizontal:"center",alignVertical:"middle",fill:Tt,children:wt}),jsx(ItemDesc,{indexes:rt,width:ct,height:Nt,y:Yt+It.height+dt,alignHorizontal:"center",alignVertical:"bottom",lineNumber:Bt,fill:yt.colorTextSecondary,children:Ct})]}),Lt]}):jsxs(Fragment,{children:[Lt,jsxs(Group,{children:[jsx(ItemLabel,{indexes:rt,width:ct,y:Yt,alignHorizontal:"center",alignVertical:"middle",fill:Tt,children:wt}),jsx(ItemDesc,{indexes:rt,width:ct,height:Nt,y:Yt+It.height+dt,alignHorizontal:"center",alignVertical:"top",lineNumber:Bt,fill:yt.colorTextSecondary,children:Ct})]})]})}))}const jt=getElementBounds(Lt),Ot=Math.max(ct-jt.width-dt,0),Pt=ht?Math.max(0,ht-It.height-dt):void 0,Gt=Pt?Pt<=60?1:Math.floor(Pt/(At*Et)):2,kt=ht?mt==="middle"?(ht-It.height-(Pt||0)-dt)/2:mt==="flipped"?ht-It.height-(Pt||0)-dt:0:0;return jsx(FlexLayout,te(Ft({},bt),{flexDirection:"row",gap:dt,alignItems:Xt(mt),children:gt==="flipped"?jsxs(Fragment,{children:[jsxs(Group,{children:[jsx(ItemLabel,{indexes:rt,width:Ot,y:kt,alignHorizontal:"right",alignVertical:"middle",fill:Tt,children:wt}),jsx(ItemDesc,{indexes:rt,width:Ot,height:Pt,y:kt+It.height+dt,alignHorizontal:"right",alignVertical:Ht(),lineNumber:Gt,fill:yt.colorTextSecondary,children:Ct})]}),Lt]}):jsxs(Fragment,{children:[Lt,jsxs(Group,{children:[jsx(ItemLabel,{indexes:rt,width:Ot,y:kt,alignHorizontal:"left",alignVertical:"middle",fill:Tt,children:wt}),jsx(ItemDesc,{indexes:rt,width:Ot,height:Pt,y:kt+It.height+dt,alignHorizontal:"left",alignVertical:Ht(),lineNumber:Gt,fill:yt.colorTextSecondary,children:Ct})]})]})}));function Ht(zt,Nt){return"top"}function Xt(zt){return zt==="normal"?"flex-start":zt==="flipped"?"flex-end":"center"}};registerItem("simple",{component:SimpleItem,composites:["icon","label","desc"]});const SimpleVerticalArrow=it=>{const[{indexes:rt,datum:lt,height:ct=140,themeColors:ht,positionH:dt="normal"},ut]=getItemProps(it,["height"]),ft=dt==="normal"?"right":"left",pt=jsx(ItemLabel,{indexes:rt,width:120,fill:ht.colorText,alignHorizontal:ft,alignVertical:"middle",fontSize:14,children:lt.label}),gt=jsx(ItemDesc,{indexes:rt,width:120,fill:ht.colorTextSecondary,alignHorizontal:ft,alignVertical:"top",children:lt.desc}),mt=dt!=="flipped",xt=15,yt=30,bt=120,wt=bt+xt+yt+xt+bt;return jsx(Group,te(Ft({width:wt,height:ct},ut),{children:jsxs(FlexLayout,{flexDirection:"row",alignItems:"center",children:[mt?jsxs(Fragment,{children:[jsxs(FlexLayout,{flexDirection:"column",alignItems:"flex-end",children:[pt,gt]}),jsx(Gap,{width:xt})]}):jsx(Fragment,{children:jsx(Gap,{width:bt+xt})}),jsxs(AlignLayout,{horizontal:"center",vertical:"middle",children:[jsx(VerticalArrow$1,{width:yt,height:ct,fill:ht.colorPrimary}),jsx(Text,{width:yt,height:ct,alignHorizontal:"center",alignVertical:"middle",fill:ht.colorWhite,fontWeight:"bold",fontSize:16,children:String(rt[0]+1).padStart(2,"0").slice(-2)})]}),mt?jsx(Fragment,{children:jsx(Gap,{width:bt+xt})}):jsxs(Fragment,{children:[jsx(Gap,{width:xt}),jsxs(FlexLayout,{flexDirection:"column",alignItems:"flex-start",children:[pt,gt]})]})]})}))},VerticalArrow$1=it=>{const{x:rt=0,y:lt=0,width:ct=30,height:ht=100,fill:dt="#FF356A",size:ut=10}=it;return jsx(Polygon,{width:ct,height:ht,points:[{x:rt,y:lt},{x:rt+ct/2,y:lt+ut},{x:rt+ct,y:lt},{x:rt+ct,y:lt+ht-ut},{x:rt+ct/2,y:lt+ht},{x:rt,y:lt+ht-ut}],fill:dt,"data-element-type":"shape"})};registerItem("simple-vertical-arrow",{component:SimpleVerticalArrow,composites:["label","desc"]});const underlineWidth=80,underlineHeight=3,UnderlineText=it=>{const[{datum:rt,indexes:lt,width:ct=200,gap:ht=4,positionH:dt="center",themeColors:ut},ft]=getItemProps(it,["width","height","gap"]),pt=getElementBounds(jsx(ItemLabel,{indexes:lt,fontSize:18,fontWeight:"bold",width:ct,children:rt.label})),gt=rt.desc?getElementBounds(jsx(ItemDesc,{indexes:lt,width:ct,wordWrap:!0,children:rt.desc})):{height:0},mt=pt.height+ht+underlineHeight+(rt.desc?ht*2+gt.height:0),xt=0,yt=0,bt=dt==="center"?"center":dt==="flipped"?"right":"left",wt=dt==="center"?(ct-underlineWidth)/2:dt==="flipped"?ct-underlineWidth:0,Ct=yt+pt.height+ht,vt=0,St=Ct+underlineHeight+ht*2;return jsxs(Group,te(Ft({width:ct,height:mt},ft),{children:[rt.label&&jsx(ItemLabel,{indexes:lt,x:xt,y:yt,width:ct,alignHorizontal:bt,fill:ut.colorPrimary,fontSize:18,fontWeight:"bold",children:rt.label}),rt.label&&jsx(Rect,{x:wt,y:Ct,width:underlineWidth,height:underlineHeight,fill:ut.colorPrimary,"data-element-type":"shape"}),rt.desc&&jsx(ItemDesc,{indexes:lt,width:ct,x:vt,y:St,alignHorizontal:bt,wordWrap:!0,fill:ut.colorText,children:rt.desc})]}))};registerItem("underline-text",{component:UnderlineText,composites:["label","desc"]});const VerticalIconArrow=it=>{const[{indexes:rt,datum:lt,height:ct=140,themeColors:ht,positionH:dt="normal"},ut]=getItemProps(it,["height"]),pt=dt!=="flipped"?"right":"left",gt=jsx(ItemLabel,{indexes:rt,width:120,fill:ht.colorText,alignHorizontal:pt,alignVertical:"middle",fontSize:14,children:lt.label}),mt=jsx(ItemDesc,{indexes:rt,width:120,fill:ht.colorTextSecondary,alignHorizontal:pt,alignVertical:"top",children:lt.desc}),xt=jsx(ItemIconCircle,{indexes:rt,fill:ht.colorPrimary,colorBg:ht.colorWhite}),yt=jsx(DotLine$1,{width:30,height:8,fill:ht.colorPrimary,positionH:dt}),bt=dt!=="flipped",wt=5,Ct=25,vt=30,St=getElementBounds(gt),_t=getElementBounds(xt),Tt=getElementBounds(yt),Et=St.width+wt+Tt.width-_t.width-Ct,At=Math.max(St.width+wt+Tt.width,Ct+_t.width)*2+vt;return jsx(Group,te(Ft({width:At,height:ct},ut),{children:jsxs(FlexLayout,{flexDirection:"row",alignItems:"center",children:[bt?jsxs(Fragment,{children:[jsxs(FlexLayout,{flexDirection:"column",alignItems:"flex-end",children:[gt,mt]}),jsx(Gap,{width:wt}),yt]}):jsxs(Fragment,{children:[jsx(Gap,{width:Et}),xt,jsx(Gap,{width:Ct})]}),jsxs(AlignLayout,{horizontal:"center",vertical:"middle",children:[jsx(VerticalArrow,{width:vt,height:ct,fill:ht.colorPrimary}),jsx(Text,{width:vt,height:ct,alignHorizontal:"center",alignVertical:"middle",fill:ht.colorWhite,fontWeight:"bold",fontSize:16,children:String(rt[0]+1).padStart(2,"0").slice(-2)})]}),bt?jsxs(Fragment,{children:[jsx(Gap,{width:Ct}),xt]}):jsxs(Fragment,{children:[yt,jsx(Gap,{width:wt}),jsxs(FlexLayout,{flexDirection:"column",alignItems:"flex-start",children:[gt,mt]})]})]})}))},VerticalArrow=it=>{const{x:rt=0,y:lt=0,width:ct=30,height:ht=100,fill:dt="#FF356A",size:ut=10}=it;return jsx(Polygon,{width:ct,height:ht,points:[{x:rt,y:lt},{x:rt+ct/2,y:lt+ut},{x:rt+ct,y:lt},{x:rt+ct,y:lt+ht-ut},{x:rt+ct/2,y:lt+ht},{x:rt,y:lt+ht-ut}],fill:dt,"data-element-type":"shape"})},DotLine$1=it=>{const{x:rt=0,y:lt=0,width:ct=50,height:ht=10,fill:dt,positionH:ut="normal"}=it,ft=ht/2,pt=ct-ft,gt=2,mt=ft;return jsxs(Group,{x:rt,y:lt,width:ct,height:ht,children:[jsx(Ellipse,{width:ht,height:ht,fill:dt,x:ut==="normal"?0:pt-ft,"data-element-type":"shape"}),jsx(Path$1,{d:ut==="normal"?`M${ft},${mt} L${ft+pt},${mt}`:`M0,${mt} L${pt-ft},${mt}`,strokeWidth:gt,stroke:dt,"data-element-type":"shape"})]})};registerItem("vertical-icon-arrow",{component:VerticalIconArrow,composites:["icon","label","desc"]});const STRUCTURE_REGISTRY=new Map;function registerStructure(it,rt){STRUCTURE_REGISTRY.set(it,rt)}function getStructure(it){return STRUCTURE_REGISTRY.get(it)}const ChartBar=it=>{var Te,Ae,Le;const{Title:rt,Item:lt,data:ct,width:ht,gap:dt,barGap:ut,barHeight:ft=28,barAreaWidth:pt,labelGap:gt=16,padding:mt=24,showValue:xt=!0,options:yt,valueFormatter:bt=Ee=>Ee.toString()}=it,wt=(Te=pt!=null?pt:ht)!=null?Te:480,{title:Ct,desc:vt,items:St=[],xTitle:_t,yTitle:Tt}=ct,Et=rt?jsx(rt,{title:Ct,desc:vt}):null;if(St.length===0)return jsx(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:Et});const[At,Mt,It,Lt]=parsePadding(mt),jt=(Ae=St[0])!=null?Ae:{label:"",value:0},Ot=getElementBounds(jsx(lt,{indexes:[0],datum:jt,data:ct})),Pt=Ot.width||140,Gt=Ot.height||ft,kt=Math.max(ft,Gt),Ht=Math.max(12,kt*.35),Xt=(Le=ut!=null?ut:dt)!=null?Le:Ht,zt=St.map(Ee=>{var Se;return(Se=Ee.value)!=null?Se:0}),Nt=Math.max(...zt,0),Bt=Math.min(...zt,0),Vt=Bt<0?Bt*1.1:0;let Yt=Nt>0?Nt*1.1:0;Yt===Vt&&(Yt=Vt+1);const Kt=linear().domain([Vt,Yt]).range([0,wt]),Dt=Math.min(Math.max(Kt(0),0),wt),Rt=Math.max(2,wt*.02),Wt=St.length*(kt+Xt)-Xt,qt=Tt?24:0,Zt=20,Ut=_t?24:0,Qt=At+qt,Jt=Lt+Pt+gt,oe=xt?80:0,ce=Math.max(8,kt*.2),ie=Jt+wt+oe+Mt,le=Qt+Wt+ce+Zt+Ut+It,he=getThemeColors(yt.themeConfig),se=he.colorText||"#666",ee=getColorPrimary(yt),ne=[],ue=[],ye=[],ge=[],de=[],ae=[],fe=[],pe=Qt+Wt+ce,be=Ee=>Number.isInteger(Ee)?Ee.toString():Ee.toFixed(1);St.forEach((Ee,Se)=>{var je;const Oe=[Se],we=(je=Ee.value)!=null?je:0,Me=Qt+Se*(kt+Xt),He=Me+(kt-ft)/2,xe=we>=0?Jt+Dt:Jt+Kt(we),Ie=we>=0?Kt(we)-Dt:Dt-Kt(we),_e=Ie===0?Rt:Ie,$e=getPaletteColor(yt,[Se])||he.colorPrimary;if(ne.push(jsx(Rect,{x:xe,y:He,width:_e,height:ft,fill:$e,rx:6,ry:6,"data-element-type":"shape"})),xt){const Re=we>=0?xe+_e+8:xe-8;ue.push(jsx(Text,{x:Re,y:He+ft/2,alignHorizontal:we>=0?"left":"right",alignVertical:"middle",fontSize:14,fontWeight:"bold",fill:$e,children:bt(we,Ee)}))}ye.push(jsx(lt,{indexes:Oe,datum:Ee,data:ct,x:Lt,y:Me+(kt-Gt)/2,width:Pt,height:Gt,positionV:"middle"}))});const me=Math.max(3,Math.min(7,Math.floor(wt/80)));return Kt.ticks(me).forEach(Ee=>{const Se=Jt+Kt(Ee);ae.push(jsx(Path$1,{d:`M${Se} ${Qt} L${Se} ${Qt+Wt}`,stroke:se,strokeOpacity:.08,"data-element-type":"shape"})),de.push(jsx(Path$1,{d:`M${Se-.5} ${pe} L${Se-.5} ${pe+6}`,stroke:se,"data-element-type":"shape"})),de.push(jsx(Text,{x:Se,y:pe+14,alignHorizontal:"center",alignVertical:"middle",fontSize:12,fill:se,children:be(Ee)}))}),ge.push(jsx(Path$1,{d:`M${Jt} ${pe} L${Jt+wt} ${pe}`,stroke:se,"data-element-type":"shape"})),Vt<0&&ge.push(jsx(Rect,{x:Jt+Dt-.5,y:Qt,width:1,height:Wt,fill:ee,"data-element-type":"shape"})),Tt&&fe.push(jsx(Text,{x:Lt+Pt/2,y:At+qt/2,alignHorizontal:"center",alignVertical:"middle",fontSize:14,fontWeight:"bold",fill:se,children:Tt})),_t&&fe.push(jsx(Text,{x:Jt+wt/2,y:pe+Zt+Ut/2,alignHorizontal:"center",alignVertical:"middle",fontSize:14,fontWeight:"bold",fill:se,children:_t})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Et,jsxs(Group,{width:ie,height:le,children:[jsx(Group,{children:ae}),jsx(Group,{children:ne}),jsx(Group,{children:ue}),jsx(Group,{children:fe}),jsx(Group,{children:[...ge,...de]}),jsx(ItemsGroup,{children:ye})]})]})};registerStructure("chart-bar",{component:ChartBar,composites:["title","item","xTitle","yTitle"]});const ChartColumn=it=>{const{Title:rt,Item:lt,data:ct,columnGap:ht=60,columnWidth:dt=50,padding:ut=20,showValue:ft=!0,options:pt,valueFormatter:gt=Vt=>Vt.toString()}=it,{title:mt,desc:xt,items:yt=[]}=ct,bt=rt?jsx(rt,{title:mt,desc:xt}):null;if(yt.length===0)return jsx(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:bt});const wt=getThemeColors(pt.themeConfig),vt=[...yt.map(Vt=>{var Yt;return(Yt=Vt.value)!=null?Yt:0}),0].sort((Vt,Yt)=>Vt-Yt),St=vt[0]<0,_t=yt.length*dt+(yt.length-1)*ht,Tt=300,[Et,At,Mt,It]=parsePadding(ut),Lt=ft?24:0,jt=10,Ot=St&&ft?Lt+jt:jt,Pt=_t+It+At,Gt=Tt+Et+Mt+Ot,kt=linear().domain([vt[0],vt[vt.length-1]]).range([Tt,0]),Ht=kt(0),Xt=[],zt=[],Nt=[],Bt=[];return yt.forEach((Vt,Yt)=>{var ce;const Kt=[Yt],Dt=(ce=Vt.value)!=null?ce:0,Rt=It+Yt*(dt+ht),Wt=Dt>=0?kt(Dt):Ht,qt=Math.abs(kt(Dt)-Ht),Zt=getPaletteColor(pt,[Yt])||wt.colorPrimary,Ut=`${Zt}-column-positive-${Yt}`,Qt=`${Zt}-column-negative-${Yt}`;Bt.push(jsxs("linearGradient",{id:Dt>=0?Ut:Qt,x1:"0%",y1:Dt>=0?"0%":"100%",x2:"0%",y2:Dt>=0?"100%":"0%",children:[jsx("stop",{offset:"0%",stopColor:Zt}),jsx("stop",{offset:"100%",stopColor:tinycolor.mix(Zt,"#fff",40).toHexString()})]})),Xt.push(jsx(Rect,{x:Rt,y:Et+Wt,width:dt,height:qt,fill:`url(#${Dt>=0?Ut:Qt})`,rx:8,ry:8,"data-element-type":"shape"})),ft&&zt.push(jsx(Text,{x:Rt+dt/2,y:Dt>=0?Et+Wt-10:Et+Wt+qt+20,fontSize:16,fontWeight:"bold",alignHorizontal:"center",alignVertical:Dt>=0?"bottom":"top",fill:Zt,children:gt(Dt,Vt)}));const Jt=dt+ht,oe=Et+Tt+Ot;Nt.push(jsx(lt,{indexes:Kt,datum:Vt,data:ct,x:Rt+dt/2-Jt/2,y:oe,width:Jt,positionH:"center"}))}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[bt,jsxs(Group,{width:Pt,height:Gt,children:[jsx(Defs,{children:Bt}),jsx(Group,{children:Xt}),jsx(Group,{children:zt}),jsx(ItemsGroup,{children:Nt})]})]})};registerStructure("chart-column",{component:ChartColumn,composites:["title","item"]});const ChartLine=it=>{const{Title:rt,Item:lt,data:ct,width:ht,height:dt=260,gap:ut=10,padding:ft=24,showValue:pt=!0,options:gt,valueFormatter:mt=xe=>xe.toString()}=it,{title:xt,desc:yt,items:bt=[],xTitle:wt,yTitle:Ct}=ct,vt=rt?jsx(rt,{title:xt,desc:yt}):null;if(bt.length===0)return jsx(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:vt});const[St,_t,Tt,Et]=parsePadding(ft),At={indexes:[0],datum:bt[0],data:ct,positionH:"center",positionV:"normal"},Mt=getElementBounds(jsx(lt,Ft({},At))),It=Mt.width,Lt=Mt.height,jt=Math.max(28,Lt+14),Ot=44,Pt=Ct?26:0,Gt=wt?22:0,kt=It+ut,Ht=bt.length>0?(bt.length-1)*kt+It:0,Xt=ht!==void 0?ht:Math.max(200,Ht||320),zt=bt.length>1?Math.max(kt,(Xt-It)/(bt.length-1)):0,Nt=bt.length>0?Math.max(It,(bt.length-1)*zt+It):0,Bt=Et+Ot+Pt,Vt=St+Pt,Yt=Bt+Nt+_t,Kt=Vt+dt+jt+Gt+Tt,Dt=bt.map(xe=>{var Ie;return(Ie=xe.value)!=null?Ie:0}),Rt=Math.max(...Dt,0),Wt=Math.min(...Dt,0),qt=Math.max(Math.abs(Rt),Math.abs(Wt))*.1,Zt=Wt<0?Wt-qt:0;let Ut=Rt>0?Rt+qt:1;Ut===Zt&&(Ut=Zt+1);const Qt=linear().domain([Zt,Ut]).nice().range([dt,0]),Jt=Math.max(0,Math.min(dt,Qt(0))),oe=Ut<=0?0:Zt>=0?dt:Jt,ce=getColorPrimary(gt),ie=getThemeColors(gt.themeConfig),le=ie.colorText||"#666",he=[],se=[],ee=[],ne=[],ue=[],ye=[],ge=[];Qt.ticks(6).forEach(xe=>{const Ie=Vt+Qt(xe);he.push(jsx(Path$1,{d:`M ${Bt} ${Ie} L ${Bt+Nt} ${Ie}`,width:Nt,height:1,stroke:le,strokeWidth:1,"data-element-type":"shape",opacity:.08})),ge.push(jsx(Text,{x:Bt-8,y:Ie,alignHorizontal:"right",alignVertical:"middle",fontSize:12,fill:le,children:Number.isInteger(xe)?xe.toString():xe.toFixed(1)}))});const ae=[],fe=[],pe=[],be=xe=>{if(xe.length===0)return"";if(xe.length===1){const _e=xe[0];return`M ${_e.x} ${_e.y}`}const Ie=[];Ie.push(`M ${xe[0].x} ${xe[0].y}`);for(let _e=0;_e<xe.length-1;_e++){const $e=xe[_e-1]||xe[_e],je=xe[_e],Re=xe[_e+1],Ne=xe[_e+2]||Re,ze=je.x+(Re.x-$e.x)/6,Be=je.y+(Re.y-$e.y)/6,Fe=Re.x-(Ne.x-je.x)/6,Xe=Re.y-(Ne.y-je.y)/6;Ie.push(`C ${ze} ${Be} ${Fe} ${Xe} ${Re.x} ${Re.y}`)}return Ie.join(" ")};bt.forEach((xe,Ie)=>{var Re;const _e=Bt+Ie*zt+It/2,$e=Vt+Qt((Re=xe.value)!=null?Re:0);fe.push({x:_e,y:$e,datum:xe}),ae.push(jsx(lt,te(Ft({},At),{indexes:[Ie],datum:xe,x:_e-It/2,y:Vt+dt+4})));const je=getPaletteColor(gt,[Ie])||ie.colorPrimary;pe.push({x:_e,color:je})});const me=pe.length>0?Math.min(...pe.map(xe=>xe.x)):Bt,Ce=pe.length>0?Math.max(...pe.map(xe=>xe.x)):Bt+Nt,Te=Math.max(1,Ce-me),Ae=pe.map(xe=>jsx("stop",{offset:`${(xe.x-me)/Te*100}%`,stopColor:xe.color})),Le=pe.map(xe=>jsx("stop",{offset:`${(xe.x-me)/Te*100}%`,stopColor:xe.color,stopOpacity:"0.18"}));if(pe.length>0){const xe=pe[pe.length-1].color;Ae.push(jsx("stop",{offset:"100%",stopColor:xe})),Le.push(jsx("stop",{offset:"100%",stopColor:xe,stopOpacity:"0.04"}))}const Ee=`chart-line-${getSimpleHash([Nt,dt,le,ce,pe.map(xe=>`${xe.x.toFixed(2)}-${xe.color}`).join()].join(":"))}`,Se=`${Ee}-stroke`,Oe=`${Ee}-area`,we=be(fe);ee.push(jsx(Path$1,{d:we,width:Nt,height:dt,stroke:`url(#${Se})`,strokeWidth:3,fill:"none","data-element-type":"shape"}));const Me=we.includes("C")?we.slice(we.indexOf("C")):"",He=[`M ${fe[0].x} ${Vt+oe}`,`L ${fe[0].x} ${fe[0].y}`,Me,`L ${fe[fe.length-1].x} ${Vt+oe}`,"Z"].join(" ");return ee.push(jsx(Path$1,{d:He,width:Nt,height:dt,fill:`url(#${Oe})`,stroke:"none","data-element-type":"shape"})),fe.forEach((xe,Ie)=>{var $e;const _e=getPaletteColor(gt,[Ie])||ie.colorPrimary;ne.push(jsx(Ellipse,{x:xe.x-6,y:xe.y-6,width:12,height:12,fill:_e,"data-element-type":"shape"})),pt&&ue.push(jsx(Text,{x:xe.x,y:xe.y-12,alignHorizontal:"center",alignVertical:"bottom",fontSize:12,fontWeight:"bold",fill:_e,children:mt(($e=xe.datum.value)!=null?$e:0,xe.datum)}))}),se.push(jsx(Path$1,{d:`M ${Bt} ${Vt+oe} L ${Bt+Nt} ${Vt+oe}`,width:Nt,height:1,stroke:le,strokeWidth:1,"data-element-type":"shape"})),se.push(jsx(Path$1,{d:`M ${Bt} ${Vt} L ${Bt} ${Vt+dt}`,width:1,height:dt,stroke:le,strokeWidth:1,"data-element-type":"shape"})),wt&&ye.push(jsx(Text,{x:Bt+Nt/2,y:Vt+dt+jt+Gt/2,alignHorizontal:"center",alignVertical:"middle",fontSize:14,fontWeight:"bold",fill:le,children:wt})),Ct&&ye.push(jsx(Text,{x:Et+Pt/2,y:Vt+dt/2,alignHorizontal:"center",alignVertical:"middle",fontSize:14,fontWeight:"bold",fill:le,children:Ct})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{width:Yt,height:Kt,children:[jsxs(Defs,{children:[jsx("linearGradient",{id:Se,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:Ae}),jsxs("linearGradient",{id:Oe,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[Le,jsx("stop",{offset:"100%",stopColor:ce,stopOpacity:"0.04"})]})]}),jsx(Group,{children:he}),jsx(Group,{children:[...se,...ge]}),jsx(Group,{children:ee}),jsx(Group,{children:ne}),jsx(Group,{children:ue}),jsx(Group,{children:ye}),jsx(ItemsGroup,{children:ae})]})]})};registerStructure("chart-line",{component:ChartLine,composites:["title","item","xTitle","yTitle"]});const ChartPie=it=>{var Ut;const{Title:rt,Item:lt,data:ct,radius:ht=140,innerRadius:dt=0,padding:ut=30,showPercentage:ft=!0,options:pt}=it,{title:gt,desc:mt,items:xt=[]}=ct,yt=rt?jsx(rt,{title:gt,desc:mt}):null,bt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),wt=(Ut=xt[0])!=null?Ut:{label:"",value:0},Ct=getElementBounds(jsx(lt,{indexes:[0],datum:wt,data:ct,positionH:"center",positionV:"middle"})),vt=Ct.width||140,St=Ct.height||32,_t=Math.max(ht,60),Tt=1.35,Et=8,At=_t*Tt+Et+vt,Mt=_t,It=ut+At,Lt=ut+Mt,jt=It*2,Ot=Lt*2;if(xt.length===0)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[yt,jsx(Group,{width:jt,height:Ot,children:jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:It-bt.width/2,y:Lt-bt.height/2})})})]});const Pt=xt.reduce((Qt,Jt)=>{var oe;return Qt+Math.max((oe=Jt.value)!=null?oe:0,0)},0),Gt=getColorPrimary(pt),kt=getThemeColors(pt.themeConfig),Xt=pie().value(Qt=>{var Jt;return Math.max((Jt=Qt.value)!=null?Jt:0,0)}).sort(null).startAngle(0).endAngle(Math.PI*2)(xt),zt=arc().innerRadius(dt).outerRadius(_t).cornerRadius(2),Nt=arc().innerRadius(_t).outerRadius(_t),Bt=arc().innerRadius(_t*1.15).outerRadius(_t*1.15),Vt=dt+(_t-dt)*.5,Yt=arc().innerRadius(Vt).outerRadius(Vt),Kt=arc().innerRadius(_t*.85).outerRadius(_t*.85),Dt=[],Rt=[],Wt=[],qt=[],Zt=[];return Xt.forEach(Qt=>{const Jt=Qt.data,oe=Qt.index,ce=getPaletteColor(pt,[oe])||kt.colorPrimary||Gt,ie=zt(Qt)||"";Dt.push(jsx(Path$1,{d:ie,fill:ce,stroke:kt.colorBg,strokeWidth:1,"data-element-type":"shape",width:_t*2,height:_t*2}));const he=Qt.startAngle+(Qt.endAngle-Qt.startAngle)/2<Math.PI,se=Nt.centroid(Qt),ee=Bt.centroid(Qt),ue=[_t*Tt*(he?1:-1),ee[1]];Wt.push(jsx(Path$1,{d:`M${It+se[0]} ${Lt+se[1]} L${It+ee[0]} ${Lt+ee[1]} L${It+ue[0]} ${Lt+ue[1]}`,stroke:Gt,strokeOpacity:.45,strokeWidth:2,fill:"none","data-element-type":"shape"}));const ye=It+ue[0]+(he?Et:-Et-vt),ge=Lt+ue[1]-St/2;if(qt.push(jsx(lt,{indexes:[oe],datum:Jt,data:ct,x:ye,y:ge,width:vt,height:St,positionH:he?"normal":"flipped",positionV:"middle",themeColors:getThemeColors({colorPrimary:ce},pt)})),ft&&Pt>0){const ae=Yt.centroid(Qt),fe=Math.max(Qt.value,0),pe=(fe*100/Pt).toFixed(1),be=50,me=20;Rt.push(jsx(Text,{x:It+ae[0]-be/2,y:Lt+ae[1]-me/2,width:be,height:me,alignHorizontal:"center",alignVertical:"middle",fontSize:12,fontWeight:"bold",fill:"#ffffff","data-value":fe,"data-indexes":[oe],"data-element-type":"item-value",children:`${pe}%`}))}const de=Kt.centroid(Qt);Zt.push(jsx(BtnRemove,{indexes:[oe],x:It+de[0]-bt.width/2,y:Lt+de[1]-bt.height/2}))}),Xt.forEach((Qt,Jt)=>{const oe=(Jt+1)%Xt.length,ce=Qt.endAngle,ie=Xt[oe].startAngle+(oe===0?Math.PI*2:0),le=(ce+ie)/2,he=_t*1,se=Math.sin(le)*he,ee=-Math.cos(le)*he;Zt.push(jsx(BtnAdd,{indexes:[Jt+1],x:It+se-bt.width/2,y:Lt+ee-bt.height/2}))}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:30,children:[yt,jsxs(Group,{width:jt,height:Ot,children:[jsx(Group,{x:It,y:Lt,children:Dt}),jsx(Group,{children:Wt}),jsx(Group,{children:Rt}),jsx(ItemsGroup,{children:qt}),jsx(BtnsGroup,{children:Zt})]})]})};registerStructure("chart-pie",{component:ChartPie,composites:["title","item"]});const DEFAULT_ROTATE_ANGLES=[0,30,-30,60,-60],GOLDEN_ANGLE=Math.PI*(3-Math.sqrt(5));function getRotatedSize(it,rt,lt){const ct=Math.PI/180*lt,ht=Math.cos(ct),dt=Math.sin(ct);return{width:Math.abs(it*ht)+Math.abs(rt*dt),height:Math.abs(it*dt)+Math.abs(rt*ht)}}function hasCollision(it,rt,lt,ct,ht,dt){const ut=it-dt,ft=it+lt+dt,pt=rt-dt,gt=rt+ct+dt;return ht.some(mt=>{const xt=mt.box.x-dt,yt=mt.box.x+mt.box.width+dt,bt=mt.box.y-dt,wt=mt.box.y+mt.box.height+dt;return!(ft<=xt||ut>=yt||gt<=bt||pt>=wt)})}function placeWords(it,rt,lt,ct,ht){const dt=[],ut=rt?DEFAULT_ROTATE_ANGLES:[0],ft=Math.max(1600,it.length*28);return it.forEach((pt,gt)=>{const mt=Math.max(pt.width,pt.height),xt=gt*GOLDEN_ANGLE;let yt=0,bt=null;for(let wt=0;wt<ft&&!bt;wt++){wt===Math.floor(ft*.6)&&(yt=mt);const Ct=xt+wt*ct,vt=ht*Math.sqrt(wt+1)+yt+mt*.25,St=vt*Math.cos(Ct),_t=vt*Math.sin(Ct);for(const Tt of ut){const Et=getRotatedSize(pt.width,pt.height,Tt),At=St-Et.width/2,Mt=_t-Et.height/2;if(!hasCollision(At,Mt,Et.width,Et.height,dt,lt)){bt=te(Ft({},pt),{angle:Tt,centerX:St,centerY:_t,box:{x:At,y:Mt,width:Et.width,height:Et.height}});break}}}if(!bt){const wt=ut[gt%ut.length],Ct=ht*Math.sqrt(ft+1)+mt,vt=xt,St=Ct*Math.cos(vt),_t=Ct*Math.sin(vt),Tt=getRotatedSize(pt.width,pt.height,wt);bt=te(Ft({},pt),{angle:wt,centerX:St,centerY:_t,box:{x:St-Tt.width/2,y:_t-Tt.height/2,width:Tt.width,height:Tt.height}})}dt.push(bt)}),dt}const ChartWordCloud=it=>{const{data:rt,options:lt,minFontSize:ct=16,maxFontSize:ht=48,enableRotate:dt=!0,padding:ut=6,spiralStep:ft=.45,radiusStep:pt=10}=it,{items:gt=[]}=rt,mt=gt.map((kt,Ht)=>({datum:kt,index:Ht})).filter(({datum:kt})=>kt.label);if(mt.length===0)return jsx(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:jsx(Group,{children:jsx(ItemsGroup,{})})});const xt=mt.map(({datum:kt})=>kt.value).filter(kt=>typeof kt=="number"),yt=xt.length>0,bt=yt?Math.min(...xt):0,wt=yt?Math.max(...xt):0,Ct=yt&&bt===wt,vt=(ct+ht)/2,St=kt=>{if(!yt||Ct)return vt;if(kt==null)return ct;const Ht=(kt-bt)/(wt-bt||1);return ct+Ht*(ht-ct)},_t=mt.map(({datum:kt,index:Ht})=>{const Xt=St(kt.value),zt=getElementBounds(jsx(Text,{fontSize:Xt,fontWeight:"bold",children:kt.label})),Nt=getPaletteColor(lt,[Ht])||getColorPrimary(lt)||"#333333";return{label:kt.label,value:kt.value,color:Nt,fontSize:Xt,width:zt.width*1.05,height:zt.height}}).sort((kt,Ht)=>Ht.fontSize-kt.fontSize),Tt=placeWords(_t,dt,ut,ft,pt),Et=Math.min(...Tt.map(kt=>kt.box.x)),At=Math.min(...Tt.map(kt=>kt.box.y)),Mt=Math.max(...Tt.map(kt=>kt.box.x+kt.box.width)),It=Math.max(...Tt.map(kt=>kt.box.y+kt.box.height)),Lt=-Et+ut,jt=-At+ut,Ot=Mt-Et+ut*2,Pt=It-At+ut*2,Gt=Tt.map((kt,Ht)=>{const Xt=kt.centerX-kt.width/2+Lt,zt=kt.centerY-kt.height/2+jt,Nt=kt.width/2,Bt=kt.height/2,Vt=`translate(${Xt}, ${zt}) rotate(${kt.angle}, ${Nt}, ${Bt})`;return jsx(Group,{transform:Vt,children:jsx(Text,{width:kt.width,height:kt.height,fontSize:kt.fontSize,fontWeight:"bold",alignHorizontal:"center",alignVertical:"middle",fill:kt.color,"data-indexes":Ht,"data-element-type":"item-label",children:kt.label})})});return jsx(ItemsGroup,{id:"infographic-container",width:Ot,height:Pt,children:Gt})};registerStructure("chart-wordcloud",{component:ChartWordCloud,composites:[]});const dividerRegistry=new Map,registerDivider=(it,rt)=>{dividerRegistry.set(it,rt)},getDividerComponent=it=>{var rt;return it&&(rt=dividerRegistry.get(it))!=null?rt:null},ProsConsArrow=it=>{const{x:rt,y:lt,colorPositive:ct,colorNegative:ht,colorBg:dt}=it,ut=200,ft=141,pt={width:90,height:40,fontSize:22,alignHorizontal:"center",alignVertical:"middle",fontWeight:"bold",fill:dt};return jsxs(Group,{x:rt,y:lt,width:ut,height:ft,children:[jsxs(ShapesGroup,{children:[jsx("path",{d:"M137 54C137 54.2903 137 54.5806 136.706 54.7742L108.614 86.0323H64.7619C64.4071 86.0204 64.0557 86.1043 63.7453 86.2747C63.4349 86.4452 63.1773 86.6959 63 87C63.0037 86.7447 63.1092 86.5012 63.2936 86.3226L91.3862 55.0645H135.238C135.593 55.0763 135.944 54.9925 136.255 54.822C136.565 54.6516 136.823 54.4009 137 54.0968V54Z",fill:"#D9D9D9"}),jsx("path",{d:"M39.3272 0.484649C39.6146 0.234929 39.9662 0.0736935 40.3407 0.0198929C40.7152 -0.0339076 41.0971 0.0219605 41.4414 0.180925C41.7857 0.33989 42.0783 0.595358 42.2846 0.917314C42.491 1.23927 42.6026 1.61434 42.6063 1.99848V14.8156H136.013C136.54 14.8156 137.045 15.0282 137.418 15.4068C137.791 15.7853 138 16.2987 138 16.834V53.166C138 53.7013 137.791 54.2147 137.418 54.5932C137.045 54.9718 136.54 55.1844 136.013 55.1844H42.6063V68.0015C42.6026 68.3857 42.491 68.7607 42.2846 69.0827C42.0783 69.4046 41.7857 69.6601 41.4414 69.8191C41.0971 69.9781 40.7152 70.0339 40.3407 69.9801C39.9662 69.9263 39.6146 69.7651 39.3272 69.5154L0.672847 36.5138C0.461378 36.3244 0.292014 36.0915 0.176005 35.8305C0.0599968 35.5695 0 35.2864 0 35C0 34.7136 0.0599968 34.4306 0.176005 34.1696C0.292014 33.9085 0.461378 33.6756 0.672847 33.4862L39.4265 0.484649H39.3272Z",fill:ct}),jsx("path",{d:"M157.394 73.0007C157.397 72.6162 157.509 72.2407 157.715 71.9183C157.922 71.596 158.214 71.3403 158.559 71.1811C158.903 71.022 159.285 70.9661 159.659 71.0199C160.034 71.0738 160.385 71.2352 160.673 71.4852L199.327 104.524C199.539 104.714 199.708 104.947 199.824 105.208C199.94 105.47 200 105.753 200 106.04C200 106.326 199.94 106.61 199.824 106.871C199.708 107.132 199.539 107.366 199.327 107.555L160.573 140.594C160.285 140.815 159.943 140.951 159.584 140.989C159.225 141.027 158.862 140.965 158.535 140.809C158.208 140.653 157.929 140.41 157.728 140.105C157.527 139.8 157.411 139.445 157.394 139.078V126.247H63.9874C63.4603 126.247 62.9548 126.034 62.5821 125.655C62.2094 125.276 62 124.762 62 124.226V87.8531C62 87.3172 62.2094 86.8032 62.5821 86.4242C62.9548 86.0453 63.4603 85.8324 63.9874 85.8324H157.394V73.0007Z",fill:ht})]}),jsx(Text,te(Ft({x:40,y:15},pt),{children:"Pros"})),jsx(Text,te(Ft({x:70,y:85},pt),{children:"Cons"}))]})};registerDivider("pros-cons-arrow",ProsConsArrow);const ProsConsFold=it=>{const{x:rt,y:lt,colorPositive:ct,colorNegative:ht,colorBg:dt}=it,ut=240,ft=300,pt={width:85,height:30,fontSize:20,alignHorizontal:"center",alignVertical:"middle",fontWeight:"bold",fill:dt};return jsxs(Group,{x:rt,y:lt,width:ut,height:ft,children:[jsxs(ShapesGroup,{children:[jsx("path",{d:"M136.914 38.7755C137.303 38.7733 137.683 38.6617 138.011 38.4534C138.339 38.2451 138.602 37.9485 138.77 37.5977C138.937 37.247 139.002 36.8561 138.957 36.4701C138.913 36.084 138.76 35.7183 138.517 35.415L110.741 0.982313C110.548 0.735138 110.301 0.535238 110.018 0.397762C109.736 0.260286 109.426 0.188841 109.112 0.188841C108.798 0.188841 108.488 0.260286 108.206 0.397762C107.924 0.535238 107.676 0.735138 107.483 0.982313L79.7069 35.415C79.4639 35.7183 79.3113 36.084 79.2667 36.4701C79.222 36.8561 79.2871 37.247 79.4545 37.5977C79.6219 37.9485 79.8847 38.2451 80.213 38.4534C80.5412 38.6617 80.9216 38.7733 81.3104 38.7755H92.8965C93.0517 57.1293 97.5517 64.9878 105.259 73.7252C107.017 75.7932 108.983 77.8612 111.103 80.1361C113.276 82.4626 122.121 88.9252 131.069 95.181C129.362 88.7701 128.172 81.2218 127.293 73.7252C125.224 55.9918 125.017 38.7755 125.017 38.7755H136.914Z",fill:ct,fillOpacity:.4}),jsx("path",{d:"M237.931 109.967C238.48 109.967 239.006 109.749 239.394 109.362C239.782 108.974 240 108.448 240 107.899V75.7932C240 75.2447 239.782 74.7187 239.394 74.3309C239.006 73.9431 238.48 73.7252 237.931 73.7252H127.241C128.172 81.2218 129.362 88.7701 131.069 95.181C138.182 100.171 145.337 105.1 152.534 109.967H237.931Z",fill:ct}),jsx("path",{d:"M152.586 109.967C152.586 109.967 141.724 102.678 131.069 95.181C124.122 90.5838 117.455 85.5772 111.103 80.1878C109.034 77.8612 107.017 75.7415 105.259 73.7252H48.6207V56.6639C48.6091 56.2797 48.4905 55.9063 48.2784 55.5857C48.0662 55.2651 47.7689 55.0099 47.4197 54.8488C47.0705 54.6878 46.6833 54.6271 46.3016 54.6738C45.9199 54.7204 45.5587 54.8725 45.2586 55.1129L1.50002 90.2694C1.26208 90.4633 1.07029 90.7078 0.938585 90.985C0.80688 91.2622 0.738558 91.5652 0.738558 91.8721C0.738558 92.179 0.80688 92.482 0.938585 92.7592C1.07029 93.0365 1.26208 93.2809 1.50002 93.4748L45.2586 128.631C45.5621 128.874 45.928 129.027 46.3142 129.071C46.7005 129.116 47.0914 129.051 47.4424 128.884C47.7933 128.716 48.09 128.454 48.2984 128.125C48.5068 127.797 48.6185 127.417 48.6207 127.029V109.967H152.586Z",fill:"#BFBFBF"}),jsx("path",{d:"M36.1034 88.9252H28.9655V93.785H36.1034V101.85H41.4828V93.785H48.6207V88.8735H41.4828V81.1701H36.1034V88.9252Z",fill:"#404040"}),jsx("path",{d:"M103.086 261.224C102.697 261.227 102.317 261.338 101.989 261.547C101.661 261.755 101.398 262.051 101.23 262.402C101.063 262.753 100.998 263.144 101.043 263.53C101.087 263.916 101.24 264.282 101.483 264.585L129.259 299.018C129.452 299.265 129.699 299.465 129.982 299.602C130.264 299.74 130.574 299.811 130.888 299.811C131.202 299.811 131.512 299.74 131.794 299.602C132.076 299.465 132.324 299.265 132.517 299.018L160.293 264.585C160.536 264.282 160.689 263.916 160.733 263.53C160.778 263.144 160.713 262.753 160.546 262.402C160.378 262.051 160.115 261.755 159.787 261.547C159.459 261.338 159.078 261.227 158.69 261.224H147.103C146.948 242.871 142.448 235.012 134.741 226.275C132.983 224.207 131.017 222.139 128.897 219.864C126.724 217.537 117.879 211.075 108.931 204.819C110.677 211.877 111.938 219.045 112.707 226.275C114.776 244.008 114.983 261.224 114.983 261.224H103.086Z",fill:ht,fillOpacity:.4}),jsx("path",{d:"M2.06897 190.033C1.52025 190.033 0.993996 190.251 0.605989 190.638C0.217983 191.026 5.00679e-06 191.552 5.00679e-06 192.101V224.207C5.00679e-06 224.755 0.217983 225.281 0.605989 225.669C0.993996 226.057 1.52025 226.275 2.06897 226.275H112.759C111.828 218.778 110.638 211.23 108.931 204.819C99.9827 198.512 90.931 192.411 88.2414 190.55C87.7206 190.204 87.1077 190.024 86.4828 190.033H2.06897Z",fill:ht}),jsx("path",{d:"M87.4138 190.033C87.4138 190.033 98.2759 197.322 108.931 204.819C115.878 209.416 122.545 214.423 128.897 219.812C130.966 222.139 132.983 224.258 134.741 226.275H191.379V243.336C191.391 243.72 191.51 244.094 191.722 244.414C191.934 244.735 192.231 244.99 192.58 245.151C192.929 245.312 193.317 245.373 193.698 245.326C194.08 245.28 194.441 245.128 194.741 244.887L238.5 209.731C238.738 209.537 238.93 209.292 239.061 209.015C239.193 208.738 239.261 208.435 239.261 208.128C239.261 207.821 239.193 207.518 239.061 207.241C238.93 206.964 238.738 206.719 238.5 206.525L194.741 171.369C194.438 171.126 194.072 170.973 193.686 170.929C193.3 170.884 192.909 170.949 192.558 171.116C192.207 171.284 191.91 171.546 191.702 171.875C191.493 172.203 191.382 172.583 191.379 172.971V190.033H87.4138Z",fill:"#BFBFBF"}),jsx("path",{d:"M192.414 205.905V210.816H212.069V205.905H192.414Z",fill:"#404040"})]}),jsx(Text,te(Ft({x:153,y:77},pt),{children:"PROS"})),jsx(Text,te(Ft({x:2,y:193},pt),{children:"CONS"}))]})};registerDivider("pros-cons-fold",ProsConsFold);const VSDivider=it=>{const{x:rt,y:lt,colorPrimary:ct,colorBg:ht}=it,dt=100,ut=100,ft=tinycolor(ct).lighten(20).toString();return jsxs(Group,{x:rt,y:lt,width:dt,height:ut,children:[jsxs(Defs,{children:[jsx("filter",{id:"vs-divider-glow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"})}),jsx(DropShadow,{})]}),jsx(Ellipse,{x:0,y:0,width:dt,height:ut,fill:ft,filter:"url(#vs-divider-glow-filter)",opacity:.6}),jsx(Ellipse,{x:0,y:0,width:dt,height:ut,fill:ct,"data-element-type":"shape"}),jsx("text",{x:dt/2,y:ut/2,fontSize:Math.min(dt,ut)/1.5,fontWeight:"bold",fill:ht,textAnchor:"middle",dominantBaseline:"central",filter:"url(#drop-shadow)",children:"VS"})]})};registerDivider("vs",VSDivider);const CompareBinaryHorizontal=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=20,groupGap:dt=20,opposite:ut=!0,flipped:ft=!0,dividerType:pt="vs",options:gt}=it,{title:mt,desc:xt,items:yt=[]}=ct,bt=rt?jsx(rt,{title:mt,desc:xt}):null;if(yt.length===0)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[bt,jsx(Group,{children:jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:0,y:0})})})]});const wt=yt[0]||{children:[]},Ct=yt[1]||{children:[]},vt=wt.children||[],St=Ct.children||[],_t=getThemeColors(gt.themeConfig),Tt=getElementBounds(jsx(lt,{indexes:[0,0],data:ct,datum:vt[0]||{}})),Et=getElementBounds(jsx(BtnAdd,{indexes:[0]})),At=getDividerComponent(pt),Mt=At?getElementBounds(jsx(At,{x:0,y:0,colorPrimary:_t.colorPrimary,colorBg:_t.colorBg,colorPositive:_t.colorPrimary,colorNegative:_t.colorPrimary})):{width:0,height:0},It=[],Lt=[],jt=[],Ot=Math.max(vt.length,St.length),Pt=Ot>0?Ot*(Tt.height+ht)-ht:0,Gt=5,kt=Ot>0?ht/2+Et.height/2:Et.height/2,Ht=Et.width+Gt,Xt=Ht+Tt.width+dt,zt=Xt+Mt.width+dt,Nt=ft?"flipped":"normal",Bt=ft?"normal":ut?"flipped":"normal";if(vt.forEach((Vt,Yt)=>{const Kt=kt+Yt*(Tt.height+ht),Dt=[0,Yt];It.push(jsx(lt,{indexes:Dt,datum:Vt,data:ct,x:Ht,y:Kt,positionH:Nt,positionV:"middle"})),Lt.push(jsx(BtnRemove,{indexes:Dt,x:Ht-Et.width-Gt,y:Kt+(Tt.height-Et.height)/2})),Yt<vt.length-1&&Lt.push(jsx(BtnAdd,{indexes:[0,Yt+1],x:Ht+(Tt.width-Et.width)/2,y:Kt+Tt.height+ht/2-Et.height/2}))}),vt.length>0){Lt.push(jsx(BtnAdd,{indexes:[0,0],x:Ht+(Tt.width-Et.width)/2,y:kt-ht/2-Et.height/2}));const Vt=kt+(vt.length-1)*(Tt.height+ht);Lt.push(jsx(BtnAdd,{indexes:[0,vt.length],x:Ht+(Tt.width-Et.width)/2,y:Vt+Tt.height+ht/2-Et.height/2}))}else yt.length>=1&&Lt.push(jsx(BtnAdd,{indexes:[0,0],x:Ht+(Tt.width-Et.width)/2,y:kt-Et.height/2}));if(St.forEach((Vt,Yt)=>{const Kt=kt+Yt*(Tt.height+ht),Dt=[1,Yt];It.push(jsx(lt,{indexes:Dt,datum:Vt,data:ct,x:zt,y:Kt,positionH:Bt,positionV:"middle"})),Lt.push(jsx(BtnRemove,{indexes:Dt,x:zt+Tt.width+Gt,y:Kt+(Tt.height-Et.height)/2})),Yt<St.length-1&&Lt.push(jsx(BtnAdd,{indexes:[1,Yt+1],x:zt+(Tt.width-Et.width)/2,y:Kt+Tt.height+ht/2-Et.height/2}))}),St.length>0){Lt.push(jsx(BtnAdd,{indexes:[1,0],x:zt+(Tt.width-Et.width)/2,y:kt-ht/2-Et.height/2}));const Vt=kt+(St.length-1)*(Tt.height+ht);Lt.push(jsx(BtnAdd,{indexes:[1,St.length],x:zt+(Tt.width-Et.width)/2,y:Vt+Tt.height+ht/2-Et.height/2}))}else yt.length>=2&&Lt.push(jsx(BtnAdd,{indexes:[1,0],x:zt+(Tt.width-Et.width)/2,y:kt-Et.height/2}));return yt.length<2&&Lt.push(jsx(BtnAdd,{indexes:[1],x:zt+(Tt.width-Et.width)/2,y:kt+(Pt-Et.height)/2})),At&&jt.push(jsx(At,{x:Xt,y:kt+(Pt-Mt.height)/2,colorPrimary:_t.colorPrimary,colorBg:_t.colorBg,colorPositive:getPaletteColor(gt,[0])||_t.colorPrimary,colorNegative:getPaletteColor(gt,[1])||_t.colorPrimary})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[bt,jsxs(Group,{children:[jsx(Group,{children:jt}),jsx(ItemsGroup,{children:It}),jsx(BtnsGroup,{children:Lt})]})]})};registerStructure("compare-binary-horizontal",{component:CompareBinaryHorizontal,composites:["title","item"]});const decorationWidthMap={none:5,"dot-line":100,"arc-dot":20,"split-line":5},CompareHierarchyLeftRight=it=>{var Nt,Bt;const{Title:rt,Items:lt,data:ct,gap:ht=20,groupGap:dt=0,decoration:ut="none",surround:ft=!0,flipRoot:pt=!1,flipLeaf:gt=!1,options:mt}=it,[xt,yt]=lt,{title:bt,desc:wt,items:Ct=[]}=ct,vt=rt?jsx(rt,{title:bt,desc:wt}):null,St=jsx(xt,{indexes:[0],data:ct,datum:ct.items[0],themeColors:{}}),_t=jsx(yt,{indexes:[0,0],data:ct,datum:((Bt=(Nt=Ct[0])==null?void 0:Nt.children)==null?void 0:Bt[0])||Ct[2]}),Tt=getElementBounds(St),Et=getElementBounds(_t),At=[],Mt=[],[It,Lt]=Ct,jt=(It==null?void 0:It.children)||[],Ot=(Lt==null?void 0:Lt.children)||[],Pt=Math.max(Tt.height,jt.length*(Et.height+ht)-ht,Ot.length*(Et.height+ht)-ht),Gt=decorationWidthMap[ut]||0,kt=Et.width+Gt,Ht=kt+Tt.width+dt,Xt=(Pt-Tt.height)/2;It&&At.push(jsx(xt,{indexes:[0],x:kt,y:Xt,data:ct,datum:It,positionH:pt?"normal":"flipped"})),Lt&&At.push(jsx(xt,{indexes:[1],x:Ht,y:Xt,data:ct,datum:Lt,positionH:pt?"flipped":"normal"}));const zt=(Vt,Yt,Kt)=>{if(ut==="none")return;const[Dt,Rt]=Yt,Wt=getPaletteColor(mt,Kt),qt={x:Dt,y:Rt,width:Et.width,height:Et.height,side:Vt,color:Wt||"#ccc",colorBg:mt.themeConfig.colorBg||"#fff"};ut==="split-line"?Mt.push(jsx(SplitLine,Ft({},qt))):ut==="dot-line"&&Mt.push(jsx(DotLine,Ft({},qt)))};if(ft){const Yt=(2*Tt.width+dt+Et.width)/2+Gt,Kt=kt+Tt.width+dt/2,Dt=Xt+Tt.height/2;jt.forEach((Rt,Wt)=>{const qt=jt.length*(Et.height+ht)-ht,Ut=(Pt-qt)/2+Wt*(Et.height+ht),Jt=Ut+Et.height/2-Dt,oe=Math.max(0,Yt*Yt-Jt*Jt),ie=Kt-Math.sqrt(oe)-Et.width/2;At.push(jsx(yt,{indexes:[0,Wt],datum:Rt,data:ct,x:ie,y:Ut,positionH:gt?"flipped":"normal"})),zt("left",[ie,Ut],[0,Wt])}),Ot.forEach((Rt,Wt)=>{const qt=Ot.length*(Et.height+ht)-ht,Ut=(Pt-qt)/2+Wt*(Et.height+ht),Jt=Ut+Et.height/2-Dt,oe=Math.max(0,Yt*Yt-Jt*Jt),ie=Kt+Math.sqrt(oe)-Et.width/2;At.push(jsx(yt,{indexes:[1,Wt],datum:Rt,data:ct,x:ie,y:Ut,positionH:gt?"normal":"flipped"})),zt("right",[ie,Ut],[1,Wt])})}else jt.forEach((Vt,Yt)=>{const Kt=jt.length*(Et.height+ht)-ht,Rt=(Pt-Kt)/2+Yt*(Et.height+ht),Wt=[0,Yt],qt=0;At.push(jsx(yt,{indexes:Wt,datum:Vt,data:ct,x:qt,y:Rt,positionH:gt?"flipped":"normal"})),zt("left",[qt,Rt],Wt)}),Ot.forEach((Vt,Yt)=>{const Kt=Ot.length*(Et.height+ht)-ht,Rt=(Pt-Kt)/2+Yt*(Et.height+ht),Wt=[1,Yt],qt=Ht+Tt.width+Gt;At.push(jsx(yt,{indexes:Wt,datum:Vt,data:ct,x:qt,y:Rt,positionH:gt?"normal":"flipped"})),zt("right",[qt,Rt],Wt)});return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{children:[jsx(ItemsGroup,{children:At}),jsx(Group,{width:0,height:0,children:Mt})]})]})},SplitLine=it=>{const{x:rt,y:lt,width:ct,height:ht,color:dt,colorBg:ut,side:ft}=it,pt=lt+ht,gt=`split-line-linear-gradient-${ft}`;return jsxs(Fragment,{children:[jsx(Defs,{children:jsx(LinearGradient,{id:gt,startColor:dt,stopColor:ut,direction:ft==="left"?"left-right":"right-left"})}),jsx(Rect,{x:rt,y:pt,width:ct,height:1,fill:`url(#${gt})`})]})},DotLine=it=>{const{x:rt,y:lt,side:ct,width:ht,height:dt,color:ut,colorBg:ft}=it,pt=6,gt=pt/3,mt=pt*2,xt=gt*2,yt=5,bt=ct==="left"?rt+ht+pt+yt:rt-pt-yt,wt=lt+dt/2,Ct=bt-gt,vt=wt-gt,St=80,_t=ct==="left"?St:-St,Tt=`dot-line-linear-gradient-${ct}`;return jsxs(Group,{children:[jsx(Defs,{children:jsx(LinearGradient,{id:Tt,startColor:ut,stopColor:ft,direction:ct==="left"?"left-right":"right-left"})}),jsxs(ShapesGroup,{children:[jsx(Ellipse,{x:bt-pt,y:wt-pt,width:mt,height:mt,fill:"none",strokeWidth:1,stroke:ut}),jsx(Ellipse,{x:Ct,y:vt,width:xt,height:xt,fill:ut})]}),jsx(Rect,{x:ct==="left"?bt:bt+_t,y:wt-.5,width:St,height:1,fill:`url(#${Tt})`})]})};registerStructure("compare-hierarchy-left-right",{component:CompareHierarchyLeftRight,composites:["title","item"]});const CompareHierarchyRow=it=>{var Ot,Pt;const{Title:rt,Items:lt,data:ct,gap:ht=0,itemGap:dt=20,columnWidth:ut=280,itemPadding:ft=5,showColumnBackground:pt=!0,columnBackgroundAlpha:gt=.08,options:mt}=it,[xt,yt]=lt,{title:bt,desc:wt,items:Ct=[]}=ct,vt=rt?jsx(rt,{title:bt,desc:wt}):null,St=getPaletteColors(mt),_t=[],Tt=[],Et=ut-ft*2,At=getElementBounds(jsx(xt,{indexes:[0],data:ct,datum:Ct[0],width:ut})),Mt=getElementBounds(jsx(yt,{indexes:[0,0],data:ct,datum:((Pt=(Ot=Ct[0])==null?void 0:Ot.children)==null?void 0:Pt[0])||{},width:Et})),It=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Lt=Math.max(...Ct.map(Gt=>{var kt;return((kt=Gt.children)==null?void 0:kt.length)||0}),0),jt=At.height+dt+Lt*(Mt.height+dt);if(Ct.forEach((Gt,kt)=>{const{children:Ht=[]}=Gt,Xt=kt*(ut+ht),zt=Xt,Nt=0;if(pt){const Kt=`${St[kt%St.length]}${Math.round(gt*255).toString(16).padStart(2,"0")}`;_t.push(jsx(Rect,{x:Xt,y:Nt,width:ut,height:jt,fill:Kt,rx:0,ry:0,"data-element-type":"shape"}))}_t.push(jsx(xt,{indexes:[kt],datum:Gt,data:ct,x:zt,y:Nt,width:ut})),Tt.push(jsx(BtnRemove,{indexes:[kt],x:zt+At.width-It.width-10,y:Nt+10})),kt===0&&Tt.push(jsx(BtnAdd,{indexes:[kt],x:zt+At.width/2-It.width/2,y:Nt-It.height-5}));const Bt=Nt+At.height+dt;Ht.forEach((Yt,Kt)=>{const Dt=Bt+Kt*(Mt.height+dt),Rt=zt+ft,Wt=[kt,Kt];_t.push(jsx(yt,{indexes:Wt,datum:Yt,data:ct,x:Rt,y:Dt,width:Et})),Tt.push(jsx(BtnRemove,{indexes:Wt,x:Rt+Mt.width-It.width-10,y:Dt+(Mt.height-It.height)/2})),Kt<Ht.length-1&&Tt.push(jsx(BtnAdd,{indexes:[kt,Kt+1],x:Rt+Mt.width/2-It.width/2,y:Dt+Mt.height-It.height/2}))});const Vt=zt+ft;if(Ht.length>0){const Yt=Bt+Ht.length*(Mt.height+dt);Tt.push(jsx(BtnAdd,{indexes:[kt,Ht.length],x:Vt+Mt.width/2-It.width/2,y:Yt-Mt.height/2-It.height/2}))}else Tt.push(jsx(BtnAdd,{indexes:[kt,0],x:Vt+Mt.width/2-It.width/2,y:Bt-dt/2-It.height/2}))}),Ct.length>0){const Gt=Ct.length*(ut+ht);Tt.push(jsx(BtnAdd,{indexes:[Ct.length],x:Gt-ht/2-It.width/2,y:-It.height-5}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{children:[jsx(ItemsGroup,{children:_t}),jsx(BtnsGroup,{children:Tt})]})]})};registerStructure("compare-hierarchy-row",{component:CompareHierarchyRow,composites:["title","item"]});const e=Object.assign,i={getId:it=>it.id||it.name,getPreH:it=>it.preH||0,getPreV:it=>it.preV||0,getHGap:it=>it.hgap||18,getVGap:it=>it.vgap||18,getChildren:it=>it.children,getHeight:it=>it.height||36,getWidth(it){const rt=it.label||" ";return it.width||18*rt.split("").length}};class n{constructor(rt,lt){if(this.x=0,this.y=0,this.depth=0,this.children=[],this.hgap=0,this.vgap=0,rt instanceof n||"x"in rt&&"y"in rt&&"children"in rt){const dt=rt;return this.data=dt.data,this.id=dt.id,this.x=dt.x,this.y=dt.y,this.width=dt.width,this.height=dt.height,this.depth=dt.depth,this.children=dt.children,this.parent=dt.parent,this.hgap=dt.hgap,this.vgap=dt.vgap,this.preH=dt.preH,void(this.preV=dt.preV)}this.data=rt;const ct=lt.getHGap(rt),ht=lt.getVGap(rt);this.preH=lt.getPreH(rt),this.preV=lt.getPreV(rt),this.width=lt.getWidth(rt),this.height=lt.getHeight(rt),this.width+=this.preH,this.height+=this.preV,this.id=lt.getId(rt),this.addGap(ct,ht)}isRoot(){return this.depth===0}isLeaf(){return this.children.length===0}addGap(rt,lt){this.hgap+=rt,this.vgap+=lt,this.width+=2*rt,this.height+=2*lt}eachNode(rt){let lt,ct=[this];for(;lt=ct.shift();)rt(lt),ct=lt.children.concat(ct)}DFTraverse(rt){this.eachNode(rt)}BFTraverse(rt){let lt,ct=[this];for(;lt=ct.shift();)rt(lt),ct=ct.concat(lt.children)}getBoundingBox(){const rt={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(lt=>{rt.left=Math.min(rt.left,lt.x),rt.top=Math.min(rt.top,lt.y),rt.width=Math.max(rt.width,lt.x+lt.width),rt.height=Math.max(rt.height,lt.y+lt.height)}),rt}translate(rt=0,lt=0){this.eachNode(ct=>{ct.x+=rt,ct.y+=lt,ct.x+=ct.preH,ct.y+=ct.preV})}right2left(){const rt=this.getBoundingBox();this.eachNode(lt=>{lt.x=lt.x-2*(lt.x-rt.left)-lt.width}),this.translate(rt.width,0)}bottom2top(){const rt=this.getBoundingBox();this.eachNode(lt=>{lt.y=lt.y-2*(lt.y-rt.top)-lt.height}),this.translate(0,rt.height)}}function h(it,rt={},lt){rt=e({},i,rt);const ct=new n(it,rt),ht=[ct];let dt;if(!lt&&!it.collapsed){for(;dt=ht.shift();)if(!dt.data.collapsed){const ut=rt.getChildren(dt.data),ft=ut?ut.length:0;if(dt.children=new Array(ft),ut&&ft)for(let pt=0;pt<ft;pt++){const gt=new n(ut[pt],rt);dt.children[pt]=gt,ht.push(gt),gt.parent=dt,gt.depth=dt.depth+1}}}return ct}class r{constructor(rt,lt={}){this.options=lt,this.rootNode=h(rt,lt)}execute(){throw new Error("please override this method")}}function g(it,rt){const lt=h(it.data,rt,!0),ct=h(it.data,rt,!0),ht=it.children.length,dt=Math.round(ht/2),ut=rt.getSide||function(ft,pt){return pt<dt?"right":"left"};for(let ft=0;ft<ht;ft++){const pt=it.children[ft];ut(pt,ft)==="right"?ct.children.push(pt):lt.children.push(pt)}return lt.eachNode(ft=>{ft.isRoot()||(ft.side="left")}),ct.eachNode(ft=>{ft.isRoot()||(ft.side="right")}),{left:lt,right:ct}}const u=["LR","RL","TB","BT","H","V"],p=["LR","RL","H"],x=u[0];function y(it,rt,lt){const ct=rt.direction||x;if(rt.isHorizontal=(dt=>p.indexOf(dt)>-1)(ct),u.indexOf(ct)===-1)throw new TypeError(`Invalid direction: ${ct}`);if(ct===u[0])lt(it,rt);else if(ct===u[1])lt(it,rt),it.right2left();else if(ct===u[2])lt(it,rt);else if(ct===u[3])lt(it,rt),it.bottom2top();else if(ct===u[4]||ct===u[5]){const{left:dt,right:ut}=g(it,rt);lt(dt,rt),lt(ut,rt),rt.isHorizontal?dt.right2left():dt.bottom2top(),ut.translate(dt.x-ut.x,dt.y-ut.y),it.x=dt.x,it.y=ut.y;const ft=it.getBoundingBox();rt.isHorizontal?ft.top<0&&it.translate(0,-ft.top):ft.left<0&&it.translate(-ft.left,0)}let ht=rt.fixedRoot;return ht===void 0&&(ht=!0),ht&&it.translate(-(it.x+it.width/2+it.hgap),-(it.y+it.height/2+it.vgap)),function(dt,ut){if(ut.radial){const[ft,pt]=ut.isHorizontal?["x","y"]:["y","x"],gt={x:1/0,y:1/0},mt={x:-1/0,y:-1/0};let xt=0;dt.DFTraverse(wt=>{xt++;const{x:Ct,y:vt}=wt;gt.x=Math.min(gt.x,Ct),gt.y=Math.min(gt.y,vt),mt.x=Math.max(mt.x,Ct),mt.y=Math.max(mt.y,vt)});const yt=mt[pt]-gt[pt];if(yt===0)return;const bt=2*Math.PI/xt;dt.DFTraverse(wt=>{const Ct=wt[pt],vt=gt[pt],St=wt[ft],_t=dt[ft],Tt=(Ct-vt)/yt*(2*Math.PI-bt)+bt,Et=St-_t;wt.x=Math.cos(Tt)*Et,wt.y=Math.sin(Tt)*Et})}}(it,rt),it}function D(it,rt){let lt=0;return it.children.length?it.children.forEach(ct=>{lt+=D(ct,rt)}):lt=it.height,it._subTreeSep=rt.getSubTreeSep(it.data),it.totalHeight=Math.max(it.height,lt)+2*it._subTreeSep,it.totalHeight}function Y(it){const rt=it.children,lt=rt.length;if(lt){rt.forEach(ft=>{Y(ft)});const ct=rt[0],ht=rt[lt-1],dt=ht.y-ct.y+ht.height;let ut=0;if(rt.forEach(ft=>{ut+=ft.totalHeight}),dt>it.height)it.y=ct.y+dt/2-it.height/2;else if(rt.length!==1||it.height>ut){const ft=it.y+(it.height-dt)/2-ct.y;rt.forEach(pt=>{pt.translate(0,ft)})}else it.y=(ct.y+ct.height/2+ht.y+ht.height/2)/2-it.height/2}}const G={getSubTreeSep:()=>0};function I(it,rt={}){return rt=e({},G,rt),it.parent={x:0,width:0,height:0,y:0},it.BFTraverse(lt=>{lt.x=lt.parent.x+lt.parent.width}),it.parent=void 0,D(it,rt),it.startY=0,it.y=it.totalHeight/2-it.height/2,it.eachNode(lt=>{const ct=lt.children,ht=ct.length;if(ht){const dt=ct[0];if(dt.startY=lt.startY+lt._subTreeSep,ht===1)dt.y=lt.y+lt.height/2-dt.height/2;else{dt.y=dt.startY+dt.totalHeight/2-dt.height/2;for(let ut=1;ut<ht;ut++){const ft=ct[ut];ft.startY=ct[ut-1].startY+ct[ut-1].totalHeight,ft.y=ft.startY+ft.totalHeight/2-ft.height/2}}}}),Y(it),it}class P extends r{execute(){return y(this.rootNode,this.options,I)}}const A={};function F(it,rt){const lt=e({},A,rt);return new P(it,lt).execute()}const DEFAULT_LEVEL_GAP=60,DEFAULT_NODE_GAP=14,LAYOUT_PADDING=30,DEFAULT_EDGE_ALIGN="center",DEFAULT_EDGE_TYPE="curved",DEFAULT_EDGE_WIDTH=2,DEFAULT_COLOR_MODE="node",DEFAULT_EDGE_COLOR_MODE="solid",annotateTree=(it,rt=[],lt=0)=>{var ht,dt;const ct=[...rt,lt];return te(Ft({},it),{_indexes:ct,children:(dt=(ht=it.children)==null?void 0:ht.map((ut,ft)=>annotateTree(ut,ct,ft)))!=null?dt:[]})},collectNodes=(it,rt,lt,ct)=>{var ut;var ht;rt.push(it),(ut=(ht=it.data)._flatIndex)!=null||(ht._flatIndex=rt.length-1),ct&&lt.push({parent:ct,child:it});const dt=it.children;dt==null||dt.forEach(ft=>collectNodes(ft,rt,lt,it))},createCurvePath=(it,rt,lt,ct)=>{const ht=Math.abs(lt-it)/2,dt=lt>it?it+ht:it-ht,ut=lt>it?lt-ht:lt+ht;return`M ${it} ${rt} C ${dt} ${rt} ${ut} ${ct} ${lt} ${ct}`},createStraightPath=(it,rt,lt,ct)=>`M ${it} ${rt} L ${lt} ${ct}`,getEdgeAnchors=(it,rt,lt,ct=DEFAULT_EDGE_ALIGN)=>{const ht=gt=>Math.max(0,Math.min(1,gt)),ut=(gt=>gt==="top"?0:gt==="bottom"?1:gt==="center"?.5:ht(gt))(ct),ft=it.y+it.height*ut,pt=rt.y+rt.height*ut;return lt==="left"?{sx:it.x,sy:ft,tx:rt.x+rt.width,ty:pt}:{sx:it.x+it.width,sy:ft,tx:rt.x,ty:pt}},HierarchyMindmap=it=>{var Dt,Rt;const{Title:rt,Items:lt,data:ct,levelGap:ht=DEFAULT_LEVEL_GAP,nodeGap:dt=DEFAULT_NODE_GAP,edgeAlign:ut=DEFAULT_EDGE_ALIGN,colorMode:ft=DEFAULT_COLOR_MODE,edgeColorMode:pt=DEFAULT_EDGE_COLOR_MODE,edgeType:gt=DEFAULT_EDGE_TYPE,edgeWidth:mt=DEFAULT_EDGE_WIDTH,options:xt}=it,{title:yt,desc:bt,items:wt=[]}=ct,Ct=rt?jsx(rt,{title:yt,desc:bt}):null,vt=getColorPrimary(xt),St=getElementBounds(jsx(BtnAdd,{indexes:[0]}));if(!wt.length||!(lt!=null&&lt.length))return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Ct,jsx(Group,{children:jsx(BtnAdd,{indexes:[0],x:0,y:0})})]});const _t=annotateTree(wt[0]),Tt=new WeakMap,Et=new WeakMap,At=new WeakMap,Mt=(Wt,qt)=>getHierarchyColorIndexes({depth:qt,originalIndexes:Wt._indexes,flatIndex:Wt._flatIndex},ft),It=(Wt,qt)=>{const Zt=At.get(Wt);if(Zt)return Zt;const Ut=Mt(Wt,qt),Qt=getPaletteColor(xt,Ut),Jt=getThemeColors({colorPrimary:Qt},xt);return At.set(Wt,Jt),Et.set(Wt,Qt),Jt},Lt=Wt=>{const qt=Tt.get(Wt);if(qt)return qt;const Zt=Math.max(Wt._indexes.length-1,0),Ut=getItemComponent(lt,Zt),Qt=getElementBounds(jsx(Ut,{indexes:Wt._indexes,data:ct,datum:Wt,positionH:"center",positionV:"middle",themeColors:It(Wt,Zt)}));return Tt.set(Wt,Qt),Qt},jt=F(_t,{direction:"H",getSide:(Wt,qt)=>{if(!Wt.parent)return"right";const Zt=(Wt.parent.children||[]).indexOf(Wt);return(Zt>=0?Zt:qt)%2===0?"left":"right"},getWidth:Wt=>Lt(Wt).width,getHeight:Wt=>Lt(Wt).height,getHGap:()=>ht,getVGap:()=>dt}),Ot=[],Pt=[];collectNodes(jt,Ot,Pt);const Gt=Ot.length>0?Math.min(...Ot.map(Wt=>Wt.x)):0,kt=Ot.length>0?Math.min(...Ot.map(Wt=>Wt.y)):0,Ht=LAYOUT_PADDING-Gt,Xt=LAYOUT_PADDING-kt,zt=[],Nt=[],Bt=[],Vt=[],Yt=new WeakMap;Ot.forEach(Wt=>{var ie,le;const qt=Wt.data,Zt=Lt(qt),Ut=Wt.x+Ht+((ie=Wt.hgap)!=null?ie:0),Qt=Wt.y+Xt+((le=Wt.vgap)!=null?le:0),Jt=getItemComponent(lt,Wt.depth),oe=Wt.depth===0?"center":Wt.side==="left"?"flipped":"normal",ce=It(qt,Wt.depth);Bt.push(jsx(Jt,{indexes:qt._indexes,data:ct,datum:qt,x:Ut,y:Qt,positionH:oe,positionV:"middle",themeColors:ce})),Yt.set(Wt,{x:Ut,y:Qt,width:Zt.width,height:Zt.height,centerX:Ut+Zt.width/2,centerY:Qt+Zt.height/2})}),Pt.forEach(Wt=>{var fe,pe,be,me;const{parent:qt,child:Zt}=Wt,Ut=Yt.get(Zt),Qt=Yt.get(qt);if(!Ut||!Qt)return;const Jt=Zt.data,{sx:oe,sy:ce,tx:ie,ty:le}=getEdgeAnchors(Qt,Ut,Zt.side,ut),he=(fe=Et.get(Jt))!=null?fe:getPaletteColor(xt,Mt(Jt,Zt.depth)),se=(pe=Et.get(qt.data))!=null?pe:getPaletteColor(xt,Mt(qt.data,qt.depth)),ee=gt==="straight"?createStraightPath(oe,ce,ie,le):createCurvePath(oe,ce,ie,le),ne=`edge-gradient-${Jt._indexes.join("-")}`;Nt.push(jsx(Path$1,{d:ee,stroke:pt==="gradient"?`url(#${ne})`:he!=null?he:vt,strokeWidth:mt,fill:"none"})),pt==="gradient"&&zt.push(jsxs("linearGradient",{id:ne,gradientUnits:"userSpaceOnUse",x1:oe,y1:ce,x2:ie,y2:le,children:[jsx("stop",{offset:"0%",stopColor:se!=null?se:vt}),jsx("stop",{offset:"100%",stopColor:he!=null?he:vt})]}));const ue=(me=(be=Jt.children)==null?void 0:be.length)!=null?me:0,ye=[...Jt._indexes,ue],ge=Ut.x+(Ut.width-St.width)/2,de=Ut.y+Ut.height+8,ae=de+St.height+6;Zt.depth>0&&Vt.push(jsx(BtnRemove,{indexes:Jt._indexes,x:ge,y:de})),Vt.push(jsx(BtnAdd,{indexes:ye,x:ge,y:ae}))});const Kt=Yt.get(jt);if(Kt){const Wt=jt.data,qt=(Rt=(Dt=Wt.children)==null?void 0:Dt.length)!=null?Rt:0,Zt=[...Wt._indexes,qt],Ut=Kt.x+(Kt.width-St.width)/2,Qt=Kt.y+Kt.height+8+St.height+6;Vt.push(jsx(BtnAdd,{indexes:Zt,x:Ut,y:Qt}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Ct,jsxs(Group,{children:[zt.length>0?jsx(Defs,{children:zt}):null,jsx(Group,{children:Nt}),jsx(ItemsGroup,{children:Bt}),jsx(BtnsGroup,{children:Vt})]})]})};registerStructure("hierarchy-mindmap",{component:HierarchyMindmap,composites:["title","item"]});const applyAlpha=(it,rt)=>{if(it[0]!=="#"||it.length!==7)return it;const lt=Math.max(0,Math.min(1,rt)),ct=Math.round(lt*255).toString(16).padStart(2,"0");return`${it}${ct}`},normalizeLabel=it=>it==null?"":String(it),measureText=(it,rt,lt)=>getElementBounds(jsx(Text,{fontSize:rt,fontWeight:lt,children:it})),getMaxTextBounds=(it,rt,lt,ct=" ")=>{const ht=measureText(ct,rt,lt);let dt=ht.width,ut=ht.height;return it.forEach(ft=>{const pt=measureText(ft||" ",rt,lt);dt=Math.max(dt,pt.width),ut=Math.max(ut,pt.height)}),{width:dt,height:ut}},getPillDimensions=(it,rt,lt,ct)=>{const ht=getMaxTextBounds(it,rt,"normal","Item");return{pillWidth:ht.width+lt*2,pillHeight:ht.height+ct*2}},HierarchyStructure=it=>{const{Title:rt,data:lt,options:ct,rowGap:ht=20,labelGap:dt=20,groupGap:ut=20,pillGap:ft=14,pillColumns:pt=2,ungroupedColumns:gt=6,layerLabelPosition:mt="left",rowPadding:xt=20,groupPadding:yt=16,labelPaddingX:bt=28,labelPaddingY:wt=16,pillPaddingX:Ct=18,pillPaddingY:vt=10,labelFontSize:St=20,groupTitleFontSize:_t=18,pillFontSize:Tt=16,groupTitleGap:Et=10,rowRadius:At=12,groupRadius:Mt=10,pillRadius:It=12}=it,{title:Lt,desc:jt,items:Ot=[]}=lt,Pt=rt?jsx(rt,{title:Lt,desc:jt}):null;if(Ot.length===0)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Pt,jsx(Group,{children:jsx(ItemsGroup,{})})]});const Gt=getThemeColors(ct.themeConfig),kt=[],Ht=[],Xt=mt==="right",zt=.12,Nt=.55,Bt=.08,Vt=.4,Yt=.06,Kt=.35,Dt=Ot.map(ie=>{const le=normalizeLabel(ie.label),he=measureText(le||" ",St,"bold"),se=he.width+bt*2,ee=he.height+wt*2,ne=ie.children||[];if(ne.some(me=>{var Ce;return(((Ce=me.children)==null?void 0:Ce.length)||0)>0})){const me=[];ne.forEach(Se=>{(Se.children||[]).forEach(Oe=>{me.push(normalizeLabel(Oe.label))})});const{pillWidth:Ce,pillHeight:Te}=getPillDimensions(me,Tt,Ct,vt),Ae=ne.map(Se=>{const Oe=normalizeLabel(Se.label),we=measureText(Oe||" ",_t,"bold"),Me=Se.children||[],He=Me.length>0?Math.min(pt,Me.length):0,xe=He>0?Math.ceil(Me.length/He):0,Ie=He>0?He*Ce+(He-1)*ft:0,_e=xe>0?xe*Te+(xe-1)*ft:0,je=Math.max(we.width,Ie)+yt*2,Re=yt*2+we.height+(xe>0?Et+_e:0);return{label:Oe,children:Me,width:je,height:Re,titleHeight:we.height,columns:He,contentWidth:Ie,pillWidth:Ce,pillHeight:Te}}),Le=Ae.reduce((Se,Oe)=>Se+Oe.width,0)+(Ae.length>1?(Ae.length-1)*ut:0),Ee=Ae.reduce((Se,Oe)=>Math.max(Se,Oe.height),0);return{label:le,labelWidth:se,labelHeight:ee,hasGroups:!0,children:ne,groupMetrics:Ae,contentInnerWidth:Le,contentInnerHeight:Ee}}const ye=ne.map(me=>normalizeLabel(me.label)),{pillWidth:ge,pillHeight:de}=getPillDimensions(ye,Tt,Ct,vt),ae=ne.length>0?Math.min(gt,ne.length):0,fe=ae>0?Math.ceil(ne.length/ae):0,pe=ae>0?ae*ge+(ae-1)*ft:0,be=fe>0?fe*de+(fe-1)*ft:0;return{label:le,labelWidth:se,labelHeight:ee,hasGroups:!1,children:ne,pillWidth:ge,pillHeight:de,columns:ae,contentInnerWidth:pe,contentInnerHeight:be}}),Rt=Dt.reduce((ie,le)=>Math.max(ie,le.labelWidth),0),Wt=Dt.reduce((ie,le)=>Math.max(ie,le.contentInnerWidth),0),qt=ie=>{const le=getPaletteColor(ct,[ie])||Gt.colorPrimary||"#6c7dff";return{rowFill:applyAlpha(le,zt),rowStroke:applyAlpha(le,Nt),groupFill:applyAlpha(le,Bt),groupStroke:applyAlpha(le,Vt),pillFill:applyAlpha(le,Yt),pillStroke:applyAlpha(le,Kt)}},Zt=(ie,le,he,se,ee,ne,ue,ye,ge,de,ae,fe,pe,be)=>{kt.push(jsx(Rect,{x:he,y:ue,width:ee,height:ye,fill:pe,stroke:be,rx:At,ry:At,"data-element-type":"shape"})),kt.push(jsx(Rect,{x:ge,y:de,width:ae,height:fe,fill:pe,stroke:be,rx:At,ry:At,"data-element-type":"shape"})),Ht.push(jsx(Text,{x:he,y:se,width:ee,height:ne,fontSize:St,fontWeight:"bold",alignHorizontal:"center",alignVertical:"middle",fill:Gt.colorText,"data-element-type":"item-label","data-indexes":le,children:ie}))},Ut=(ie,le,he,se)=>{const ee=ie.groupMetrics||[],ne=ie.label,ue=[le],ye=Rt,ge=ie.labelHeight,de=ie.contentInnerHeight,ae=Math.max(0,Wt-ie.contentInnerWidth),fe=ee.length>0?ae/ee.length:0,be=ie.contentInnerWidth+(ee.length>0?ae:0)+xt*2,me=de+xt*2,Ce=Math.max(ge,me),Te=Xt?0:ye+dt,Ae=Xt?Te+be+dt:0,Le=he+(Ce-ge)/2,Ee=he+(Ce-me)/2;Zt(ne,ue,Ae,Le,ye,ge,he,Ce,Te,Ee,be,me,se.rowFill,se.rowStroke);let Se=Te+xt;return ee.forEach((we,Me)=>{const He=[...ue,Me],xe=we.width+fe,Ie=Ee+xt+(de-we.height)/2;kt.push(jsx(Rect,{x:Se,y:Ie,width:xe,height:we.height,fill:se.groupFill,stroke:se.groupStroke,rx:Mt,ry:Mt,"data-element-type":"shape"}));const _e=we.children.length>0,$e=_e?Ie+yt:Ie,je=_e?we.titleHeight:we.height,Re=_e?"top":"middle";if(Ht.push(jsx(Text,{x:Se+yt,y:$e,width:xe-yt*2,height:je,fontSize:_t,fontWeight:"bold",alignHorizontal:"center",alignVertical:Re,fill:Gt.colorText,"data-element-type":"item-label","data-indexes":He,children:we.label})),we.columns>0){const Ne=xe-yt*2,ze=Ne-we.contentWidth,Be=ze>0?ze/we.columns:0,Fe=we.pillWidth+Be,Xe=we.columns*Fe+(we.columns-1)*ft,ke=(Ne-Xe)/2,De=Se+yt+Math.max(0,ke),We=Ie+yt+we.titleHeight+Et;we.children.forEach((Ge,Ve)=>{const en=[...He,Ve],nn=Math.floor(Ve/we.columns),rn=Ve%we.columns,qe=De+rn*(Fe+ft),Ke=We+nn*(we.pillHeight+ft),Ze=Math.min(It,we.pillHeight/2);kt.push(jsx(Rect,{x:qe,y:Ke,width:Fe,height:we.pillHeight,fill:se.pillFill,stroke:se.pillStroke,rx:Ze,ry:Ze,"data-element-type":"shape"})),Ht.push(jsx(Text,{x:qe,y:Ke,width:Fe,height:we.pillHeight,fontSize:Tt,fontWeight:"normal",alignHorizontal:"center",alignVertical:"middle",fill:Gt.colorText,"data-element-type":"item-label","data-indexes":en,children:normalizeLabel(Ge.label)}))})}Se+=xe+ut}),{rowWidth:Xt?Ae+ye:Te+be,rowHeight:Ce}},Qt=(ie,le,he,se)=>{const ee=ie.label,ne=[le],ue=Rt,ye=ie.labelHeight,ge=ie.contentInnerHeight,de=Math.max(0,Wt-ie.contentInnerWidth),ae=ie.columns||0,fe=ie.pillWidth||0,pe=ie.pillHeight||0,be=ae>0?de/ae:0,me=fe+be,Te=(ae>0?ae*me+(ae-1)*ft:0)+xt*2,Ae=ge+xt*2,Le=Math.max(ye,Ae),Ee=Xt?0:ue+dt,Se=Xt?Ee+Te+dt:0,Oe=he+(Le-ye)/2,we=he+(Le-Ae)/2;if(Zt(ee,ne,Se,Oe,ue,ye,he,Le,Ee,we,Te,Ae,se.rowFill,se.rowStroke),ae>0){const He=Ee+xt,xe=we+xt;(ie.children||[]).forEach((_e,$e)=>{const je=[...ne,$e],Re=Math.floor($e/ae),Ne=$e%ae,ze=He+Ne*(me+ft),Be=xe+Re*(pe+ft),Fe=Math.min(It,pe/2);kt.push(jsx(Rect,{x:ze,y:Be,width:me,height:pe,fill:se.pillFill,stroke:se.pillStroke,rx:Fe,ry:Fe,"data-element-type":"shape"})),Ht.push(jsx(Text,{x:ze,y:Be,width:me,height:pe,fontSize:Tt,fontWeight:"normal",alignHorizontal:"center",alignVertical:"middle",fill:Gt.colorText,"data-element-type":"item-label","data-indexes":je,children:normalizeLabel(_e.label)}))})}return{rowWidth:Xt?Se+ue:Ee+Te,rowHeight:Le}};let Jt=0,oe=0;Dt.forEach((ie,le)=>{const he=qt(le),{rowWidth:se,rowHeight:ee}=ie.hasGroups?Ut(ie,le,Jt,he):Qt(ie,le,Jt,he);oe=Math.max(oe,se),Jt+=ee+ht});const ce=Math.max(Jt-ht,0);return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Pt,jsxs(Group,{width:oe,height:ce,children:[jsx(Group,{children:kt}),jsx(ItemsGroup,{children:Ht})]})]})};registerStructure("hierarchy-structure",{component:HierarchyStructure,composites:["title"]});const distributedPadding=(it,rt)=>{const lt=Math.max(0,rt/2-1);return Math.min(it,lt)},HierarchyTree=it=>{const{Title:rt,Items:lt,data:ct,levelGap:ht=80,nodeGap:dt=60,edgeType:ut="straight",edgeColorMode:ft="gradient",edgeWidth:pt=3,edgeStyle:gt="solid",edgeDashPattern:mt="5,5",edgeCornerRadius:xt=0,edgeOffset:yt=0,edgeOrigin:bt="center",edgeOriginPadding:wt=20,edgeMarker:Ct="none",markerSize:vt=12,colorMode:St="branch",orientation:_t="top-bottom",options:Tt}=it,Et=_t==="left-right"||_t==="right-left",At=_t==="bottom-top"||_t==="right-left"?-1:1,{title:Mt,desc:It}=ct,Lt=getColorPrimary(Tt),jt=se=>{var ne;const ee=[...se];return(ne=ee[0])!=null&&ne.children||(ee[0]=te(Ft({},ee[0]),{children:ee.slice(1)}),ee.splice(1)),ee},Ot=(se,ee,ne,ue,ye,ge="vertical")=>{const de=ge==="vertical",ae=de?ue-ee:ne-se,fe=de?ne-se:ue-ee,pe=ae===0?1:Math.sign(ae),be=fe===0?1:Math.sign(fe),me=de?ee+ae/2:se+ae/2,Ce=Math.min(ye,Math.abs(ae)/2,Math.abs(fe)/2);return Ce===0?de?`M ${se} ${ee} L ${se} ${me} L ${ne} ${me} L ${ne} ${ue}`:`M ${se} ${ee} L ${me} ${ee} L ${me} ${ue} L ${ne} ${ue}`:de?`M ${se} ${ee}
              L ${se} ${me-pe*Ce}
              Q ${se} ${me} ${se+be*Ce} ${me}
              L ${ne-be*Ce} ${me}
              Q ${ne} ${me} ${ne} ${me+pe*Ce}
              L ${ne} ${ue}`:`M ${se} ${ee}
            L ${me-pe*Ce} ${ee}
            Q ${me} ${ee} ${me} ${ee+be*Ce}
            L ${me} ${ue-be*Ce}
            Q ${me} ${ue} ${me+pe*Ce} ${ue}
            L ${ne} ${ue}`},Pt=se=>{const{x:ee,y:ne}=se;return Et?{x:ne*At,y:ee}:{x:ee,y:ne*At}},Gt=(se,ee,ne)=>{const{x:ue,y:ye}=Pt(se),ge=ue+ne.x,de=ye+ne.y,ae=de+ee.height/2;return{centerX:ge,centerY:ae,left:ge-ee.width/2,right:ge+ee.width/2,top:de,bottom:de+ee.height}},kt=se=>{var ue;if(!se.length)return null;const ee=se[0],ne=(ye,ge=[],de=0)=>{var fe,pe;const ae=[...ge,de];return te(Ft({},ye),{_originalIndex:ae,_depth:ae.length-1,children:(pe=(fe=ye.children)==null?void 0:fe.map((be,me)=>ne(be,ae,me)))!=null?pe:[]})};return(ue=ee.children)!=null&&ue.length?ne(ee):te(Ft({},ee),{_originalIndex:[0],_depth:0,children:se.slice(1).map((ye,ge)=>te(Ft({},ye),{_originalIndex:[ge+1],_depth:1}))})},Ht=se=>{var ge,de;let ee=0,ne=0;const ue=new Map,ye=new Map;se.each(ae=>{ye.has(ae.depth)||ye.set(ae.depth,ae.data)});for(let ae=0;ae<se.height+1;ae++){const fe=getItemComponent(lt,ae),pe=(ge=ye.get(ae))!=null?ge:{},be=(de=pe._originalIndex)!=null?de:Array(ae+1).fill(0),me=getElementBounds(jsx(fe,{indexes:be,data:ct,datum:pe,positionH:"center"}));ue.set(ae,me),ee=Math.max(ee,me.width),ne=Math.max(ne,me.height)}return{levelBounds:ue,maxWidth:ee,maxHeight:ne}},Xt=(se,ee,ne,ue,ye,ge)=>{const{depth:de,data:ae,parent:fe}=se,pe=ae._originalIndex,be=getItemComponent(lt,de),me=ee.get(de),Ce=Gt(se,me,ue),Te=Ce.left,Ae=Ce.top,Le={items:[],btns:[],deco:[]},Ee=getHierarchyColorIndexes({depth:de,originalIndexes:pe,flatIndex:ae._flatIndex},St),Se=getPaletteColor(Tt,Ee),Oe=getThemeColors({colorPrimary:Se},Tt);if(Le.items.push(jsx(be,{indexes:pe,datum:ae,data:ct,x:Te,y:Ae,positionH:"center",themeColors:Oe})),Le.btns.push(jsx(BtnRemove,{indexes:pe,x:Te+(me.width-ne.width)/2,y:Ae+me.height+5}),jsx(BtnAdd,{indexes:[...pe,0],x:Te+(me.width-ne.width)/2,y:Ae+me.height+ne.height+10})),fe){const we=ee.get(fe.depth),Me=Gt(fe,we,ue),He=ge.filter(ke=>ke.parent===fe),xe=He.findIndex(ke=>ke===se),Ie=He.length;let _e,$e;if(bt==="distributed"&&Ie>1)if(Et){const ke=distributedPadding(wt,we.height),De=Me.top+ke,Ge=(Me.bottom-ke-De)/Ie;$e=De+Ge*xe+Ge/2,_e=(At>0?Me.right:Me.left)+yt*At}else{const ke=distributedPadding(wt,we.width),De=Me.left+ke,Ge=(Me.right-ke-De)/Ie;_e=De+Ge*xe+Ge/2,$e=(At>0?Me.bottom:Me.top)+yt*At}else _e=Et?(At>0?Me.right:Me.left)+yt*At:Me.centerX,$e=Et?Me.centerY:(At>0?Me.bottom:Me.top)+yt*At;const je=Et?(At>0?Ce.left:Ce.right)-yt*At:Ce.centerX,Re=Et?Ce.centerY:(At>0?Ce.top:Ce.bottom)-yt*At;let Ne=je,ze=Re;Ct==="arrow"&&(Et?Ne-=vt*At:ze-=vt*At);let Be;if(ut==="curved")if(Et){const ke=_e+(Ne-_e)/2;Be=`M ${_e} ${$e} C ${ke} ${$e}, ${ke} ${ze}, ${Ne} ${ze}`}else{const ke=$e+(ze-$e)/2;Be=`M ${_e} ${$e} C ${_e} ${ke}, ${Ne} ${ke}, ${Ne} ${ze}`}else if(xt>0)Be=Ot(_e,$e,Ne,ze,xt,Et?"horizontal":"vertical");else if(Et){const ke=_e+(Ne-_e)/2;Be=`M ${_e} ${$e} L ${ke} ${$e} L ${ke} ${ze} L ${Ne} ${ze}`}else{const ke=$e+(ze-$e)/2;Be=`M ${_e} ${$e} L ${_e} ${ke} L ${Ne} ${ke} L ${Ne} ${ze}`}let Fe=Lt;if(ft==="gradient"){const ke=getHierarchyColorIndexes({depth:fe.depth,originalIndexes:fe.data._originalIndex,flatIndex:fe.data._flatIndex},St),De=getHierarchyColorIndexes({depth:de,originalIndexes:pe,flatIndex:ae._flatIndex},St),We=getPaletteColor(Tt,ke),Ge=getPaletteColor(Tt,De),Ve=`gradient-${fe.data._originalIndex.join("-")}-${pe.join("-")}`;ye.push(jsxs("linearGradient",{id:Ve,x1:_e,y1:$e,x2:Ne,y2:ze,gradientUnits:"userSpaceOnUse",children:[jsx("stop",{offset:"0%",stopColor:We}),jsx("stop",{offset:"100%",stopColor:Ge})]})),Fe=`url(#${Ve})`}const Xe=gt==="dashed"?mt:"";if(Le.deco.push(jsx(Path$1,{d:Be,stroke:Fe,strokeWidth:pt,strokeDasharray:Xe,fill:"none"})),Ct==="arrow"){const ke=ft==="gradient"?getPaletteColor(Tt,Ee):getColorPrimary(Tt),De=Et?[{x:je,y:Re},{x:je-vt*At,y:Re-vt/2},{x:je-vt*At,y:Re+vt/2}]:[{x:je,y:Re},{x:je-vt/2,y:Re-vt*At},{x:je+vt/2,y:Re-vt*At}];Le.deco.push(jsx(Polygon,{points:De,fill:ke,width:vt,height:vt}))}if(Ct==="dot"){const ke=getHierarchyColorIndexes({depth:fe.depth,originalIndexes:fe.data._originalIndex,flatIndex:fe.data._flatIndex},St),De=ft==="gradient"?getPaletteColor(Tt,ke):getColorPrimary(Tt);Le.deco.push(jsx(Ellipse,{x:(Et?At>0?Me.right+yt:Me.left-yt:_e)-vt,y:(Et?$e:At>0?Me.bottom+yt:Me.top-yt)-vt,width:vt*2,height:vt*2,fill:De}));const We=ft==="gradient"?getPaletteColor(Tt,Ee):getColorPrimary(Tt);Le.deco.push(jsx(Ellipse,{x:je-vt,y:Re-vt,width:vt*2,height:vt*2,fill:We}))}}return Le},zt=(se,ee,ne)=>{const ue=new Map;se.forEach(ge=>{var ae;const de=ge.parent?ge.parent.data._originalIndex.join("-"):"root";((ae=ue.get(de))!=null?ae:ue.set(de,[]).get(de)).push(ge)});const ye=[];return ue.forEach(ge=>{if(ge.length<=1)return;const de=ge.slice().sort((ae,fe)=>Et?Pt(ae).y-Pt(fe).y:Pt(ae).x-Pt(fe).x);if(de.length!==0)for(let ae=0;ae<de.length-1;ae++){const fe=Pt(de[ae]),pe=Pt(de[ae+1]),be=de[ae].data._originalIndex.slice(0,-1),me=de[ae].data._originalIndex.at(-1)+1;if(Et){const Ce=fe.x+ne.x+(At>0?-ee.width-5:ee.width+5),Te=(fe.y+pe.y)/2+ne.y-ee.height/2;ye.push(jsx(BtnAdd,{indexes:[...be,me],x:Ce,y:Te}))}else{const Ce=fe.y+ne.y-ee.height-5,Te=(fe.x+pe.x)/2+ne.x-ee.width/2;ye.push(jsx(BtnAdd,{indexes:[...be,me],x:Te,y:Ce}))}}}),ye},Nt=jt(ct.items),Bt=rt?jsx(rt,{title:Mt,desc:It}):null,Vt=getElementBounds(jsx(BtnAdd,{indexes:[0]}));if(!Nt.length)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Bt,jsx(Group,{children:jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:-Vt.width/2,y:-Vt.height/2})})})]});const Yt=kt(Nt),Kt=hierarchy(Yt),{levelBounds:Dt,maxWidth:Rt,maxHeight:Wt}=Ht(Kt),Zt=tree().nodeSize(Et?[Wt+dt,Rt+ht]:[Rt+dt,Wt+ht]).separation(()=>1)(Kt).descendants(),Ut=Zt.map(se=>Pt(se)),Qt=Math.min(...Ut.map(se=>se.x)),Jt=Math.min(...Ut.map(se=>se.y)),oe={x:Math.max(0,-Qt+Rt/2),y:Math.max(0,-Jt+Vt.height+10)},ce=[],ie=[],le=[],he=[];return Zt.forEach((se,ee)=>{se.data._flatIndex=ee;const{x:ne,y:ue}=Pt(se);se.__layout={x:ne,y:ue}}),Zt.forEach(se=>{const{items:ee,btns:ne,deco:ue}=Xt(se,Dt,Vt,oe,he,Zt);ce.push(...ee),ie.push(...ne),le.push(...ue)}),ie.push(...zt(Zt,Vt,oe)),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Bt,jsxs(Group,{children:[he.length>0&&jsx(Defs,{children:he}),jsx(ShapesGroup,{children:le}),jsx(ItemsGroup,{children:ce}),jsx(BtnsGroup,{children:ie})]})]})};registerStructure("hierarchy-tree",{component:HierarchyTree,composites:["title","item"]});const ListColumn=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=20,width:dt,zigzag:ut}=it,{title:ft,desc:pt,items:gt=[]}=ct,mt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:gt[0]})),yt=dt||xt.width,bt=rt?jsx(rt,{title:ft,desc:pt}):null,wt=[],Ct=[],vt=(yt-mt.width)/2;if(gt.forEach((St,_t)=>{const Tt=(xt.height+ht)*_t,Et=[_t];Ct.push(jsx(lt,{indexes:Et,datum:St,data:ct,y:Tt,width:yt,positionV:"middle",positionH:ut?_t%2===0?"normal":"flipped":"normal"})),wt.push(jsx(BtnRemove,{indexes:Et,x:-mt.width-10,y:Tt+(xt.height-mt.height)/2}));const At=_t===0?-mt.height:Tt-ht/2-mt.height/2;wt.push(jsx(BtnAdd,{indexes:Et,x:vt,y:At}))}),gt.length>0){const _t=(xt.height+ht)*(gt.length-1)+xt.height;wt.push(jsx(BtnAdd,{indexes:[gt.length],x:vt,y:_t}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[bt,jsxs(Group,{children:[jsx(ItemsGroup,{children:Ct}),jsx(BtnsGroup,{children:wt})]})]})};registerStructure("list-column",{component:ListColumn,composites:["title","item"]});const ListGrid=it=>{const{Title:rt,Item:lt,data:ct,columns:ht=3,gap:dt=24,zigzag:ut}=it,{title:ft,desc:pt,items:gt=[]}=ct,mt=rt?jsx(rt,{title:ft,desc:pt}):null,xt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),yt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:gt[0],positionH:"center"})),bt=[],wt=[],Ct=yt.height+dt,vt=yt.width+dt,St=new Set;return gt.forEach((_t,Tt)=>{const Et=Math.floor(Tt/ht),At=Tt%ht,Mt=At*vt,It=Et*Ct,Lt=[Tt];wt.push(jsx(lt,{indexes:Lt,datum:_t,data:ct,x:Mt,y:It,positionH:"center",positionV:ut&&Tt%2===0?"normal":"flipped"})),bt.push(jsx(BtnRemove,{indexes:Lt,x:Mt+(yt.width-xt.width)/2,y:It+yt.height})),At<ht-1&&bt.push(jsx(BtnAdd,{indexes:[Tt+1],x:Mt+yt.width+(dt-xt.width)/2,y:It+(yt.height-xt.height)/2})),At===0&&!St.has(Et)&&(bt.push(jsx(BtnAdd,{indexes:[Tt],x:Mt-dt/2-xt.width/2,y:It+(yt.height-xt.height)/2})),St.add(Et)),(At===ht-1||Tt===gt.length-1)&&bt.push(jsx(BtnAdd,{indexes:[Tt+1],x:Mt+yt.width+dt/2-xt.width/2,y:It+(yt.height-xt.height)/2}))}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[mt,jsxs(Group,{children:[jsx(ItemsGroup,{children:wt}),jsx(BtnsGroup,{children:bt})]})]})};registerStructure("list-grid",{component:ListGrid,composites:["title","item"]});const ListPyramid=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=20,levelGap:dt=20}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0],positionH:"center"})),yt=[],bt=[],wt=Math.ceil(Math.sqrt(pt.length)),Ct=[];let vt=pt.length;for(let At=0;At<wt;At++){const Mt=Math.min(At+1,vt);if(Ct.push(Mt),vt-=Mt,vt<=0)break}let St=0;const _t=Math.max(...Ct),Et=(_t*xt.width+(_t-1)*ht)/2;return Ct.forEach((At,Mt)=>{const It=Mt*(xt.height+dt),Lt=At*xt.width+(At-1)*ht,jt=Et-Lt/2;for(let Ot=0;Ot<At&&St<pt.length;Ot++){const Pt=jt+Ot*(xt.width+ht),Gt=pt[St],kt=[St];bt.push(jsx(lt,{indexes:kt,datum:Gt,data:ct,x:Pt,y:It,positionH:"center"})),yt.push(jsx(BtnRemove,{indexes:kt,x:Pt+(xt.width-mt.width)/2,y:It+xt.height})),Ot<At-1&&yt.push(jsx(BtnAdd,{indexes:[St+1],x:Pt+xt.width+(ht-mt.width)/2,y:It+(xt.height-mt.height)/2})),Ot===0&&yt.push(jsx(BtnAdd,{indexes:[St],x:Pt-ht/2-mt.width/2,y:It+(xt.height-mt.height)/2})),Ot===At-1&&yt.push(jsx(BtnAdd,{indexes:[St+1],x:Pt+xt.width+ht/2-mt.width/2,y:It+(xt.height-mt.height)/2})),St++}}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{children:[jsx(ItemsGroup,{children:bt}),jsx(BtnsGroup,{children:yt})]})]})};registerStructure("list-pyramid",{component:ListPyramid,composites:["title","item"]});const ListRow=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=20,zigzag:dt}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0],positionH:"center"})),yt=[],bt=[],wt=(xt.height-mt.height)/2,Ct=xt.height;if(pt.forEach((vt,St)=>{const _t=(xt.width+ht)*St,Tt=[St];bt.push(jsx(lt,{indexes:Tt,datum:vt,data:ct,x:_t,positionH:"center",positionV:dt&&St%2===0?"normal":"flipped"})),yt.push(jsx(BtnRemove,{indexes:Tt,x:_t+(xt.width-mt.width)/2,y:Ct}));const Et=St===0?-(ht+mt.width)/2:_t-(ht+mt.width)/2;yt.push(jsx(BtnAdd,{indexes:Tt,x:Et,y:wt}))}),pt.length>0){const St=(xt.width+ht)*(pt.length-1)+xt.width+(ht-mt.width)/2;yt.push(jsx(BtnAdd,{indexes:[pt.length],x:St,y:wt}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{children:[jsx(ItemsGroup,{children:bt}),jsx(BtnsGroup,{children:yt})]})]})};registerStructure("list-row",{component:ListRow,composites:["title","item"]});const ListSector=it=>{const{Item:rt,data:lt,outerRadius:ct=250,innerRadius:ht=120,startAngle:dt=-90,endAngle:ut=270,gapAngle:ft=1,options:pt}=it,{title:gt,items:mt=[]}=lt,xt=getThemeColors(pt.themeConfig),yt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),bt=[],wt=[],Ct=[],vt=ct+100,St=ct+100,_t=ut-dt,Tt=Math.abs(_t-360)<.01,Et=mt.length>0?ft*(Tt?mt.length:mt.length-1):0,At=_t-Et,Mt=mt.length>0?At/mt.length:0;if(mt.forEach((kt,Ht)=>{var Le;const Xt=[Ht],zt=dt+(Mt+ft)*Ht,Nt=zt+Mt,Vt=ft*Math.PI*ct/180/ht*(180/Math.PI),Yt=ft,Kt=(zt+Yt/2)*Math.PI/180,Dt=(Nt-Yt/2)*Math.PI/180,Rt=(zt+Vt/2)*Math.PI/180,Wt=(Nt-Vt/2)*Math.PI/180,qt=vt+ct*Math.cos(Kt),Zt=St+ct*Math.sin(Kt),Ut=vt+ct*Math.cos(Dt),Qt=St+ct*Math.sin(Dt),Jt=vt+ht*Math.cos(Rt),oe=St+ht*Math.sin(Rt),ce=vt+ht*Math.cos(Wt),ie=St+ht*Math.sin(Wt),le=Mt>180?1:0,he=`
      M ${qt} ${Zt}
      A ${ct} ${ct} 0 ${le} 1 ${Ut} ${Qt}
      L ${ce} ${ie}
      A ${ht} ${ht} 0 ${le} 0 ${Jt} ${oe}
      Z
    `.trim(),se=getPaletteColor(pt,Xt);Ct.push(jsx(Path$1,{id:"shape-sector",d:he,fill:se,width:ct*2+200,height:ct*2+200,"data-element-type":"shape"}));const ne=(zt+Mt/2)*Math.PI/180,ue=(ct+ht)/2,ye=ct-ht,ge=Mt*Math.PI/180,de=ue*ge,ae=Math.min(de*.8,ye*.9),fe=Math.min(ye*.9,de*.8),pe=getElementBounds(jsx(rt,{indexes:[0],data:lt,datum:mt[0],positionH:"center",width:ae,height:fe})),be=vt+ue*Math.cos(ne)-pe.width/2,me=St+ue*Math.sin(ne)-pe.height/2;wt.push(jsx(rt,{indexes:Xt,datum:kt,data:lt,x:be,y:me,positionH:"center",width:ae,height:fe,themeColors:Ft({},getThemeColors({colorBg:getPaletteColor(pt,Xt),colorPrimary:((Le=pt.themeConfig)==null?void 0:Le.colorBg)||"white"}))}));const Ce=ct+10,Te=vt+Ce*Math.cos(ne)-yt.width/2,Ae=St+Ce*Math.sin(ne)-yt.height/2;if(bt.push(jsx(BtnRemove,{indexes:Xt,x:Te,y:Ae})),Tt||Ht<mt.length-1){const Se=(Nt+ft/2)*Math.PI/180,Oe=ue,we=vt+Oe*Math.cos(Se)-yt.width/2,Me=St+Oe*Math.sin(Se)-yt.height/2;bt.push(jsx(BtnAdd,{indexes:[Ht+1],x:we,y:Me}))}}),mt.length>0){const Ht=(dt-ft/2)*Math.PI/180,Xt=(ct+ht)/2,zt=vt+Xt*Math.cos(Ht)-yt.width/2,Nt=St+Xt*Math.sin(Ht)-yt.height/2;bt.push(jsx(BtnAdd,{indexes:[0],x:zt,y:Nt}))}const It=ht*.9;let Lt=vt,jt=St,Ot=It*1.4,Pt=It*1.4;if(!Tt){const Ht=(dt+ut)/2*Math.PI/180,Xt=It*.5;Lt=vt+Xt*Math.cos(Ht),jt=St+Xt*Math.sin(Ht);const zt=_t*Math.PI*Xt/180;Ot=Math.min(zt*.8,It*1.4),Pt=Math.min(Xt*1.5,It*1.4)}let Gt="";if(Tt)Gt="";else{const kt=dt*Math.PI/180,Ht=ut*Math.PI/180,Xt=vt+It*Math.cos(kt),zt=St+It*Math.sin(kt),Nt=vt+It*Math.cos(Ht),Bt=St+It*Math.sin(Ht),Vt=_t>180?1:0;Gt=`
      M ${vt} ${St}
      L ${Xt} ${zt}
      A ${It} ${It} 0 ${Vt} 1 ${Nt} ${Bt}
      Z
    `.trim()}return jsxs(Group,{id:"infographic-container",children:[jsx(Group,{children:Ct}),Tt?jsx(Ellipse,{id:"shape-center-circle",x:vt-It,y:St-It,width:It*2,height:It*2,fill:xt.colorPrimaryBg,fillOpacity:.5,"data-element-type":"shape"}):jsx(Path$1,{id:"shape-center-sector",d:Gt,fill:xt.colorPrimaryBg,fillOpacity:.5,width:ct*2+200,height:ct*2+200,"data-element-type":"shape"}),jsx(Text,{x:Lt-Ot/2,y:jt-Pt/2,width:Ot,height:Pt,alignHorizontal:"center",alignVertical:"middle",fontSize:24,fontWeight:"bold",fill:xt.colorText,"data-element-type":"title",children:gt}),jsx(ItemsGroup,{children:wt}),jsx(BtnsGroup,{children:bt})]})};registerStructure("list-sector",{component:ListSector,composites:["title","item"]});const ListWaterfall=it=>{const{Title:rt,Item:lt,data:ct,columns:ht=4,gap:dt=20,stepOffset:ut=40}=it,{title:ft,desc:pt,items:gt=[]}=ct,mt=rt?jsx(rt,{title:ft,desc:pt}):null,xt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),yt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:gt[0],positionH:"center"})),bt=[],wt=[],Ct=yt.width+dt;return gt.forEach((vt,St)=>{const _t=St%ht,Tt=Math.floor(St/ht),Et=_t*Ct,At=Tt*(yt.height+dt),Mt=_t*ut,It=At+Mt,Lt=[St];wt.push(jsx(lt,{indexes:Lt,datum:vt,data:ct,x:Et,y:It,positionH:"center"})),bt.push(jsx(BtnRemove,{indexes:Lt,x:Et+(yt.width-xt.width)/2,y:It+yt.height+5}))}),gt.forEach((vt,St)=>{const _t=St%ht,Tt=Math.floor(St/ht),Et=_t*Ct,At=Tt*(yt.height+dt),Mt=_t*ut,It=At+Mt;if(St===0&&bt.push(jsx(BtnAdd,{indexes:[0],x:Et-dt/2-xt.width/2,y:It+(yt.height-xt.height)/2})),_t<ht-1&&St<gt.length-1){const Lt=Math.floor((St+1)/ht);Tt===Lt&&bt.push(jsx(BtnAdd,{indexes:[St+1],x:Et+yt.width+(dt-xt.width)/2,y:It+(yt.height-xt.height)/2}))}(_t===ht-1||St===gt.length-1)&&bt.push(jsx(BtnAdd,{indexes:[St+1],x:Et+yt.width+(dt-xt.width)/2,y:It+(yt.height-xt.height)/2}))}),gt.length===0&&bt.push(jsx(BtnAdd,{indexes:[0],x:(ht-1)*Ct/2+(yt.width-xt.width)/2,y:0})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[mt,jsxs(Group,{children:[jsx(ItemsGroup,{children:wt}),jsx(BtnsGroup,{children:bt})]})]})};registerStructure("list-waterfall",{component:ListWaterfall,composites:["title","item"]});const MAX_ITEMS=6,ARROW_WIDTH=700,ARROW_HEIGHT_DOWN=330,ARROW_HEIGHT_UP=333,PRESET_RATIOS_DOWN={1:[{x:.5,y:.6,anchor:"top-right"}],2:[{x:.42,y:.5,anchor:"top-right"},{x:.72,y:.4,anchor:"bottom"}],3:[{x:.3,y:.5,anchor:"top-right"},{x:.48,y:.3,anchor:"bottom-left"},{x:.8,y:.75,anchor:"top-right"}],4:[{x:.3,y:.5,anchor:"top-right"},{x:.35,y:.2,anchor:"bottom-left"},{x:.65,y:.73,anchor:"top-right"},{x:.8,y:.52,anchor:"bottom-left"}],5:[{x:.19,y:.4,anchor:"top-right"},{x:.38,y:.2,anchor:"bottom"},{x:.52,y:.62,anchor:"top-right"},{x:.7,y:.43,anchor:"bottom"},{x:.82,y:.8,anchor:"top-right"}],6:[{x:.16,y:.35,anchor:"top-right"},{x:.38,y:.2,anchor:"bottom"},{x:.48,y:.54,anchor:"top-right"},{x:.55,y:.43,anchor:"bottom-left"},{x:.8,y:.75,anchor:"top-right"},{x:.86,y:.65,anchor:"bottom-left"}]},PRESET_RATIOS_UP={1:[{x:.5,y:.4,anchor:"bottom-right"}],2:[{x:.42,y:.5,anchor:"bottom-right"},{x:.72,y:.6,anchor:"top"}],3:[{x:.3,y:.5,anchor:"bottom-right"},{x:.48,y:.7,anchor:"top-left"},{x:.8,y:.25,anchor:"bottom-right"}],4:[{x:.3,y:.5,anchor:"bottom-right"},{x:.35,y:.8,anchor:"top-left"},{x:.65,y:.27,anchor:"bottom-right"},{x:.8,y:.48,anchor:"top-left"}],5:[{x:.19,y:.6,anchor:"bottom-right"},{x:.38,y:.8,anchor:"top"},{x:.52,y:.38,anchor:"bottom-right"},{x:.7,y:.57,anchor:"top"},{x:.82,y:.2,anchor:"bottom-right"}],6:[{x:.16,y:.65,anchor:"bottom-right"},{x:.38,y:.8,anchor:"top"},{x:.48,y:.46,anchor:"bottom-right"},{x:.55,y:.57,anchor:"top-left"},{x:.8,y:.25,anchor:"bottom-right"},{x:.86,y:.35,anchor:"top-left"}]},getPresetPoints=(it,rt,lt)=>{const ct=rt[it];return ct?ct.map(ht=>({x:ht.x*ARROW_WIDTH,y:ht.y*lt,anchor:ht.anchor})):null},getAnchoredPosition=(it,rt)=>{const lt=it.anchor||"center";let ct=it.x-rt.width/2,ht=it.y-rt.height/2,dt=it.y;switch(lt){case"top":ct=it.x-rt.width/2,ht=it.y,dt=it.y+rt.height/2;break;case"bottom":ct=it.x-rt.width/2,ht=it.y-rt.height,dt=it.y-rt.height/2;break;case"top-left":ct=it.x,ht=it.y,dt=it.y+rt.height/2;break;case"top-right":ct=it.x-rt.width,ht=it.y,dt=it.y+rt.height/2;break;case"bottom-left":ct=it.x,ht=it.y-rt.height,dt=it.y-rt.height/2;break;case"bottom-right":ct=it.x-rt.width,ht=it.y-rt.height,dt=it.y-rt.height/2;break}return{x:ct,y:ht,centerY:dt}},getUnitVector=(it,rt)=>{const lt=rt.x-it.x,ct=rt.y-it.y,ht=Math.hypot(lt,ct)||1;return{x:lt/ht,y:ct/ht}},createListZigzag=it=>{const{presetRatios:rt,arrowHeight:lt,Arrow:ct}=it;return dt=>{var Xt;const{Title:ut,Item:ft,data:pt,options:gt,itemGap:mt=24}=dt,{title:xt,desc:yt,items:bt=[]}=pt,wt=Math.min(bt.length,MAX_ITEMS),Ct=bt.slice(0,wt),vt=ut?jsx(ut,{title:xt,desc:yt}):null,St=getColorPrimary(gt),Tt=getThemeColors({colorPrimary:St},gt).colorTextSecondary||"#737373",Et=getElementBounds(jsx(BtnAdd,{indexes:[0]}));if(bt.length===0){const zt=(Xt=getPresetPoints(1,rt,lt))==null?void 0:Xt[0];if(!zt)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsx(Group,{children:jsx(ct,{colorPrimary:St,colorShadow:Tt})})]});const Nt=zt.x-Et.width/2,Bt=zt.y-Et.height/2;return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{children:[jsx(ct,{colorPrimary:St,colorShadow:Tt}),jsx(ItemsGroup,{}),jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:Nt,y:Bt})})]})]})}const At=getElementBounds(jsx(ft,{indexes:[0],data:pt,datum:bt[0],positionH:"center"})),Mt=[],It=[],Lt=getPresetPoints(wt,rt,lt);if(!Lt)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{children:[jsx(ct,{colorPrimary:St,colorShadow:Tt}),jsx(ItemsGroup,{})]})]});const jt=Lt,Ot=jt.length>1?getUnitVector(jt[0],jt[jt.length-1]):{x:1,y:0},Pt=jt.length>1?getUnitVector(jt[0],jt[1]):Ot,Gt=jt.length>1?getUnitVector(jt[jt.length-2],jt[jt.length-1]):Ot,kt=Math.max(At.width,At.height)*.45+mt,Ht=zt=>{const{x:Nt,y:Bt,centerY:Vt}=getAnchoredPosition(zt,At);return{x:Nt,y:Bt,centerY:Vt}};if(jt.forEach((zt,Nt)=>{const Bt=Ht(zt),Vt=Bt.centerY<lt/2,Yt=[Nt],Kt=Ct[Nt];if(!Kt)return;It.push(jsx(ft,{indexes:Yt,datum:Kt,data:pt,x:Bt.x,y:Bt.y,positionH:"center"}));const Dt=Bt.x+At.width-Et.width/2,Rt=Vt?Bt.y-Et.height/2:Bt.y+At.height-Et.height/2;Mt.push(jsx(BtnRemove,{indexes:Yt,x:Dt,y:Rt}))}),jt.length>0){const zt=jt[0],Nt=zt.x-Pt.x*kt-Et.width/2,Bt=zt.y-Pt.y*kt-Et.height/2;Mt.push(jsx(BtnAdd,{indexes:[0],x:Nt,y:Bt}));for(let Dt=0;Dt<jt.length-1;Dt++){const Rt=jt[Dt],Wt=jt[Dt+1],qt=(Rt.x+Wt.x)/2,Zt=(Rt.y+Wt.y)/2,Ut=qt-Et.width/2,Qt=Zt-Et.height/2;Mt.push(jsx(BtnAdd,{indexes:[Dt+1],x:Ut,y:Qt}))}const Vt=jt[jt.length-1],Yt=Vt.x+Gt.x*kt-Et.width/2,Kt=Vt.y+Gt.y*kt-Et.height/2;Mt.push(jsx(BtnAdd,{indexes:[wt],x:Yt,y:Kt}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{children:[jsx(ct,{colorPrimary:St,colorShadow:Tt}),jsx(ItemsGroup,{children:It}),jsx(BtnsGroup,{children:Mt})]})]})}},ArrowDown=({colorPrimary:it="#17CA2C",colorShadow:rt="#737373"})=>{const lt=tinycolor(it).darken(20).toHexString();return jsxs(Group,{width:ARROW_WIDTH,height:ARROW_HEIGHT_DOWN,children:[jsx("path",{d:"M228.864 159.446C230.266 159.446 231.623 158.768 232.689 157.535L274.263 110.162L265.717 102.923L227.311 148.082C225.977 149.623 224.281 150.47 222.529 150.47H175.404L182.03 158.367C182.795 159.445 182.795 159.446 183.734 159.446H228.864Z",fill:rt}),jsx("path",{d:"M462.869 234.92C464.271 234.92 465.628 234.242 466.695 233.01L508.268 185.636L499.722 178.397L461.316 223.557C459.983 225.098 458.287 225.945 456.534 225.945H409.409L416.035 233.841C416.8 234.92 416.8 234.92 417.74 234.92H462.869Z",fill:rt}),jsx("path",{d:"M697.005 330C698.783 330 700 328.82 700 327.001V256.638C700 254.857 697.848 253.965 696.591 255.225L693.409 258.411V320.402C693.409 322.058 692.069 323.401 690.414 323.401H630.718L627.536 326.587C626.278 327.847 627.169 330 628.947 330H697.005Z",fill:rt}),jsx("path",{d:"M689.642 321.89C690.744 321.89 691.638 320.995 691.638 319.891V250.743C691.638 248.962 689.488 248.07 688.23 249.329L662.647 274.947L520.987 153.863C519.541 152.627 517.703 151.948 515.802 151.948H469.518C470.236 151.949 470.956 152.206 471.53 152.729L498.163 176.978L498.13 177.018L639.84 297.784L619.174 318.477C617.916 319.737 618.807 321.89 620.586 321.89H689.642Z",fill:it}),jsx("path",{d:"M429.279 198.995L467.208 153.03C468.3 151.716 470.268 151.579 471.531 152.729L498.163 176.978L460.69 221.107C459.173 222.894 456.946 223.924 454.6 223.924H408.473C409.366 223.924 410.252 223.527 410.845 222.764L429.279 198.995Z",fill:lt}),jsx("path",{d:"M408.473 223.924H408.314L408.318 223.92C408.369 223.922 408.421 223.924 408.473 223.924Z",fill:lt}),jsx("path",{d:"M406.524 223.203C407.826 224.318 409.796 224.116 410.845 222.761L429.279 198.932L287.411 77.8866C285.964 76.6523 284.125 75.9742 282.223 75.9742H234.606L234.625 75.9907C235.429 75.9118 236.263 76.1557 236.915 76.7378L263.662 100.621L263.546 100.758L406.524 223.203Z",fill:it}),jsx("path",{d:"M236.914 76.7386C235.651 75.6097 233.707 75.7513 232.621 77.0513L194.557 123.104L175.644 146.821C175.076 147.535 174.25 147.917 173.409 147.947L173.407 147.95H219.923C222.271 147.95 224.499 146.915 226.017 145.122L263.645 100.649L236.914 76.7386Z",fill:lt}),jsx("path",{d:"M175.648 146.816C174.589 148.145 172.637 148.329 171.348 147.221L4.09334 3.51697C2.68586 2.30767 3.54106 0 5.39671 0H47.5805C49.4864 0 51.3297 0.680433 52.7785 1.91877L194.557 123.104L175.648 146.816Z",fill:it})]})},ArrowUp=({colorPrimary:it="#17CA2C",colorShadow:rt="#737373"})=>{const lt=tinycolor(it).darken(20).toHexString();return jsxs(Group,{width:ARROW_WIDTH,height:ARROW_HEIGHT_UP,children:[jsx("path",{d:"M19.0526 324L12.6762 329.482C11.2703 330.691 12.1234 333 13.976 333H56.1578C58.058 333 59.896 332.321 61.3413 331.085L201.854 210.901L194.249 201.693L54.0527 321.606C52.246 323.151 49.9486 324 47.5732 324H19.0526Z",fill:rt}),jsx("path",{d:"M234.587 248L241.131 255.922C241.656 256.552 242.382 256.909 243.134 256.983L243.115 257H290.716C292.618 257 294.457 256.322 295.903 255.087L437.091 134.536L429.305 125.5L288.613 245.609C286.805 247.153 284.507 248 282.132 248H234.587Z",fill:rt}),jsx("path",{d:"M461.123 162.429L475.642 179.918C476.237 180.635 477.092 181.001 477.951 181H524.22C526.121 181 527.959 180.321 529.404 179.085L670.786 58.1578L662.326 49.6809L522.115 169.606C520.309 171.151 518.011 172 515.636 172H469.369L461.123 162.429Z",fill:rt}),jsx("path",{d:"M687.912 74.8875C690.374 75.9052 693.412 74.1668 693.412 71.1716V11H698.004C699.106 11 700 11.8954 700 13V82.1716C700 83.9534 697.85 84.8457 696.593 83.5858L687.912 74.8875Z",fill:rt}),jsx("path",{d:"M689.419 0C690.522 0 691.415 0.895432 691.415 2V71.1716C691.415 72.9534 689.265 73.8457 688.008 72.5858L662.433 46.9598L520.819 168.085C519.374 169.321 517.536 170 515.636 170H469.367C470.084 169.999 470.804 169.742 471.379 169.219L498.003 144.961L497.969 144.922L639.634 24.115L618.975 3.41421C617.717 2.15428 618.608 0 620.386 0H689.419Z",fill:it}),jsx("path",{d:"M429.141 122.937L467.058 168.918C468.149 170.232 470.116 170.369 471.378 169.219L498.003 144.961L460.542 100.818C459.025 99.0305 456.798 98 454.453 98H408.341C409.234 98.0001 410.12 98.3968 410.712 99.1606L429.141 122.937Z",fill:lt}),jsx("path",{d:"M408.341 98H408.183L408.186 98.004C408.237 98.0013 408.289 98 408.341 98Z",fill:lt}),jsx("path",{d:"M406.393 98.721C407.695 97.606 409.664 97.8077 410.712 99.1633L429.141 123L287.318 244.087C285.872 245.322 284.033 246 282.132 246H234.53L234.55 245.983C235.353 246.062 236.187 245.818 236.839 245.236L263.577 221.345L263.461 221.208L406.393 98.721Z",fill:it}),jsx("path",{d:"M236.837 245.235C235.575 246.365 233.631 246.223 232.546 244.922L194.494 198.854L175.588 175.129C175.019 174.415 174.194 174.032 173.353 174.002L173.351 174H219.852C222.199 174 224.427 175.035 225.944 176.829L263.56 221.317L236.837 245.235Z",fill:lt}),jsx("path",{d:"M175.593 175.135C174.533 173.805 172.581 173.622 171.291 174.73L4.09013 318.484C2.68329 319.693 3.53868 322 5.394 322H47.5627C49.4695 322 51.3136 321.319 52.7627 320.08L194.494 198.854L175.593 175.135Z",fill:it})]})},ListZigzagDown=createListZigzag({arrowHeight:ARROW_HEIGHT_DOWN,presetRatios:PRESET_RATIOS_DOWN,Arrow:ArrowDown}),ListZigzagUp=createListZigzag({arrowHeight:ARROW_HEIGHT_UP,presetRatios:PRESET_RATIOS_UP,Arrow:ArrowUp});registerStructure("list-zigzag-down",{component:ListZigzagDown,composites:["title","item"]});registerStructure("list-zigzag-up",{component:ListZigzagUp,composites:["title","item"]});const QUADRANT_CONFIG={axisColor:"#D9D9D9",axisArrowSize:5,strokeWidth:1,dashArray:"4,2",defaultExtraSpacing:20},Quadrant=it=>{const{Title:rt,Item:lt,data:ct,quadrantWidth:ht,quadrantHeight:dt,showAxis:ut=!0,dashedAxis:ft=!0}=it,{title:pt,desc:gt,items:mt=[]}=ct,xt=rt?jsx(rt,{title:pt,desc:gt}):null,yt=Array.from({length:4},(Tt,Et)=>mt[Et]),bt=yt[0]?getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:yt[0]})):{width:0,height:0},wt=ht!=null?ht:bt.width+QUADRANT_CONFIG.defaultExtraSpacing,Ct=dt!=null?dt:bt.height+QUADRANT_CONFIG.defaultExtraSpacing,vt=calculateQuadrantPositions(wt,Ct,bt),St=yt.map((Tt,Et)=>{if(!Tt)return null;const At=vt[Et];return jsx(lt,{indexes:[Et],datum:Tt,data:ct,x:At.x,y:At.y,positionH:Et%2?"flipped":"normal",positionV:Et<2?"normal":"flipped"})}).filter(Boolean),_t=createAxisElements(wt,Ct,ut,ft);return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[xt,jsxs(Group,{width:wt*2,height:Ct*2,children:[_t,jsx(ItemsGroup,{children:St})]})]})};function createAxisElements(it,rt,lt,ct){if(!lt)return[];const{axisColor:ht,axisArrowSize:dt,strokeWidth:ut,dashArray:ft}=QUADRANT_CONFIG,pt=it,gt=rt,mt=it*2,xt=rt*2,yt=ct?ft:void 0;return[jsx(Path$1,{d:`M 0 ${gt} L ${mt} ${gt}`,stroke:ht,strokeWidth:ut,strokeDasharray:yt,fill:"none","data-element-type":"shape"}),jsxs(ShapesGroup,{transform:`translate(${mt}, ${gt})`,children:[jsx(Path$1,{d:`M 0 0 L ${-dt} ${-dt/2}`,stroke:ht,strokeWidth:ut,fill:"none"}),jsx(Path$1,{d:`M 0 0 L ${-dt} ${dt/2}`,stroke:ht,strokeWidth:ut,fill:"none"})]}),jsxs(ShapesGroup,{transform:`translate(0, ${gt})`,children:[jsx(Path$1,{d:`M 0 0 L ${dt} ${-dt/2}`,stroke:ht,strokeWidth:ut,fill:"none"}),jsx(Path$1,{d:`M 0 0 L ${dt} ${dt/2}`,stroke:ht,strokeWidth:ut,fill:"none"})]}),jsx(Path$1,{d:`M ${pt} 0 L ${pt} ${xt}`,stroke:ht,strokeWidth:ut,strokeDasharray:yt,fill:"none","data-element-type":"shape"}),jsxs(ShapesGroup,{transform:`translate(${pt}, 0)`,children:[jsx(Path$1,{d:`M 0 0 L ${-dt/2} ${dt}`,stroke:ht,strokeWidth:ut,fill:"none"}),jsx(Path$1,{d:`M 0 0 L ${dt/2} ${dt}`,stroke:ht,strokeWidth:ut,fill:"none"})]}),jsxs(ShapesGroup,{transform:`translate(${pt}, ${xt})`,children:[jsx(Path$1,{d:`M 0 0 L ${-dt/2} ${-dt}`,stroke:ht,strokeWidth:ut,fill:"none"}),jsx(Path$1,{d:`M 0 0 L ${dt/2} ${-dt}`,stroke:ht,strokeWidth:ut,fill:"none"})]})]}function calculateQuadrantPositions(it,rt,lt){const ct=it/2,ht=rt/2;return[{x:ct-lt.width/2,y:ht-lt.height/2},{x:it+ct-lt.width/2,y:ht-lt.height/2},{x:ct-lt.width/2,y:rt+ht-lt.height/2},{x:it+ct-lt.width/2,y:rt+ht-lt.height/2}]}registerStructure("quadrant",{component:Quadrant,composites:["title","item"]});const RelationCircle=it=>{const{Title:rt,Item:lt,data:ct,radius:ht=150,startMode:dt="top"}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0],positionH:"center"})),yt=[],bt=[];if(pt.length===0)return yt.push(jsx(BtnAdd,{indexes:[0],x:-mt.width/2,y:-mt.height/2})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsx(Group,{children:jsx(BtnsGroup,{children:yt})})]});const wt=Math.max(xt.width,xt.height),Ct=Math.max(ht,wt),vt=Ct+wt/2,St=pt.map(()=>{const Mt=xt.width,It=xt.height;return(Mt+It)/2}),_t=St.reduce((Mt,It)=>Mt+It,0);let Tt;dt==="equal"?Tt=-Math.PI/2:Tt=-Math.PI/2+2*Math.PI/pt.length/2;let Et=Tt;pt.forEach((Mt,It)=>{const Lt=St[It]/_t*2*Math.PI,jt=Et+Lt/2;Et+=Lt;const Ot=vt+Ct*Math.cos(jt)-xt.width/2,Pt=vt+Ct*Math.sin(jt)-xt.height/2;bt.push(jsx(lt,{indexes:[It],datum:Mt,data:ct,x:Ot,y:Pt}));const Gt=Ct-Math.max(xt.width,xt.height)/2-20,kt=vt+Gt*Math.cos(jt)-mt.width/2,Ht=vt+Gt*Math.sin(jt)-mt.height/2;yt.push(jsx(BtnRemove,{indexes:[It],x:kt,y:Ht}))});const At=Ct-Math.max(xt.width,xt.height)/2-20;if(pt.length>0)for(let Mt=0;Mt<pt.length;Mt++){const It=Mt*2*Math.PI/pt.length-Math.PI/2,Lt=(Mt+1)%pt.length*2*Math.PI/pt.length-Math.PI/2;let jt;if(Mt===pt.length-1){const Gt=Lt+2*Math.PI-It;jt=It+Gt/2}else jt=(It+Lt)/2;const Ot=vt+At*Math.cos(jt)-mt.width/2,Pt=vt+At*Math.sin(jt)-mt.height/2;yt.push(jsx(BtnAdd,{indexes:[Mt+1],x:Ot,y:Pt}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{children:[jsx(ItemsGroup,{children:bt}),jsx(BtnsGroup,{children:yt})]})]})};registerStructure("relation-circle",{component:RelationCircle,composites:["title","item"]});const RelationNetwork=it=>{const{Title:rt,Item:lt,data:ct,spacing:ht=120,showConnections:dt=!0,options:ut}=it,{title:ft,desc:pt,items:gt=[]}=ct,mt=rt?jsx(rt,{title:ft,desc:pt}):null;if(gt.length===0)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[mt,jsx(Group,{children:jsx(ItemsGroup,{})})]});const xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:gt[0],positionH:"center"}));function yt(){const It=gt.map((Ot,Pt)=>({id:Pt,data:Ot,isCenter:Pt===0,_originalIndex:[Pt]})),Lt=gt.slice(1).map((Ot,Pt)=>({source:0,target:Pt+1})),jt=simulation(It).force("link",link(Lt).id(Ot=>Ot.id).distance(ht)).force("charge",manyBody().strength(-50)).force("center",center(0,0)).force("collision",collide().radius(Math.max(xt.width,xt.height)/2+10));for(let Ot=0;Ot<300;++Ot)jt.tick();return{nodes:It,links:Lt}}const{nodes:bt,links:wt}=yt(),Ct=Math.min(...bt.map(It=>{var Lt;return(Lt=It.x)!=null?Lt:0})),vt=Math.min(...bt.map(It=>{var Lt;return(Lt=It.y)!=null?Lt:0})),St=Math.max(0,-Ct+xt.width/2),_t=Math.max(0,-vt+xt.height/2),Tt=(It,Lt)=>({positionH:It<-50?"flipped":It>50?"normal":"center",positionV:Lt<-50?"flipped":Lt>50?"normal":"middle"}),Et=bt.map(It=>{if(It.x==null||It.y==null)return null;const Lt=It.x+St-xt.width/2,jt=It.y+_t-xt.height/2,{positionH:Ot,positionV:Pt}=Tt(It.x,It.y);return jsx(lt,{indexes:It._originalIndex,datum:It.data,data:ct,x:Lt,y:jt,positionH:Ot,positionV:Pt},It.id)}).filter(Boolean),At=new Map(bt.map(It=>[It.id,It])),Mt=dt?wt.map(It=>{const Lt=typeof It.source=="object"?It.source:At.get(It.source),jt=typeof It.target=="object"?It.target:At.get(It.target);if(!Lt||!jt||Lt.x==null||Lt.y==null||jt.x==null||jt.y==null)return null;const Ot=`M ${Lt.x+St} ${Lt.y+_t} L ${jt.x+St} ${jt.y+_t}`;return jsx(Path$1,{d:Ot,stroke:getColorPrimary(ut),strokeWidth:2,strokeOpacity:.6})}).filter(Boolean):[];return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[mt,jsxs(Group,{children:[jsx(Group,{children:Mt}),jsx(ItemsGroup,{children:Et})]})]})};registerStructure("relation-network",{component:RelationNetwork,composites:["title","item"]});const SimpleArrow=dt=>{var ut=dt,{width:it=25,height:rt=25,colorPrimary:lt="#6699FF",rotation:ct=0}=ut,ht=Pe(ut,["width","height","colorPrimary","rotation"]);const ft=`gradient-arrow-stroke-${lt.replace("#","")}`,pt=`gradient-arrow-fill-${lt.replace("#","")}`,gt=Math.round(it*.515),mt=Math.round(rt*.275),xt=Math.round(rt*.875),yt=[{x:0,y:mt},{x:gt,y:mt},{x:gt,y:rt*.075},{x:it,y:rt*.575},{x:gt,y:rt*1.075},{x:gt,y:xt},{x:0,y:xt}],bt=it/2,wt=rt/2,Ct=`rotate(${ct} ${bt} ${wt})`;return jsxs(Fragment,{children:[jsx(Polygon,te(Ft({},ht),{width:it,height:rt,points:yt,fill:`url(#${pt})`,stroke:`url(#${ft})`,transform:Ct,"data-element-type":"shape"})),jsxs(Defs,{children:[jsxs("linearGradient",{id:pt,x1:"100%",y1:"0%",x2:"0%",y2:"0%",children:[jsx("stop",{offset:"0%","stop-color":lt,"stop-opacity":"0.36"}),jsx("stop",{offset:"100%","stop-color":lt,"stop-opacity":"0"})]}),jsxs("linearGradient",{id:ft,x1:"100%",y1:"0%",x2:"0%",y2:"0%",children:[jsx("stop",{offset:"0%","stop-color":lt}),jsx("stop",{offset:"58%","stop-color":lt,"stop-opacity":"0"})]})]})]})},Text3d=({text:it,x:rt=0,y:lt=0,fontSize:ct=56,fontWeight:ht="bold",fill:dt="#FFFFFF",textAnchor:ut="middle",dominantBaseline:ft="middle",shadowOffsetX:pt=2,shadowOffsetY:gt=4,midShadowOffsetX:mt=1,midShadowOffsetY:xt=2,deepShadowOpacity:yt=.3,midShadowOpacity:bt=.5})=>jsxs(Group,{children:[jsx("text",{x:rt,y:lt,fontSize:ct,fontWeight:ht,fill:dt,fillOpacity:yt,textAnchor:ut,dominantBaseline:ft,transform:`translate(${pt}, ${gt})`,children:it}),jsx("text",{x:rt,y:lt,fontSize:ct,fontWeight:ht,fill:dt,fillOpacity:bt,textAnchor:ut,dominantBaseline:ft,transform:`translate(${mt}, ${xt})`,children:it}),jsx("text",{x:rt,y:lt,fontSize:ct,fontWeight:ht,fill:dt,textAnchor:ut,dominantBaseline:ft,children:it})]}),Triangle=ut=>{var ft=ut,{width:it=25,height:rt=25,colorPrimary:lt="#6699FF",rotation:ct=0,strokeWidth:ht=4}=ft,dt=Pe(ft,["width","height","colorPrimary","rotation","strokeWidth"]);const pt=[{x:it/2,y:0},{x:it,y:rt},{x:0,y:rt}],gt=it/2,mt=rt/2,xt=`rotate(${ct} ${gt} ${mt})`;return jsx(Polygon,te(Ft({},dt),{width:it,height:rt,points:pt,fill:lt,stroke:lt,strokeWidth:ht,strokeLinecap:"round",strokeLinejoin:"round",transform:xt}))},CUBE_GAP_X=-118,CUBE_GAP_Y=118,CUBE_WIDTH=240,CUBE_HEIGHT=180,ITEM_GAP=40,CUBE_PATH_BOTTOM="M238.9 69.7a6 6 0 0 1-.1 1v.2l-.2.3v.3l-.1.3a6.2 6.2 0 0 1-.3.6l-.1.3-.2.3-.2.4-.3.5-.1.1a10.9 10.9 0 0 1-.8 1v.1l-.5.5h-.1l-.4.4-.3.3-.3.2-.3.3-.4.2a13 13 0 0 1-.7.5l-.4.3-.5.3-97.5 56.7-.7.4h-.2l-.6.4h-.1l-.8.4h-.2l-.6.4h-.2l-.8.3h-.2l-.5.3-.5.1-.5.1-.5.2h-.5a33.7 33.7 0 0 1-3.2.7h-.2l-1 .2h-1.6l-.7.1h-4.7l-.8-.1h-.2a38.2 38.2 0 0 1-2-.4h-.4l-.7-.2h-.4l-.7-.2-.4-.1a27.3 27.3 0 0 1-2.2-.7h-.2a44.2 44.2 0 0 1-.9-.3l-.5-.3-.4-.1-.5-.2-.3-.2-.5-.2-.3-.2-.8-.4L6.5 78C2.2 75.6 0 72.4 0 69v41.7c0 3.2 2.1 6.5 6.4 9l98.1 56.6a23.2 23.2 0 0 0 1 .6l.6.3.3.1.5.2.4.2.3.1h.2l.2.2a21.4 21.4 0 0 0 1.9.6l.3.1h.2l.7.2a77.6 77.6 0 0 1 1.1.3h.3l.7.2h.4a42.5 42.5 0 0 0 1 .2l1 .2h1.1l.4.1h2.1l.7.1h1.5a22 22 0 0 0 1.8-.2h.4l1.1-.1h.2l1.2-.2h.1l.3-.1.6-.1a12.5 12.5 0 0 0 1-.3h.5l.5-.2a29 29 0 0 0 1-.3h.2l.3-.2h.2a27 27 0 0 0 1.6-.7h.2l.8-.4a19.4 19.4 0 0 0 1.6-.9l97.5-56.7.3-.1.2-.2.4-.2.4-.3.3-.2.3-.3.4-.2.3-.3.3-.3h.1l.3-.3.5-.6h.1l.3-.5h.1v-.1l.4-.4v-.1l.4-.5v-.1l.1-.2.1-.2.2-.3.1-.3.1-.3.1-.1a6.9 6.9 0 0 0 .2-.8l.1-.3v-.4l.1-.3v-1l.2-41.4v.4Z",CUBE_PATH_TOP="M232.5 60.4c8.5 4.9 8.5 12.8.1 17.7l-97.5 56.7c-8.4 4.9-22 4.9-30.5 0L6.5 78C-2 73-2 65.3 6.4 60.4l97.5-56.7c8.4-5 22-5 30.5 0l98.1 56.7Z",CUBE_PATH_STROKE="M119.1 0A31 31 0 0 0 104 3.7L6.4 60.4C-2 65.3-2 73.2 6.4 78l98.2 56.7c4.2 2.4 9.8 3.7 15.3 3.7a31 31 0 0 0 15.2-3.7L232.6 78c8.4-5 8.4-12.8 0-17.7L134.3 3.7A31.2 31.2 0 0 0 119.1 0Zm0 2.5c5.4 0 10.3 1.2 14 3.3l98.2 56.7c3.3 2 5.1 4.3 5.1 6.8 0 2.4-1.8 4.7-5 6.6l-97.5 56.7a28.3 28.3 0 0 1-14 3.4c-5.3 0-10.3-1.2-14-3.4L7.7 76c-3.3-1.9-5-4.3-5-6.7 0-2.4 1.7-4.8 5-6.7L105 5.8a29 29 0 0 1 14-3.3Z",DropShadowFilter$1=jsxs("filter",{id:"sequence-ascending-stairs-3d-shadow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),jsx("feOffset",{dx:"0",dy:"4"}),jsx("feGaussianBlur",{stdDeviation:"6"}),jsx("feComposite",{in2:"hardAlpha",operator:"out"}),jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow"}),jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]}),SequenceAscendingStairs3d=it=>{const{Title:rt,Item:lt,data:ct,options:ht,cubeWidth:dt=CUBE_WIDTH}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null;if(pt.length===0){const vt=jsx(BtnAdd,{indexes:[0],x:0,y:0});return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[jsx(Defs,{children:DropShadowFilter$1}),gt,jsx(Group,{children:jsx(BtnsGroup,{children:vt})})]})}const mt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),xt=[],yt=[],bt=[],wt=dt/CUBE_WIDTH,Ct=CUBE_HEIGHT*wt;return pt.forEach((vt,St)=>{const _t=[St],Tt=getPaletteColor(ht,_t),Et=St*(dt+CUBE_GAP_X),At=(pt.length-1-St)*CUBE_GAP_Y,Mt=`cube-gradient-bottom-${St}`,It=`cube-gradient-top-${St}`,Lt=`cube-gradient-stroke-${St}`;bt.push(jsxs(Group,{x:Et,y:At,id:`cube-${St}`,width:dt,height:Ct,filter:"url(#sequence-ascending-stairs-3d-shadow-filter)",children:[jsxs(Defs,{children:[jsxs("linearGradient",{id:Mt,x1:"0",y1:"124.5",x2:"238.9",y2:"124.5",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{offset:"0",stopColor:Tt,stopOpacity:"0.8"}),jsx("stop",{offset:"1",stopColor:Tt,stopOpacity:"0.4"})]}),jsxs("linearGradient",{id:It,x1:"119.5",y1:"0",x2:"119.5",y2:"138.5",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{offset:"0",stopColor:Tt,stopOpacity:"0.9"}),jsx("stop",{offset:"1",stopColor:Tt,stopOpacity:"0.5"})]}),jsxs("linearGradient",{id:Lt,x1:"119.5",y1:"0",x2:"119.5",y2:"138.5",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{offset:"0",stopColor:Tt}),jsx("stop",{offset:"1",stopColor:Tt,stopOpacity:"0.7"})]})]}),jsxs(ShapesGroup,{transform:`scale(${wt})`,children:[jsx(Path$1,{d:CUBE_PATH_BOTTOM,fill:`url(#${Mt})`}),jsx(Path$1,{d:CUBE_PATH_TOP,fill:`url(#${It})`}),jsx(Path$1,{d:CUBE_PATH_STROKE,fill:`url(#${Lt})`})]}),jsx(Text3d,{text:St+1,x:115,y:65,fontSize:56})]}));const jt=Et+dt+ITEM_GAP,Ot=At+Ct/2;if(yt.push(jsx(lt,{indexes:_t,datum:vt,data:ct,x:jt,y:Ot,positionH:"normal"})),xt.push(jsx(BtnRemove,{indexes:_t,x:Et+dt-mt.width/2,y:At-mt.height/2})),St===0&&xt.push(jsx(BtnAdd,{indexes:[0],x:Et-30-mt.width/2,y:At+Ct/2-mt.height/2})),St<pt.length-1){const Pt=(pt.length-1-(St+1))*CUBE_GAP_Y,Gt=Et+dt-mt.width/2,kt=(At+Ct/2+Pt+Ct/2)/2-mt.height/2;xt.push(jsx(BtnAdd,{indexes:[St+1],x:Gt,y:kt}))}else xt.push(jsx(BtnAdd,{indexes:[pt.length],x:Et+dt+30-mt.width/2,y:At+Ct/2-mt.height/2}))}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:30,children:[jsx(Defs,{children:DropShadowFilter$1}),gt,jsxs(Group,{x:0,y:0,children:[jsx(Group,{children:bt}),jsx(ItemsGroup,{children:yt}),jsx(BtnsGroup,{children:xt})]})]})};registerStructure("sequence-ascending-stairs-3d",{component:SequenceAscendingStairs3d,composites:["title","item"]});const SequenceAscendingSteps=it=>{const{Title:rt,Item:lt,data:ct,hGap:ht=0,vGap:dt=0}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0]})),xt=[],yt=[],bt=pt.length,wt=mt.width+ht,Ct=mt.height/2+dt,vt=mt.width/2,_t=0+(bt-1)*Ct;return pt.forEach((Tt,Et)=>{const At=vt+Et*wt,Mt=_t-Et*Ct,It=[Et];xt.push(jsx(lt,{indexes:It,datum:Tt,data:ct,x:At,y:Mt})),yt.push(jsx(BtnRemove,{indexes:It,x:At+mt.width-30,y:Mt+mt.height/2+10})),yt.push(jsx(BtnAdd,{indexes:It,x:At+mt.width+ht/2,y:Mt-30}))}),jsxs(FlexLayout,{flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{children:[jsx(ItemsGroup,{children:xt}),jsx(BtnsGroup,{children:yt})]})]})};registerStructure("sequence-ascending-steps",{component:SequenceAscendingSteps,composites:["title","item"]});const ITEM_DISTANCE=20,LINE_GAP=5,SequenceCircleArrows=it=>{const{Title:rt,Item:lt,data:ct,options:ht,radius:dt=150,arrowSize:ut=4,strokeWidth:ft=10}=it,{title:pt,desc:gt,items:mt=[]}=ct,xt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),yt=getColorPrimary(ht);if(!lt){const zt=rt?jsx(rt,{title:pt,desc:gt}):null;return jsxs(FlexLayout,{flexDirection:"column",justifyContent:"center",alignItems:"center",children:[zt,jsx(Group,{children:jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:0,y:0})})})]})}const bt=mt.length;if(bt===0){const zt=rt?jsx(rt,{title:pt,desc:gt}):null;return jsxs(FlexLayout,{flexDirection:"column",justifyContent:"center",alignItems:"center",children:[zt,jsx(Group,{children:jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:0,y:0})})})]})}const wt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:mt[0]})),Ct=0,vt=0,St=2*Math.PI/bt,_t=[];let Tt=1/0,Et=1/0,At=-1/0,Mt=-1/0;for(let zt=0;zt<bt;zt++){const Nt=zt*St-Math.PI/2,Bt=Ct+dt*Math.cos(Nt),Vt=vt+dt*Math.sin(Nt);_t.push({x:Bt,y:Vt}),Tt=Math.min(Tt,Bt),Et=Math.min(Et,Vt),At=Math.max(At,Bt),Mt=Math.max(Mt,Vt)}const It=[];for(let zt=0;zt<bt;zt++){const Nt=_t[zt],Bt=_t[(zt+1)%bt],Vt=Math.sqrt(Math.pow(Bt.x-Nt.x,2)+Math.pow(Bt.y-Nt.y,2)),Yt=Math.min(Vt*.5,100),Kt=(Nt.x+Bt.x)/2,Dt=(Nt.y+Bt.y)/2;Tt=Math.min(Tt,Kt-Yt/2),Et=Math.min(Et,Dt-Yt/2),At=Math.max(At,Kt+Yt/2),Mt=Math.max(Mt,Dt+Yt/2);const Rt=Math.atan2(Dt-vt,Kt-Ct),Wt=Rt<0?Rt+2*Math.PI:Rt;let qt,Zt;const Ut=Wt*180/Math.PI,Qt=Yt/2+ITEM_DISTANCE,Jt=Kt+Math.cos(Rt)*Qt,oe=Dt+Math.sin(Rt)*Qt;Ut>=337.5||Ut<22.5?(qt=Jt,Zt=oe-wt.height/2):Ut>=22.5&&Ut<67.5?(qt=Jt,Zt=oe):Ut>=67.5&&Ut<112.5?(qt=Jt-wt.width/2,Zt=oe):Ut>=112.5&&Ut<157.5?(qt=Jt-wt.width,Zt=oe):Ut>=157.5&&Ut<202.5?(qt=Jt-wt.width,Zt=oe-wt.height/2):Ut>=202.5&&Ut<247.5?(qt=Jt-wt.width,Zt=oe-wt.height):Ut>=247.5&&Ut<292.5?(qt=Jt-wt.width/2,Zt=oe-wt.height):(qt=Jt,Zt=oe-wt.height),It.push({lineLength:Vt,circleBigW:Yt,midX:Kt,midY:Dt,itemX:qt,itemY:Zt}),Tt=Math.min(Tt,qt),Et=Math.min(Et,Zt),At=Math.max(At,qt+wt.width+xt.width+5),Mt=Math.max(Mt,Zt+wt.height)}const Lt=Math.max(0,-Tt),jt=Math.max(0,-Et),Ot=rt?jsx(rt,{title:pt,desc:gt}):null,Pt=[],Gt=[],kt=[],Ht=[],Xt=_t.map(zt=>({x:zt.x+Lt,y:zt.y+jt}));for(let zt=0;zt<bt;zt++){const Nt=Xt[zt],Bt=Xt[(zt+1)%bt],Vt=(zt+1)%bt,Yt=[zt],{lineLength:Kt,circleBigW:Dt,midX:Rt,midY:Wt}=It[zt],qt=Math.max(Dt-20,20),Zt=Math.max(qt*.4,16),Ut=getPaletteColor(ht,Yt)||yt,Qt=Bt.x-Nt.x,Jt=Bt.y-Nt.y,oe=Kt,ce=Qt/oe,ie=Jt/oe,le=LINE_GAP*2+ut,he=Math.min(LINE_GAP,(oe-le)/2),se=Math.max(0,Nt.x+ce*he),ee=Math.max(0,Nt.y+ie*he),ne=Math.max(0,Bt.x-ce*he),ue=Math.max(0,Bt.y-ie*he),ge=line().x(Ae=>Math.max(0,Ae.x)).y(Ae=>Math.max(0,Ae.y)).curve(curveLinear)([{x:se,y:ee},{x:ne,y:ue}])||"",ae=`fork-arrow-${Ut.replace(/[^a-zA-Z0-9]/g,"")}-${zt}`,fe=`
      M ${-ut*.6} ${-ut*.4}
      L 0 0
      L ${-ut*.6} ${ut*.4}
    `;Ht.push(jsx("marker",{id:ae,viewBox:`${-ut} ${-ut*.6} ${ut*1.2} ${ut*1.2}`,refX:-ut*.08,refY:0,markerWidth:ut,markerHeight:ut,orient:"auto",markerUnits:"strokeWidth",children:jsx("path",{d:fe,fill:"none",stroke:Ut,strokeLinecap:"round",strokeLinejoin:"round","data-element-type":"shape"})})),kt.push(jsx(Path$1,{d:ge,stroke:Ut,strokeWidth:ft,fill:"none",markerEnd:`url(#${ae})`,strokeLinecap:"round","data-element-type":"shape"}));const pe=Rt+Lt,be=Wt+jt,me=getThemeColors({colorPrimary:Ut||yt},ht);kt.push(jsx(Ellipse,{x:Math.max(0,pe-Dt/2),y:Math.max(0,be-Dt/2),width:Dt,height:Dt,fill:me.colorPrimaryBg,"data-element-type":"shape"})),kt.push(jsx(Ellipse,{x:Math.max(0,pe-qt/2),y:Math.max(0,be-qt/2),width:qt,height:qt,fill:"#ffffff"})),kt.push(jsx(ItemIcon,{x:Math.max(0,pe-Zt/2),y:Math.max(0,be-Zt/2),size:Zt,indexes:Yt,fill:Ut}));const Ce=Math.max(0,pe-xt.width/2),Te=Math.max(0,be-xt.height/2);Pt.push(jsx(BtnAdd,{indexes:[Vt],x:Ce,y:Te}))}for(let zt=0;zt<bt;zt++){const Nt=[zt],Bt=mt[zt],{itemX:Vt,itemY:Yt}=It[zt],Kt=Math.max(0,Vt+Lt),Dt=Math.max(0,Yt+jt);Gt.push(jsx(lt,{indexes:Nt,datum:Bt,data:ct,x:Kt,y:Dt}));const Rt=Math.max(0,Kt+wt.width+5),Wt=Math.max(0,Dt+wt.height/2-xt.height/2);Pt.push(jsx(BtnRemove,{indexes:Nt,x:Rt,y:Wt}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:30,children:[Ot,jsxs(Group,{x:0,y:0,children:[jsx(Defs,{children:Ht}),jsx(Group,{children:kt}),jsx(ItemsGroup,{children:Gt}),jsx(BtnsGroup,{children:Pt})]})]})};registerStructure("sequence-circle-arrows",{component:SequenceCircleArrows,composites:["title","item"]});const ITEM_AREA_HORIZONTAL_PADDING=100,CIRCLE_AREA_HORIZONTAL_PADDING=50,INNER_ARC_PADDING=6,ARC_BACKGROUND_OPACITY_HEX="40",SequenceCircular=it=>{const{Title:rt,Item:lt,data:ct,options:ht,outerRadius:dt=180,innerRadius:ut=120,itemDistance:ft=310,gapAngle:pt=5,iconRadius:gt=34,iconBgRadius:mt=38,iconSize:xt=36}=it,{title:yt,desc:bt,items:wt=[]}=ct,Ct=rt?jsx(rt,{title:yt,desc:bt}):null,vt=Math.max(ft+ITEM_AREA_HORIZONTAL_PADDING,dt+CIRCLE_AREA_HORIZONTAL_PADDING),St=Math.min(ft,dt),_t=getElementBounds(jsx(BtnAdd,{indexes:[0]}));if(wt.length===0)return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[Ct,jsx(Group,{children:jsx(BtnsGroup,{children:jsx(BtnAdd,{indexes:[0],x:vt-20,y:St-20})})})]});const Tt=[],Et=[],At=[],Mt=[],It=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:wt[0]})),Ot=(360-wt.length*pt)/wt.length,Pt=(Yt,Kt,Dt,Rt,Wt,qt)=>{const Zt=Wt*Math.PI/180,Ut=qt*Math.PI/180,Qt=Yt+Dt*Math.cos(Zt),Jt=Kt+Dt*Math.sin(Zt),oe=Yt+Rt*Math.cos(Zt),ce=Kt+Rt*Math.sin(Zt),ie=Yt+Rt*Math.cos(Ut),le=Kt+Rt*Math.sin(Ut),he=Yt+Dt*Math.cos(Ut),se=Kt+Dt*Math.sin(Ut),ee=qt-Wt<=180?"0":"1";return[`M ${Qt} ${Jt}`,`L ${oe} ${ce}`,`A ${Rt} ${Rt} 0 ${ee} 1 ${ie} ${le}`,`L ${he} ${se}`,`A ${Dt} ${Dt} 0 ${ee} 0 ${Qt} ${Jt}`,"Z"].join(" ")},Gt=({centerX:Yt,outerRadius:Kt,angleRad:Dt,btnBounds:Rt})=>{const Wt=Yt+(Kt+20)*Math.cos(Dt)-Rt.width/2,qt=St+(Kt+20)*Math.sin(Dt)-Rt.height/2;return{x:Wt,y:qt}},kt=INNER_ARC_PADDING,Ht=(ut+dt)/2,Xt=kt/Ht*(180/Math.PI);wt.forEach((Yt,Kt)=>{const Dt=[Kt],Rt=Kt*(Ot+pt)+270,Wt=Rt+Ot,qt=(Rt+Wt)/2,Zt=qt*Math.PI/180,Ut=getPaletteColor(ht,Dt),Qt=Ut+ARC_BACKGROUND_OPACITY_HEX,Jt=Pt(vt,St,ut,dt,Rt,Wt);At.push(jsx(Path$1,{d:Jt,fill:Qt,width:dt*2,height:dt*2,"data-element-type":"shape"}));const oe=Pt(vt,St,ut+kt,dt-kt,Rt+Xt,Wt-Xt);At.push(jsx(Path$1,{d:oe,fill:Ut,width:dt*2,height:dt*2,"data-element-type":"shape"}));const ce=(ut+dt)/2,ie=vt+ce*Math.cos(Zt),le=St+ce*Math.sin(Zt);Mt.push(jsx(Ellipse,{x:ie-mt,y:le-mt,width:mt*2,height:mt*2,fill:"#ffffff","data-element-type":"shape"})),Mt.push(jsx(Ellipse,{x:ie-gt,y:le-gt,width:gt*2,height:gt*2,fill:Ut,"data-element-type":"shape"})),Yt.icon&&Mt.push(jsx(ItemIcon,{x:ie-xt/2,y:le-xt/2,indexes:Dt,size:xt,fill:"#fff"}));const he=(qt%360+360)%360,se=he>=270||he<=90,ee=he>=75&&he<=105;let ne,ue="normal",ye="normal";ee?(ne=he,ye="normal",ue="center"):se?(he>=270?ne=-60+(he-270)/90*60:ne=he/90*60,ue="normal"):(ne=120+(he-90)/180*120,ue="flipped");const ge=ne*Math.PI/180,de=vt+ft*Math.cos(ge)-It.width/2;let ae=St+ft*Math.sin(ge)-It.height/2;ee&&(ae=St+dt+It.height/2),Et.push(jsx(lt,{indexes:Dt,datum:Yt,data:ct,x:de,y:ae,positionH:ue,positionV:ye}));const fe=ft+40,pe=vt+fe*Math.cos(ge)-_t.width/2,be=St+fe*Math.sin(ge)-_t.height/2;Tt.push(jsx(BtnRemove,{indexes:Dt,x:pe,y:be}));const Ce=(Rt+Ot+pt/2)*Math.PI/180,{x:Te,y:Ae}=Gt({centerX:vt,outerRadius:dt,angleRad:Ce,btnBounds:_t});Tt.push(jsx(BtnAdd,{indexes:[Kt+1],x:Te,y:Ae}))});const Nt=(270-pt/2)*Math.PI/180,{x:Bt,y:Vt}=Gt({centerX:vt,outerRadius:dt,angleRad:Nt,btnBounds:_t});return Tt.unshift(jsx(BtnAdd,{indexes:[0],x:Bt,y:Vt})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:70,children:[Ct,jsxs(Group,{children:[jsx(Group,{children:At}),jsx(Group,{children:Mt}),jsx(ItemsGroup,{children:Et}),jsx(BtnsGroup,{children:Tt})]})]})};registerStructure("sequence-circular",{component:SequenceCircular,composites:["title","item"]});const SequenceColorSnakeSteps=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=0,rowGap:dt=0,itemsPerRow:ut=3,circleStrokeWidth:ft=18,options:pt}=it,{title:gt,desc:mt,items:xt=[]}=ct,yt=rt?jsx(rt,{title:gt,desc:mt}):null,bt=getColorPrimary(pt),wt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Ct=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:xt[0],positionH:"center"})),vt=[],St=[],_t=[],Tt=(dt+Ct.height)/2,Et=Tt;if(xt.forEach((At,Mt)=>{const It=Math.floor(Mt/ut),Lt=Mt%ut,jt=It%2===1,Pt=(jt?ut-1-Lt:Lt)*(Ct.width+ht)+Et,Gt=It*(Ct.height+dt),kt=[Mt];if(St.push(jsx(lt,{indexes:kt,datum:At,data:ct,x:Pt,y:Gt,positionH:"center",positionV:Mt%2===1?"flipped":"normal"})),vt.push(jsx(BtnRemove,{indexes:kt,x:Pt+(Ct.width-wt.width)/2,y:Gt+Ct.height+10})),Mt===0&&vt.push(jsx(BtnAdd,{indexes:kt,x:Pt+(Ct.width-wt.width)/2,y:Gt-wt.height-10})),Mt<xt.length-1){const Ht=Math.floor((Mt+1)/ut);if(It===Ht)vt.push(jsx(BtnAdd,{indexes:[Mt+1],x:Pt+(Ct.width-wt.width)/2,y:Gt-wt.height-10}));else{const zt=Gt+Ct.height/2,Nt=Gt+Ct.height+dt+Ct.height/2;let Bt,Vt,Yt;jt?(Bt=Pt,Yt=0,Vt=`M ${Bt} ${zt} A ${Tt} ${Tt} 0 0 ${Yt} ${Bt} ${Nt}`):(Bt=Pt+Ct.width,Yt=1,Vt=`M ${Bt} ${zt} A ${Tt} ${Tt} 0 0 ${Yt} ${Bt} ${Nt}`);const Kt=Nt-zt,Dt=getPaletteColor(pt,kt),Rt=getPaletteColor(pt,[Mt+1]),Wt=`gradient-arc-${Mt}`;_t.push(jsxs(Fragment,{children:[jsx(Defs,{children:jsxs("linearGradient",{id:Wt,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:Dt||bt}),jsx("stop",{offset:"100%",stopColor:Rt||bt})]})}),jsx(Path$1,{d:Vt,stroke:`url(#${Wt})`,strokeWidth:ft,fill:"none",width:Et,height:Kt,"data-element-type":"shape"})]}));const qt=jt?Bt-Tt-wt.width/2:Bt+Tt-wt.width/2,Zt=Gt+Ct.height+dt/2-wt.height/2;vt.push(jsx(BtnAdd,{indexes:[Mt+1],x:qt,y:Zt}))}}}),xt.length>0){const At=xt.length-1,Mt=Math.floor(At/ut),It=At%ut,Ot=(Mt%2===1?ut-1-It:It)*(Ct.width+ht),Pt=Mt*(Ct.height+dt);vt.push(jsx(BtnAdd,{indexes:[xt.length],x:Ot+(Ct.width-wt.width)/2,y:Pt+Ct.height+wt.height+20}))}if(xt.length/ut>2){const At=(dt+Ct.height)/2,Mt=getPaletteColor(pt,[0]);_t.push(jsx(Rect,{x:0,y:Ct.height/2-ft/2,width:At,height:ft,fill:Mt||bt,"data-element-type":"shape"}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[yt,jsxs(Group,{width:ut*Ct.width+(ut-1)*ht+Tt*2,height:Math.ceil(xt.length/ut)*(Ct.height+dt),children:[jsx(Group,{children:_t}),jsx(ItemsGroup,{children:St}),jsx(BtnsGroup,{children:vt})]})]})};registerStructure("sequence-color-snake-steps",{component:SequenceColorSnakeSteps,composites:["title","item"]});const calculateDepthOffset=(it,rt)=>it===0?0:it===1?rt/2:rt/2+(it-1)*(rt/2*3),calculateLateralOffset=(it,rt,lt)=>{if(it)return 0;const dt=rt===0?2:lt;return lt*2+dt},calculateLayoutMetrics=(it,rt,lt,ct,ht,dt,ut,ft)=>{const pt=Math.max(6,dt*.15),gt=ct+(it-1)*ht,mt=it*pt,xt=100,bt=gt+mt+xt+50,wt=bt-xt;let Ct=0,vt=0,St=0,_t=0;if(it>0){let Et=1/0,At=-1/0;for(let Ht=0;Ht<it;Ht++){const Xt=Ht%2===0,zt=Math.floor(Ht/2),Nt=calculateDepthOffset(zt,lt),Vt=0+calculateLateralOffset(Xt,zt,lt)+Nt;Et=Math.min(Et,Vt-lt),At=Math.max(At,Vt+lt)}const Mt=(Et+At)/2,It=0;Ct=0,_t=Ct+rt.width+ft+ut+lt,St=_t-It+Mt;const Pt=Ct+rt.width/2,Gt=St-Pt;vt=St+Gt-rt.width/2}return{canvasHeight:bt,startY:wt,leftItemAlignedX:Ct,rightItemAlignedX:vt,cylinderAreaStartX:_t}},calculateCylinderPosition=(it,rt,lt,ct,ht,dt,ut)=>{const ft=it%2===0,pt=Math.floor(it/2),gt=calculateDepthOffset(pt,rt),mt=calculateLateralOffset(ft,pt,rt),xt=ut+mt+gt,yt=dt-it*ht,bt=lt+it*ct,wt=yt-bt;return{x:xt,y:wt,height:bt,bottomY:yt,topY:wt}},calculateItemPosition=(it,rt,lt,ct,ht,dt,ut,ft,pt)=>{const gt=it%2===0,mt=rt.topY+rt.height*.05;let xt,yt;gt?(xt=ht,yt=xt+lt.width+pt):(xt=dt,yt=xt-pt);let bt;ut==="top"?bt=mt:ut==="bottom"?bt=mt-lt.height:bt=mt-lt.height/2,bt+=ft;const wt=gt?rt.x-ct:rt.x+ct,Ct=gt?wt-pt:wt+pt;return{itemPos:{x:xt,y:bt},lineStartX:Ct,lineEndX:yt,lineY:mt}},createGradientDefs=(it,rt)=>{const lt=tinycolor(rt),ct=[];return ct.push(jsxs("linearGradient",{id:`cylinderGradient${it}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:lt.toRgbString(),stopOpacity:.7}),jsx("stop",{offset:"40%",stopColor:lt.clone().lighten(5).toRgbString(),stopOpacity:.65}),jsx("stop",{offset:"70%",stopColor:lt.clone().lighten(15).toRgbString(),stopOpacity:.6}),jsx("stop",{offset:"100%",stopColor:lt.clone().lighten(20).toRgbString(),stopOpacity:.55})]})),ct.push(jsxs("linearGradient",{id:`topGradient${it}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:lt.clone().lighten(15).toRgbString(),stopOpacity:1}),jsx("stop",{offset:"100%",stopColor:"#fafafa",stopOpacity:1})]})),ct.push(jsxs("linearGradient",{id:`bottomGradient${it}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:lt.clone().darken(8).toRgbString(),stopOpacity:.75}),jsx("stop",{offset:"50%",stopColor:lt.clone().darken(5).toRgbString(),stopOpacity:.7}),jsx("stop",{offset:"100%",stopColor:lt.clone().darken(12).toRgbString(),stopOpacity:.65})]})),ct.push(jsxs("linearGradient",{id:`numberGradient${it}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:lt.clone().darken(0).toRgbString(),stopOpacity:.9}),jsx("stop",{offset:"50%",stopColor:lt.clone().lighten(5).toRgbString(),stopOpacity:.85}),jsx("stop",{offset:"100%",stopColor:lt.clone().lighten(10).toRgbString(),stopOpacity:.8})]})),ct.push(jsxs("linearGradient",{id:`glowGradient${it}`,x1:"0%",y1:"100%",x2:"0%",y2:"0%",children:[jsx("stop",{offset:"0%",stopColor:"#FFFFFF",stopOpacity:.2}),jsx("stop",{offset:"90%",stopColor:"#FFFFFF",stopOpacity:0})]})),ct},createCylinderElements=(it,rt,lt,ct)=>{const{x:ht,topY:dt,bottomY:ut}=rt,ft=[];ft.push(jsx("ellipse",{id:`cylinder-bottom-${it}`,cx:ht,cy:ut,rx:lt,ry:ct,fill:`url(#bottomGradient${it})`,opacity:.7})),ft.push(jsx(Path$1,{id:`cylinder-body-${it}`,d:`
        M ${ht-lt} ${dt}
        A ${lt} ${ct} 0 0 0 ${ht} ${dt+ct}
        A ${lt} ${ct} 0 0 0 ${ht+lt} ${dt}
        L ${ht+lt} ${ut}
        A ${lt} ${ct} 0 0 1 ${ht} ${ut+ct}
        A ${lt} ${ct} 0 0 1 ${ht-lt} ${ut}
        Z
      `,fill:`url(#cylinderGradient${it})`,stroke:"none"})),ft.push(jsx(Rect,{id:`cylinder-glow-${it}`,x:ht-lt,y:dt-ct*3,width:lt*2,height:ct*3,fill:`url(#glowGradient${it})`})),ft.push(jsx("ellipse",{id:`cylinder-top-${it}`,cx:ht,cy:dt,rx:lt,ry:ct,fill:`url(#topGradient${it})`}));const pt=ht-10,gt=dt-15,yt=`translate(${pt}, ${gt}) matrix(1, 0, ${-.6}, ${.6}, 0, 0)`;return ft.push(jsx(Text,{id:`cylinder-number-${it}`,width:50,height:50,fontFamily:"Arial Black, sans-serif",fontSize:32,fontWeight:900,fill:`url(#numberGradient${it})`,alignHorizontal:"center",alignVertical:"middle",transform:yt,children:it+1})),ft},createDecorationElements=(it,rt,lt,ct,ht)=>{const ut=[];return ut.push(jsx("circle",{id:`decoration-dot-start-${it}`,cx:rt,cy:ct,r:2,fill:ht})),ut.push(jsx("line",{id:`decoration-line-${it}`,x1:rt,y1:ct,x2:lt,y2:ct,stroke:ht,strokeWidth:1,opacity:.8})),ut.push(jsx("circle",{id:`decoration-dot-end-${it}`,cx:lt,cy:ct,r:2,fill:ht,opacity:.9})),ut},createBasePlate=(it,rt,lt,ct,ht)=>{if(it===0)return null;const dt=[];for(let Et=0;Et<it;Et++){const At=Et%2===0,Mt=Math.floor(Et/2),It=calculateDepthOffset(Mt,rt),Lt=calculateLateralOffset(At,Mt,rt),jt=lt+Lt+It,Ot=ct-Et*ht;dt.push({x:jt,y:Ot})}const ut=dt[0],ft=dt[dt.length-1],pt=6,gt=it>5?it*16:100,mt=ut.x-rt-gt,xt=ut.x+rt+gt,yt=ut.y+pt+gt/6,bt=ft.x-rt-gt,wt=ft.x+rt+gt,Ct=ft.y+pt-gt/6,vt=`
    M ${mt} ${yt}
    L ${xt} ${yt}
    L ${wt} ${Ct}
    L ${bt} ${Ct}
    Z
  `,St=`
    M ${xt} ${yt}
    L ${xt} ${yt+pt}
    L ${wt} ${Ct+pt}
    L ${wt} ${Ct}
    Z
  `,_t=`
    M ${mt} ${yt}
    L ${xt} ${yt}
    L ${xt} ${yt+pt}
    L ${mt} ${yt+pt}
    Z
  `,Tt=jsxs(Fragment,{children:[jsxs("linearGradient",{id:"basePlateTopGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:"#fafafa",stopOpacity:1}),jsx("stop",{offset:"50%",stopColor:"#ffffff",stopOpacity:.98}),jsx("stop",{offset:"100%",stopColor:"#ececec",stopOpacity:.95})]}),jsxs("linearGradient",{id:"basePlateFrontGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:"#e0e0e0",stopOpacity:.95}),jsx("stop",{offset:"50%",stopColor:"#d2d2d2",stopOpacity:.93}),jsx("stop",{offset:"100%",stopColor:"#c5c5c5",stopOpacity:.9})]}),jsxs("linearGradient",{id:"basePlateSideGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[jsx("stop",{offset:"0%",stopColor:"#b8b8b8",stopOpacity:.92}),jsx("stop",{offset:"50%",stopColor:"#c0c0c0",stopOpacity:.88}),jsx("stop",{offset:"100%",stopColor:"#adadad",stopOpacity:.85})]})]});return jsxs(Group,{children:[jsx(Defs,{children:Tt}),jsx(Path$1,{id:"base-plate-front",d:_t,fill:"url(#basePlateFrontGradient)",stroke:"#c5c5c5",strokeWidth:.3,opacity:.92}),jsx(Path$1,{id:"base-plate-side",d:St,fill:"url(#basePlateSideGradient)",stroke:"#aaaaaa",strokeWidth:.3,opacity:.88}),jsx(Path$1,{id:"base-plate-top",d:vt,fill:"url(#basePlateTopGradient)",stroke:"#e5e5e5",strokeWidth:.5,opacity:.93})]})},sequenceCylinders3d=it=>{const{Title:rt,Item:lt,data:ct,options:ht,cylinderRx:dt=28,cylinderRy:ut=18,baseHeight:ft=120,heightIncrement:pt=40,depthSpacing:gt=60,itemVerticalAlign:mt="top",itemVerticalOffset:xt=-12,firstDecorationWidth:yt=90}=it,{title:bt,desc:wt,items:Ct=[]}=ct,vt=rt?jsx(rt,{title:bt,desc:wt}):null,St=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:Ct[0],positionH:"center"})),_t=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Tt=getColorPrimary(ht),Et=10,At=Math.max(6,gt*.15),Mt=calculateLayoutMetrics(Ct.length,St,dt,ft,pt,gt,yt,Et),{startY:It,leftItemAlignedX:Lt,rightItemAlignedX:jt,cylinderAreaStartX:Ot}=Mt,Pt=[],Gt=[];Ct.forEach((Dt,Rt)=>{const Wt=getPaletteColor(ht,[Rt])||Tt;Pt.push(...createGradientDefs(Rt,Wt));const qt=calculateCylinderPosition(Rt,dt,ft,pt,At,It,Ot),Zt=createCylinderElements(Rt,qt,dt,ut),{itemPos:Ut,lineStartX:Qt,lineEndX:Jt,lineY:oe}=calculateItemPosition(Rt,qt,St,dt,Lt,jt,mt,xt,Et),ce=createDecorationElements(Rt,Qt,Jt,oe,Wt);Zt.push(...ce);const ie=jsx(lt,{indexes:[Rt],datum:Dt,data:ct,x:Ut.x,y:Ut.y,positionH:Rt%2===0?"flipped":"normal"}),le=[jsx(BtnRemove,{indexes:[Rt],x:Ut.x+St.width/2-_t.width/2,y:Ut.y+St.height+10}),jsx(BtnAdd,{indexes:[Rt],x:Ut.x+St.width/2-_t.width/2,y:Ut.y-_t.height-10})];Gt[Rt]={cylinderNodes:Zt,itemNode:ie,btnNodes:le,itemX:Ut.x,itemY:Ut.y}});let kt=1/0,Ht=1/0,Xt=-1/0,zt=-1/0;Gt.forEach(Dt=>{const{itemX:Rt,itemY:Wt}=Dt;kt=Math.min(kt,Rt),Ht=Math.min(Ht,Wt),Xt=Math.max(Xt,Rt+St.width),zt=Math.max(zt,Wt+St.height)});const Nt=Xt-kt,Bt=zt-Ht,Vt=[jsx(Defs,{children:Pt})],Yt=[],Kt=createBasePlate(Ct.length,dt,Ot,It,At);Kt&&Vt.push(Kt);for(let Dt=Ct.length-1;Dt>=0;Dt--){const Rt=Gt[Dt];Rt&&(Vt.push(jsxs(Group,{children:[jsx(Group,{children:Rt.cylinderNodes}),Rt.itemNode]})),Yt.push(...Rt.btnNodes))}if(Ct.length>0){const Dt=Ct.length%2===0,Rt=Math.floor(Ct.length/2),Wt=calculateDepthOffset(Rt,dt),qt=calculateLateralOffset(Dt,Rt,dt),Zt=Ot+qt+Wt,Ut=It-Ct.length*At;Yt.push(jsx(BtnAdd,{indexes:[Ct.length],x:Zt,y:Ut-100}))}return jsxs(FlexLayout,{flexDirection:"column",justifyContent:"center",alignItems:"center",children:[vt,jsxs(Group,{width:Nt,height:Bt,children:[jsx(ItemsGroup,{children:Vt}),jsx(BtnsGroup,{children:Yt})]})]})};registerStructure("sequence-cylinders-3d",{component:sequenceCylinders3d,composites:["title","item"]});const SHAPE_CONFIG={WIDTH:160,HEIGHT:260,ARROW_HEIGHT:148,ARROW_WIDTH:100,LINE_X:100,RECT_X:0,RECT_Y:80,RECT_WIDTH:100,RECT_HEIGHT:130},PARTICLE_CONFIG={SIZE:8,MAX_COUNT:40,MIN_COUNT:5,ARROW_RATIO:.6,MIN_ARROW_COUNT:3};function pseudoRandom(it,rt,lt){return(it+rt*7+lt*13)%100}function calculateGridLayout(it){const rt=Math.ceil(Math.sqrt(it*1.5)),lt=Math.ceil(it/rt);return{cols:rt,rows:lt}}function calculateParticlePosition(it,rt,lt,ct,ht,dt,ut,ft){const pt=Math.max(ht,Math.min(it+lt,dt)),gt=Math.max(ut,Math.min(rt+ct,ft));return{x:pt,y:gt}}function generateParticles({count:it,rectX:rt,rectY:lt,rectWidth:ct,rectHeight:ht,seed:dt}){const ut=[],ft=PARTICLE_CONFIG.SIZE/2,{cols:pt,rows:gt}=calculateGridLayout(it),mt=(ct-ft*2)/(pt+1),xt=(ht-ft*2)/(gt+1);let yt=0;for(let bt=0;bt<gt&&yt<it;bt++)for(let wt=0;wt<pt&&yt<it;wt++){const Ct=pseudoRandom(dt,bt,wt),vt=Ct%16-8,St=Ct*3%12-6,_t=bt%2===1?mt/2:0,Tt=rt+ft+(wt+1)*mt+_t,Et=lt+ft+(bt+1)*xt,{x:At,y:Mt}=calculateParticlePosition(Tt,Et,vt,St,rt+ft,rt+ct-ft,lt+ft,lt+ht-ft);ut.push({x:At,y:Mt,colorIndex:yt}),yt++}return ut}function calculateParticleCount(it,rt){if(rt<=1)return PARTICLE_CONFIG.MAX_COUNT;const lt=it/(rt-1),ct=PARTICLE_CONFIG.MAX_COUNT-PARTICLE_CONFIG.MIN_COUNT;return Math.round(PARTICLE_CONFIG.MAX_COUNT-ct*lt)}function createMeshPath(){const ut={topLeft:{x:40,y:25},topRight:{x:160,y:75},bottomLeft:{x:40,y:205},bottomRight:{x:160,y:255}},ft=[];for(let pt=0;pt<=12;pt++){const gt=pt/12,mt={x:ut.topLeft.x+(ut.bottomLeft.x-ut.topLeft.x)*gt,y:ut.topLeft.y+(ut.bottomLeft.y-ut.topLeft.y)*gt},xt={x:ut.topRight.x+(ut.bottomRight.x-ut.topRight.x)*gt,y:ut.topRight.y+(ut.bottomRight.y-ut.topRight.y)*gt};ft.push(`M${mt.x} ${mt.y}L${xt.x} ${xt.y}`);const yt={x:ut.topLeft.x+(ut.topRight.x-ut.topLeft.x)*gt,y:ut.topLeft.y+(ut.topRight.y-ut.topLeft.y)*gt},bt={x:ut.bottomLeft.x+(ut.bottomRight.x-ut.bottomLeft.x)*gt,y:ut.bottomLeft.y+(ut.bottomRight.y-ut.bottomLeft.y)*gt};ft.push(`M${yt.x} ${yt.y}L${bt.x} ${bt.y}`)}return ft.join("")}function renderParticles(it,rt){return it.map(lt=>{const ct=getPaletteColor(rt,[lt.colorIndex]);return jsx(Path$1,{d:"M4 0L8 4L4 8L0 4Z",fill:ct,x:lt.x,y:lt.y,width:PARTICLE_CONFIG.SIZE,height:PARTICLE_CONFIG.SIZE,"data-element-type":"shape"})})}function createDecorElement(it,rt,lt,ct,ht){return jsxs(Group,{x:rt,y:0,width:SHAPE_CONFIG.WIDTH,height:SHAPE_CONFIG.HEIGHT,children:[jsxs(ShapesGroup,{children:[jsx(Path$1,{d:createMeshPath(),stroke:"#D9D9D9",strokeWidth:2}),jsx(Path$1,{d:`M${SHAPE_CONFIG.LINE_X} 25V260`,stroke:"#BFBFBF",strokeWidth:2,strokeLinecap:"round"}),jsx(Rect,{x:SHAPE_CONFIG.RECT_X,y:SHAPE_CONFIG.RECT_Y,width:SHAPE_CONFIG.RECT_WIDTH,height:SHAPE_CONFIG.RECT_HEIGHT,fill:"#FFCB0E",fillOpacity:.2})]}),jsx(Fragment,{children:renderParticles(ct,ht)}),jsx(Text,{x:SHAPE_CONFIG.LINE_X-25,y:0,width:50,height:20,fontSize:20,fontWeight:"bold",alignHorizontal:"center",alignVertical:"top",fill:lt,children:String(it+1).padStart(2,"0")})]})}function createArrowElement(it,rt){const lt=SHAPE_CONFIG.RECT_Y+SHAPE_CONFIG.RECT_HEIGHT/2-SHAPE_CONFIG.ARROW_HEIGHT/2,ct=Math.max(Math.round(PARTICLE_CONFIG.MIN_COUNT*PARTICLE_CONFIG.ARROW_RATIO),PARTICLE_CONFIG.MIN_ARROW_COUNT),ht=generateParticles({count:ct,rectX:0,rectY:14,rectWidth:57,rectHeight:120,seed:999});return jsxs(Group,{x:it+SHAPE_CONFIG.WIDTH,y:lt,children:[jsx(Path$1,{d:"M0 13.9679H57.1429V0L100 74L57.1429 148V134.032H0V13.9679Z",width:SHAPE_CONFIG.ARROW_WIDTH,height:SHAPE_CONFIG.ARROW_HEIGHT,fill:"#FFCB0E",fillOpacity:.2,"data-element-type":"shape"}),jsx(Fragment,{children:renderParticles(ht,rt)})]})}const SequenceFilterMesh=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=20,options:dt}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0],width:SHAPE_CONFIG.WIDTH,positionH:"center"})),yt=[],bt=[],wt=[],Ct=SHAPE_CONFIG.HEIGHT+ht,vt=Ct+xt.height+10;if(pt.forEach((St,_t)=>{const Tt=_t*SHAPE_CONFIG.WIDTH,Et=[_t],At=getPaletteColor(dt,Et),Mt=calculateParticleCount(_t,pt.length),It=generateParticles({count:Mt,rectX:SHAPE_CONFIG.RECT_X,rectY:SHAPE_CONFIG.RECT_Y,rectWidth:SHAPE_CONFIG.RECT_WIDTH,rectHeight:SHAPE_CONFIG.RECT_HEIGHT,seed:_t*100});yt.push(createDecorElement(_t,Tt,At,It,dt)),_t===pt.length-1&&yt.push(createArrowElement(Tt,dt)),bt.push(jsx(lt,{indexes:Et,datum:St,data:ct,width:SHAPE_CONFIG.WIDTH,x:Tt+SHAPE_CONFIG.LINE_X-SHAPE_CONFIG.WIDTH/2,y:Ct,positionH:"center"})),wt.push(jsx(BtnRemove,{indexes:Et,x:Tt+SHAPE_CONFIG.LINE_X-mt.width/2,y:vt})),_t<pt.length-1&&wt.push(jsx(BtnAdd,{indexes:[_t+1],x:Tt+SHAPE_CONFIG.WIDTH-mt.width/2,y:vt}))}),pt.length>0){wt.unshift(jsx(BtnAdd,{indexes:[0],x:-mt.width/2,y:vt}));const St=(pt.length-1)*SHAPE_CONFIG.WIDTH;wt.push(jsx(BtnAdd,{indexes:[pt.length],x:St+SHAPE_CONFIG.WIDTH-mt.width/2,y:vt}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{width:SHAPE_CONFIG.WIDTH*pt.length+SHAPE_CONFIG.ARROW_WIDTH,height:SHAPE_CONFIG.HEIGHT+ht+xt.height,children:[jsx(Group,{children:yt}),jsx(ItemsGroup,{children:bt}),jsx(BtnsGroup,{children:wt})]})]})};registerStructure("sequence-filter-mesh",{component:SequenceFilterMesh,composites:["title","item"]});const round=it=>Math.round(it*1e10)/1e10,getLength=(it,rt)=>round(Math.sqrt((rt.x-it.x)*(rt.x-it.x)+(rt.y-it.y)*(rt.y-it.y))),PI$1=Math.PI,TAU=PI$1*2,getClockDir=(it,rt)=>{const lt=rt-it;return lt>PI$1&&lt<TAU||lt<0&&lt>-PI$1?-1:1},getAngles=(it,rt,lt,ct,ht,dt)=>{const ut=Math.atan2(it.y-rt.y,it.x-rt.x),ft=Math.atan2(lt.y-rt.y,lt.x-rt.x),pt=Math.acos((ct*ct+dt*dt-ht*ht)/(2*ct*dt)),gt=1/Math.tan(pt/2),mt=getClockDir(ut,ft),xt=ut+mt*pt/2;return{prev:ut,next:ft,main:pt,vel:gt,dir:mt,bis:xt}},PI=Math.PI,getSegments=(it,rt,lt)=>it.reduce((ct,ht)=>{const{x:dt,y:ut,angle:{prev:ft,next:pt},arc:{x:gt,y:mt,radius:xt}}=ht,yt=ht.angle.dir*-1,bt=ft+yt*PI/2,wt=(yt*PI+pt-ft)%PI,Ct=lt-1,vt=wt/Ct,St=[];if(!vt)return ct.concat({x:dt,y:ut});for(let _t=0;_t<=Ct;_t++)St.push({x:gt+Math.cos(bt+vt*_t)*xt,y:mt+Math.sin(bt+vt*_t)*xt});return ct.concat(St)},[]),roundPolygon=(it,rt=0)=>{const lt=it.length,ct=[],ht=[],dt=[];it.forEach((pt,gt)=>{const mt=it[(gt-1+lt)%lt],xt=it[(gt+1)%lt],yt=getLength(mt,pt),bt=getLength(mt,xt),wt=getLength(pt,xt),Ct=getAngles(mt,pt,xt,yt,bt,wt);Ct.main===0&&(Ct.main=Number.EPSILON,Ct.vel=Number.MAX_SAFE_INTEGER),Ct.main===PI$1&&(Ct.vel=0);const vt={x:pt.x,y:pt.y,angle:Ct,offset:0,arc:{radius:rt,hit:rt,lim:Math.min(wt/Ct.vel,yt/Ct.vel,pt.r||0)},in:{length:yt,rest:yt},out:{length:wt,rest:wt},locked:!1,id:gt,get prev(){return ct[(gt-1+lt)%lt]},get next(){return ct[(gt+1)%lt]}};isNaN(Ct.main)&&(Ct.main=0,Ct.bis=Ct.prev||Ct.next,dt.push(vt)),typeof pt.r=="number"&&(pt.r===0?dt.push(vt):ht.push(vt)),ct.push(vt)}),dt.forEach(pt=>{pt.angle.vel=0,pt.arc.radius=0,lockPoint(pt)}),ct.forEach(pt=>{pt.arc.hit=Math.min(pt.out.rest/(pt.angle.vel+pt.next.angle.vel),pt.in.rest/(pt.angle.vel+pt.prev.angle.vel))});let ut=getMinHit(ht);for(;ut;)calcLimitRadius(ut),ut=getMinHit(ht);for(ut=getMinHit(ct);ut;)calcCommonRadius(ut,rt),ut=getMinHit(ct);const ft=ct.map(pt=>{const gt=pt.arc.radius/Math.sin(pt.angle.main/2);return{id:pt.id,x:pt.x,y:pt.y,angle:{main:round(pt.angle.main),prev:pt.angle.prev,next:pt.angle.next,bis:pt.angle.bis,dir:pt.angle.dir},offset:round(pt.offset),arc:{radius:round(pt.arc.radius),x:pt.x+(Math.cos(pt.angle.bis)*gt||0),y:pt.y+(Math.sin(pt.angle.bis)*gt||0)},in:{length:pt.in.length,x:pt.x+Math.cos(pt.angle.prev)*pt.offset,y:pt.y+Math.sin(pt.angle.prev)*pt.offset},out:{length:pt.out.length,x:pt.x+Math.cos(pt.angle.next)*pt.offset,y:pt.y+Math.sin(pt.angle.next)*pt.offset},get prev(){return ft[(pt.id-1+lt)%lt]},get next(){return ft[(pt.id+1)%lt]}}});return ft},calcLimitRadius=it=>{const{prev:rt,next:lt}=it;rt.locked&&!lt.locked?it.arc.radius=Math.min(Math.max((it.out.length-lt.arc.lim*lt.angle.vel)/it.angle.vel,it.out.length/(it.angle.vel+lt.angle.vel)),it.in.rest/it.angle.vel,it.arc.lim):lt.locked&&!rt.locked?it.arc.radius=Math.min(Math.max((it.in.length-rt.arc.lim*rt.angle.vel)/it.angle.vel,it.in.length/(it.angle.vel+rt.angle.vel)),it.out.rest/it.angle.vel,it.arc.lim):lt.locked&&rt.locked?it.arc.radius=Math.min(it.in.rest/it.angle.vel,it.out.rest/it.angle.vel,it.arc.lim):it.arc.radius=Math.min(Math.max((it.in.length-rt.arc.lim*rt.angle.vel)/it.angle.vel,it.in.length/(it.angle.vel+rt.angle.vel)),Math.max((it.out.length-lt.arc.lim*lt.angle.vel)/it.angle.vel,it.out.length/(it.angle.vel+lt.angle.vel)),it.arc.lim),lockPoint(it)},calcCommonRadius=(it,rt)=>{if(rt>it.arc.hit){const{prev:lt,next:ct}=it;lt.locked&&!ct.locked?it.arc.radius=Math.max(Math.min(it.in.rest/it.angle.vel,it.out.length/(it.angle.vel+ct.angle.vel),it.arc.radius),0):ct.locked&&!lt.locked?it.arc.radius=Math.max(Math.min(it.out.rest/it.angle.vel,it.in.length/(it.angle.vel+lt.angle.vel),it.arc.radius),0):ct.locked&&lt.locked?it.arc.radius=Math.max(Math.min(it.in.rest/it.angle.vel,it.out.rest/it.angle.vel,it.arc.radius),0):it.arc.radius=it.arc.hit}lockPoint(it)},lockPoint=it=>{const{prev:rt,next:lt}=it;it.offset=it.arc.radius*it.angle.vel,rt.out.rest-=it.offset,it.in.rest-=it.offset,it.out.rest-=it.offset,lt.in.rest-=it.offset,it.locked=!0,rt.arc.hit=Math.min(rt.in.length/(rt.angle.vel+rt.prev.angle.vel),rt.in.rest/rt.angle.vel,rt.out.rest/rt.angle.vel),lt.arc.hit=Math.min(lt.out.length/(lt.angle.vel+lt.next.angle.vel),lt.out.rest/lt.angle.vel,lt.in.rest/lt.angle.vel)},getMinHit=it=>it.reduce((rt,lt)=>lt.locked?rt:rt?lt.arc.hit<rt.arc.hit?lt:rt:lt,null),FUNNEL_CORNER_RADIUS=6,ICON_SIZE=32,FUNNEL_LAYER_HEIGHT_RATIO=1.25,OVERLAP_DIST=25,TEXT_GAP=15,SequenceFunnel=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=10,width:dt=700,funnelWidth:ut,itemHeight:ft=60,minBottomRatio:pt=.25,options:gt}=it,{title:mt,desc:xt,items:yt=[]}=ct,bt=rt?jsx(rt,{title:mt,desc:xt}):null;if(yt.length===0)return jsx(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:bt});const wt=getThemeColors(gt.themeConfig),Ct=ut!=null?ut:dt*.55,vt=dt-Ct,St=ft*FUNNEL_LAYER_HEIGHT_RATIO,_t=yt.length*St+(yt.length-1)*ht,Tt=Ct*pt,Et=yt.map((Mt,It)=>{const Lt=[It],jt=getPaletteColor(gt,[It])||wt.colorPrimary,{points:Ot,topWidth:Pt}=calculateTrapezoidSegment(Ct,Tt,St,ht,_t,It),Gt=roundPolygon(Ot,FUNNEL_CORNER_RADIUS),kt=getSegments(Gt,"AMOUNT",10),Ht=Ct/2,Xt=It*(St+ht),zt=Ht+Pt/2,Nt=zt-OVERLAP_DIST,Bt=vt+OVERLAP_DIST-10,Vt=(St-ft)/2,Yt=Xt+Vt,Kt=zt+TEXT_GAP,Dt=Bt-OVERLAP_DIST-TEXT_GAP,Rt=Yt,Wt=Ht-ICON_SIZE/2,qt=Xt+St/2-ICON_SIZE/2,Zt=`${jt.replace("#","")}-funnel-${It}`;return{background:jsx(Rect,{x:Nt,y:Yt,width:Bt,height:ft,ry:"8",fill:tinycolor(jt).setAlpha(.1).toRgbString(),"data-element-type":"shape"}),funnel:[jsx(Defs,{children:jsxs("linearGradient",{id:Zt,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[jsx("stop",{offset:"0%",stopColor:tinycolor(jt).lighten(10).toString()}),jsx("stop",{offset:"100%",stopColor:jt})]})}),jsx(Polygon,{points:kt,fill:`url(#${Zt})`,y:Xt,"data-element-type":"shape",style:{filter:"drop-shadow(0px 2px 3px rgba(0,0,0,0.15))"}})],icon:jsx(ItemIcon,{indexes:Lt,x:Wt,y:qt,size:ICON_SIZE,fill:"#fff"}),item:jsx(lt,{indexes:Lt,datum:Mt,data:ct,x:Kt,y:Rt,width:Dt,height:ft,positionV:"middle"}),btnRemove:jsx(BtnRemove,{indexes:Lt,x:Nt+Bt,y:Yt})}}),At=jsx(BtnAdd,{indexes:[yt.length],x:dt/2,y:_t+10});return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[bt,jsxs(Group,{width:dt,height:_t+40,children:[jsx(Group,{children:Et.map(Mt=>Mt.background)}),jsx(Group,{children:Et.flatMap(Mt=>Mt.funnel)}),jsx(Group,{children:Et.map(Mt=>Mt.icon)}),jsx(ItemsGroup,{children:Et.map(Mt=>Mt.item)}),jsxs(BtnsGroup,{children:[Et.map(Mt=>Mt.btnRemove),At]})]})]})};function calculateTrapezoidSegment(it,rt,lt,ct,ht,dt){const ut=it/2,ft=dt*(lt+ct),pt=ft+lt,gt=it-rt,mt=it-gt*(ft/ht),xt=it-gt*(pt/ht),yt={x:ut-mt/2,y:0},bt={x:ut+mt/2,y:0},wt={x:ut+xt/2,y:lt},Ct={x:ut-xt/2,y:lt};return{points:[yt,bt,wt,Ct],topWidth:mt,bottomWidth:xt}}registerStructure("sequence-funnel",{component:SequenceFunnel,composites:["title","item"]});const SequenceHorizontalZigzag=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=30,cardPadding:dt=10,options:ut}=it,{title:ft,desc:pt,items:gt=[]}=ct,mt=rt?jsx(rt,{title:ft,desc:pt}):null,xt=getColorPrimary(ut),yt=getThemeColors({colorPrimary:xt},ut),bt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),wt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:gt[0],positionH:"center"})),Ct=[],vt=[],St=[],_t=wt.width+dt*2,Tt=wt.height+dt*2+30,Et=8,At=6,Mt=Math.max(bt.height+20,40),It=40;if(gt.forEach((Lt,jt)=>{const Ot=jt%2===0,Pt=jt*(_t+ht);let Gt;Ot?jt%4===2?Gt=Mt:Gt=Mt+It:Gt=Mt+It+60;const kt=[jt],Ht=getPaletteColor(ut,kt)||xt;if(Ot){const Bt=Ht===xt?yt.colorPrimaryBg||"#E8F3FF":`${Ht}20`,Vt=jsx(Rect,{x:Pt,y:Gt,width:_t,height:Tt,fill:Bt,rx:20,ry:20});St.push(Vt)}vt.push(jsx(lt,{indexes:kt,datum:Lt,data:ct,x:Pt+dt,y:Gt+dt,positionH:"center",positionV:"normal"}));const Xt=gt.length*Et+(gt.length-1)*At,zt=Pt+(_t-Xt)/2,Nt=Gt+wt.height+20;for(let Bt=0;Bt<gt.length;Bt++){const Vt=zt+Bt*(Et+At),Yt=Bt===jt;St.push(jsx(Ellipse,{x:Vt,y:Nt,width:Et,height:Et,fill:Yt?Ht:"transparent",stroke:Ht,strokeWidth:2}))}Ct.push(jsx(BtnRemove,{indexes:kt,x:Pt+(_t-bt.width)/2,y:Gt+Tt+10})),jt===0?Ct.push(jsx(BtnAdd,{indexes:kt,x:Pt+(_t-bt.width)/2,y:Gt-bt.height-10})):Ct.push(jsx(BtnAdd,{indexes:kt,x:Pt-ht/2-bt.width/2,y:Mt-bt.height-10}))}),gt.length>0){const Lt=[],Ot=ht/2,Pt=6,Gt=Mt+It,kt=0-Ot,Ht=Gt+Tt/2;Lt.push(`M ${kt} ${Ht-Pt}`),gt.forEach((Zt,Ut)=>{const Qt=Ut%2===0,Jt=Ut*(_t+ht);let oe;Qt?Ut%4===2?oe=Mt:oe=Mt+It:oe=Mt+It+60;const ce=Jt-Ot,ie=Jt+_t+Ot,le=oe-Ot,he=oe+Tt+Ot,se=oe+Tt/2;Qt?(Lt.push(`L ${ce} ${le+35}`),Lt.push(`Q ${ce} ${le} ${ce+35} ${le}`),Lt.push(`L ${ie-35} ${le}`),Lt.push(`Q ${ie} ${le} ${ie} ${le+35}`),Lt.push(`L ${ie} ${se-Pt}`)):(Lt.push(`L ${ce} ${se}`),Lt.push(`L ${ce} ${he-35}`),Lt.push(`Q ${ce} ${he} ${ce+35} ${he}`),Lt.push(`L ${ie-35} ${he}`),Lt.push(`Q ${ie} ${he} ${ie} ${he-35}`),Lt.push(`L ${ie} ${se+Pt}`))});const Xt=gt.length-1,zt=Xt%2===0,Nt=Xt*(_t+ht);let Bt;zt?Xt%4===2?Bt=Mt:Bt=Mt+It:Bt=Mt+It+60;const Vt=Nt+_t+Ot,Yt=Bt+Tt/2,Kt=Lt.join(" "),Dt="gradient-zigzag-path",Rt=getPaletteColor(ut,[0])||xt,Wt=getPaletteColor(ut,[gt.length-1])||xt,qt=gt.map((Zt,Ut)=>{const Qt=Ut/(gt.length-1)*100,Jt=getPaletteColor(ut,[Ut])||xt;return jsx("stop",{offset:`${Qt}%`,stopColor:Jt})});St.unshift(jsxs(Fragment,{children:[jsx(Defs,{children:jsx("linearGradient",{id:Dt,x1:kt,y1:Ht,x2:Vt,y2:Yt,gradientUnits:"userSpaceOnUse",children:qt})}),jsx(Path$1,{d:Kt,stroke:`url(#${Dt})`,strokeWidth:2,fill:"none",width:(gt.length-1)*(_t+ht)+_t+Ot*2,height:Tt+120})]})),St.unshift(jsx(Ellipse,{x:kt-Pt,y:Ht-Pt,width:Pt*2,height:Pt*2,fill:"transparent",stroke:Rt,strokeWidth:2})),St.unshift(jsx(Ellipse,{x:Vt-Pt,y:Yt-Pt,width:Pt*2,height:Pt*2,fill:"transparent",stroke:Wt,strokeWidth:2}))}if(gt.length>0){const jt=(gt.length-1)*(_t+ht);Ct.push(jsx(BtnAdd,{indexes:[gt.length],x:jt+_t+(ht-bt.width)/2,y:Mt-bt.height-10}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[mt,jsxs(Group,{children:[jsx(ShapesGroup,{children:St}),jsx(ItemsGroup,{children:vt}),jsx(BtnsGroup,{children:Ct})]})]})};registerStructure("sequence-horizontal-zigzag",{component:SequenceHorizontalZigzag,composites:["title","item"]});function Mountain(it){const{width:rt,height:lt,colorPrimary:ct}=it,ht=ct,dt=tinycolor.mix(ct,"#000",20).toHexString(),ut=tinycolor.mix(ct,"#fff",50).toHexString(),ft=tinycolor.mix(ut,"#000",15).toHexString();function pt(It,Lt){const Ot=[{position:.25,offset:.1},{position:.45,offset:-.02},{position:.6,offset:.04},{position:.75,offset:-.1}],Pt={x:0,y:Lt},Gt={x:It,y:Lt},kt={x:It/2,y:0},Ht={x:It/2,y:Lt},Xt=Lt*.35,zt=Xt/Lt,Nt={x:kt.x*(1-zt)+Pt.x*zt,y:Xt},Bt={x:kt.x,y:Xt},Vt={x:kt.x*(1-zt)+Gt.x*zt,y:Xt},Yt=Ot.map(Rt=>{const Wt=Nt.x+(Vt.x-Nt.x)*Rt.position,qt=Xt,Zt=Lt*Rt.offset;return{x:Wt,y:qt+Zt,position:Rt.position,offset:Rt.offset}});Yt.sort((Rt,Wt)=>Rt.position-Wt.position);const Kt=Yt.filter(Rt=>Rt.x<=Bt.x),Dt=Yt.filter(Rt=>Rt.x>Bt.x);return{leftBottom:Pt,rightBottom:Gt,peak:kt,centerBottom:Ht,snowLineY:Xt,leftEdge:Nt,centerSnow:Bt,rightEdge:Vt,leftRipples:Kt,rightRipples:Dt}}const{leftRipples:gt,rightRipples:mt,leftBottom:xt,rightBottom:yt,peak:bt,centerBottom:wt,leftEdge:Ct,centerSnow:vt,rightEdge:St}=pt(rt,lt),_t=[bt,Ct,...gt,vt],Tt=[bt,vt,...mt,St],Et=[Ct,...gt,vt,wt,xt],At=[vt,...mt,St,yt,wt],Mt=It=>It.map(Lt=>`${Lt.x},${Lt.y}`).join(" ");return jsxs(ShapesGroup,te(Ft({},it),{children:[jsx("polygon",{points:Mt(_t),fill:ut}),jsx("polygon",{points:Mt(Tt),fill:ft}),jsx("polygon",{points:Mt(Et),fill:ht}),jsx("polygon",{points:Mt(At),fill:dt})]}))}function Tree(it){const lt={tiny:27,small:48,medium:54,large:72}[it]||54,ct="#17C76F",ht="#139B57",dt="#737373",ut=lt*.7,ft=lt-ut,pt=ut*.8,gt=pt,mt=gt/6,xt=(gt-mt)/2,yt=ut;return jsxs(ShapesGroup,{width:gt,height:lt,children:[jsx("ellipse",{cx:pt/2,cy:ut/2,rx:pt/2,ry:ut/2,fill:ct,clipPath:"inset(0 50% 0 0)"}),jsx("ellipse",{cx:pt/2,cy:ut/2,rx:pt/2,ry:ut/2,fill:ht,clipPath:"inset(0 0 0 50%)"}),jsx("rect",{x:xt,y:yt,width:mt,height:ft,fill:dt})]})}function Sun(it){const{width:rt,height:lt}=it,ct=rt/2,ht=lt/2,dt=Math.min(rt,lt)*.28,ut=Math.min(rt,lt)*.14,ft=Math.min(rt,lt)*.07,pt=0,gt=ht-ft/2,mt=ft*.4,xt=8,yt=Array.from({length:xt},(bt,wt)=>{const Ct=360/xt*wt;return jsx("rect",{x:pt,y:gt,width:ut,height:ft,rx:mt,ry:mt,fill:"#FFCB0E",transform:`rotate(${Ct}, ${ct}, ${ht})`})});return jsxs(ShapesGroup,te(Ft({},it),{children:[jsx("circle",{cx:ct,cy:ht,r:dt,fill:"#FFCB0E"}),...yt]}))}function Cloud(it){return it.type==="single"?jsx(ShapesGroup,te(Ft({},it),{width:54,height:36,children:jsx("path",{d:"M10.2635 13.3806C11.0019 9.99045 12.7381 6.91002 15.2405 4.55004C17.743 2.19007 20.8929 0.662716 24.2701 0.171643C27.6473 -0.31943 31.0914 0.24912 34.143 1.80148C37.1946 3.35385 39.7087 5.81625 41.3501 8.86031C44.8835 9.0468 48.1994 10.6544 50.5684 13.3294C52.9373 16.0044 54.1653 19.5277 53.9821 23.1242C53.7989 26.7207 52.2195 30.0959 49.5914 32.5071C46.9634 34.9184 43.5019 36.1683 39.9684 35.9818H11.1517C4.93436 35.9818 0 30.9593 0 24.6309C0.0598447 21.8016 1.13799 19.093 3.02989 17.0192C4.9218 14.9454 7.49584 13.6506 10.2635 13.3806Z",fill:"#70CAF8"})})):jsxs(ShapesGroup,te(Ft({},it),{width:73,height:40,children:[jsx("path",{d:"M61.6461 14.9716C60.8681 11.1875 58.9581 7.73823 56.1763 5.09315C53.3944 2.44806 49.8758 0.735682 46.0992 0.189041C42.3226 -0.357601 38.4714 0.288046 35.0699 2.03812C31.6683 3.7882 28.8815 6.5577 27.0889 9.96971C23.161 10.1687 19.4719 11.9405 16.8333 14.8953C14.1947 17.8502 12.8227 21.746 13.0191 25.7258C13.2155 29.7055 14.9642 33.4433 17.8806 36.1167C20.7969 38.7901 24.642 40.1802 28.5699 39.9812H60.6588C67.5702 39.9812 73.0006 34.4791 73.0006 27.4764C73.0006 20.9739 67.8664 15.4718 61.6461 14.9716Z",fill:"#70CAF8"}),jsx("path",{d:"M21.9691 6.47136e-09C25.9369 6.47136e-09 29.5264 1.62125 32.0003 4.21094C30.0604 5.7917 28.4423 7.75571 27.2581 10C23.3149 10.1989 19.6111 11.9702 16.9622 14.9238C14.3136 17.8774 12.936 21.772 13.1331 25.75C13.2057 27.2131 13.4902 28.6432 13.9652 30H10.7689C7.96116 29.8907 5.29664 28.7203 3.30402 26.7217C1.31144 24.7231 0.135825 22.0419 0.0110544 19.21C-0.113702 16.378 0.821178 13.6017 2.63019 11.4326C4.43921 9.26356 6.99065 7.8602 9.77766 7.5C11.9582 3.00012 16.6168 8.76701e-05 21.9691 6.47136e-09Z",fill:"#5BA2C6"})]}))}const SequenceMountain=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=20,minHeight:dt=100,maxHeight:ut=200,minWidth:ft=260,maxWidth:pt=300,options:gt}=it,{title:mt,desc:xt,items:yt=[]}=ct,bt=rt?jsx(rt,{title:mt,desc:xt}):null,wt=[],Ct=[],vt=[],St=[],_t=yt.length,Tt=getThemeColors(gt.themeConfig),Et=60,At={single:{width:54,height:36},double:{width:73,height:40}},Mt=[],It=[];let Lt=0,jt=0;yt.forEach((Yt,Kt)=>{const Dt=_t>1?Kt/(_t-1):0,Wt=(dt+(ut-dt)*Dt)*1.6,qt=Math.max(ft,Math.min(pt,Wt));Mt.push(qt);const Zt=jt;It.push(Zt),jt+=qt/2,Kt===_t-1&&(Lt=Zt+qt)});const Ot=It[0],Pt=It[_t-1]+Mt[_t-1],Gt=Pt-Ot,kt=_t>1?(Gt-ht*(_t-1))/_t:Gt,Ht=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:yt[0],width:kt})),Xt=32,zt=ut+ht,Nt=zt+Xt+10;yt.forEach((Yt,Kt)=>{const Dt=[Kt],Rt=dt+(ut-dt)*(_t>1?Kt/(_t-1):0),Wt=Mt[Kt],qt=It[Kt],Zt=ut-Rt,Ut=getPaletteColor(gt,[Kt])||Tt.colorPrimary;vt.push(jsx(Mountain,{colorPrimary:Ut,x:qt,y:Zt,width:Wt,height:Rt}));const Qt=Ot+Kt*(kt+ht);St.push(jsx(Text,{x:Qt,y:zt,width:kt,height:Xt,fontSize:16,fontWeight:"bold",alignHorizontal:"center",alignVertical:"middle",fill:Ut,backgroundColor:Ut,backgroundOpacity:.5,backgroundRadius:4,children:String(Kt+1).padStart(2,"0")})),wt.push(jsx(lt,{indexes:Dt,datum:Yt,data:ct,x:Qt,y:Nt,width:kt}))});const Bt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Vt=Nt+Ht.height+10;if(yt.forEach((Yt,Kt)=>{const Dt=[Kt],Rt=Ot+Kt*(kt+ht);Ct.push(jsx(BtnRemove,{indexes:Dt,x:Rt+kt/2-Bt.width/2,y:Vt})),Kt<yt.length-1&&Ct.push(jsx(BtnAdd,{indexes:[Kt+1],x:Rt+kt+ht/2-Bt.width/2,y:Vt}))}),_t>0){const Yt=Ot;Ct.unshift(jsx(BtnAdd,{indexes:[0],x:Yt-ht/2-Bt.width/2,y:Vt}));const Kt=Ot+(_t-1)*(kt+ht);Ct.push(jsx(BtnAdd,{indexes:[_t],x:Kt+kt+ht/2-Bt.width/2,y:Vt})),vt.push(jsx(Sun,{x:Lt-Et-20,y:-35,width:Et,height:Et}));const Dt=["tiny","small","medium","large"],Rt={tiny:27,small:48,medium:54,large:72},Wt={tiny:14.85,small:26.4,medium:29.7,large:39.6},qt=[],Zt=(Qt,Jt,oe=5)=>qt.some(ce=>!(Qt+Jt+oe<ce.x||Qt>ce.x+ce.width+oe));yt.forEach((Qt,Jt)=>{const oe=It[Jt],ce=Mt[Jt],le=Jt===_t-1?3:Jt===0?1:2;for(let he=0;he<le;he++){const se=Jt*100+he*37,ee=se*17%Dt.length,ne=Dt[ee],ue=Rt[ne],ye=Wt[ne];let ge=0,de=0,ae=!1;for(;ge<20&&!ae;){const fe=(se*13+ge*19)%100/100,pe=oe+ce*.15,be=oe+ce*.85-ye;de=pe+(be-pe)*fe,Zt(de,ye)||(ae=!0),ge++}if(ae){qt.push({x:de,width:ye});const fe=ut-ue;vt.push(jsx(Group,{x:de,y:fe,children:Tree(ne)}))}}});const Ut=Math.max(1,Math.floor(_t/1.5));for(let Qt=0;Qt<Ut;Qt++){const Jt=Qt*11+_t*5+1,oe=Jt%2===0?"single":"double",ce=At[oe],ie=Pt-Ot-ce.width,le=Ot+Jt*7%100/100*ie,he=Jt*13%40;vt.push(jsx(Cloud,{type:oe,x:le,y:he,width:ce.width,height:ce.height}))}}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[bt,jsxs(Group,{children:[jsx(Group,{children:vt}),jsx(Group,{children:St}),jsx(ItemsGroup,{children:wt}),jsx(BtnsGroup,{children:Ct})]})]})};registerStructure("sequence-mountain",{component:SequenceMountain,composites:["title","item"]});const SequencePyramid=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=10,width:dt=700,pyramidWidth:ut,itemHeight:ft=60,options:pt}=it,{title:gt,desc:mt,items:xt=[]}=ct,yt=rt?jsx(rt,{title:gt,desc:mt}):null;if(xt.length===0)return jsx(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:yt});const bt=5,wt=getThemeColors(pt.themeConfig),Ct=30,vt=[],St=[],_t=[],Tt=[],Et=ut!=null?ut:dt*.6,At=dt-Et,Mt=ft*1.2,It=xt.length*Mt+(xt.length-1)*ht;return xt.forEach((Lt,jt)=>{const Ot=[jt],Pt=jt===0,Gt=getPaletteColor(pt,[jt])||wt.colorPrimary,{points:kt,topWidth:Ht,bottomWidth:Xt}=calculateTriangleSegment(Et,Mt,ht,xt.length,jt),zt=roundPolygon(kt,bt),Nt=getSegments(zt,"AMOUNT",10),Bt=Et/2,Vt=jt*(Mt+ht),Yt=(Mt-ft)/2,Kt=Vt+Yt,Dt=Bt+Ht/2,Rt=Bt+Xt/2,qt=Dt-bt,Zt=At+bt,Ut=ft,Qt=qt+Zt,Jt=Bt-Ct/2,oe=Vt+Mt/2-Ct/2+(Pt?8:0),ce=Rt,ie=Qt-Rt,le=Kt;_t.push(jsx(Rect,{x:qt,y:Kt,width:Zt,height:Ut,ry:"10",fill:wt.colorPrimaryBg,"data-element-type":"shape"}));const he=`${Gt}-pyramid-${jt}`;St.push(jsx(Defs,{children:jsxs("linearGradient",{id:he,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[jsx("stop",{offset:"0","stop-color":Gt}),jsx("stop",{offset:"100%","stop-color":tinycolor.mix(Gt,"#fff",40).toHexString()})]})}),jsx(Polygon,{points:Nt,fill:`url(#${he})`,y:Vt,"data-element-type":"shape"})),Tt.push(jsx(ItemIcon,{indexes:Ot,x:Jt,y:oe,size:Ct,fill:"#fff"})),vt.push(jsx(lt,{indexes:Ot,datum:Lt,data:ct,x:ce,y:le,width:ie,height:ft,positionV:"middle"}))}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[yt,jsxs(Group,{width:dt,height:It,children:[jsx(Group,{children:_t}),jsx(Group,{children:St}),jsx(Group,{children:Tt}),jsx(ItemsGroup,{children:vt}),jsx(BtnsGroup,{})]})]})};function calculateTriangleSegment(it,rt,lt,ct,ht){const dt=it/2,ut=ct*rt+(ct-1)*lt,ft=ht*(rt+lt),pt=ft+rt,gt=ft/ut*it,mt=pt/ut*it;let xt;if(ht===0){const yt={x:dt,y:0},bt={x:dt+mt/2,y:rt},wt={x:dt-mt/2,y:rt};xt=[yt,bt,wt]}else{const yt={x:dt+gt/2,y:0},bt={x:dt+mt/2,y:rt},wt={x:dt-mt/2,y:rt},Ct={x:dt-gt/2,y:0};xt=[yt,bt,wt,Ct]}return{points:xt,topWidth:gt,bottomWidth:mt}}registerStructure("sequence-pyramid",{component:SequencePyramid,composites:["title","item"]});const CONFIG={iconSize:50,roadWidth:24,outerRadius:60,rowWidth:400,spacing:30,colorDefault:"#666666"},moveTo=(it,rt)=>`M ${it} ${rt}`,lineTo=(it,rt)=>`L ${it} ${rt}`,arcTo=(it,rt,lt,ct)=>`A ${it} ${it} 0 0 ${rt} ${lt} ${ct}`,getYPositions=(it,{roadWidth:rt,innerRadius:lt,outerRadius:ct})=>{const ht=(rt+lt*2)*it;return{y1:ht,y2:ht+rt,y3:ht+rt+lt,y4:ht+rt+lt*2,y5:ht+ct*2}};function renderItemRow({i:it,direction:rt,x:lt,y:ct,color:ht,data:dt,itemBounds:ut,item:ft,Item:pt,flipped:gt}){const{iconSize:mt}=CONFIG,xt=rt==="left",yt=xt?lt.x4-mt/2:lt.x3-mt/2,bt=ct.y3-mt/2,wt=xt?lt.x6+CONFIG.spacing:lt.x1-CONFIG.spacing-ut.width,Ct=ct.y3-ut.height/2,vt=xt?gt?"flipped":"normal":gt?"normal":"flipped";return{icon:jsx(ItemIconCircle,{indexes:[it],x:yt,y:bt,size:mt,fill:ht}),label:jsx(Text,{width:40,x:xt?yt-50:yt+mt+10,y:bt+mt/2-15,fontSize:30,fill:ht,alignHorizontal:xt?"right":"left",children:String(it+1).padStart(2,"0")}),item:jsx(pt,{indexes:[it],data:dt,datum:ft,x:wt,y:Ct,positionH:vt})}}function buildDecorations({direction:it,x:rt,y:lt,color:ct,elements:ht}){const dt=it==="left";ht.push(jsx(Triangle,{x:dt?rt.x6+10:rt.x1-20,y:lt.y3-5,width:10,height:8,rotation:dt?90:-90,colorPrimary:ct,"data-element-type":"shape"}))}const SequenceRoadmapVertical=it=>{const{Title:rt,Item:lt,data:ct,spacing:ht=CONFIG.spacing,options:dt,flipped:ut=!1}=it,{title:ft,desc:pt,items:gt=[]}=ct,mt=rt?jsx(rt,{title:ft,desc:pt}):null,xt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:gt[0],positionH:"center"})),{roadWidth:yt,outerRadius:bt,rowWidth:wt,colorDefault:Ct}=CONFIG,vt=yt/2,St=bt-yt,_t=(xt.width+ht)*2+wt,Tt=xt.width+ht,Et=Tt+bt,At=Tt+wt-bt,It=At+St+yt,Lt=Tt+wt/2,jt=[],Ot=[],Pt=[],Gt=[],kt=[],Ht=[],Xt=[];for(let Bt=0;Bt<gt.length;Bt++){const Vt=getPaletteColor(dt,[Bt])||Ct,Yt=Bt%2===0?"right":"left",Kt=Bt===0,Dt=Bt===gt.length-1,Rt=getYPositions(Bt,{roadWidth:yt,innerRadius:St,outerRadius:bt});if(Yt==="right"){const Ut=Kt?[It,Rt.y1]:[At,Rt.y1],Qt=[Et,Rt.y1],Jt=[Et,Rt.y5],oe=Kt?[It,Rt.y2]:[At,Rt.y2],ce=[Et,Rt.y2];if(jt.push(Kt?moveTo(It,Rt.y1+vt):lineTo(At,Rt.y1+vt),lineTo(Et,Rt.y1+vt),arcTo(bt-vt,0,Et,Rt.y4+vt)),Ot.push(Kt?moveTo(...Ut):lineTo(...Ut),lineTo(...Qt),arcTo(bt,0,...Jt)),Pt.push(lineTo(...oe),lineTo(...ce),arcTo(St,1,...ce)),Dt){const ie=yt/2;Ot.push(lineTo(Lt,Rt.y5),lineTo(Lt,Rt.y5+ie),lineTo(Lt+yt,Rt.y5-ie),lineTo(Lt,Rt.y4-ie),lineTo(Lt,Rt.y4),lineTo(Et,Rt.y4)),jt.push(lineTo(Lt,Rt.y4+vt))}}else{const Ut=[Et,Rt.y2],Qt=[At,Rt.y2],Jt=[At,Rt.y4],oe=[Et,Rt.y1],ce=[At,Rt.y1];if(jt.push(lineTo(At,Rt.y1+vt),arcTo(bt-vt,1,At,Rt.y4+vt)),Ot.push(lineTo(...Ut),lineTo(...Qt),arcTo(St,1,...Jt)),Pt.push(lineTo(...oe),lineTo(...ce),arcTo(bt,0,...ce)),Dt){const ie=yt/2;Ot.push(lineTo(Lt,Rt.y4),lineTo(Lt,Rt.y4-ie),lineTo(Lt-yt,Rt.y4+ie),lineTo(Lt,Rt.y5+ie),lineTo(Lt,Rt.y5),lineTo(At,Rt.y5)),jt.push(lineTo(Lt,Rt.y4+vt))}}buildDecorations({direction:Yt,x:{x1:Tt,x6:It},y:Rt,color:Vt,elements:Xt});const{icon:Wt,label:qt,item:Zt}=renderItemRow({i:Bt,direction:Yt,x:{x1:Tt,x3:Et,x4:At,x6:It},y:Rt,color:Vt,data:ct,itemBounds:xt,item:gt[Bt],Item:lt,flipped:ut});Gt.push(Wt),kt.push(qt),Ht.push(Zt)}const zt=[...Ot,...Pt.reverse(),"Z"],Nt=gt.length*(yt+St*2)+yt*1.5;return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[mt,jsxs(Group,{width:_t,height:xt.height<=bt*2?Nt:Nt+xt.height-bt*2,children:[jsx(Path$1,{width:wt,height:Nt,d:zt.join(" "),fill:Ct,stroke:Ct,strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round","data-element-type":"shape"}),jsx(Path$1,{d:jt.join(" "),stroke:"white",fill:"none",strokeWidth:"3",strokeDasharray:"8 8",strokeLinecap:"round",strokeLinejoin:"round","data-element-type":"shape"}),jsxs(Fragment,{children:[Gt,kt,Ht,Xt]})]})]})};registerStructure("sequence-roadmap-vertical",{component:SequenceRoadmapVertical,composites:["title","item"]});const SequenceSnakeSteps=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=40,itemsPerRow:dt=3,rowGap:ut=80,options:ft}=it,{title:pt,desc:gt,items:mt=[]}=ct,xt=rt?jsx(rt,{title:pt,desc:gt}):null,yt=getColorPrimary(ft),bt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),wt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:mt[0],positionH:"center"})),Ct=[],vt=[],St=[],_t=25,Tt=25;if(mt.forEach((Et,At)=>{const Mt=Math.floor(At/dt),It=At%dt,Lt=Mt%2===1,Ot=(Lt?dt-1-It:It)*(wt.width+ht),Pt=Mt*(wt.height+ut),Gt=[At];if(vt.push(jsx(lt,{indexes:Gt,datum:Et,data:ct,x:Ot,y:Pt,positionH:"center"})),Ct.push(jsx(BtnRemove,{indexes:Gt,x:Ot+(wt.width-bt.width)/2,y:Pt+wt.height+10})),At===0&&Ct.push(jsx(BtnAdd,{indexes:Gt,x:Ot+(wt.width-bt.width)/2,y:Pt-bt.height-10})),At<mt.length-1){const kt=Math.floor((At+1)/dt),Ht=(At+1)%dt,Nt=(kt%2===1?dt-1-Ht:Ht)*(wt.width+ht);if(Mt===kt){const Vt=Lt,Yt=Vt?Nt+wt.width+(ht-_t)/2:Ot+wt.width+(ht-_t)/2,Kt=Pt+wt.height/2-Tt/2;St.push(jsx(SimpleArrow,{x:Yt,y:Kt,width:_t,height:Tt,colorPrimary:yt,rotation:Vt?180:0})),Ct.push(jsx(BtnAdd,{indexes:[At+1],x:Yt+(_t-bt.width)/2,y:Pt-bt.height-10}))}else{const Vt=Ot+wt.width/2-_t/2,Yt=Pt+wt.height+(ut-Tt)/2;St.push(jsx(SimpleArrow,{x:Vt,y:Yt,width:_t,height:Tt,colorPrimary:yt,rotation:90})),Ct.push(jsx(BtnAdd,{indexes:[At+1],x:Vt+(_t-bt.width)/2,y:Yt+(Tt-bt.height)/2}))}}}),mt.length>0){const Et=mt.length-1,At=Math.floor(Et/dt),Mt=Et%dt,jt=(At%2===1?dt-1-Mt:Mt)*(wt.width+ht),Ot=At*(wt.height+ut);Ct.push(jsx(BtnAdd,{indexes:[mt.length],x:jt+(wt.width-bt.width)/2,y:Ot+wt.height+bt.height+20}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[xt,jsxs(Group,{children:[jsx(Group,{children:St}),jsx(ItemsGroup,{children:vt}),jsx(BtnsGroup,{children:Ct})]})]})};registerStructure("sequence-snake-steps",{component:SequenceSnakeSteps,composites:["title","item"]});const SequenceStairsFront=it=>{const{Title:rt,Item:lt,data:ct,options:ht,gap:dt=16,perspectiveFactor:ut=.2,width:ft=720}=it,{title:pt,desc:gt,items:mt=[]}=ct,xt=rt,yt=xt?jsx(xt,{title:pt,desc:gt}):null;if(mt.length===0){const ee=jsx(BtnAdd,{indexes:[0],x:0,y:0});return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[yt,jsx(Group,{children:jsx(BtnsGroup,{children:ee})})]})}const bt=getColorPrimary(ht),wt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Ct=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:mt[0]||{},positionH:"center"})),vt=12,St=Math.min(ft*.1,100),_t=Math.min(ft*.45,Math.max(80,ft-Ct.width-vt-St)),Tt=Math.max(24,_t*ut*.35),Et=56,At=Et*.7,Mt=mt.length>1?(Et-At)/(mt.length-1):0,It=Math.max(wt.height+Tt+20,Tt+28),Lt=_t/2,jt=_t+St+vt,Ot=mt.map((ee,ne)=>Et-Mt*ne),Pt=mt.map((ee,ne)=>Math.max(Tt*(1-ne*.05),Tt*.7)),Gt=[],kt=[],Ht=mt.length-1;Gt[Ht]=It,kt[Ht]=0;for(let ee=Ht-1;ee>=0;ee-=1)kt[ee]=kt[ee+1]+Pt[ee]+dt,Gt[ee]=Gt[ee+1]+Pt[ee]+Ot[ee+1]+dt;const Xt=kt[0]||Pt[0]||Tt,zt=_t*(.55+ut*.1),Nt=_t-zt,Bt=mt.map((ee,ne)=>{const ue=Xt===0?1:kt[ne]/Xt;return zt+Nt*ue}),Vt=Bt.map(ee=>{const ne=Lt+ee/2;return Math.max(0,jt-vt-ne)}),Yt=[],Kt=[],Dt=[],Rt=[],Wt=[],qt=0,Zt=(Gt[0]||It)+(Ot[0]||Et),Ut=Zt-qt,Qt=35,oe=(Bt[Ht]||zt)*.8,ce=oe*.65,ie=(Bt[0]||_t)*.9;Wt.push(jsx(Polygon,{points:[{x:Lt,y:qt},{x:Lt+oe/2,y:qt+Qt},{x:Lt+ce/2,y:qt+Qt},{x:Lt+ie/2,y:Zt},{x:Lt-ie/2,y:Zt},{x:Lt-ce/2,y:qt+Qt},{x:Lt-oe/2,y:qt+Qt}],fill:"rgba(0,0,0,0.12)",width:ie,height:Ut,"data-element-type":"shape"}));let le=Gt[Ht]+Ot[Ht]/2;mt.forEach((ee,ne)=>{const ue=[ne],ye=Bt[ne],ge=Pt[ne],de=Lt-ye/2,ae=Ot[ne],fe=Gt[ne],pe=fe-ge,be=fe+ae/2,me=getPaletteColor(ht,ue)||bt;Yt.push(jsx(Rect,{x:de,y:fe,width:ye,height:ae,fill:me,"data-element-type":"shape"}),jsx(Polygon,{points:[{x:de,y:fe},{x:de+ye,y:fe},{x:de+ye-ge/2,y:pe},{x:de+ge/2,y:pe}],fill:me,opacity:"0.3",width:ye,height:ge,"data-element-type":"shape"}),jsx(Text,{x:de,y:fe,width:ye,height:ae,fontSize:ae/2,fontWeight:"bold",alignHorizontal:"center",alignVertical:"middle",fill:"#ffffff",children:String(ne+1).padStart(2,"0")}));const Ce=de+ye,Te=be,Ae=Vt[ne],Le=Ce+Ae;Rt.push(jsx(Path$1,{d:`M ${Ce} ${Te} L ${Le} ${Te}`,stroke:me,strokeWidth:2,fill:"none",width:Ae,height:2,"data-element-type":"shape"}),jsx(Path$1,{d:`M ${Le} ${Te} L ${Le} ${Te}`,stroke:me,strokeWidth:6,strokeLinecap:"round",width:1,height:1,"data-element-type":"shape"}));const Ee=be-Ct.height/2;Kt.push(jsx(lt,{indexes:ue,datum:ee,data:ct,x:jt,y:Ee,positionV:"middle"})),Dt.push(jsx(BtnRemove,{indexes:ue,x:jt+Ct.width+10,y:Ee+Ct.height/2-wt.height/2})),ne===0?Dt.push(jsx(BtnAdd,{indexes:[0],x:jt+(Ct.width-wt.width)/2,y:Ee-wt.height-12})):Dt.push(jsx(BtnAdd,{indexes:ue,x:jt+(Ct.width-wt.width)/2,y:(le+be)/2-wt.height/2})),le=be});const se=le-Ct.height/2;return Dt.push(jsx(BtnAdd,{indexes:[mt.length],x:jt+(Ct.width-wt.width)/2,y:se+Ct.height+12})),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[yt,jsxs(Group,{children:[jsx(Group,{children:Wt}),jsx(Group,{children:Yt}),jsx(Group,{children:Rt}),jsx(ItemsGroup,{children:Kt}),jsx(BtnsGroup,{children:Dt})]})]})};registerStructure("sequence-stairs-front",{component:SequenceStairsFront,composites:["title","item"]});const SequenceSteps=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=40,options:dt}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getColorPrimary(dt),xt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),yt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0],positionH:"center"})),bt=[],wt=[],Ct=[],vt=25,St=25,_t=Math.max(xt.height+20,30);if(pt.forEach((Tt,Et)=>{const At=Et*(yt.width+ht),Mt=[Et];if(wt.push(jsx(lt,{indexes:Mt,datum:Tt,data:ct,x:At,y:_t,positionH:"center"})),bt.push(jsx(BtnRemove,{indexes:Mt,x:At+(yt.width-xt.width)/2,y:_t+yt.height+10})),Et===0?bt.push(jsx(BtnAdd,{indexes:Mt,x:At+(yt.width-xt.width)/2,y:_t-xt.height-10})):bt.push(jsx(BtnAdd,{indexes:Mt,x:At-ht/2-xt.width/2,y:_t-xt.height-10})),Et<pt.length-1){const It=At+yt.width+(ht-vt)/2,Lt=_t+yt.height/2-St/2;Ct.push(jsx(SimpleArrow,{x:It,y:Lt,width:vt,height:St,colorPrimary:mt}))}}),pt.length>0){const Tt=(pt.length-1)*(yt.width+ht);bt.push(jsx(BtnAdd,{indexes:[pt.length],x:Tt+yt.width+(ht-xt.width)/2,y:_t-xt.height-10}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{children:[jsx(Group,{children:Ct}),jsx(ItemsGroup,{children:wt}),jsx(BtnsGroup,{children:bt})]})]})};registerStructure("sequence-steps",{component:SequenceSteps,composites:["title","item"]});const SequenceTimeline=it=>{const{Title:rt,Item:lt,data:ct,gap:ht=10,options:dt}=it,{title:ut,desc:ft,items:pt=[]}=ct,gt=rt?jsx(rt,{title:ut,desc:ft}):null,mt=getColorPrimary(dt),xt=getPaletteColors(dt),yt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),bt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:pt[0],positionH:"normal"})),wt=[],Ct=[],vt=[],St=10,_t=St+70+10,Tt=_t+30,Et=6;if(pt.length>1){const At=bt.height/2+Et,Mt=(pt.length-1)*(bt.height+ht)+bt.height/2-Et,It=`M ${_t} ${At} L ${_t} ${Mt}`,Lt="gradient-timeline-line",jt=Mt-At,Ot=pt.map((Pt,Gt)=>{const Ht=(Gt*(bt.height+ht)+bt.height/2-At)/jt*100,Xt=getPaletteColor(dt,[Gt]);return jsx("stop",{offset:`${Ht}%`,stopColor:Xt||mt})});vt.push(jsxs(Fragment,{children:[jsx(Defs,{children:jsx("linearGradient",{id:Lt,x1:_t,y1:At,x2:_t,y2:Mt,gradientUnits:"userSpaceOnUse",children:Ot})}),jsx(Path$1,{d:It,stroke:`url(#${Lt})`,strokeWidth:2,width:1,height:Mt-At})]}))}if(pt.forEach((At,Mt)=>{const It=Mt*(bt.height+ht),Lt=It+bt.height/2,jt=[Mt];vt.push(jsx(Text,{x:St,y:Lt,width:70,fontSize:18,fontWeight:"bold",alignHorizontal:"left",alignVertical:"middle",fill:xt[Mt%xt.length],children:`STEP ${Mt+1}`})),Ct.push(jsx(lt,{indexes:jt,datum:At,data:ct,x:Tt,y:It,positionH:"normal"})),vt.push(jsx(Ellipse,{x:_t-Et,y:Lt-Et,width:Et*2,height:Et*2,fill:xt[Mt%xt.length]})),wt.push(jsx(BtnRemove,{indexes:jt,x:Tt-yt.width-10,y:It+(bt.height-yt.height)/2})),Mt===0?wt.push(jsx(BtnAdd,{indexes:jt,x:Tt+(bt.width-yt.width)/2,y:It-yt.height-10})):wt.push(jsx(BtnAdd,{indexes:jt,x:Tt+(bt.width-yt.width)/2,y:It-ht/2-yt.height/2}))}),pt.length>0){const At=(pt.length-1)*(bt.height+ht);wt.push(jsx(BtnAdd,{indexes:[pt.length],x:Tt+(bt.width-yt.width)/2,y:At+bt.height+10}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[gt,jsxs(Group,{children:[jsx(ShapesGroup,{children:vt}),jsx(ItemsGroup,{children:Ct}),jsx(BtnsGroup,{children:wt})]})]})};registerStructure("sequence-timeline",{component:SequenceTimeline,composites:["title","item"]});const PUCK_WIDTH=120,PUCK_HEIGHT=108,ITEM_TO_PUCK_GAP=30,PUCK_TOP_PATH="M4.49144e-05 34.4898C4.49144e-05 37.8786 0.848973 41.152 2.43571 44.2444C4.23516 47.7642 6.98514 51.0472 10.517 54.0009C21.331 63.047 39.4615 68.9814 59.9991 68.9814C80.5385 68.9814 98.6672 63.047 109.483 54.0009C113.013 51.0472 115.765 47.7642 117.564 44.2444C119.149 41.152 120 37.8786 120 34.4898C120 15.4407 93.1364 0 59.9991 0C26.8635 0 4.49144e-05 15.4407 4.49144e-05 34.4898Z",PUCK_MIDDLE_PATH="M4.49145e-05 34.4898V53.9991C4.49145e-05 57.3879 0.848973 60.6613 2.43571 63.7556C9.75425 78.0545 32.7562 88.4907 59.999 88.4907C87.2438 88.4907 110.246 78.0545 117.564 63.7556C119.149 60.6613 120 57.3879 120 53.9991V34.4898C120 37.8786 119.149 41.152 117.564 44.2444C115.765 47.7642 113.013 51.0472 109.483 54.0009C98.6672 63.047 80.5385 68.9814 59.999 68.9814C39.4615 68.9814 21.3309 63.047 10.5169 54.0009C6.98509 51.0472 4.23516 47.7642 2.43567 44.2444C0.848928 41.152 4.49145e-05 37.8786 4.49145e-05 34.4898Z",PUCK_BOTTOM_PATH="M0 53.9991V73.5102C0 92.5593 26.8634 108 59.999 108C93.1363 108 120 92.5593 120 73.5102V53.9991C120 57.3879 119.149 60.6613 117.564 63.7556C110.246 78.0545 87.2438 88.4907 59.999 88.4907C32.7562 88.4907 9.75425 78.0545 2.43571 63.7556C0.848973 60.6613 0 57.3879 0 53.9991Z",DropShadowFilter=jsxs("filter",{id:"sequence-zigzag-pucks-3d-shadow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[jsx("feOffset",{dx:"-7",dy:"7",in:"SourceAlpha",result:"offset"}),jsx("feGaussianBlur",{stdDeviation:"7.5",in:"offset",result:"blurred"}),jsx("feColorMatrix",{in:"blurred",type:"matrix",values:`0 0 0 0 0 
              0 0 0 0 0 
              0 0 0 0 0 
              0 0 0 0.3 0`,result:"shadow"}),jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"shadow"})]}),SequenceZigzagPucks3d=it=>{const{Title:rt,Item:lt,data:ct,options:ht,gap:dt=80}=it,ut=PUCK_WIDTH,ft=PUCK_HEIGHT,{title:pt,desc:gt,items:mt=[]}=ct,xt=rt?jsx(rt,{title:pt,desc:gt}):null,yt=getColorPrimary(ht);if(mt.length===0){const Et=jsx(BtnAdd,{indexes:[0],x:0,y:0});return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[jsx(Defs,{children:DropShadowFilter}),xt,jsx(Group,{children:jsx(BtnsGroup,{children:Et})})]})}const bt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:mt[0],positionH:"center"})),wt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Ct=[],vt=[],St=[];let _t=-1/0;const Tt=bt.height+ITEM_TO_PUCK_GAP+ft;return mt.forEach((Et,At)=>{const Mt=[At],It=getPaletteColor(ht,Mt),Lt=At%2===0,jt=At*(ut+dt),Ot=Lt?0:bt.height+ITEM_TO_PUCK_GAP,Pt=`puck-gradient-middle-${At}`,Gt=`puck-gradient-bottom-${At}`;St.push(jsxs(Group,{x:jt,y:Ot,id:`puck-${At}`,width:ut,height:ft,filter:"url(#sequence-zigzag-pucks-3d-shadow-filter)",children:[jsxs(Defs,{children:[jsxs("linearGradient",{id:Pt,x1:"115",y1:"55.9991",x2:"15.0002",y2:"55.9991",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{offset:"0",stopColor:It||yt}),jsx("stop",{offset:"1",stopColor:It||yt,stopOpacity:"0.6"})]}),jsxs("linearGradient",{id:Gt,x1:"115",y1:"72.1803",x2:"15.0002",y2:"72.1803",gradientUnits:"userSpaceOnUse",children:[jsx("stop",{offset:"0",stopColor:"#F4F4FB"}),jsx("stop",{offset:"1",stopColor:"#8E8C90"})]})]}),jsxs(ShapesGroup,{width:PUCK_WIDTH,height:PUCK_HEIGHT,children:[jsx(Path$1,{d:PUCK_TOP_PATH,fill:It||yt}),jsx(Path$1,{d:PUCK_MIDDLE_PATH,fill:`url(#${Pt})`}),jsx(Path$1,{d:PUCK_BOTTOM_PATH,fill:`url(#${Gt})`}),jsx("rect",{fill:"transparent",y:PUCK_HEIGHT,width:PUCK_WIDTH,height:20})]}),jsx("text",{x:65,y:40,width:50,height:50,fontSize:40,fontWeight:"bold",fill:"#FFFFFF",textAnchor:"middle",dominantBaseline:"middle",transform:"rotate(-15 65 40) scale(1, 0.8)",children:At+1})]}));const kt=jt+(ut-bt.width)/2,Ht=Lt?Ot+ft+ITEM_TO_PUCK_GAP:Ot-ITEM_TO_PUCK_GAP-bt.height;if(_t=Math.max(_t,Ht+bt.height),vt.push(jsx(lt,{indexes:Mt,datum:Et,data:ct,x:kt,y:Ht,positionH:"center"})),Ct.push(jsx(BtnRemove,{indexes:Mt,x:kt+bt.width-wt.width/2,y:Ht+bt.height-wt.height/2})),At===0&&Ct.push(jsx(BtnAdd,{indexes:[0],x:jt+ut/2-wt.width/2-(dt+ut)/2,y:Ot+ft/2-wt.height/2})),At<mt.length-1){const zt=(At+1)%2===0?0:Tt,Nt=jt+ut+dt/2-wt.width/2,Bt=(Ot+ft/2+zt+ft/2)/2-wt.height/2;Ct.push(jsx(BtnAdd,{indexes:[At+1],x:Nt,y:Bt}))}else Ct.push(jsx(BtnAdd,{indexes:[mt.length],x:jt+ut+dt/2-wt.width/2,y:Ot+ft/2-wt.height/2}))}),jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:30,children:[jsx(Defs,{children:DropShadowFilter}),xt,jsxs(Group,{x:0,y:0,children:[jsx(Group,{children:St}),jsx(ItemsGroup,{children:vt}),jsx(BtnsGroup,{children:Ct})]})]})};registerStructure("sequence-zigzag-pucks-3d",{component:SequenceZigzagPucks3d,composites:["title","item"]});const DX=240,DY=130,ITEM_TO_PATH_GAP=105,W_PATH_W=12,GLOW_W=120,GLOW_H=50,GLOW_OPACITY=.6,DECO_PATH_1="M132.821 50.6599L87.6795 76.8925C78.0629 82.4807 62.4238 82.4807 52.7445 76.8925L7.30824 50.6599C2.43719 47.8482 0.00459679 44.1562 0.0152907 40.472L3.17695e-05 45.6925C-0.0101404 49.378 2.42245 53.0686 7.29298 55.8803L52.7289 82.1129C62.4094 87.7011 78.0485 87.7011 87.6652 82.1129L132.806 55.8803C137.583 53.1038 139.975 49.4705 139.986 45.832L140 40.6116C139.989 44.2501 137.598 47.8834 132.821 50.6599Z",DECO_PATH_2="M132.707 30.4224C142.386 36.0119 142.437 45.0704 132.821 50.6599L87.6795 76.8925C78.0629 82.4807 62.4238 82.4807 52.7445 76.8925L7.30825 50.6599C-2.37126 45.0717 -2.42225 36.0132 7.19414 30.4237L52.335 4.19115C61.9517 -1.39705 77.5908 -1.39705 87.2713 4.19115L132.707 30.4224Z",DECO_OFFSET_X=70+W_PATH_W/2,DECO_OFFSET_Y=40+W_PATH_W/2,GlowFilter=jsx("filter",{id:"sequence-zigzag-glow-filter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"15",result:"blur"})}),SequenceZigzagSteps=it=>{var Ht;const{Title:rt,Item:lt,data:ct,options:ht,dx:dt=DX,dy:ut=DY,iconSize:ft=30}=it,{title:pt,desc:gt,items:mt=[]}=ct,xt=rt?jsx(rt,{title:pt,desc:gt}):null,yt=getColorPrimary(ht);if(mt.length===0){const Xt=jsx(BtnAdd,{indexes:[0],x:0,y:0});return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[jsx(Defs,{children:GlowFilter}),xt,jsx(Group,{children:jsx(BtnsGroup,{children:Xt})})]})}const bt=getElementBounds(jsx(lt,{indexes:[0],data:ct,datum:mt[0]})),wt=getElementBounds(jsx(BtnAdd,{indexes:[0]})),Ct=[],vt=[],St=[],_t=[],Tt=[];let Et=0,At=0,Mt="",It=1/0,Lt=-1/0,jt=1/0,Ot=1/0;const Pt=[];mt.forEach((Xt,zt)=>{const Nt=Et,Bt=At;Pt.push({x:Nt,y:Bt}),It=Math.min(It,Bt);const Vt=Nt-DECO_OFFSET_X,Yt=Bt-DECO_OFFSET_Y;jt=Math.min(jt,Vt),Ot=Math.min(Ot,Yt);const Kt=zt%2===0;zt<mt.length-1&&(Et+=dt,At=Kt?At+ut:At-ut)});const Gt=Math.max(0,-jt),kt=Math.max(0,-Ot);if(Et=0,At=0,mt.forEach((Xt,zt)=>{const Nt=[zt],Bt=Pt[zt],Vt=Bt.x+Gt,Yt=Bt.y+kt,Kt=getPaletteColor(ht,Nt),Dt=Math.max(0,Vt-DECO_OFFSET_X),Rt=Math.max(0,Yt-DECO_OFFSET_Y),Wt=10,qt=GLOW_H+10,{colorPrimaryBg:Zt}=getThemeColors({colorPrimary:Kt});if(_t.push(jsxs(ShapesGroup,{x:Dt,y:Rt,width:140,height:110,children:[jsx(Ellipse,{x:Wt,y:qt,width:GLOW_W,height:GLOW_H,fill:Kt||yt,filter:"url(#sequence-zigzag-glow-filter)",opacity:GLOW_OPACITY}),jsx(Path$1,{d:DECO_PATH_1,fill:Kt||yt}),jsx(Path$1,{d:DECO_PATH_2,fill:"#fff"}),jsx(Path$1,{d:DECO_PATH_2,fill:Zt||Zt})]})),Xt.icon){const Jt=Math.max(0,Vt-ft/2-W_PATH_W/2),oe=Math.max(0,Yt-ft/2-W_PATH_W/2);Tt.push(jsx(ItemIcon,{x:Jt,y:oe,size:ft,indexes:Nt,fill:Kt}))}const Ut=Vt-bt.width/2-W_PATH_W/2,Qt=Math.max(0,Yt+ITEM_TO_PATH_GAP-W_PATH_W/2);if(Lt=Math.max(Lt,Qt+bt.height),zt===0?Mt=`M ${Vt} ${Yt}`:Mt+=` L ${Vt} ${Yt}`,vt.push(jsx(lt,{indexes:Nt,datum:Xt,data:ct,x:Ut,y:Qt})),Ct.push(jsx(BtnRemove,{indexes:Nt,x:Math.max(0,Ut+bt.width-wt.width/2),y:Math.max(0,Qt+bt.height-wt.height/2)})),zt<mt.length-1){const Jt=Pt[zt+1],oe=Jt.x+Gt,ce=Jt.y+kt,ie=Math.max(0,Vt+(oe-Vt)/2-wt.width/2),le=Math.max(0,Yt+(ce-Yt)/2-wt.height/2);Ct.push(jsx(BtnAdd,{indexes:[zt+1],x:ie,y:le}))}else Ct.push(jsx(BtnAdd,{indexes:[mt.length],x:Math.max(0,Ut+bt.width+dt/4),y:Math.max(0,Qt+bt.height/2-wt.height/2)}))}),Mt){const Xt=(((Ht=Pt[Pt.length-1])==null?void 0:Ht.x)||0)+Gt;St.push(jsx(Path$1,{d:Mt,stroke:"#f3f2f1",strokeWidth:W_PATH_W,fill:"none",width:Xt,height:Lt-Math.min(It+kt,0)}))}return jsxs(FlexLayout,{id:"infographic-container",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:30,children:[jsx(Defs,{children:GlowFilter}),xt,jsxs(Group,{x:0,y:0,children:[jsx(Group,{children:[...St,..._t,...Tt]}),jsx(ItemsGroup,{children:vt}),jsx(BtnsGroup,{children:Ct})]})]})};registerStructure("sequence-zigzag-steps",{component:SequenceZigzagSteps,composites:["title","item"]});class Interaction{init(rt){Object.assign(this,rt)}}class ClickHandler{constructor(rt,lt={}){var ct;this.clickTimer=null,this.singleClickCallback=null,this.doubleClickCallback=null,this.pointerId=null,this.startX=0,this.startY=0,this.skipClick=!1,this.dragged=!1,this.handlePointerDown=ht=>{this.pointerId=ht.pointerId,this.startX=ht.clientX,this.startY=ht.clientY,this.dragged=!1,this.skipClick=!1,window.addEventListener("pointermove",this.handlePointerMove,{passive:!0}),window.addEventListener("pointerup",this.handlePointerUp,{passive:!0}),window.addEventListener("pointercancel",this.handlePointerUp,{passive:!0})},this.handlePointerMove=ht=>{if(this.pointerId===null||ht.pointerId!==this.pointerId)return;const dt=ht.clientX-this.startX,ut=ht.clientY-this.startY;Math.hypot(dt,ut)>this.dragThreshold&&(this.skipClick=!0,this.dragged=!0)},this.handlePointerUp=ht=>{this.pointerId!==null&&ht.pointerId===this.pointerId&&(this.pointerId=null,window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("pointerup",this.handlePointerUp),window.removeEventListener("pointercancel",this.handlePointerUp),this.dragged||(this.skipClick=!1),this.dragged=!1)},this.element=rt,this.delay=lt.delay||300,this.dragThreshold=(ct=lt.dragThreshold)!=null?ct:4,this.init()}init(){this.element.addEventListener("click",this.handleClick.bind(this)),this.element.addEventListener("dblclick",this.handleDoubleClick.bind(this)),this.element.addEventListener("pointerdown",this.handlePointerDown)}handleClick(rt){if(this.skipClick){this.skipClick=!1;return}this.clickTimer&&clearTimeout(this.clickTimer),this.clickTimer=window.setTimeout(()=>{var lt;(lt=this.singleClickCallback)==null||lt.call(this,rt)},this.delay)}handleDoubleClick(rt){var lt;if(this.skipClick){this.skipClick=!1;return}this.clickTimer&&clearTimeout(this.clickTimer),(lt=this.doubleClickCallback)==null||lt.call(this,rt)}onClick(rt){return this.singleClickCallback=rt,this}onDoubleClick(rt){return this.doubleClickCallback=rt,this}destroy(){this.clickTimer&&clearTimeout(this.clickTimer),this.element.removeEventListener("click",this.handleClick),this.element.removeEventListener("dblclick",this.handleDoubleClick),this.element.removeEventListener("pointerdown",this.handlePointerDown),window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("pointerup",this.handlePointerUp),window.removeEventListener("pointercancel",this.handlePointerUp)}}function getScreenCTM(it){return it.getScreenCTM()||new DOMMatrix}function getInverseScreenCTM(it){var rt;return((rt=it.getScreenCTM())==null?void 0:rt.inverse())||new DOMMatrix}function clientToViewport(it,rt,lt){return new DOMPoint(rt,lt).matrixTransform(getInverseScreenCTM(it))}function getElementViewportBounds(it,rt){const lt=rt.getBoundingClientRect(),ht=[{x:lt.x,y:lt.y},{x:lt.x+lt.width,y:lt.y},{x:lt.x,y:lt.y+lt.height},{x:lt.x+lt.width,y:lt.y+lt.height}].map(gt=>clientToViewport(it,gt.x,gt.y)),dt=Math.min(...ht.map(gt=>gt.x)),ut=Math.max(...ht.map(gt=>gt.x)),ft=Math.min(...ht.map(gt=>gt.y)),pt=Math.max(...ht.map(gt=>gt.y));return new DOMRect(dt,ft,ut-dt,pt-ft)}function getChildrenDataByIndexes(it,rt){if(rt.length===0)return it.data;const lt=getDatumByIndexes(it,rt);return lt.children||(lt.children=[]),lt.children}function buildItemPath(it,rt="data.items"){return it.reduce((lt,ct,ht)=>ht===0?`${lt}[${ct}]`:`${lt}.children[${ct}]`,rt)}function getIndexesFromElement(it){var rt,lt;return((lt=(rt=getElementEntity(it))==null?void 0:rt.dataset.indexes)==null?void 0:lt.split(",").map(Number))||[]}function getElementEntity(it){return isIconElement(it)?getIconEntity(it):it}function getEventTarget(it){if(!it)return null;const rt=[getRoughEventTarget];let lt=it;for(const ct of rt){const ht=ct(lt);if(ht){lt=ht;break}}return getSelectableTarget(lt)}function getSelectableTarget(it){if(!it)return null;const rt=[getTextEventTarget,getIconEventTarget];for(const lt of rt){const ct=lt(it);if(ct)return ct}return isEditArea(it)||isEditableText(it)||isIconElement(it)?it:null}const getRoughEventTarget=it=>{var lt;const rt=ct=>ct?isRoughElement(ct)||isRoughVolume(ct):!1;return rt(it)?it.parentElement:rt(it.parentElement)?(lt=it.parentElement)==null?void 0:lt.parentElement:null},getTextEventTarget=it=>isTextEntity(it)&&isForeignObjectElement(it.parentElement)?it.parentElement:null,getIconEventTarget=it=>{const rt=it.parentElement;return isItemIconGroup(rt)?rt:isItemIcon(it)?it:null};class Extension{constructor(){this.extensions=new Map}register(rt,lt,ct){if(!(ct!=null&&ct.override)&&this.extensions.has(rt))throw new Error(`Extension "${rt}" already registered`);this.extensions.set(rt,lt)}get(rt){return this.extensions.get(rt)}has(rt){return this.extensions.has(rt)}getAll(){return this.extensions}forEach(rt){this.extensions.forEach((lt,ct)=>{rt(lt,ct)})}[Symbol.iterator](){return this.extensions.entries()}unregister(rt){return this.extensions.delete(rt)}destroy(){this.extensions.forEach(rt=>{rt&&typeof rt.dispose=="function"&&rt.dispose()}),this.extensions.clear()}}const isEditableTarget=it=>{if(!it||!(it instanceof HTMLElement))return!1;if(it.isContentEditable)return!0;const rt=it.tagName.toLowerCase();return rt==="input"||rt==="textarea"||rt==="select"},normalizeCombo=it=>{const rt=it.toLowerCase().split("+").map(ct=>ct.trim()).filter(Boolean),lt={key:""};if(rt.forEach(ct=>{ct==="shift"?lt.shift=!0:ct==="alt"||ct==="option"?lt.alt=!0:ct==="ctrl"||ct==="control"?lt.ctrl=!0:ct==="meta"||ct==="cmd"||ct==="command"?lt.meta=!0:ct==="mod"?lt.mod=!0:lt.key=ct}),!lt.key)throw new Error(`Invalid hotkey combo: "${it}"`);return lt},matchCombo=(it,rt)=>{var pt;if(it.key.toLowerCase()!==rt.key)return!1;const ct=(pt=rt.mod)!=null?pt:!1,ht=it.metaKey,dt=it.ctrlKey,ut=ht||dt,ft=(gt,mt)=>gt===void 0?!mt:gt===mt;return ct&&!ut?!1:ct?!(!ft(rt.shift,it.shiftKey)||!ft(rt.alt,it.altKey)||rt.meta!==void 0&&!ft(rt.meta,ht)||rt.ctrl!==void 0&&!ft(rt.ctrl,dt)):!(!ft(rt.meta,ht)||!ft(rt.ctrl,dt)||!ft(rt.shift,it.shiftKey)||!ft(rt.alt,it.altKey))};class Hotkey{constructor(rt={}){this.bindings=[],this.handleKeydown=ht=>{if(ht instanceof KeyboardEvent&&!ht.defaultPrevented&&!isEditableTarget(ht.target)&&!(this.filter&&!this.filter(ht))){for(const dt of this.bindings)if(dt.combos.some(ut=>matchCombo(ht,ut))){dt.handler(ht);break}}};const{target:lt=document,filter:ct}=rt;this.target=lt,this.filter=ct,this.target.addEventListener("keydown",this.handleKeydown)}bind(rt,lt){const ht={combos:(Array.isArray(rt)?rt:[rt]).map(dt=>normalizeCombo(dt)),handler:lt};return this.bindings.push(ht),()=>this.unbind(ht)}destroy(){this.target.removeEventListener("keydown",this.handleKeydown),this.bindings=[]}unbind(rt){this.bindings=this.bindings.filter(lt=>lt!==rt)}}class BrushSelect extends Interaction{constructor(){super(...arguments),this.name="brush-select",this.shiftKey=!1,this.dragging=!1,this.dragThreshold=4,this.handleStart=rt=>{this.interaction.isActive()&&rt.button===0&&(this.isTextSelectionTarget(rt.target)||this.hasElementAtStart(rt.target)||this.interaction.executeExclusiveInteraction(this,()=>ve(this,null,function*(){return new Promise(lt=>{this.completeInteraction=lt;const ct=this.editor.getDocument();this.startPoint=clientToViewport(ct,rt.clientX,rt.clientY),this.pointerId=rt.pointerId,this.shiftKey=rt.shiftKey,this.dragging=!1,window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleEnd)})})))},this.handleMove=rt=>{if(rt.pointerId!==this.pointerId||!this.startPoint)return;const lt=this.editor.getDocument(),ct=clientToViewport(lt,rt.clientX,rt.clientY),ht=ct.x-this.startPoint.x,dt=ct.y-this.startPoint.y;if(!this.dragging){if(Math.hypot(ht,dt)<this.dragThreshold)return;this.dragging=!0,this.ensureBrush(),this.updateBrush(this.startPoint,ct)}rt.preventDefault(),rt.stopPropagation(),this.updateBrush(this.startPoint,ct)},this.handleEnd=rt=>{var ut,ft;if(rt.pointerId!==this.pointerId||!this.startPoint)return;window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleEnd);let lt=null;if(this.dragging){rt.preventDefault(),rt.stopPropagation();const pt=this.editor.getDocument(),gt=clientToViewport(pt,rt.clientX,rt.clientY);lt=this.updateBrush(this.startPoint,gt),this.clearBrush()}this.pointerId=void 0,this.startPoint=void 0,this.dragging=!1;const ct=this.shiftKey;if(this.shiftKey=!1,!lt){(ut=this.completeInteraction)==null||ut.call(this),this.completeInteraction=void 0;return}const ht=this.collectSelection(lt);if((ft=this.completeInteraction)==null||ft.call(this),this.completeInteraction=void 0,ht.length===0){ct||this.interaction.clearSelection();return}const dt=ct?"add":"replace";this.interaction.select(ht,dt)}}init(rt){super.init(rt),this.editor.getDocument().addEventListener("pointerdown",this.handleStart)}destroy(){this.clearBrush(),this.editor.getDocument().removeEventListener("pointerdown",this.handleStart),window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleEnd)}ensureBrush(){return this.brush?this.brush:(this.brush=this.interaction.appendTransientElement(createElement("rect",{fill:"rgba(51, 132, 245, 0.08)",stroke:"#3384F5","stroke-dasharray":"4 2","stroke-width":1,"pointer-events":"none"})),this.brush)}updateBrush(rt,lt){if(!this.brush)return null;const ct=Math.min(rt.x,lt.x),ht=Math.min(rt.y,lt.y),dt=Math.abs(rt.x-lt.x),ut=Math.abs(rt.y-lt.y);return setAttributes(this.brush,{x:ct,y:ht,width:dt,height:ut}),{x:ct,y:ht,width:dt,height:ut}}clearBrush(){var rt;(rt=this.brush)==null||rt.remove(),this.brush=void 0}collectSelection(rt){const lt=this.editor.getDocument(),ct=Array.from(lt.querySelectorAll("[data-element-type]")),ht=(ut,ft)=>{const pt=ut.x+ut.width,gt=ut.y+ut.height,mt=ft.x+ft.width,xt=ft.y+ft.height;return!(pt<ft.x||mt<ut.x||gt<ft.y||xt<ut.y)},dt=new Set;return ct.reduce((ut,ft)=>{const pt=getSelectableTarget(ft);if(!pt||dt.has(pt))return ut;const gt=getElementViewportBounds(lt,pt),mt={x:gt.x,y:gt.y,width:gt.width,height:gt.height};return ht(rt,mt)&&(ut.push(pt),dt.add(pt)),ut},[])}hasElementAtStart(rt){var lt;return rt instanceof Element?getEventTarget(rt)?!0:!!((lt=rt.closest)!=null&&lt.call(rt,"[data-element-type]")):!1}isTextSelectionTarget(rt){if(!(rt instanceof HTMLElement))return!1;if(rt.isContentEditable)return!0;const lt=rt.tagName.toLowerCase();return lt==="input"||lt==="textarea"}}class ClickSelect extends Interaction{constructor(){super(...arguments),this.name="click-select",this.shiftKey=!1,this.onShiftKeyDown=rt=>{rt.key==="Shift"&&(this.shiftKey=!0)},this.onShiftKeyUp=rt=>{rt.key==="Shift"&&(this.shiftKey=!1)},this.onEscKeyDown=rt=>{rt.key==="Escape"&&this.interaction.clearSelection()}}init(rt){super.init(rt);const{editor:lt,interaction:ct}=this;this.clickHandler=new ClickHandler(lt.getDocument(),{delay:0});const ht=dt=>{ct.isActive()&&ct.executeExclusiveInteraction(this,()=>ve(this,null,function*(){const ut=getEventTarget(dt.target);isEditingText(ut)||(this.shiftKey?ut&&(ct.isSelected(ut)?ct.select([ut],"remove"):ct.select([ut],"add")):ut?ct.select([ut],"replace"):ct.clearSelection())}))};this.clickHandler.onClick(ht),document.addEventListener("keydown",this.onShiftKeyDown),document.addEventListener("keyup",this.onShiftKeyUp),document.addEventListener("keydown",this.onEscKeyDown)}destroy(){var rt;(rt=this.clickHandler)==null||rt.destroy(),document.removeEventListener("keydown",this.onShiftKeyDown),document.removeEventListener("keyup",this.onShiftKeyUp),document.removeEventListener("keydown",this.onEscKeyDown)}}class BatchCommand{constructor(rt){this.commands=rt}apply(rt){return ve(this,null,function*(){for(const lt of this.commands)yield lt.apply(rt)})}undo(rt){return ve(this,null,function*(){for(let lt=this.commands.length-1;lt>=0;lt--)yield this.commands[lt].undo(rt)})}serialize(){return{type:"batch",commands:this.commands.map(rt=>rt.serialize())}}}class UpdateElementCommand{constructor(rt,lt,ct){this.element=rt,this.modified=lt;const ht=getOriginalProps(rt,lt);this.original=mergeOriginalProps(ht,ct)}apply(rt){return ve(this,null,function*(){updateElement(this.element,this.modified),rt.updateElement(this.element,this.modified)})}undo(rt){return ve(this,null,function*(){this.original&&(updateElement(this.element,this.original),rt.updateElement(this.element,this.original))})}serialize(){return{type:"update-element",elementId:this.element.id,modified:this.modified,original:this.original}}}function updateElement(it,rt){isEditableText(it)?updateTextElement(it,rt):isIconElement(it)?updateIconElement(it,void 0,rt.attributes):rt.attributes&&setAttributes(it,rt.attributes)}function getOriginalProps(it,rt){const lt=Object.keys(rt.attributes||{}),ct=getAttributes(it,lt,!1),ht=ut=>{ut&&lt.forEach(ft=>{ft in ut&&(ct[ft]=ut[ft])})},dt=te(Ft({},rt),{attributes:ct});if(isEditableText(it)){const{attributes:ut}=getTextElementProps(it);ht(ut)}else if(isIconElement(it)){if(!getIconEntity(it))return;ht(getIconAttrs(it))}return dt}function mergeOriginalProps(it,rt){if(!it)return rt;if(!rt)return it;const lt=Ft(Ft({},it.attributes||{}),rt.attributes||{});return te(Ft(Ft({},it),rt),{attributes:Object.keys(lt).length?lt:void 0})}class UpdateOptionsCommand{constructor(rt,lt){this.options=rt,this.original=lt}apply(rt){return ve(this,null,function*(){const lt=rt.getOptions();this.original||(this.original=lt),rt.updateOptions(Ft(Ft({},lt),this.options))})}undo(rt){return ve(this,null,function*(){this.original&&rt.updateOptions(this.original)})}serialize(){return{type:"update-options",options:this.options,original:this.original}}}class UpdateTextCommand{constructor(rt,lt,ct){this.element=rt,this.originalText=ct!=null?ct:getTextContent(rt),this.modifiedText=lt}apply(rt){return ve(this,null,function*(){this.originalText!==this.modifiedText&&(setTextContent(this.element,this.modifiedText),updateItemText(rt,this.element,this.modifiedText))})}undo(rt){return ve(this,null,function*(){this.originalText!==this.modifiedText&&(setTextContent(this.element,this.originalText),updateItemText(rt,this.element,this.originalText))})}serialize(){return{type:"update-text",elementId:this.element.id,original:this.originalText,modified:this.modifiedText}}}function updateItemText(it,rt,lt){const ct=getElementRole(rt);if(ct.startsWith("item-")){const ht=ct.replace("item-",""),dt=getIndexesFromElement(rt);it.updateItemDatum(dt,{[ht]:lt})}else it.updateData(ct,lt)}class DblClickEditText extends Interaction{constructor(){super(...arguments),this.name="dblclick-edit-text"}init(rt){super.init(rt);const{editor:lt,commander:ct,interaction:ht}=rt;this.clickHandler=new ClickHandler(lt.getDocument()).onDoubleClick(dt=>{ht.isActive()&&ht.executeExclusiveInteraction(this,()=>ve(this,null,function*(){const ut=getEventTarget(dt.target);if(ut&&isEditableText(ut)){ht.select([ut],"replace");const ft=getTextContent(ut),pt=yield new Promise(gt=>{const mt=this.listenSelectionChange(ut);editText(ut,{cursorPosition:{clientX:dt.clientX,clientY:dt.clientY},onBlur:gt,onCancel:gt}),this.detachSelectionListener=mt});ct.execute(new UpdateTextCommand(ut,pt,ft))}}))})}destroy(){var rt,lt;(rt=this.clickHandler)==null||rt.destroy(),(lt=this.detachSelectionListener)==null||lt.call(this)}listenSelectionChange(rt){const lt=({next:ct})=>{var ht;if(!ct.includes(rt)){(ht=this.detachSelectionListener)==null||ht.call(this),this.detachSelectionListener=void 0;const dt=getTextEntity(rt);dt&&dt.blur()}};return this.emitter.on("selection:change",lt),()=>this.emitter.off("selection:change",lt)}}const EDITOR_STYLE_ID="infographic-inline-text-editor-style",EDITOR_BASE_CLASS="infographic-inline-text-editor";function editText(it,rt){const lt=getTextEntity(it);lt&&(ensureEditorStyles(),new InlineTextEditor(lt,rt).start())}class InlineTextEditor{constructor(rt,lt){this.entity=rt,this.options=lt,this.handlePaste=ct=>{ct.clipboardData&&(ct.preventDefault(),this.insertPlainText(ct.clipboardData.getData("text/plain")))},this.handleKeydown=ct=>{ct.key==="Enter"&&!ct.shiftKey&&(ct.preventDefault(),this.insertPlainText(`
`))},this.handleInput=()=>{var ct,ht;this.normalizeSpanContent(),(ht=(ct=this.options)==null?void 0:ct.onInput)==null||ht.call(ct,this.getText())},this.handleBlur=()=>{var ct,ht;this.entity.removeAttribute("contenteditable"),this.entity.classList.remove(EDITOR_BASE_CLASS),this.normalizeSpanContent(),(ht=(ct=this.options)==null?void 0:ct.onBlur)==null||ht.call(ct,this.getText()),this.detachListeners()}}start(){this.entity.setAttribute("contenteditable","true"),this.entity.classList.add(EDITOR_BASE_CLASS),this.entity.focus(),this.placeCaretAtClickPosition(),this.attachListeners()}attachListeners(){this.entity.addEventListener("paste",this.handlePaste),this.entity.addEventListener("keydown",this.handleKeydown),this.entity.addEventListener("input",this.handleInput),this.entity.addEventListener("blur",this.handleBlur,{once:!0})}detachListeners(){this.entity.removeEventListener("paste",this.handlePaste),this.entity.removeEventListener("keydown",this.handleKeydown),this.entity.removeEventListener("input",this.handleInput)}insertPlainText(rt){var dt,ut;const lt=window.getSelection();if(!lt)return;lt.rangeCount||this.placeCaretAtEnd();const ct=lt.rangeCount?lt.getRangeAt(0):document.createRange();ct.deleteContents();const ht=document.createTextNode(rt);ct.insertNode(ht),ct.setStartAfter(ht),ct.setEndAfter(ht),lt.removeAllRanges(),lt.addRange(ct),this.normalizeSpanContent(),(ut=(dt=this.options)==null?void 0:dt.onInput)==null||ut.call(dt,this.getText())}normalizeSpanContent(){var lt;if(this.entity.childNodes.length===1&&((lt=this.entity.firstChild)==null?void 0:lt.nodeType)===Node.TEXT_NODE)return;const rt=this.getText();this.entity.textContent=rt}placeCaretAtClickPosition(){const rt=window.getSelection();if(!rt)return;const lt=this.getRangeFromPoint();if(lt){rt.removeAllRanges(),rt.addRange(lt);return}this.placeCaretAtEnd()}getRangeFromPoint(){var ut,ft;const{cursorPosition:rt}=this.options||{};if(!rt)return null;const{clientX:lt,clientY:ct}=rt,ht=document,dt=(ft=(ut=ht.caretRangeFromPoint)==null?void 0:ut.call(ht,lt,ct))!=null?ft:(()=>{var mt;const pt=(mt=ht.caretPositionFromPoint)==null?void 0:mt.call(ht,lt,ct);if(!pt)return null;const gt=document.createRange();return gt.setStart(pt.offsetNode,pt.offset),gt.collapse(!0),gt})();return!dt||!this.entity.contains(dt.startContainer)?null:dt}placeCaretAtEnd(){const rt=window.getSelection();if(!rt)return;const lt=document.createRange();lt.selectNodeContents(this.entity),lt.collapse(!1),rt.removeAllRanges(),rt.addRange(lt)}getText(){return this.entity.textContent||""}}function ensureEditorStyles(){injectStyleOnce(EDITOR_STYLE_ID,`
.${EDITOR_BASE_CLASS} {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  background-color: transparent;
  outline: none;
  cursor: text;
}
.${EDITOR_BASE_CLASS}::selection {
  background-color: #b3d4fc;
}
`)}class DragElement extends Interaction{constructor(){super(...arguments),this.name="drag-element",this.selectionForDrag=[],this.willReplaceSelection=!1,this.exclusiveStarted=!1,this.dragItems=[],this.dragging=!1,this.dragThreshold=4,this.handleStart=rt=>{if(!this.interaction.isActive()||rt.pointerType==="mouse"&&rt.button!==0)return;const lt=getEventTarget(rt.target);if(!lt||isEditingText(lt))return;const ct=this.editor.getDocument();this.pointerId=rt.pointerId,this.startPoint=clientToViewport(ct,rt.clientX,rt.clientY),this.dragging=!1,this.startTarget=lt;const ht=this.interaction.isSelected(lt);this.selectionForDrag=ht?this.interaction.getSelection():[lt],this.willReplaceSelection=!ht,this.exclusiveStarted=!1,this.startBounds=this.getSelectionBounds(this.selectionForDrag),this.guideCandidates=this.collectGuideCandidates(this.selectionForDrag),window.addEventListener("pointermove",this.handleMove),window.addEventListener("pointerup",this.handleEnd),window.addEventListener("pointercancel",this.handleEnd)},this.handleMove=rt=>{if(rt.pointerId!==this.pointerId||!this.startPoint)return;const lt=this.editor.getDocument(),ct=clientToViewport(lt,rt.clientX,rt.clientY),ht=ct.x-this.startPoint.x,dt=ct.y-this.startPoint.y;if(!this.dragging){if(Math.hypot(ht,dt)<this.dragThreshold)return;if(!this.startDrag()){this.reset();return}this.dragging=!0}const ft=rt.altKey?{dx:ht,dy:dt}:this.getSnappedDelta(ht,dt);rt.preventDefault(),rt.stopPropagation(),this.updateGuides(ft),this.applyTranslation(ft.dx,ft.dy),this.emitGeometryChange()},this.handleEnd=rt=>{if(rt.pointerId!==this.pointerId||!this.startPoint)return;this.detachPointerListeners();const lt=this.editor.getDocument(),ct=clientToViewport(lt,rt.clientX,rt.clientY),ht=ct.x-this.startPoint.x,dt=ct.y-this.startPoint.y;if((this.dragging||Math.hypot(ht,dt)>=this.dragThreshold)&&this.dragItems.length&&this.exclusiveStarted){rt.preventDefault(),rt.stopPropagation();const ft=rt.altKey?{dx:ht,dy:dt}:this.getSnappedDelta(ht,dt);this.updateGuides(ft),this.applyTranslation(ft.dx,ft.dy),this.commitTranslation(ft.dx,ft.dy),this.emitGeometryChange()}this.reset()}}init(rt){super.init(rt),this.editor.getDocument().addEventListener("pointerdown",this.handleStart)}destroy(){this.detachPointerListeners(),this.editor.getDocument().removeEventListener("pointerdown",this.handleStart)}startDrag(){if(this.exclusiveStarted)return!0;if(!this.startTarget||(this.willReplaceSelection&&this.interaction.select([this.startTarget],"replace"),this.dragItems=this.selectionForDrag.filter(lt=>isEditableText(lt)).map(lt=>this.createDragItem(lt)).filter(Boolean),this.dragItems.length===0))return!1;let rt=!1;return this.interaction.executeExclusiveInteraction(this,()=>ve(this,null,function*(){return new Promise(lt=>{this.completeInteraction=lt,rt=!0})})),this.exclusiveStarted=rt,rt}applyTranslation(rt,lt){this.dragItems.forEach(ct=>{if(ct.mode==="attr"){const ht=ct.startX+rt,dt=ct.startY+lt,ut={x:ht,y:dt};ct.hasDataX&&(ut["data-x"]=ht),ct.hasDataY&&(ut["data-y"]=dt),setAttributes(ct.element,ut)}else{const ht=this.composeTransform(ct.startX+rt,ct.startY+lt,ct.restTransform);setAttributes(ct.element,{transform:ht})}})}commitTranslation(rt,lt){if(Math.abs(rt)<1e-6&&Math.abs(lt)<1e-6)return;const ct=this.dragItems.map(ht=>{if(ht.mode==="attr"){const ft=ht.startX+rt,pt=ht.startY+lt,gt={x:ft,y:pt},mt={};return ht.hasX?mt.x=ht.startX:mt.x=null,ht.hasY?mt.y=ht.startY:mt.y=null,ht.hasDataX&&(gt["data-x"]=ft,mt["data-x"]=ht.startX),ht.hasDataY&&(gt["data-y"]=pt,mt["data-y"]=ht.startY),new UpdateElementCommand(ht.element,{attributes:gt},{attributes:mt})}const dt=this.composeTransform(ht.startX+rt,ht.startY+lt,ht.restTransform),ut=ht.originalTransform!==void 0?ht.originalTransform:null;return new UpdateElementCommand(ht.element,{attributes:{transform:dt}},{attributes:{transform:ut}})});ct.length&&this.commander.executeBatch(ct)}createDragItem(rt){const lt=this.getTransformInfo(rt);if(lt)return{element:rt,mode:"transform",startX:lt.x,startY:lt.y,hasX:!1,hasY:!1,hasDataX:!1,hasDataY:!1,restTransform:lt.rest,originalTransform:lt.original};const{x:ct,y:ht,hasX:dt,hasY:ut,hasDataX:ft,hasDataY:pt}=this.getAttrInfo(rt);return{element:rt,mode:"attr",startX:ct,startY:ht,hasX:dt,hasY:ut,hasDataX:ft,hasDataY:pt}}getAttrInfo(rt){const lt=this.editor.getDocument(),{x:ct,y:ht}=getElementViewportBounds(lt,rt),dt=getAttributes(rt,["x","y","data-x","data-y"],!1),ut=dt.x!==null&&dt.x!==void 0,ft=dt.y!==null&&dt.y!==void 0,pt=dt["data-x"]!==null&&dt["data-x"]!==void 0,gt=dt["data-y"]!==null&&dt["data-y"]!==void 0,mt=(St,_t)=>{const Tt=St!=null?Number(St):NaN;return Number.isFinite(Tt)?Tt:_t},xt=mt(dt.x,NaN),yt=mt(dt.y,NaN),bt=mt(dt["data-x"],NaN),wt=mt(dt["data-y"],NaN),Ct=Number.isFinite(xt)?xt:Number.isFinite(bt)?bt:ct,vt=Number.isFinite(yt)?yt:Number.isFinite(wt)?wt:ht;return{x:Ct,y:vt,hasX:ut,hasY:ft,hasDataX:pt,hasDataY:gt}}getTransformInfo(rt){const lt=rt.getAttribute("transform");if(lt===null)return null;const ct=lt.match(/translate\(\s*([-\d.]+)(?:[ ,]\s*([-\d.]+))?\s*\)/i);if(!ct)return{x:0,y:0,rest:lt,original:lt};const ht=Number(ct[1])||0,dt=ct[2]!==void 0&&Number(ct[2])||0,ut=lt.replace(ct[0],"").trim();return{x:ht,y:dt,rest:ut,original:lt}}composeTransform(rt,lt,ct){const ht=`translate(${rt}, ${lt})`;return ct&&ct.length?`${ht} ${ct}`:ht}emitGeometryChange(){var ct;const rt=(ct=this.dragItems[0])==null?void 0:ct.element;if(!rt)return;const lt=getElementViewportBounds(this.editor.getDocument(),rt);this.emitter.emit("selection:geometrychange",{type:"selection:geometrychange",target:rt,rect:lt})}detachPointerListeners(){window.removeEventListener("pointermove",this.handleMove),window.removeEventListener("pointerup",this.handleEnd),window.removeEventListener("pointercancel",this.handleEnd)}reset(){var rt;this.detachPointerListeners(),this.clearGuides(),this.pointerId=void 0,this.startPoint=void 0,this.dragItems=[],this.startTarget=void 0,this.selectionForDrag=[],this.willReplaceSelection=!1,this.exclusiveStarted=!1,this.dragging=!1,this.startBounds=void 0,this.guideCandidates=void 0,(rt=this.completeInteraction)==null||rt.call(this),this.completeInteraction=void 0}getSelectionBounds(rt){if(!rt.length)return;const lt=this.editor.getDocument(),ct=rt.map(ht=>getElementViewportBounds(lt,ht));return getCombinedBounds(ct)}collectGuideCandidates(rt){const lt=this.editor.getDocument(),ct=new Set(rt),ht=Array.from(lt.querySelectorAll("[data-element-type]")).filter(ft=>!ct.has(ft)),dt=[],ut=[];return ht.forEach(ft=>{const{x:pt,y:gt,width:mt,height:xt}=getElementViewportBounds(lt,ft);dt.push(pt,pt+mt/2,pt+mt),ut.push(gt,gt+xt/2,gt+xt)}),{vertical:dt,horizontal:ut}}getSnappedDelta(rt,lt){if(!this.startBounds||!this.guideCandidates)return{dx:rt,dy:lt};const ct={x:this.startBounds.x+rt,y:this.startBounds.y+lt,width:this.startBounds.width,height:this.startBounds.height},ht=this.getSnapOffset([ct.x,ct.x+ct.width/2,ct.x+ct.width],this.guideCandidates.vertical),dt=this.getSnapOffset([ct.y,ct.y+ct.height/2,ct.y+ct.height],this.guideCandidates.horizontal);return{dx:rt+((ht==null?void 0:ht.offset)||0),dy:lt+((dt==null?void 0:dt.offset)||0),snapX:ht,snapY:dt}}getSnapOffset(rt,lt,ct=5){let ht=null;return rt.forEach(dt=>{lt.forEach(ut=>{const ft=ut-dt;Math.abs(ft)<=ct&&(!ht||Math.abs(ft)<Math.abs(ht.offset))&&(ht={offset:ft,at:ut})})}),ht||void 0}ensureGuideLine(rt){const lt=rt==="vertical"?this.guideVertical:this.guideHorizontal;if(lt)return lt;const ct=this.interaction.appendTransientElement(createElement("line",{stroke:"#FF7A45","stroke-width":1,"stroke-dasharray":"4 4","pointer-events":"none",visibility:"hidden"}));return rt==="vertical"?this.guideVertical=ct:this.guideHorizontal=ct,ct}updateGuides(rt){const lt=this.editor.getDocument(),{width:ct,height:ht}=lt.viewBox.baseVal;if(rt.snapX){const dt=this.ensureGuideLine("vertical");setAttributes(dt,{x1:rt.snapX.at,y1:0,x2:rt.snapX.at,y2:ht,visibility:"visible"})}else this.guideVertical&&this.guideVertical.setAttribute("visibility","hidden");if(rt.snapY){const dt=this.ensureGuideLine("horizontal");setAttributes(dt,{x1:0,y1:rt.snapY.at,x2:ct,y2:rt.snapY.at,visibility:"visible"})}else this.guideHorizontal&&this.guideHorizontal.setAttribute("visibility","hidden")}clearGuides(){var rt,lt;(rt=this.guideVertical)==null||rt.remove(),(lt=this.guideHorizontal)==null||lt.remove(),this.guideVertical=void 0,this.guideHorizontal=void 0}}class HotkeyHistory extends Interaction{constructor(){super(...arguments),this.name="hotkey-history",this.handleUndo=rt=>ve(this,null,function*(){rt.preventDefault(),yield this.commander.undo()}),this.handleRedo=rt=>ve(this,null,function*(){rt.preventDefault(),yield this.commander.redo()})}init(rt){super.init(rt),this.hotkey=new Hotkey({filter:()=>this.interaction.isActive()}),this.hotkey.bind("mod+z",this.handleUndo),this.hotkey.bind(["mod+shift+z","mod+y"],this.handleRedo)}destroy(){var rt;(rt=this.hotkey)==null||rt.destroy()}}class SelectHighlight extends Interaction{constructor(){super(...arguments),this.name="select-highlight",this.highlightMasks=[],this.handleSelectionChanged=({next:rt})=>{this.highlightSelection(rt)},this.handleGeometryChanged=({target:rt})=>{this.interaction.isSelected(rt)&&this.highlightSelection(this.interaction.getSelection())},this.handleHistoryChanged=()=>{this.highlightSelection(this.interaction.getSelection())}}init(rt){super.init(rt);const{emitter:lt}=rt;lt.on("selection:change",this.handleSelectionChanged),lt.on("selection:geometrychange",this.handleGeometryChanged),lt.on("history:change",this.handleHistoryChanged),this.highlightSelection(this.interaction.getSelection())}destroy(){this.clearMasks();const{emitter:rt}=this;rt.off("selection:change",this.handleSelectionChanged),rt.off("selection:geometrychange",this.handleGeometryChanged),rt.off("history:change",this.handleHistoryChanged)}highlightSelection(rt){if(rt.length===1&&isEditableText(rt[0])){this.clearMasks();return}this.drawElementMasks(rt),this.drawCombinedBoundsMask(rt)}drawElementMasks(rt){let lt=0;for(;lt<rt.length;lt++){const{x:ct,y:ht,width:dt,height:ut}=getElementViewportBounds(this.editor.getDocument(),rt[lt]),ft={x:ct,y:ht,width:dt,height:ut,fill:"none",stroke:"#3384F5","stroke-width":1,"pointer-events":"none"},pt=this.highlightMasks[lt];pt?setAttributes(pt,ft):this.highlightMasks[lt]=this.interaction.appendTransientElement(createElement("rect",ft))}for(;lt<this.highlightMasks.length;lt++)this.highlightMasks[lt].remove();this.highlightMasks=this.highlightMasks.slice(0,rt.length)}drawCombinedBoundsMask(rt){var ht;if(rt.length<2){(ht=this.combinedBoundsMask)==null||ht.remove(),this.combinedBoundsMask=void 0;return}const lt=getCombinedBounds(rt.map(dt=>getElementViewportBounds(this.editor.getDocument(),dt))),ct=te(Ft({},lt),{fill:"none",stroke:"#3384F5","stroke-width":2,"pointer-events":"none"});this.combinedBoundsMask?setAttributes(this.combinedBoundsMask,ct):this.combinedBoundsMask=this.interaction.appendTransientElement(createElement("rect",ct))}clearMasks(){var rt;this.highlightMasks.forEach(lt=>lt.remove()),this.highlightMasks=[],(rt=this.combinedBoundsMask)==null||rt.remove(),this.combinedBoundsMask=void 0}}const MIN_VIEWBOX_SIZE=1,MIN_PADDING=-5e3,MAX_PADDING=5e3;class ZoomWheel extends Interaction{constructor(){super(...arguments),this.name="zoom-wheel",this.wheelListener=rt=>{var vt;if(!this.interaction.isActive()||!rt.ctrlKey&&!rt.metaKey)return;rt.preventDefault();const lt=rt.deltaY>0?1.1:.9,ht=(vt=this.state.getOptions().padding)!=null?vt:0,dt=parsePadding(ht),ft=this.editor.getDocument().getBBox(),pt=dt.map(St=>clamp$1((St===0?1:St)*lt,MIN_PADDING,MAX_PADDING)),[gt,mt,xt,yt]=pt,bt=ft.width+yt+mt,wt=ft.height+gt+xt;if(bt<=MIN_VIEWBOX_SIZE||wt<=MIN_VIEWBOX_SIZE)return;const Ct=new UpdateOptionsCommand({padding:pt});this.commander.execute(Ct)}}init(rt){super.init(rt),document.addEventListener("wheel",this.wheelListener,{passive:!1})}destroy(){document.removeEventListener("wheel",this.wheelListener)}}class Plugin{init(rt){Object.assign(this,rt)}}const IconButton=({icon:it,onClick:rt,activate:lt=!1})=>{ensureIconButtonStyle();const ct=document.createElement("button");ct.type="button",ct.classList.add(ICON_BUTTON_CLASS),lt&&ct.setAttribute("data-activate","true"),rt&&ct.addEventListener("click",rt);const ht=it();return ct.appendChild(ht),Object.assign(ct,{setActivate:(ut=>{ut?ct.setAttribute("data-activate","true"):ct.removeAttribute("data-activate")}).bind(ct),activate:lt})},ICON_BUTTON_CLASS="infographic-edit-bar-icon-btn",ICON_BUTTON_STYLE_ID="infographic-edit-bar-icon-btn-style";function ensureIconButtonStyle(){injectStyleOnce(ICON_BUTTON_STYLE_ID,`
.${ICON_BUTTON_CLASS} {
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  font-size: 12px;
  color: #000000d9;
  border: none;
  border-radius: 6px;
  background-color: #fff;
  cursor: pointer;
  transition: color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}
.${ICON_BUTTON_CLASS}:hover {
  background-color: #f5f5f5;
}
.${ICON_BUTTON_CLASS}:active {
  background-color: #d9d9d9;
}
.${ICON_BUTTON_CLASS}[data-activate="true"] {
  background-color: #d9d9d9;
}
`)}const COLOR_PICKER_CLASS="infographic-color-picker",COLOR_PICKER_SWATCHES_CLASS=`${COLOR_PICKER_CLASS}__swatches`,COLOR_PICKER_SWATCH_CLASS=`${COLOR_PICKER_CLASS}__swatch`,COLOR_PICKER_CONTROLS_CLASS=`${COLOR_PICKER_CLASS}__controls`,COLOR_PICKER_INPUT_CLASS=`${COLOR_PICKER_CLASS}__input`,COLOR_PICKER_FORMAT_CLASS=`${COLOR_PICKER_CLASS}__format`,COLOR_PICKER_SWITCH_CLASS=`${COLOR_PICKER_CLASS}__format-switch`,COLOR_PICKER_SWITCH_KNOB_CLASS=`${COLOR_PICKER_CLASS}__format-switch-knob`,COLOR_PICKER_SWITCH_LABEL_CLASS=`${COLOR_PICKER_CLASS}__format-switch-label`,COLOR_PICKER_STYLE_ID="infographic-color-picker-style",DEFAULT_COLOR$2="#1f1f1f",DEFAULT_SWATCHES=["#000000","#1f1f1f","#434343","#595959","#8c8c8c","#bfbfbf","#d9d9d9","#f0f0f0","#ffffff","#1677ff","#2f54eb","#91caff","#13c2c2","#36cfc9","#52c41a","#73d13d","#fadb14","#ffd666","#fa8c16","#fa541c","#f5222d","#ff7875","#eb2f96","#ffadd2","#722ed1","#9254de","rgba(0, 0, 0, 0.65)","rgba(255, 255, 255, 0.85)"];function ColorPicker(it){var Tt,Et,At;if(typeof document=="undefined")throw new Error("ColorPicker can only be used in the browser.");ensureColorPickerStyles();const rt=document.createElement("div");rt.classList.add(COLOR_PICKER_CLASS);const lt=document.createElement("div");lt.classList.add(COLOR_PICKER_SWATCHES_CLASS),rt.appendChild(lt);const ct=document.createElement("div");ct.classList.add(COLOR_PICKER_CONTROLS_CLASS),rt.appendChild(ct);const ht=document.createElement("input");ht.type="text",ht.spellcheck=!1,ht.classList.add(COLOR_PICKER_INPUT_CLASS),ct.appendChild(ht);const dt=document.createElement("div");dt.classList.add(COLOR_PICKER_FORMAT_CLASS),ct.appendChild(dt);const ut=document.createElement("button");ut.type="button",ut.classList.add(COLOR_PICKER_SWITCH_CLASS),ut.appendChild(createSwitchLabel("HEXA"));const ft=document.createElement("span");ft.classList.add(COLOR_PICKER_SWITCH_KNOB_CLASS),ut.appendChild(ft),ut.appendChild(createSwitchLabel("RGBA")),dt.appendChild(ut);let pt="hexa",gt=(Et=(Tt=parseColor(it.value))!=null?Tt:parseColor(DEFAULT_COLOR$2))!=null?Et:{r:31,g:31,b:31,a:1};const mt=[];return((At=it.swatches)!=null&&At.length?it.swatches:DEFAULT_SWATCHES).forEach(Mt=>{const It=parseColor(Mt);if(!It)return;const Lt=document.createElement("button");Lt.type="button",Lt.classList.add(COLOR_PICKER_SWATCH_CLASS),Lt.style.setProperty("--swatch-color",formatColor(It,"rgba")),Lt.dataset.colorKey=colorKey(It),Lt.addEventListener("click",()=>{Ct(It)}),lt.appendChild(Lt),mt.push(Lt)}),ut.addEventListener("click",()=>wt(pt==="hexa"?"rgba":"hexa")),ht.addEventListener("change",bt),ht.addEventListener("keydown",Mt=>{Mt.key==="Enter"&&bt()}),vt(),Object.assign(rt,{setValue:Mt=>{const It=parseColor(Mt);if(!It){ht.setAttribute("data-invalid","true");return}ht.removeAttribute("data-invalid"),Ct(It,!1)},destroy:()=>{rt.remove()}});function bt(){const Mt=parseColor(ht.value);if(!Mt){ht.setAttribute("data-invalid","true");return}ht.removeAttribute("data-invalid"),Ct(Mt)}function wt(Mt,It){var Lt;pt!==Mt&&(pt=Mt,vt(),(Lt=it.onChange)==null||Lt.call(it,formatColor(gt,pt)))}function Ct(Mt,It=!0){var Lt;if(isSameColor(gt,Mt)){vt();return}gt=Mt,vt(),It&&((Lt=it.onChange)==null||Lt.call(it,formatColor(gt,pt)))}function vt(){ht.value=formatColor(gt,pt),St(),_t()}function St(){const Mt=colorKey(gt);mt.forEach(It=>{It.dataset.colorKey===Mt?It.setAttribute("data-active","true"):It.removeAttribute("data-active")})}function _t(){pt==="rgba"?ut.setAttribute("data-format","rgba"):ut.setAttribute("data-format","hexa")}}function parseColor(it){var ct;if(!it)return;const rt=parse$2(it);if(!rt||typeof rt.r!="number")return;const lt=rt;return{r:clampByte(lt.r),g:clampByte(lt.g),b:clampByte(lt.b),a:clamp01((ct=lt.alpha)!=null?ct:1)}}function formatColor(it,rt){return rt==="rgba"?formatRgba(it):formatHexa(it)}function formatHexa(it){const rt=toHex(it.r),lt=toHex(it.g),ct=toHex(it.b),ht=it.a<1?toHex(Math.round(it.a*255)):"";return`#${rt}${lt}${ct}${ht}`}function formatRgba(it){const rt=trimAlpha(it.a);return`rgba(${it.r}, ${it.g}, ${it.b}, ${rt})`}function colorKey(it){return formatHexa(it).toLowerCase()}function isSameColor(it,rt){return it.r===rt.r&&it.g===rt.g&&it.b===rt.b&&it.a===rt.a}function clamp01(it){return Number.isNaN(it)?0:Math.min(1,Math.max(0,it))}function clampByte(it){if(Number.isNaN(it))return 0;const rt=it<=1?it*255:it;return Math.round(Math.min(255,Math.max(0,rt)))}function toHex(it){return it.toString(16).padStart(2,"0")}function trimAlpha(it){const rt=Math.round(clamp01(it)*100)/100;return rt===1?"1":rt===0?"0":rt.toString()}function createSwitchLabel(it){const rt=document.createElement("span");return rt.textContent=it,rt.classList.add(COLOR_PICKER_SWITCH_LABEL_CLASS),rt}function ensureColorPickerStyles(){injectStyleOnce(COLOR_PICKER_STYLE_ID,`
.${COLOR_PICKER_CLASS} {
  width: 240px;
  padding: 10px;
  box-sizing: border-box;
}
.${COLOR_PICKER_SWATCHES_CLASS} {
  display: grid;
  grid-template-columns: repeat(auto-fit, 26px);
  gap: 6px;
  margin-bottom: 10px;
}
.${COLOR_PICKER_SWATCH_CLASS} {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 1px solid rgba(0, 0, 0, 0.06);
  background: var(--swatch-color);
  cursor: pointer;
  padding: 0;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.${COLOR_PICKER_SWATCH_CLASS}[data-active="true"] {
  box-shadow: 0 0 0 2px #1677ff;
  transform: translateY(-1px);
}
.${COLOR_PICKER_SWATCH_CLASS}:hover {
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.18);
}
.${COLOR_PICKER_CONTROLS_CLASS} {
  display: flex;
  align-items: center;
  gap: 6px;
}
.${COLOR_PICKER_INPUT_CLASS} {
  flex: 1;
  min-width: 0;
  height: 30px;
  padding: 2px 6px;
  border: 1px solid #d9d9d9;
  border-radius: 6px;
  background: #f5f5f5;
  color: #262626;
  font-size: 12px;
  font-family: ui-monospace, SFMono-Regular, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;
  box-sizing: border-box;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}
.${COLOR_PICKER_INPUT_CLASS}:focus {
  border-color: #1677ff;
  background: #ffffff;
  box-shadow: 0 0 0 2px rgba(22, 119, 255, 0.12);
}
.${COLOR_PICKER_INPUT_CLASS}[data-invalid="true"] {
  border-color: #ff4d4f;
  box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.12);
}
.${COLOR_PICKER_FORMAT_CLASS} {
  display: inline-flex;
}
.${COLOR_PICKER_SWITCH_CLASS} {
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  width: 110px;
  height: 30px;
  padding: 0;
  border: 1px solid #d9d9d9;
  border-radius: 6px;
  background: #f5f5f5;
  cursor: pointer;
  overflow: hidden;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}
.${COLOR_PICKER_SWITCH_CLASS}:hover {
  background: #ededed;
}
.${COLOR_PICKER_SWITCH_CLASS}:focus-visible {
  outline: none;
  border-color: #1677ff;
  box-shadow: 0 0 0 2px rgba(22, 119, 255, 0.12);
}
.${COLOR_PICKER_SWITCH_KNOB_CLASS} {
  position: absolute;
  inset: 0;
  width: 50%;
  background: #1677ff;
  border-radius: 6px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
  transition: transform 0.2s ease;
}
.${COLOR_PICKER_SWITCH_CLASS}[data-format="rgba"] .${COLOR_PICKER_SWITCH_KNOB_CLASS} {
  transform: translateX(100%);
}
.${COLOR_PICKER_SWITCH_LABEL_CLASS} {
  position: relative;
  z-index: 1;
  text-align: center;
  font-size: 12px;
  color: #434343;
  user-select: none;
}
.${COLOR_PICKER_SWITCH_CLASS}[data-format="hexa"] .${COLOR_PICKER_SWITCH_LABEL_CLASS}:first-child,
.${COLOR_PICKER_SWITCH_CLASS}[data-format="rgba"] .${COLOR_PICKER_SWITCH_LABEL_CLASS}:last-child {
  color: #ffffff;
}
`)}const createIcon=(it,{viewBox:rt="0 0 1024 1024",size:lt="1.5em"}={})=>({fill:ct="currentColor"}={})=>{const ht=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${rt}" width="${lt}" height="${lt}" fill="${ct}">
${it.trim()}
</svg>`;return document.createRange().createContextualFragment(ht).firstElementChild},TEXT_ICONS={fontFamily:createIcon('<path d="M236.992 938.688H145.088L469.312 128h85.376l324.224 810.688h-91.904l-102.4-256H339.392l-102.4 256z m136.512-341.376h276.992L512 251.072l-138.496 346.24z"></path>',{size:"1.2em"}),fontSize:createIcon('<path d="M479.829333 640H202.837333l-85.333333 213.333333H25.6L298.666667 170.666667h85.333333l273.066667 682.666666h-91.904l-85.333334-213.333333z m-34.133333-85.333333L341.333333 293.76 236.970667 554.666667h208.725333zM896 534.826667V512h85.333333v341.333333h-85.333333v-22.826666a170.666667 170.666667 0 1 1 0-295.68zM810.666667 768a85.333333 85.333333 0 1 0 0-170.666667 85.333333 85.333333 0 0 0 0 170.666667z"></path>',{size:"1.2em"}),align:createIcon('<path d="M832 96c53.02 0 96 42.98 96 96v640c0 53.02-42.98 96-96 96H192c-53.02 0-96-42.98-96-96V192c0-53.02 42.98-96 96-96z m0 64H192c-17.673 0-32 14.327-32 32v640c0 17.673 14.327 32 32 32h640c17.673 0 32-14.327 32-32V192c0-17.673-14.327-32-32-32zM725.333 672c17.673 0 32 14.327 32 32 0 17.496-14.041 31.713-31.47 31.996l-0.53 0.004H298.667c-17.673 0-32-14.327-32-32 0-17.496 14.041-31.713 31.47-31.996l0.53-0.004h426.666z m0-192c17.673 0 32 14.327 32 32 0 17.496-14.041 31.713-31.47 31.996l-0.53 0.004H298.667c-17.673 0-32-14.327-32-32 0-17.496 14.041-31.713 31.47-31.996l0.53-0.004h426.666z m0-192c17.673 0 32 14.327 32 32 0 17.496-14.041 31.713-31.47 31.996l-0.53 0.004H298.667c-17.673 0-32-14.327-32-32 0-17.496 14.041-31.713 31.47-31.996l0.53-0.004h426.666z"></path>'),alignTop:createIcon('<path d="M896 859.329c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.995l-0.53 0.005H128c-17.673 0-32-14.327-32-32 0-17.497 14.042-31.713 31.47-31.996l0.53-0.004h768z m0-121.533c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768zM512.45 91.003L512 91a32.632 32.632 0 0 1 1.653 0.042l0.134 0.008c3.447 0.189 6.75 0.924 9.82 2.12l0.198 0.078a16.118 16.118 0 0 1 0.485 0.197l0.11 0.046a31.82 31.82 0 0 1 8.546 5.315l0.12 0.105a31.066 31.066 0 0 1 1.189 1.095l0.08 0.078 0.235 0.23 0.062 0.063 128 128.055c12.494 12.5 12.49 32.761-0.01 45.255-12.374 12.37-32.356 12.489-44.877 0.362l-0.377-0.372L544 200.28v413.598c0 17.673-14.327 32-32 32-17.496 0-31.713-14.042-31.996-31.471l-0.004-0.53V200.278l-73.368 73.4c-12.369 12.375-32.35 12.503-44.877 0.381l-0.378-0.37c-12.374-12.37-12.502-32.352-0.38-44.878l0.37-0.378 128-128.055 0.181-0.178a31.875 31.875 0 0 1 9.5-6.47l0.105-0.046c0.116-0.051 0.233-0.101 0.35-0.15 0.054-0.024 0.11-0.047 0.165-0.07a28.198 28.198 0 0 1 0.536-0.219l0.157-0.061a31.816 31.816 0 0 1 9.356-2.103l0.113-0.007c0.147-0.01 0.294-0.02 0.442-0.027l0.028-0.001 0.39-0.019 0.144-0.005a23.911 23.911 0 0 1 0.712-0.018c0.3-0.004 0.602-0.004 0.904 0z"></path>'),alignRight:createIcon('<path d="M896 800.339c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.995l-0.53 0.005H298.667c-17.673 0-32-14.327-32-32 0-17.497 14.041-31.713 31.47-31.996l0.53-0.004H896z m0-213.226c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.996l0.53-0.004h768z m0-213.226c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.996l-0.53 0.004H298.667c-17.673 0-32-14.327-32-32 0-17.496 14.041-31.713 31.47-31.996l0.53-0.004H896z m0-213.226c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768z"></path>'),alignBottom:createIcon('<path d="M896 859.329c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.995l-0.53 0.005H128c-17.673 0-32-14.327-32-32 0-17.497 14.042-31.713 31.47-31.996l0.53-0.004h768z m0-121.533c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768zM490.505 637.584l-0.127-0.117a32.174 32.174 0 0 1-0.633-0.596l-0.098-0.096-0.217-0.213-0.062-0.063-128-128.055c-12.494-12.499-12.49-32.76 0.01-45.254 12.374-12.37 32.356-12.489 44.877-0.362l0.377 0.371L480 536.598V123c0-17.673 14.327-32 32-32 17.496 0 31.713 14.042 31.996 31.47l0.004 0.53v413.597l73.368-73.398c12.494-12.5 32.755-12.503 45.255-0.01 12.374 12.37 12.502 32.352 0.38 44.878l-0.37 0.377-128 128.055c-0.121 0.12-0.238 0.236-0.356 0.35l0.355-0.35a31.922 31.922 0 0 1-9.68 6.649l-0.09 0.039a29.917 29.917 0 0 1-1.241 0.514 31.816 31.816 0 0 1-9.338 2.095l-0.113 0.008c-0.147 0.01-0.294 0.019-0.442 0.027h-0.028c-0.13 0.008-0.26 0.014-0.39 0.02l-0.144 0.005a23.92 23.92 0 0 1-0.796 0.019 33.927 33.927 0 0 1-0.37 0.002h-0.13l-0.236-0.002 0.366 0.002a32.633 32.633 0 0 1-1.153-0.02l-0.129-0.006a31.108 31.108 0 0 1-0.876-0.046l-0.105-0.008a31.811 31.811 0 0 1-8.926-1.931l-0.089-0.034a21.022 21.022 0 0 1-0.362-0.138l-0.098-0.04a22.132 22.132 0 0 1-0.746-0.304l-0.219-0.093-0.209-0.092a31.812 31.812 0 0 1-8.034-5.094l-0.12-0.105-0.173-0.153-0.151-0.136-0.105-0.093z"></path>'),alignLeft:createIcon('<path d="M725.333 800.339c17.673 0 32 14.327 32 32 0 17.496-14.041 31.713-31.47 31.995l-0.53 0.005H128c-17.673 0-32-14.327-32-32 0-17.497 14.042-31.713 31.47-31.996l0.53-0.004h597.333zM896 587.113c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.996l0.53-0.004h768zM725.333 373.887c17.673 0 32 14.327 32 32 0 17.496-14.041 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.996l0.53-0.004h597.333zM896 160.661c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768z"></path>'),alignCenter:createIcon('<path d="M768 800.339c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.995l-0.53 0.005H256c-17.673 0-32-14.327-32-32 0-17.497 14.042-31.713 31.47-31.996l0.53-0.004h512z m128-213.226c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.996l0.53-0.004h768zM768 373.887c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.996l-0.53 0.004H256c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.996l0.53-0.004h512z m128-213.226c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768z"></path>'),alignMiddle:createIcon('<path d="M534.246 617.448l0.377 0.371 128 127.952c12.5 12.494 12.503 32.755 0.009 45.255-12.37 12.374-32.352 12.501-44.878 0.38l-0.377-0.372-73.38-73.352V939c0 17.673-14.326 32-32 32-17.496 0-31.712-14.042-31.995-31.47l-0.004-0.53-0.001-221.314-73.374 73.348c-12.374 12.37-32.356 12.49-44.878 0.363l-0.377-0.371c-12.37-12.375-12.49-32.356-0.362-44.878l0.37-0.377 128-127.952c12.372-12.366 32.347-12.49 44.87-0.37zM896 480.508c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768zM511.998 54c17.496 0 31.713 14.042 31.996 31.47l0.004 0.53-0.001 221.314 73.38-73.349c12.499-12.494 32.76-12.49 45.255 0.009 12.37 12.374 12.49 32.356 0.362 44.878l-0.37 0.377-128 127.951c-12.372 12.366-32.347 12.49-44.87 0.371l-0.377-0.37-128-127.952c-12.5-12.495-12.503-32.756-0.009-45.255 12.37-12.374 32.352-12.502 44.878-0.38l0.377 0.371 73.374 73.346V86c0-17.673 14.328-32 32-32z"></path>')},ELEMENT_ICONS={align:createIcon('<path d="M555.188 715.059c17.673 0 32 14.327 32 32V875c0 17.673-14.327 32-32 32H171c-17.673 0-32-14.327-32-32V747.059c0-17.673 14.327-32 32-32z m-32.001 63.999H203V843h320.187v-63.942zM854 416.529c17.673 0 32 14.327 32 32v127.942c0 17.673-14.327 32-32 32H171c-17.673 0-32-14.327-32-32V448.529c0-17.673 14.327-32 32-32z m-32 64H203v63.941h619v-63.941zM683.25 118c17.673 0 32 14.327 32 32v127.941c0 17.673-14.327 32-32 32H171c-17.673 0-32-14.327-32-32V150c0-17.673 14.327-32 32-32z m-32 64H203v63.941h448.25V182z"></path>'),alignTop:createIcon(`
    <path d="M661.333 272.411c17.673 0 32 14.327 32 32V902c0 17.673-14.327 32-32 32H362.667c-17.673 0-32-14.327-32-32V304.411c0-17.673 14.327-32 32-32z m-32 63.999H394.666V870h234.667V336.41zM896 101.671c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768z" />`),alignRight:createIcon('<path d="M891.329 96c17.496 0 31.713 14.042 31.995 31.47l0.005 0.53v768c0 17.673-14.327 32-32 32-17.497 0-31.713-14.042-31.996-31.47l-0.004-0.53V128c0-17.673 14.327-32 32-32z m-170.74 234.667c17.673 0 32 14.327 32 32v298.666c0 17.673-14.327 32-32 32H123c-17.673 0-32-14.327-32-32V362.667c0-17.673 14.327-32 32-32z m-32 63.999H155v234.667h533.589V394.666z" />'),alignBottom:createIcon('<path d="M896 859.329c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.995l-0.53 0.005H128c-17.673 0-32-14.327-32-32 0-17.497 14.042-31.713 31.47-31.996l0.53-0.004h768zM661.333 91c17.673 0 32 14.327 32 32v597.589c0 17.673-14.327 32-32 32H362.667c-17.673 0-32-14.327-32-32V123c0-17.673 14.327-32 32-32z m-32 64H394.666v533.589h234.667V155z" />'),alignLeft:createIcon('<path d="M133.671 96c17.497 0 31.713 14.042 31.996 31.47l0.004 0.53v768c0 17.673-14.327 32-32 32-17.496 0-31.713-14.042-31.995-31.47l-0.005-0.53V128c0-17.673 14.327-32 32-32zM902 330.667c17.673 0 32 14.327 32 32v298.666c0 17.673-14.327 32-32 32H304.411c-17.673 0-32-14.327-32-32V362.667c0-17.673 14.327-32 32-32z m-32.001 63.999H336.41v234.667h533.589V394.666z" />'),alignH:createIcon('<path d="M512.5 96c17.496 0 31.713 14.042 31.996 31.47l0.004 0.53v202.666H875c17.496 0 31.713 14.042 31.996 31.471l0.004 0.53v298.666c0 17.673-14.327 32-32 32H544.5V896c0 17.673-14.327 32-32 32-17.496 0-31.713-14.042-31.996-31.47l-0.004-0.53V693.333H150c-17.496 0-31.713-14.041-31.996-31.47l-0.004-0.53V362.667c0-17.673 14.327-32 32-32l330.5-0.001V128c0-17.673 14.327-32 32-32z m-32 298.666H182v234.667h298.5V394.666z m362.5 0H544.5v234.667H843V394.666z" />'),alignV:createIcon('<path d="M661.333 118c17.673 0 32 14.327 32 32v330.5H896c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.996l-0.53 0.004H693.333V875c0 17.496-14.041 31.713-31.47 31.996l-0.53 0.004H362.667c-17.673 0-32-14.327-32-32l-0.001-330.5H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.996l0.53-0.004h202.666V150c0-17.496 14.042-31.713 31.471-31.996l0.53-0.004z m-32.001 426.5H394.665l0.001 298.5h234.667l-0.001-298.5z m0.001-362.5H394.666l-0.001 298.5h234.667l0.001-298.5z" />'),distributeH:createIcon('<path d="M853.333 96c17.497 0 31.713 14.042 31.996 31.47l0.004 0.53v768c0 17.673-14.327 32-32 32-17.496 0-31.713-14.042-31.995-31.47l-0.005-0.53V128c0-17.673 14.327-32 32-32z m-682.666 0c17.496 0 31.713 14.042 31.995 31.47l0.005 0.53v768c0 17.673-14.327 32-32 32-17.497 0-31.713-14.042-31.996-31.47l-0.004-0.53V128c0-17.673 14.327-32 32-32zM640 181.333c17.673 0 32 14.327 32 32v597.334c0 17.673-14.327 32-32 32H384c-17.673 0-32-14.327-32-32V213.333c0-17.673 14.327-32 32-32z m-32 64H416v533.333h192V245.333z" />'),distributeV:createIcon('<path d="M896 821.333c17.673 0 32 14.327 32 32 0 17.497-14.042 31.713-31.47 31.996l-0.53 0.004H128c-17.673 0-32-14.327-32-32 0-17.496 14.042-31.713 31.47-31.995l0.53-0.005h768zM810.667 352c17.673 0 32 14.327 32 32v256c0 17.673-14.327 32-32 32H213.333c-17.673 0-32-14.327-32-32V384c0-17.673 14.327-32 32-32z m-32 64H245.334v192h533.333V416zM896 138.667c17.673 0 32 14.327 32 32 0 17.496-14.042 31.713-31.47 31.995l-0.53 0.005H128c-17.673 0-32-14.327-32-32 0-17.497 14.042-31.713 31.47-31.996l0.53-0.004h768z" />')},POPOVER_CLASS="infographic-edit-popover",POPOVER_CONTENT_CLASS=`${POPOVER_CLASS}__content`,POPOVER_ARROW_CLASS=`${POPOVER_CLASS}__arrow`,POPOVER_STYLE_ID="infographic-edit-popover-style";function Popover(it){var Vt,Yt,Kt,Dt,Rt,Wt,qt,Zt;ensurePopoverStyle();const rt=(Vt=it.placement)!=null?Vt:"top",lt=(Yt=it.closeOnOutsideClick)!=null?Yt:!0,ct=Array.isArray(it.trigger)?it.trigger:[it.trigger||"hover"],ht=(Kt=it.mouseEnterDelay)!=null?Kt:50,dt=(Dt=it.mouseLeaveDelay)!=null?Dt:150,ut=(Rt=it.offset)!=null?Rt:8,ft=8,pt=7,gt=typeof it.padding=="number"?`${it.padding}px`:(Wt=it.padding)!=null?Wt:"4px",mt=document.createElement("div");mt.classList.add(POPOVER_CLASS);const xt=(qt=it.target)!=null?qt:document.createElement("div");mt.appendChild(xt);const yt=()=>{const Ut=typeof it.getContainer=="function"?it.getContainer():it.getContainer;return Ut!=null?Ut:document.body},bt=document.createElement("div");bt.classList.add(POPOVER_CONTENT_CLASS),setElementRole(bt,COMPONENT_ROLE),bt.dataset.placement=Array.isArray(rt)?rt[0]:rt,bt.setAttribute("data-open",String(!!it.open)),bt.style.setProperty("--popover-gap",`${ut}px`),bt.style.setProperty("--popover-arrow-size",`${ft}px`),bt.style.setProperty("--popover-arrow-inner-size",`${pt}px`);const wt=yt(),Ct=wt!==mt,vt=document.createElement("div");vt.classList.add(POPOVER_ARROW_CLASS),bt.appendChild(vt);const St=document.createElement("div");St.classList.add(`${POPOVER_CONTENT_CLASS}-body`),St.style.padding=gt,bt.appendChild(St),wt.appendChild(bt);let _t=!!it.open,Tt=Array.isArray(rt)?rt:[rt],Et=(Zt=Tt[0])!=null?Zt:"top";const At=()=>{var ye;const Ut=xt.getBoundingClientRect(),Qt=bt.getBoundingClientRect(),Jt=window.scrollX||document.documentElement.scrollLeft,oe=window.scrollY||document.documentElement.scrollTop,ce=document.documentElement.clientWidth,ie=document.documentElement.clientHeight;let le=0,he=0;const se=ge=>{switch(ge){case"top":return{left:Jt+Ut.left+Ut.width/2-Qt.width/2,top:oe+Ut.top-Qt.height-ut};case"bottom":return{left:Jt+Ut.left+Ut.width/2-Qt.width/2,top:oe+Ut.bottom+ut};case"left":return{left:Jt+Ut.left-Qt.width-ut,top:oe+Ut.top+Ut.height/2-Qt.height/2};case"right":default:return{left:Jt+Ut.right+ut,top:oe+Ut.top+Ut.height/2-Qt.height/2}}},ee=(ge,de)=>ge>=Jt&&de>=oe&&ge+Qt.width<=Jt+ce&&de+Qt.height<=oe+ie;let ne=(ye=Tt[0])!=null?ye:"top",ue=se(ne);for(const ge of Tt){const de=se(ge);if(ue=de,ee(de.left,de.top)){ne=ge;break}}Et=ne,bt.dataset.placement=Et,Ct&&({left:le,top:he}=ue,bt.style.left=`${le}px`,bt.style.top=`${he}px`,bt.style.right="auto",bt.style.bottom="auto",bt.style.transform="translate(0, 0)")};Ct&&(bt.style.position="absolute",window.addEventListener("resize",At),window.addEventListener("scroll",At,!0));const Mt=Ut=>{let Qt=Ut;typeof Qt=="function"&&(Qt=Qt()),St.innerHTML="",Qt instanceof HTMLElement?St.appendChild(Qt):St.textContent=Qt!=null?Qt:"",At()},It=Ut=>{var Qt;Tt=Array.isArray(Ut)?Ut:[Ut],Et=(Qt=Tt[0])!=null?Qt:"top",At()},Lt=Ut=>{_t=Ut,bt.setAttribute("data-open",String(_t)),_t&&At(),_t&&lt?document.addEventListener("click",Ot,!0):document.removeEventListener("click",Ot,!0)},jt=()=>Lt(!_t),Ot=Ut=>{const Qt=Ut.target;!mt.contains(Qt)&&(!Ct||!bt.contains(Qt))&&Lt(!1)};let Pt,Gt;const kt=ct.includes("hover"),Ht=ct.includes("click"),Xt=()=>{Pt!==void 0&&(clearTimeout(Pt),Pt=void 0),Gt!==void 0&&(clearTimeout(Gt),Gt=void 0)},zt=()=>{kt&&(Xt(),Pt=window.setTimeout(()=>Lt(!0),ht))},Nt=()=>{kt&&(Xt(),Gt=window.setTimeout(()=>Lt(!1),dt))};return Ht&&xt.addEventListener("click",jt),kt&&(mt.addEventListener("mouseenter",zt),mt.addEventListener("mouseleave",Nt),bt.addEventListener("mouseenter",zt),bt.addEventListener("mouseleave",Nt)),Mt(it.content),It(rt),Lt(_t),Object.assign(mt,{setOpen:Lt,toggle:jt,setContent:Mt,setPlacement:It,destroy:()=>{document.removeEventListener("click",Ot,!0),Ht&&xt.removeEventListener("click",jt),kt&&(mt.removeEventListener("mouseenter",zt),mt.removeEventListener("mouseleave",Nt),bt.removeEventListener("mouseenter",zt),bt.removeEventListener("mouseleave",Nt),Xt()),Ct&&(window.removeEventListener("resize",At),window.removeEventListener("scroll",At,!0),bt.remove()),mt.remove()}})}function ensurePopoverStyle(){injectStyleOnce(POPOVER_STYLE_ID,`
.${POPOVER_CLASS} {
  position: relative;
  display: inline-flex;
}
.${POPOVER_CONTENT_CLASS} {
  position: absolute;
  z-index: 1200;
  padding: 0;
  --popover-gap: 8px;
  --popover-arrow-size: 8px;
  --popover-arrow-inner-size: 7px;
  background: #fff;
  border-radius: 8px;
  border: 1px solid rgba(239, 240, 240, 0.9);
  box-shadow: rgba(0, 0, 0, 0.08) 0px 1px 2px -2px, rgba(0, 0, 0, 0.04) 0px 2px 6px, rgba(0, 0, 0, 0.02) 0px 4px 8px 1px;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 120ms ease, transform 120ms ease, visibility 120ms ease;
}
.${POPOVER_CONTENT_CLASS}-body {
  padding: 4px;
  color: #000000d9;
  font-size: 12px;
  line-height: 1.5;
}
.${POPOVER_CONTENT_CLASS}[data-open="true"] {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}
.${POPOVER_ARROW_CLASS} {
  position: absolute;
  width: 0;
  height: 0;
}
.${POPOVER_ARROW_CLASS}::after {
  content: '';
  position: absolute;
  width: 0;
  height: 0;
}
.${POPOVER_CONTENT_CLASS}[data-placement="top"] {
  left: 50%;
  bottom: calc(100% + var(--popover-gap));
  transform: translate(-50%, calc(-1 * var(--popover-gap) / 2));
}
.${POPOVER_CONTENT_CLASS}[data-placement="top"] .${POPOVER_ARROW_CLASS} {
  left: 50%;
  bottom: calc(-1 * var(--popover-arrow-size));
  transform: translateX(-50%);
  border-left: var(--popover-arrow-size) solid transparent;
  border-right: var(--popover-arrow-size) solid transparent;
  border-top: var(--popover-arrow-size) solid rgba(239, 240, 240, 0.9);
}
.${POPOVER_CONTENT_CLASS}[data-placement="top"] .${POPOVER_ARROW_CLASS}::after {
  left: 50%;
  bottom: 1px;
  transform: translateX(-50%);
  border-left: var(--popover-arrow-inner-size) solid transparent;
  border-right: var(--popover-arrow-inner-size) solid transparent;
  border-top: var(--popover-arrow-inner-size) solid #fff;
}
.${POPOVER_CONTENT_CLASS}[data-placement="top"][data-open="true"] {
  transform: translate(-50%, 0);
}
.${POPOVER_CONTENT_CLASS}[data-placement="bottom"] {
  left: 50%;
  top: calc(100% + var(--popover-gap));
  transform: translate(-50%, calc(var(--popover-gap) / 2));
}
.${POPOVER_CONTENT_CLASS}[data-placement="bottom"] .${POPOVER_ARROW_CLASS} {
  left: 50%;
  top: calc(-1 * var(--popover-arrow-size) + 2px);
  transform: translateX(-50%);
  border-left: var(--popover-arrow-size) solid transparent;
  border-right: var(--popover-arrow-size) solid transparent;
  border-bottom: var(--popover-arrow-size) solid rgba(239, 240, 240, 0.9);
}
.${POPOVER_CONTENT_CLASS}[data-placement="bottom"] .${POPOVER_ARROW_CLASS}::after {
  left: 50%;
  top: 1px;
  transform: translateX(-50%);
  border-left: var(--popover-arrow-inner-size) solid transparent;
  border-right: var(--popover-arrow-inner-size) solid transparent;
  border-bottom: var(--popover-arrow-inner-size) solid #fff;
}
.${POPOVER_CONTENT_CLASS}[data-placement="bottom"][data-open="true"] {
  transform: translate(-50%, 0);
}
.${POPOVER_CONTENT_CLASS}[data-placement="left"] {
  right: calc(100% + var(--popover-gap));
  top: 50%;
  transform: translate(calc(-1 * var(--popover-gap) / 2), -50%);
}
.${POPOVER_CONTENT_CLASS}[data-placement="left"] .${POPOVER_ARROW_CLASS} {
  right: calc(-1 * var(--popover-arrow-size) + 1px);
  top: 50%;
  transform: translateY(-50%);
  border-top: var(--popover-arrow-size) solid transparent;
  border-bottom: var(--popover-arrow-size) solid transparent;
  border-left: var(--popover-arrow-size) solid rgba(239, 240, 240, 0.9);
  border-right: 0;
}
.${POPOVER_CONTENT_CLASS}[data-placement="left"] .${POPOVER_ARROW_CLASS}::after {
  right: 1px;
  top: 50%;
  transform: translateY(-50%);
  border-top: var(--popover-arrow-inner-size) solid transparent;
  border-bottom: var(--popover-arrow-inner-size) solid transparent;
  border-left: var(--popover-arrow-inner-size) solid #fff;
  border-right: 0;
}
.${POPOVER_CONTENT_CLASS}[data-placement="left"][data-open="true"] {
  transform: translate(0, -50%);
}
.${POPOVER_CONTENT_CLASS}[data-placement="right"] {
  left: calc(100% + var(--popover-gap));
  top: 50%;
  transform: translate(calc(var(--popover-gap) / 2), -50%);
}
.${POPOVER_CONTENT_CLASS}[data-placement="right"] .${POPOVER_ARROW_CLASS} {
  left: calc(-1 * var(--popover-arrow-size) + 1px);
  top: 50%;
  transform: translateY(-50%);
  border-top: var(--popover-arrow-size) solid transparent;
  border-bottom: var(--popover-arrow-size) solid transparent;
  border-right: var(--popover-arrow-size) solid rgba(239, 240, 240, 0.9);
  border-left: 0;
}
.${POPOVER_CONTENT_CLASS}[data-placement="right"] .${POPOVER_ARROW_CLASS}::after {
  left: 1px;
  top: 50%;
  transform: translateY(-50%);
  border-top: var(--popover-arrow-inner-size) solid transparent;
  border-bottom: var(--popover-arrow-inner-size) solid transparent;
  border-right: var(--popover-arrow-inner-size) solid #fff;
}
.${POPOVER_CONTENT_CLASS}[data-placement="right"][data-open="true"] {
  transform: translate(0, -50%);
}
`)}const GRID_CLASS$1="infographic-align-grid",GRID_COMPACT_CLASS=`${GRID_CLASS$1}--compact`,GRID_STYLE_ID$1="infographic-align-grid-style",GRID_STYLES$1=`
.${GRID_CLASS$1} {
  display: grid;
  grid-template-columns: repeat(4, 32px);
  grid-auto-rows: 32px;
  gap: 2px;
}
.${GRID_COMPACT_CLASS} {
  grid-template-columns: repeat(3, 32px);
}
`,ALIGN_OPTIONS=[{icon:ELEMENT_ICONS.alignLeft,action:"LEFT"},{icon:ELEMENT_ICONS.alignH,action:"H_CENTER"},{icon:ELEMENT_ICONS.alignRight,action:"RIGHT"},{icon:ELEMENT_ICONS.distributeH,action:"H_DISTRIBUTE"},{icon:ELEMENT_ICONS.alignTop,action:"TOP"},{icon:ELEMENT_ICONS.alignV,action:"V_CENTER"},{icon:ELEMENT_ICONS.alignBottom,action:"BOTTOM"},{icon:ELEMENT_ICONS.distributeV,action:"V_DISTRIBUTE"}],ElementAlign=(it,rt,lt,ct)=>{var ut;injectStyleOnce(GRID_STYLE_ID$1,GRID_STYLES$1);const ht=(ut=ct==null?void 0:ct.enableDistribution)!=null?ut:!0,dt=createAlignContent$1(ft=>alignSelection(it,ft,lt),ht);return Popover({target:IconButton({icon:ELEMENT_ICONS.align}),content:dt,placement:"top",offset:12})};function createAlignContent$1(it,rt){const lt=document.createElement("div");return lt.classList.add(GRID_CLASS$1),rt||lt.classList.add(GRID_COMPACT_CLASS),(rt?ALIGN_OPTIONS:ALIGN_OPTIONS.filter(({action:ht})=>ht!=="H_DISTRIBUTE"&&ht!=="V_DISTRIBUTE")).forEach(({icon:ht,action:dt})=>{const ut=IconButton({icon:ht,onClick:()=>it(dt)});lt.appendChild(ut)}),lt}function alignSelection(it,rt,lt){if(!it.length)return;const ct=it[0].ownerSVGElement;if(!ct)return;const ht=it.map(mt=>createAlignableItem(mt,ct)).filter(Boolean);if(!ht.length)return;const dt=ht.filter(mt=>mt.movable);if(!dt.length)return;const ut=ht.filter(mt=>!mt.movable),ft=ut.length?ut:ht,pt=getCombinedBounds(ft.map(mt=>mt.bounds)),gt=[];switch(rt){case"LEFT":{const mt=pt.x;dt.forEach(xt=>{const yt=mt-xt.bounds.x;appendCommand(gt,xt,yt,0)});break}case"H_CENTER":{const mt=pt.x+pt.width/2;dt.forEach(xt=>{const yt=mt-(xt.bounds.x+xt.bounds.width/2);appendCommand(gt,xt,yt,0)});break}case"RIGHT":{const mt=pt.x+pt.width;dt.forEach(xt=>{const yt=mt-(xt.bounds.x+xt.bounds.width);appendCommand(gt,xt,yt,0)});break}case"TOP":{const mt=pt.y;dt.forEach(xt=>{const yt=mt-xt.bounds.y;appendCommand(gt,xt,0,yt)});break}case"V_CENTER":{const mt=pt.y+pt.height/2;dt.forEach(xt=>{const yt=mt-(xt.bounds.y+xt.bounds.height/2);appendCommand(gt,xt,0,yt)});break}case"BOTTOM":{const mt=pt.y+pt.height;dt.forEach(xt=>{const yt=mt-(xt.bounds.y+xt.bounds.height);appendCommand(gt,xt,0,yt)});break}case"H_DISTRIBUTE":{distributeHorizontally(ht,gt);break}case"V_DISTRIBUTE":{distributeVertically(ht,gt);break}}gt.length&&lt.executeBatch(gt)}function distributeHorizontally(it,rt){if(it.length<=2)return;const lt=[...it].sort((ht,dt)=>ht.bounds.x-dt.bounds.x||ht.bounds.y-dt.bounds.y),ct=collectAnchorIndices(lt);for(let ht=0;ht<ct.length-1;ht++){const dt=ct[ht],ut=ct[ht+1],ft=lt[dt],pt=lt[ut],gt=lt.slice(dt+1,ut);if(!gt.length)continue;const mt=pt.bounds.x-(ft.bounds.x+ft.bounds.width),xt=gt.reduce((wt,Ct)=>wt+Ct.bounds.width,0),yt=(mt-xt)/(gt.length+1);let bt=ft.bounds.x+ft.bounds.width+yt;gt.forEach(wt=>{const Ct=bt-wt.bounds.x;appendCommand(rt,wt,Ct,0),bt+=wt.bounds.width+yt})}}function distributeVertically(it,rt){if(it.length<=2)return;const lt=[...it].sort((ht,dt)=>ht.bounds.y-dt.bounds.y||ht.bounds.x-dt.bounds.x),ct=collectAnchorIndices(lt);for(let ht=0;ht<ct.length-1;ht++){const dt=ct[ht],ut=ct[ht+1],ft=lt[dt],pt=lt[ut],gt=lt.slice(dt+1,ut);if(!gt.length)continue;const mt=pt.bounds.y-(ft.bounds.y+ft.bounds.height),xt=gt.reduce((wt,Ct)=>wt+Ct.bounds.height,0),yt=(mt-xt)/(gt.length+1);let bt=ft.bounds.y+ft.bounds.height+yt;gt.forEach(wt=>{const Ct=bt-wt.bounds.y;appendCommand(rt,wt,0,Ct),bt+=wt.bounds.height+yt})}}function collectAnchorIndices(it){const rt=new Set;return rt.add(0),rt.add(it.length-1),it.forEach((lt,ct)=>{lt.movable||rt.add(ct)}),Array.from(rt).sort((lt,ct)=>lt-ct)}function appendCommand(it,rt,lt,ct){const ht=createUpdateCommand(rt,lt,ct);ht&&it.push(ht)}function createAlignableItem(it,rt){const lt=getElementViewportBounds(rt,it),ct=!isIconElement(it),ht=getTransformInfo(it);if(ht)return{element:it,bounds:lt,mode:"transform",startX:ht.x,startY:ht.y,hasX:!1,hasY:!1,hasDataX:!1,hasDataY:!1,restTransform:ht.rest,originalTransform:ht.original,movable:ct};const{x:dt,y:ut,hasX:ft,hasY:pt,hasDataX:gt,hasDataY:mt}=getAttrInfo(it,lt);return{element:it,bounds:lt,mode:"attr",startX:dt,startY:ut,hasX:ft,hasY:pt,hasDataX:gt,hasDataY:mt,movable:ct}}function createUpdateCommand(it,rt,lt){if(!it.movable||Math.abs(rt)<1e-6&&Math.abs(lt)<1e-6)return null;if(it.mode==="attr"){const dt=it.startX+rt,ut=it.startY+lt,ft={x:dt,y:ut},pt={};return pt.x=it.hasX?it.startX:null,pt.y=it.hasY?it.startY:null,it.hasDataX&&(ft["data-x"]=dt,pt["data-x"]=it.startX),it.hasDataY&&(ft["data-y"]=ut,pt["data-y"]=it.startY),new UpdateElementCommand(it.element,{attributes:ft},{attributes:pt})}const ct=composeTransform(it.startX+rt,it.startY+lt,it.restTransform),ht=it.originalTransform!==void 0?it.originalTransform:null;return new UpdateElementCommand(it.element,{attributes:{transform:ct}},{attributes:{transform:ht}})}function getAttrInfo(it,rt){const lt=getAttributes(it,["x","y","data-x","data-y"],!1),ct=lt.x!==null&&lt.x!==void 0,ht=lt.y!==null&&lt.y!==void 0,dt=lt["data-x"]!==null&&lt["data-x"]!==void 0,ut=lt["data-y"]!==null&&lt["data-y"]!==void 0,ft=(wt,Ct)=>{const vt=wt!=null?Number(wt):NaN;return Number.isFinite(vt)?vt:Ct},pt=ft(lt.x,NaN),gt=ft(lt.y,NaN),mt=ft(lt["data-x"],NaN),xt=ft(lt["data-y"],NaN),yt=Number.isFinite(pt)?pt:Number.isFinite(mt)?mt:rt.x,bt=Number.isFinite(gt)?gt:Number.isFinite(xt)?xt:rt.y;return{x:yt,y:bt,hasX:ct,hasY:ht,hasDataX:dt,hasDataY:ut}}function getTransformInfo(it){var gt;const rt=it.getAttribute("transform");if(rt===null)return null;const lt=rt.match(/translate\(\s*([-\d.]+)(?:[ ,]\s*([-\d.]+))?\s*\)/i);if(!lt)return{x:0,y:0,rest:{before:rt.trim(),after:""},original:rt};const ct=Number(lt[1])||0,ht=lt[2]!==void 0&&Number(lt[2])||0,dt=(gt=lt.index)!=null?gt:0,ut=rt.slice(0,dt).trim(),ft=rt.slice(dt+lt[0].length).trim();return{x:ct,y:ht,rest:{before:ut,after:ft},original:rt}}function composeTransform(it,rt,lt){const ct=`translate(${it}, ${rt})`;return[lt==null?void 0:lt.before,ct,lt==null?void 0:lt.after].filter(dt=>dt&&dt.length).join(" ")}const GRID_CLASS="infographic-font-align-grid",GRID_STYLE_ID="infographic-font-align-grid-style",HORIZONTAL_ALIGN_OPTIONS=[{icon:TEXT_ICONS.alignLeft,align:"LEFT"},{icon:TEXT_ICONS.alignCenter,align:"CENTER"},{icon:TEXT_ICONS.alignRight,align:"RIGHT"}],VERTICAL_ALIGN_OPTIONS=[{icon:TEXT_ICONS.alignTop,align:"TOP"},{icon:TEXT_ICONS.alignMiddle,align:"MIDDLE"},{icon:TEXT_ICONS.alignBottom,align:"BOTTOM"}],GRID_STYLES=`
.${GRID_CLASS} {
  display: grid;
  grid-template-columns: repeat(3, 32px);
  grid-auto-rows: 32px;
  gap: 2px;
}
`,FontAlign=(it,rt,lt)=>{injectStyleOnce(GRID_STYLE_ID,GRID_STYLES);const ct={horizontal:rt["data-horizontal-align"],vertical:rt["data-vertical-align"]},ht=IconButton({icon:TEXT_ICONS.align}),dt=createAlignContent(ct,ut=>{const ft={};ut.horizontal&&(ft["data-horizontal-align"]=ut.horizontal),ut.vertical&&(ft["data-vertical-align"]=ut.vertical),Object.keys(ft).length&&lt.executeBatch(it.map(pt=>new UpdateElementCommand(pt,{attributes:ft})))});return Popover({target:ht,content:dt,placement:"top",offset:12})};function createAlignContent(it,rt){const lt=document.createElement("div");lt.classList.add(GRID_CLASS);const ct={},ht=()=>{Object.entries(ct).forEach(([ut,ft])=>{const pt=ut===it.horizontal||ut===it.vertical;ft.setActivate(pt)})},dt=(ut,ft)=>{ut.forEach(({icon:pt,align:gt})=>{const mt=IconButton({icon:pt,onClick:()=>{it[ft]!==gt&&(Object.assign(it,{[ft]:gt}),ht(),rt(Ft({},it)))},activate:gt===it[ft]});ct[gt]=mt,lt.appendChild(mt)})};return dt(HORIZONTAL_ALIGN_OPTIONS,"horizontal"),dt(VERTICAL_ALIGN_OPTIONS,"vertical"),lt}const FONT_COLOR_BUTTON_CLASS="infographic-font-color-btn",FONT_COLOR_STYLE_ID="infographic-font-color-style",DEFAULT_COLOR$1="#1f1f1f",FontColor=(it,rt,lt)=>{ensureFontColorStyles();const ct=normalizeColor$1(rt.fill),ht=rt.fill===void 0&&it.length>1,dt=document.createElement("button");dt.type="button",dt.classList.add(FONT_COLOR_BUTTON_CLASS),setButtonColor$1(dt,ct!=null?ct:DEFAULT_COLOR$1,ht);const ut=ColorPicker({value:ct!=null?ct:DEFAULT_COLOR$1,onChange:ft=>{setButtonColor$1(dt,ft,!1),lt.executeBatch(it.map(pt=>new UpdateElementCommand(pt,{attributes:{fill:ft}})))}});return Popover({target:dt,content:ut,placement:["top","bottom"],offset:12,trigger:"hover",closeOnOutsideClick:!0,open:!1,padding:0})};function normalizeColor$1(it){if(it)return hasColor(it)?it:void 0}function setButtonColor$1(it,rt,lt){it.style.setProperty("--infographic-font-color",rt),lt?it.setAttribute("data-mixed","true"):it.removeAttribute("data-mixed")}function ensureFontColorStyles(){injectStyleOnce(FONT_COLOR_STYLE_ID,`
.${FONT_COLOR_BUTTON_CLASS} {
  position: relative;
  width: 32px;
  height: 32px;
  padding: 0;
  border: none;
  background: #fff;
  cursor: pointer;
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}
.${FONT_COLOR_BUTTON_CLASS}::after {
  content: '';
  position: absolute;
  inset: 6px;
  border-radius: 50%;
  background: var(--infographic-font-color, ${DEFAULT_COLOR$1});
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
}
.${FONT_COLOR_BUTTON_CLASS}[data-mixed="true"]::after {
  background: repeating-linear-gradient(
    45deg,
    #d9d9d9 0,
    #d9d9d9 6px,
    #f5f5f5 6px,
    #f5f5f5 12px
  );
}
`)}const FONT_LIST_CLASS="infographic-font-family-list",FONT_OPTION_CLASS=`${FONT_LIST_CLASS}__option`,FONT_LIST_STYLE_ID="infographic-font-family-list-style",DEFAULT_FONT_LABEL="默认",FontFamily=(it,rt,lt)=>{ensureFontFamilyListStyle();const ct=getFonts(),ht=normalizeFontFamily(rt["font-family"]),dt=ct.map(mt=>({label:mt.name||mt.fontFamily,value:mt.fontFamily}));dt.some(mt=>normalizeFontFamily(mt.value)===ht)||dt.unshift({label:DEFAULT_FONT_LABEL,value:ht});let ut=ht;const ft=createFontList(dt,ut,mt=>{ut!==mt&&(ut=mt,lt.executeBatch(it.map(xt=>new UpdateElementCommand(xt,{attributes:{"font-family":decodeFontFamily(mt)}}))))}),pt=IconButton({icon:TEXT_ICONS.fontFamily});return Popover({target:pt,content:ft,placement:["top","bottom"],offset:12,trigger:"hover",closeOnOutsideClick:!0,open:!1,padding:0})};function createFontList(it,rt,lt){const ct=document.createElement("div");ct.classList.add(FONT_LIST_CLASS);const ht={},dt=ut=>{Object.entries(ht).forEach(([ft,pt])=>{ft===ut?pt.setAttribute("data-activate","true"):pt.removeAttribute("data-activate")})};return it.forEach(({label:ut,value:ft})=>{const pt=document.createElement("button");pt.type="button",pt.classList.add(FONT_OPTION_CLASS),pt.textContent=ut,pt.style.fontFamily=ft,ft===rt&&pt.setAttribute("data-activate","true"),pt.addEventListener("click",()=>{rt!==ft&&(rt=ft,dt(rt),lt(ft))}),ht[ft]=pt,ct.appendChild(pt)}),ct}function normalizeFontFamily(it){return it?Array.isArray(it)?encodeFontFamily(it.join(", ")):encodeFontFamily(String(it)):""}function ensureFontFamilyListStyle(){injectStyleOnce(FONT_LIST_STYLE_ID,`
.${FONT_LIST_CLASS} {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 4px;
  min-width: 180px;
  max-height: 220px;
  overflow-y: auto;
}
.${FONT_OPTION_CLASS} {
  width: 100%;
  text-align: left;
  padding: 6px 10px;
  border: none;
  border-radius: 6px;
  background: #fff;
  cursor: pointer;
  font-size: 12px;
  color: #000000d9;
  transition: background-color 0.2s ease, color 0.2s ease;
}
.${FONT_OPTION_CLASS}:hover {
  background: #f5f5f5;
}
.${FONT_OPTION_CLASS}[data-activate="true"] {
  background: #e6f4ff;
  color: #0958d9;
}
`)}const FONT_SIZE_CLASS="infographic-font-size-grid",FONT_SIZE_STYLE_ID="infographic-font-size-grid-style",FONT_SIZE_OPTIONS=[{label:"XS",value:12},{label:"S",value:14},{label:"M",value:16},{label:"L",value:20},{label:"XL",value:24}],FONT_SIZE_STYLES=`
.${FONT_SIZE_CLASS} {
  display: grid;
  grid-template-columns: repeat(5, 32px);
  grid-auto-rows: 32px;
  gap: 2px;
}
`,FontSize=(it,rt,lt)=>{injectStyleOnce(FONT_SIZE_STYLE_ID,FONT_SIZE_STYLES);const ct=IconButton({icon:TEXT_ICONS.fontSize}),ht=normalizeFontSize(rt["font-size"]),dt=createFontSizeContent(ht,ut=>{lt.executeBatch(it.map(ft=>new UpdateElementCommand(ft,{attributes:{"font-size":ut}})))});return Popover({target:ct,content:dt,placement:"top",offset:12})};function createFontSizeContent(it,rt){const lt=document.createElement("div");lt.classList.add(FONT_SIZE_CLASS);let ct=it;const ht={},dt=()=>{Object.entries(ht).forEach(([ut,ft])=>{const pt=Number(ut)===ct;ft.setActivate(pt)})};return FONT_SIZE_OPTIONS.forEach(({label:ut,value:ft})=>{const pt=IconButton({icon:createLabelIcon(ut),onClick:()=>{ct!==ft&&(ct=ft,dt(),rt(ft))},activate:ft===ct});ht[String(ft)]=pt,lt.appendChild(pt)}),lt}function createLabelIcon(it){return()=>{const rt="1.2em",lt=document.createElement("span");return lt.textContent=it,lt.style.display="inline-flex",lt.style.alignItems="center",lt.style.justifyContent="center",lt.style.width=rt,lt.style.height=rt,lt.style.fontSize="12px",lt}}function normalizeFontSize(it){if(typeof it=="number")return it;if(typeof it=="string"){const lt=parseFloat(it);return Number.isFinite(lt)?lt:12}return 12}const ICON_COLOR_BUTTON_CLASS="infographic-icon-color-btn",ICON_COLOR_STYLE_ID="infographic-icon-color-style",DEFAULT_COLOR="#1f1f1f",IconColor=(it,rt,lt)=>{ensureIconColorStyles();const ct=normalizeColor(rt.fill),ht=rt.fill===void 0&&it.length>1,dt=document.createElement("button");dt.type="button",dt.classList.add(ICON_COLOR_BUTTON_CLASS),setButtonColor(dt,ct!=null?ct:DEFAULT_COLOR,ht);const ut=ColorPicker({value:ct!=null?ct:DEFAULT_COLOR,onChange:ft=>{setButtonColor(dt,ft,!1),lt.executeBatch(it.map(pt=>new UpdateElementCommand(pt,{attributes:{fill:ft}})))}});return Popover({target:dt,content:ut,placement:["top","bottom"],offset:12,trigger:"hover",closeOnOutsideClick:!0,open:!1,padding:0})};function normalizeColor(it){if(it)return hasColor(it)?it:void 0}function setButtonColor(it,rt,lt){it.style.setProperty("--infographic-icon-color",rt),lt?it.setAttribute("data-mixed","true"):it.removeAttribute("data-mixed")}function ensureIconColorStyles(){injectStyleOnce(ICON_COLOR_STYLE_ID,`
.${ICON_COLOR_BUTTON_CLASS} {
  position: relative;
  width: 32px;
  height: 32px;
  padding: 0;
  border: none;
  background: #fff;
  cursor: pointer;
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}
.${ICON_COLOR_BUTTON_CLASS}::after {
  content: '';
  position: absolute;
  inset: 6px;
  border-radius: 50%;
  background: var(--infographic-icon-color, ${DEFAULT_COLOR});
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.08);
}
.${ICON_COLOR_BUTTON_CLASS}[data-mixed="true"]::after {
  background: repeating-linear-gradient(
    45deg,
    #d9d9d9 0,
    #d9d9d9 6px,
    #f5f5f5 6px,
    #f5f5f5 12px
  );
}
`)}class EditBar extends Plugin{constructor(rt){super(),this.options=rt,this.name="edit-bar",this.selection=[],this.handleSelectionChanged=({next:lt})=>{if(this.selection=lt,lt.length===0){this.container&&hideContainer(this.container);return}const ct=this.getOrCreateEditBar(),ht=this.getEditItems(lt);if(ht.length===0){hideContainer(ct);return}setContainerItems(ct,ht),this.placeEditBar(ct,lt),showContainer(ct)},this.handleGeometryChanged=({target:lt})=>{!this.selection.includes(lt)||!this.container||(this.placeEditBar(this.container,this.selection),showContainer(this.container))},this.handleHistoryChanged=()=>{!this.container||this.selection.length===0||(this.placeEditBar(this.container,this.selection),showContainer(this.container))}}init(rt){super.init(rt);const{emitter:lt}=rt;lt.on("selection:change",this.handleSelectionChanged),lt.on("selection:geometrychange",this.handleGeometryChanged),lt.on("history:change",this.handleHistoryChanged)}destroy(){var lt;const{emitter:rt}=this;rt.off("selection:change",this.handleSelectionChanged),rt.off("selection:geometrychange",this.handleGeometryChanged),rt.off("history:change",this.handleHistoryChanged),(lt=this.container)==null||lt.remove()}getEditItems(rt){let lt=!1,ct=!1,ht=!1;for(const dt of rt)if(isEditableText(dt)?lt=!0:isIconElement(dt)?ct=!0:isGeometryElement(dt)&&(ht=!0),lt&&ct&&ht)break;return lt&&!ct&&!ht?rt.length===1?this.getTextEditItems(rt[0]):this.getTextCollectionEditItems(rt):!lt&&ct&&!ht?rt.length===1?this.getIconEditItems(rt):this.getIconCollectionEditItems(rt):!lt&&!ct&&ht?rt.length===1?this.getGeometryEditItems(rt):this.getGeometryCollectionEditItems(rt):this.getElementCollectionEditItems(rt)}getOrCreateEditBar(){if(this.container)return this.container;const{style:rt,className:lt}=this.options||{},ct=document.createElement("div");Object.assign(ct.style,Ft({visibility:"hidden",position:"absolute",left:"0",top:"0",display:"flex",flexFlow:"row",justifyContent:"center",alignItems:"center",height:"40px",minWidth:"40px",minHeight:"40px",borderRadius:"8px",padding:"0 4px",backgroundColor:"#fff",border:"1px solid rgba(239, 240, 240, 0.9)",zIndex:"9999",boxShadow:"rgba(0, 0, 0, 0.08) 0px 1px 2px -2px, rgba(0, 0, 0, 0.04) 0px 2px 6px, rgba(0, 0, 0, 0.02) 0px 4px 8px 1px"},rt)),lt&&ct.classList.add(lt),setElementRole(ct,COMPONENT_ROLE),this.container=ct;const{getContainer:ht}=this.options||{},dt=typeof ht=="function"?ht():ht,ut=dt!=null?dt:document.body;return ut==null||ut.appendChild(ct),ct}getTextEditItems(rt){const{attributes:lt={}}=getTextElementProps(rt);return[FontColor,FontSize,FontAlign,FontFamily].map(ct=>ct([rt],lt,this.commander))}getTextCollectionEditItems(rt){const lt=getCommonAttrs(rt.map(dt=>getTextElementProps(dt).attributes||{})),ct=[FontColor,FontSize,FontAlign,FontFamily].map(dt=>dt(rt,lt,this.commander)),ht=this.getElementCollectionEditItems(rt);return[...ct,...ht]}getIconEditItems(rt){const lt=getIconAttrs(rt[0]);return[IconColor].map(ct=>ct(rt,lt,this.commander))}getIconCollectionEditItems(rt){const lt=getCommonAttrs(rt.map(ct=>getIconAttrs(ct)));return[IconColor].map(ct=>ct(rt,lt,this.commander))}getGeometryEditItems(rt){return[]}getGeometryCollectionEditItems(rt){return[...this.getElementCollectionEditItems(rt)]}getElementCollectionEditItems(rt){return rt.length<=1?[]:[ElementAlign(rt,{},this.commander,{enableDistribution:rt.length>2})]}placeEditBar(rt,lt){var Tt;if(lt.length===0)return;const ct=this.editor.getDocument(),ht=getCombinedBounds(lt.map(Et=>getElementViewportBounds(ct,Et))),ut=((Tt=rt.offsetParent)!=null?Tt:document.documentElement).getBoundingClientRect(),ft=document.documentElement.clientHeight,pt=rt.getBoundingClientRect(),gt=8,mt=getScreenCTM(ct),xt=new DOMPoint(ht.x+ht.width/2,ht.y).matrixTransform(mt),yt=new DOMPoint(ht.x+ht.width/2,ht.y+ht.height).matrixTransform(mt),bt=(Et,At,Mt)=>Math.min(Math.max(Et,At),Mt);let wt=xt.x-ut.left-pt.width/2;wt=bt(wt,0,Math.max(ut.width-pt.width,0));const Ct=xt.y-gt,vt=ft-yt.y-gt;let _t=Ct>=pt.height||Ct>=vt?xt.y-ut.top-pt.height-gt:yt.y-ut.top+gt;_t=bt(_t,0,Math.max(ut.height-pt.height,0)),rt.style.left=`${wt}px`,rt.style.top=`${_t}px`}}function showContainer(it){it.style.visibility="visible"}function hideContainer(it){it.style.visibility="hidden"}function setContainerItems(it,rt){it.innerHTML="",rt.forEach(lt=>{it.appendChild(lt)})}class ResizeElement extends Plugin{constructor(){super(...arguments),this.name="resize-element",this.target=null,this.handles=[],this.activeHandle=null,this.activePointerId=null,this.handleSelectionChange=({next:rt})=>{const lt=rt.length===1?rt[0]:null;lt&&isEditableText(lt)?(this.target=lt,this.updateHandles()):(this.target=null,this.hideHandles(),this.cancelDrag())},this.handleDeactivate=()=>{this.target=null,this.hideHandles(),this.cancelDrag()},this.handleGeometryChange=({target:rt})=>{if(!this.target||rt!==this.target)return;const lt=this.getViewportRect(this.target);this.lastViewportRect=lt,this.updateHandles(lt)},this.handleHistoryChange=()=>{if(!this.target)return;const rt=this.getViewportRect(this.target);this.lastViewportRect=rt,this.updateHandles(rt)},this.handlePointerMove=rt=>{if(!this.target||!this.startPointer||!this.startRect||!this.activeHandle||this.activePointerId!==null&&rt.pointerId!==this.activePointerId)return;const lt=this.clientToElement(this.target,rt.clientX,rt.clientY),ct=lt.x-this.startPointer.x,ht=lt.y-this.startPointer.y,dt=this.clampRect(this.applyDelta(this.startRect,ct,ht,this.activeHandle),this.activeHandle);this.lastRect=dt,this.applyRect(this.target,dt),this.lastViewportRect=this.getViewportRect(this.target),this.updateHandles(this.lastViewportRect),this.emitSelectionGeometryChange()},this.handlePointerUp=rt=>{if(this.activePointerId!==null&&rt.pointerId!==this.activePointerId)return;const lt=this.lastRect,ct=this.startAttrs,ht=lt&&this.startRect&&this.hasRectChanged(this.startRect,lt);if(this.cancelDrag(),ht&&this.target&&lt&&ct)this.commander.execute(new UpdateElementCommand(this.target,{attributes:lt},{attributes:ct})),this.lastViewportRect=this.getViewportRect(this.target),this.updateHandles(this.lastViewportRect),this.emitSelectionGeometryChange();else if(this.target){const dt=this.lastViewportRect||this.getViewportRect(this.target);this.updateHandles(dt)}}}init(rt){super.init(rt);const{emitter:lt}=rt;lt.on("selection:change",this.handleSelectionChange),lt.on("selection:geometrychange",this.handleGeometryChange),lt.on("history:change",this.handleHistoryChange),lt.on("deactivated",this.handleDeactivate)}destroy(){this.cancelDrag(),this.removeContainer();const{emitter:rt}=this;rt.off("selection:change",this.handleSelectionChange),rt.off("selection:geometrychange",this.handleGeometryChange),rt.off("history:change",this.handleHistoryChange),rt.off("deactivated",this.handleDeactivate)}ensureContainer(){if(this.container)return this.container;const rt=createElement("g",{"pointer-events":"none"});this.overlay=createElement("rect",{fill:"rgba(51, 132, 245, 0.06)",stroke:"none","pointer-events":"none"});const lt=createElement("rect",{fill:"none",stroke:"#3384F5","stroke-width":1,"stroke-dasharray":"4 2","pointer-events":"none"});rt.appendChild(this.overlay),rt.appendChild(lt),this.outline=lt;const ct=ResizeElement.HANDLE_POSITIONS,ht={"top-left":"nwse-resize",top:"ns-resize","top-right":"nesw-resize",right:"ew-resize","bottom-right":"nwse-resize",bottom:"ns-resize","bottom-left":"nesw-resize",left:"ew-resize"};return ct.forEach((dt,ut)=>{const pt=dt==="top"||dt==="right"||dt==="bottom"||dt==="left"?createElement("line",{stroke:"transparent","stroke-width":ResizeElement.LINE_STROKE_WIDTH}):createElement("circle",{r:ResizeElement.HANDLE_SIZE/2,fill:"#3384F5",stroke:"#fff","stroke-width":1.5});pt.style.cursor=ht[dt],pt.style.pointerEvents="all",pt.addEventListener("pointerdown",gt=>this.handlePointerDown(gt,dt)),pt.addEventListener("click",gt=>{gt.stopPropagation(),gt.preventDefault()}),rt.appendChild(pt),this.handles[ut]=pt}),this.editor.getDocument().appendChild(rt),this.container=rt,rt}updateHandles(rt){if(!this.target){this.hideHandles();return}const lt=rt||this.getViewportRect(this.target)||this.lastViewportRect||null;if(!lt){this.hideHandles();return}this.lastViewportRect=lt;const ct=this.ensureContainer();ct.style.display="block",this.outline.style.display="block",setAttributes(this.outline,lt),this.overlay&&(this.overlay.style.display="block",setAttributes(this.overlay,lt));const ht=this.getHandlePoints(lt);this.handles.forEach((dt,ut)=>{const[ft,pt]=ht[ut];if(dt.tagName==="circle")setAttributes(dt,{cx:ft,cy:pt});else{const gt=ResizeElement.HANDLE_POSITIONS[ut],mt=this.getHandleLine(lt,gt);setAttributes(dt,mt)}dt.style.display="block"})}hideHandles(){this.container&&(this.container.style.display="none"),this.outline&&(this.outline.style.display="none"),this.overlay&&(this.overlay.style.display="none"),this.handles.forEach(rt=>rt.style.display="none")}removeContainer(){var rt;(rt=this.container)==null||rt.remove(),this.container=void 0,this.outline=void 0,this.overlay=void 0,this.handles=[]}handlePointerDown(rt,lt){if(!this.target||rt.button!==0&&rt.pointerType==="mouse")return;rt.stopPropagation(),rt.preventDefault();const ct=this.clientToElement(this.target,rt.clientX,rt.clientY);this.activeHandle=lt,this.activePointerId=rt.pointerId,this.startPointer=ct;const ht=this.getCurrentAttributes(this.target);this.startRect=ht,this.startAttrs=Ft({},ht),this.lastRect=ht,this.lastViewportRect=this.getViewportRect(this.target),window.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("pointerup",this.handlePointerUp),window.addEventListener("pointercancel",this.handlePointerUp)}cancelDrag(){this.activeHandle=null,this.activePointerId=null,this.startPointer=void 0,this.startRect=void 0,this.startAttrs=void 0,this.lastRect=void 0,this.lastViewportRect=void 0,window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("pointerup",this.handlePointerUp),window.removeEventListener("pointercancel",this.handlePointerUp)}applyRect(rt,lt){setAttributes(rt,{x:lt.x,y:lt.y,width:lt.width,height:lt.height})}getViewportRect(rt){const{x:lt,y:ct,width:ht,height:dt}=getElementViewportBounds(this.editor.getDocument(),rt);return{x:lt,y:ct,width:ht,height:dt}}clientToElement(rt,lt,ct){var dt,ut;const ht=((dt=rt.getScreenCTM())==null?void 0:dt.inverse())||((ut=this.editor.getDocument().getScreenCTM())==null?void 0:ut.inverse())||new DOMMatrix;return new DOMPoint(lt,ct).matrixTransform(ht)}getCurrentAttributes(rt){const lt=getAttributes(rt,["x","y","width","height"],!1),ct=this.getViewportRect(rt),ht=(dt,ut)=>{const ft=dt!==null?Number(dt):NaN;return Number.isFinite(ft)?ft:ut};return{x:ht(lt.x,ct.x),y:ht(lt.y,ct.y),width:ht(lt.width,ct.width),height:ht(lt.height,ct.height)}}getHandlePoints(rt){const{x:lt,y:ct,width:ht,height:dt}=rt,ut=lt+ht/2,ft=ct+dt/2;return[[lt,ct],[ut,ct],[lt+ht,ct],[lt+ht,ft],[lt+ht,ct+dt],[ut,ct+dt],[lt,ct+dt],[lt,ft]]}applyDelta(rt,lt,ct,ht){let{x:dt,y:ut,width:ft,height:pt}=rt;switch(ht){case"top-left":dt+=lt,ut+=ct,ft-=lt,pt-=ct;break;case"top":ut+=ct,pt-=ct;break;case"top-right":ut+=ct,ft+=lt,pt-=ct;break;case"right":ft+=lt;break;case"bottom-right":ft+=lt,pt+=ct;break;case"bottom":pt+=ct;break;case"bottom-left":dt+=lt,ft-=lt,pt+=ct;break;case"left":dt+=lt,ft-=lt;break}return{x:dt,y:ut,width:ft,height:pt}}clampRect(rt,lt){let{x:ct,y:ht,width:dt,height:ut}=rt;if(dt<ResizeElement.MIN_SIZE){const ft=ResizeElement.MIN_SIZE-dt;(lt==="top-left"||lt==="bottom-left"||lt==="left")&&(ct-=ft),dt=ResizeElement.MIN_SIZE}if(ut<ResizeElement.MIN_SIZE){const ft=ResizeElement.MIN_SIZE-ut;(lt==="top-left"||lt==="top-right"||lt==="top")&&(ht-=ft),ut=ResizeElement.MIN_SIZE}return{x:ct,y:ht,width:dt,height:ut}}hasRectChanged(rt,lt){return Math.abs(rt.x-lt.x)>.5||Math.abs(rt.y-lt.y)>.5||Math.abs(rt.width-lt.width)>.5||Math.abs(rt.height-lt.height)>.5}emitSelectionGeometryChange(){this.target&&this.lastViewportRect&&this.emitter.emit("selection:geometrychange",{type:"selection:geometrychange",target:this.target,rect:this.lastViewportRect})}getHandleLine(rt,lt){const{x:ct,y:ht,width:dt,height:ut}=rt;switch(lt){case"top":return{x1:ct,y1:ht,x2:ct+dt,y2:ht};case"right":return{x1:ct+dt,y1:ht,x2:ct+dt,y2:ht+ut};case"bottom":return{x1:ct,y1:ht+ut,x2:ct+dt,y2:ht+ut};case"left":default:return{x1:ct,y1:ht,x2:ct,y2:ht+ut}}}}ResizeElement.HANDLE_SIZE=10;ResizeElement.LINE_STROKE_WIDTH=8;ResizeElement.MIN_SIZE=1;ResizeElement.HANDLE_POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"];var parse$1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$1;hasRequiredParse=1;var it=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;parse$1=function(ct,ht){ht=ht||{};var dt=1,ut=1;function ft(Dt){var Rt=Dt.match(/\n/g);Rt&&(dt+=Rt.length);var Wt=Dt.lastIndexOf(`
`);ut=~Wt?Dt.length-Wt:ut+Dt.length}function pt(){var Dt={line:dt,column:ut};return function(Rt){return Rt.position=new gt(Dt),St(),Rt}}function gt(Dt){this.start=Dt,this.end={line:dt,column:ut},this.source=ht.source}gt.prototype.content=ct;var mt=[];function xt(Dt){var Rt=new Error(ht.source+":"+dt+":"+ut+": "+Dt);if(Rt.reason=Dt,Rt.filename=ht.source,Rt.line=dt,Rt.column=ut,Rt.source=ct,ht.silent)mt.push(Rt);else throw Rt}function yt(){var Dt=Ct();return{type:"stylesheet",stylesheet:{source:ht.source,rules:Dt,parsingErrors:mt}}}function bt(){return vt(/^{\s*/)}function wt(){return vt(/^}/)}function Ct(){var Dt,Rt=[];for(St(),_t(Rt);ct.length&&ct.charAt(0)!="}"&&(Dt=Yt()||Kt());)Dt!==!1&&(Rt.push(Dt),_t(Rt));return Rt}function vt(Dt){var Rt=Dt.exec(ct);if(Rt){var Wt=Rt[0];return ft(Wt),ct=ct.slice(Wt.length),Rt}}function St(){vt(/^\s*/)}function _t(Dt){var Rt;for(Dt=Dt||[];Rt=Tt();)Rt!==!1&&Dt.push(Rt);return Dt}function Tt(){var Dt=pt();if(!(ct.charAt(0)!="/"||ct.charAt(1)!="*")){for(var Rt=2;ct.charAt(Rt)!=""&&(ct.charAt(Rt)!="*"||ct.charAt(Rt+1)!="/");)++Rt;if(Rt+=2,ct.charAt(Rt-1)==="")return xt("End of comment missing");var Wt=ct.slice(2,Rt-2);return ut+=2,ft(Wt),ct=ct.slice(Rt),ut+=2,Dt({type:"comment",comment:Wt})}}function Et(){var Dt=vt(/^([^{]+)/);if(Dt)return rt(Dt[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(Rt){return Rt.replace(/,/g,"‌")}).split(/\s*(?![^(]*\)),\s*/).map(function(Rt){return Rt.replace(/\u200C/g,",")})}function At(){var Dt=pt(),Rt=vt(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(Rt){if(Rt=rt(Rt[0]),!vt(/^:\s*/))return xt("property missing ':'");var Wt=vt(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),qt=Dt({type:"declaration",property:Rt.replace(it,""),value:Wt?rt(Wt[0]).replace(it,""):""});return vt(/^[;\s]*/),qt}}function Mt(){var Dt=[];if(!bt())return xt("missing '{'");_t(Dt);for(var Rt;Rt=At();)Rt!==!1&&(Dt.push(Rt),_t(Dt));return wt()?Dt:xt("missing '}'")}function It(){for(var Dt,Rt=[],Wt=pt();Dt=vt(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)Rt.push(Dt[1]),vt(/^,\s*/);if(Rt.length)return Wt({type:"keyframe",values:Rt,declarations:Mt()})}function Lt(){var Dt=pt(),Wt=vt(/^@([-\w]+)?keyframes\s*/);if(Wt){var Rt=Wt[1],Wt=vt(/^([-\w]+)\s*/);if(!Wt)return xt("@keyframes missing name");var qt=Wt[1];if(!bt())return xt("@keyframes missing '{'");for(var Zt,Ut=_t();Zt=It();)Ut.push(Zt),Ut=Ut.concat(_t());return wt()?Dt({type:"keyframes",name:qt,vendor:Rt,keyframes:Ut}):xt("@keyframes missing '}'")}}function jt(){var Dt=pt(),Rt=vt(/^@supports *([^{]+)/);if(Rt){var Wt=rt(Rt[1]);if(!bt())return xt("@supports missing '{'");var qt=_t().concat(Ct());return wt()?Dt({type:"supports",supports:Wt,rules:qt}):xt("@supports missing '}'")}}function Ot(){var Dt=pt(),Rt=vt(/^@host\s*/);if(Rt){if(!bt())return xt("@host missing '{'");var Wt=_t().concat(Ct());return wt()?Dt({type:"host",rules:Wt}):xt("@host missing '}'")}}function Pt(){var Dt=pt(),Rt=vt(/^@media *([^{]+)/);if(Rt){var Wt=rt(Rt[1]);if(!bt())return xt("@media missing '{'");var qt=_t().concat(Ct());return wt()?Dt({type:"media",media:Wt,rules:qt}):xt("@media missing '}'")}}function Gt(){var Dt=pt(),Rt=vt(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(Rt)return Dt({type:"custom-media",name:rt(Rt[1]),media:rt(Rt[2])})}function kt(){var Dt=pt(),Rt=vt(/^@page */);if(Rt){var Wt=Et()||[];if(!bt())return xt("@page missing '{'");for(var qt=_t(),Zt;Zt=At();)qt.push(Zt),qt=qt.concat(_t());return wt()?Dt({type:"page",selectors:Wt,declarations:qt}):xt("@page missing '}'")}}function Ht(){var Dt=pt(),Rt=vt(/^@([-\w]+)?document *([^{]+)/);if(Rt){var Wt=rt(Rt[1]),qt=rt(Rt[2]);if(!bt())return xt("@document missing '{'");var Zt=_t().concat(Ct());return wt()?Dt({type:"document",document:qt,vendor:Wt,rules:Zt}):xt("@document missing '}'")}}function Xt(){var Dt=pt(),Rt=vt(/^@font-face\s*/);if(Rt){if(!bt())return xt("@font-face missing '{'");for(var Wt=_t(),qt;qt=At();)Wt.push(qt),Wt=Wt.concat(_t());return wt()?Dt({type:"font-face",declarations:Wt}):xt("@font-face missing '}'")}}var zt=Vt("import"),Nt=Vt("charset"),Bt=Vt("namespace");function Vt(Dt){var Rt=new RegExp("^@"+Dt+"\\s*([^;]+);");return function(){var Wt=pt(),qt=vt(Rt);if(qt){var Zt={type:Dt};return Zt[Dt]=qt[1].trim(),Wt(Zt)}}}function Yt(){if(ct[0]=="@")return Lt()||Pt()||Gt()||jt()||zt()||Nt()||Bt()||Ht()||kt()||Ot()||Xt()}function Kt(){var Dt=pt(),Rt=Et();return Rt?(_t(),Dt({type:"rule",selectors:Rt,declarations:Mt()})):xt("selector missing")}return lt(yt())};function rt(ct){return ct?ct.replace(/^\s+|\s+$/g,""):""}function lt(ct,ht){var dt=ct&&typeof ct.type=="string",ut=dt?ct:ht;for(var ft in ct){var pt=ct[ft];Array.isArray(pt)?pt.forEach(function(gt){lt(gt,ut)}):pt&&typeof pt=="object"&&lt(pt,ut)}return dt&&Object.defineProperty(ct,"parent",{configurable:!0,writable:!0,enumerable:!1,value:ht||null}),ct}return parse$1}var parseExports=requireParse();const parse=getDefaultExportFromCjs(parseExports);function embedFonts(it,rt=!0){return ve(this,null,function*(){const lt=collectUsedFonts(it);if(lt.size===0)return;const ct=[];yield Promise.all(Array.from(lt).map(ht=>ve(null,null,function*(){const dt=getActualLoadedFontFace(ht);if(!dt.length)return;const ut=yield parseFontFamily(ht);if(!ut.length)return;const ft=yield Promise.all(ut.map(pt=>ve(null,null,function*(){const gt=normalizeFontFace(pt),mt=gt["unicode-range"].replace(/\s/g,"");if(!dt.find(Ct=>Ct.unicodeRange&&Ct.unicodeRange.replace(/\s/g,"")===mt))return null;const yt=getWoff2BaseURL(gt["font-family"],normalizeFontWeightName(gt["font-weight"]));if(!yt)return null;const bt=gt.src.match(/url\(["']?(.*?\.woff2)[^"']*["']?\)/);if(!(bt!=null&&bt[1]))return null;const wt=join(yt,bt[1]);if(rt){const Ct=yield loadWoff2(wt);gt.src=`url(${Ct}) format('woff2')`}else gt.src=`url(${wt}) format('woff2')`;return gt})));ct.push(...ft.filter(Boolean)||[])}))),ct.length>0&&insertFontStyle(it,ct)})}function collectUsedFonts(it){const rt=new Set,lt=ht=>{ht&&splitFontFamily(ht).forEach(dt=>{const ut=decodeFontFamily(dt);ut&&rt.add(ut)})};lt(it.getAttribute("font-family"));const ct=it.querySelectorAll("foreignObject span");for(const ht of ct)lt(ht.style.fontFamily);return rt}function parseFontFamily(it){return ve(this,null,function*(){const rt=getFontURLs(it),lt=[];return yield Promise.allSettled(rt.map(ct=>ve(null,null,function*(){var dt;const ht=yield fetchWithCache(ct).then(ut=>ut.text()).then(ut=>parse(ut)).catch(()=>(console.error(`Failed to fetch or parse font CSS: ${ct}`),null));(dt=ht==null?void 0:ht.stylesheet)==null||dt.rules.forEach(ut=>{if(ut.type==="font-face"){const ft=parseFontFace(ut);lt.push(ft)}})}))),lt})}function getActualLoadedFontFace(it){const rt=[],lt=splitFontFamily(it).map(ct=>decodeFontFamily(ct));return document.fonts.forEach(ct=>{lt.includes(decodeFontFamily(ct.family))&&ct.status==="loaded"&&rt.push(ct)}),rt}function parseFontFace(it){const rt=it.declarations||[],lt={};return rt.forEach(ct=>{const{property:ht,value:dt}=ct;ht&&dt&&(lt[ht]=dt)}),lt}function normalizeFontFace(it){var rt,lt,ct,ht,dt,ut;return{"font-family":(rt=it["font-family"])!=null?rt:"",src:(lt=it.src)!=null?lt:"","font-style":(ct=it["font-style"])!=null?ct:"normal","font-display":(ht=it["font-display"])!=null?ht:"swap","font-weight":(dt=it["font-weight"])!=null?dt:"400","unicode-range":(ut=it["unicode-range"])!=null?ut:"U+0-FFFF"}}function insertFontStyle(it,rt){const lt=[],ct=new Set;for(const ut of rt){const ft=[ut["font-family"],ut["font-weight"],ut["font-style"],ut["unicode-range"],ut.src].join("|");ct.has(ft)||(ct.add(ft),lt.push(ut))}if(lt.length===0)return;const ht=createElement("style",{type:"text/css"});ht.innerHTML=lt.map(ut=>`
@font-face {
  font-family: ${ut["font-family"]};
  src: ${ut.src};
  font-style: ${ut["font-style"]};
  font-weight: ${ut["font-weight"]};
  font-display: ${ut["font-display"]};
  unicode-range: ${ut["unicode-range"]};
}
`.trim()).join(`
`);const dt=it.querySelector("defs");dt&&dt.parentNode?dt.parentNode.insertBefore(ht,dt.nextSibling):it.insertBefore(ht,it.firstChild)}function loadWoff2(it){return ve(this,null,function*(){const rt=yield fetchWithCache(it);if(!rt.ok)throw new Error(`Failed to load font: ${it}`);const lt=yield rt.blob();return yield new Promise((ht,dt)=>{const ut=new FileReader;ut.onloadend=()=>{ht(ut.result)},ut.onerror=dt,ut.readAsDataURL(lt)})})}function exportToSVGString(lt){return ve(this,arguments,function*(it,rt={}){const ct=yield exportToSVG(it,rt),ht=new XMLSerializer().serializeToString(ct);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(ht)})}function exportToSVG(lt){return ve(this,arguments,function*(it,rt={}){const{embedResources:ct=!0,removeIds:ht=!1}=rt,dt=it.cloneNode(!0),{width:ut,height:ft}=getViewBox(it);return setAttributes(dt,{width:ut,height:ft}),ht?(inlineUseElements(dt),inlineDefsReferences(dt)):yield embedIcons(dt),yield embedFonts(dt,ct),cleanSVG(dt),dt})}function embedIcons(it){return ve(this,null,function*(){const rt=it.querySelectorAll("use"),lt=getDefs(it);rt.forEach(ct=>{const ht=ct.getAttribute("href");if(!ht)return;if(!it.querySelector(ht)){const ut=document.querySelector(ht);ut&&lt.appendChild(ut.cloneNode(!0))}})})}const iconRole="icon-defs";function getDefs(it){const rt=getElementByRole(it,iconRole);if(rt)return rt;const lt=createElement("defs");return setElementRole(lt,iconRole),it.prepend(lt),lt}function inlineUseElements(it){const rt=Array.from(it.querySelectorAll("use"));rt.length&&rt.forEach(lt=>{const ct=getUseHref(lt);if(!ct||!ct.startsWith("#"))return;const ht=resolveUseTarget(it,ct);if(!ht||ht===lt)return;const dt=createInlineElement(lt,ht);dt&&lt.replaceWith(dt)})}function getUseHref(it){var rt;return(rt=it.getAttribute("href"))!=null?rt:it.getAttribute("xlink:href")}function resolveUseTarget(it,rt){const lt=it.querySelector(rt);return lt||document.querySelector(rt)}function createInlineElement(it,rt){const lt=rt.tagName.toLowerCase();return lt==="symbol"?materializeSymbol(it,rt):lt==="svg"?materializeSVG(it,rt):materializeElement(it,rt)}function materializeSymbol(it,rt){const lt=rt.cloneNode(!0),ct=createElement("svg");for(applyAttributes(ct,lt,new Set(["id"])),applyAttributes(ct,it,new Set(["href","xlink:href"]));lt.firstChild;)ct.appendChild(lt.firstChild);return ct}function materializeSVG(it,rt){const lt=rt.cloneNode(!0);return lt.removeAttribute("id"),applyAttributes(lt,it,new Set(["href","xlink:href"])),lt}function materializeElement(it,rt){const lt=rt.cloneNode(!0);lt.removeAttribute("id");const ct=createElement("g");applyAttributes(ct,it,new Set(["href","xlink:href","x","y","width","height","transform"]));const ht=buildUseTransform(it);return ht&&ct.setAttribute("transform",ht),ct.appendChild(lt),ct}function buildUseTransform(it){var dt;const rt=it.getAttribute("x"),lt=it.getAttribute("y"),ct=rt||lt?`translate(${rt!=null?rt:0} ${lt!=null?lt:0})`:"",ht=(dt=it.getAttribute("transform"))!=null?dt:"";return ct&&ht?`${ct} ${ht}`:ct||ht||null}function applyAttributes(it,rt,lt=new Set){Array.from(rt.attributes).forEach(ct=>{if(!lt.has(ct.name)){if(ct.name==="style"){mergeStyleAttribute(it,ct.value);return}if(ct.name==="class"){mergeClassAttribute(it,ct.value);return}it.setAttribute(ct.name,ct.value)}})}function mergeStyleAttribute(it,rt){const lt=it.getAttribute("style");if(!lt){it.setAttribute("style",rt);return}const ct=lt.trim().endsWith(";")?"":";";it.setAttribute("style",`${lt}${ct}${rt}`)}function mergeClassAttribute(it,rt){const lt=it.getAttribute("class");if(!lt){it.setAttribute("class",rt);return}it.setAttribute("class",`${lt} ${rt}`.trim())}const urlRefRegex=/url\(\s*['"]?#([^'")\s]+)['"]?\s*\)/g;function inlineDefsReferences(it){const rt=collectReferencedIds(it);if(rt.size===0){removeDefs(it);return}const lt=createDefsDataUrl(it,rt);lt&&(traverse(it,ct=>{if(ct.tagName.toLowerCase()==="defs")return!1;Array.from(ct.attributes).forEach(dt=>{const ut=dt.value;if(!ut.includes("url("))return;const ft=ut.replace(urlRefRegex,(pt,gt)=>{const mt=encodeURIComponent(gt);return`url("${lt}#${mt}")`});ft!==ut&&ct.setAttribute(dt.name,ft)})}),removeDefs(it))}function collectReferencedIds(it){const rt=new Set;return traverse(it,lt=>{if(lt.tagName.toLowerCase()==="defs")return!1;collectIdsFromAttributes(lt,ct=>rt.add(ct))}),rt}function collectIdsFromAttributes(it,rt){for(const lt of Array.from(it.attributes)){const ct=lt.value;if(ct.includes("url("))for(const ht of ct.matchAll(urlRefRegex))ht[1]&&rt(ht[1]);(lt.name==="href"||lt.name==="xlink:href")&&ct[0]==="#"&&rt(ct.slice(1))}}function createDefsDataUrl(it,rt){if(rt.size===0)return null;const lt=collectDefElements(it,rt);if(lt.size===0)return null;const ct=createElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),ht=createElement("defs");if(lt.forEach(ut=>{ht.appendChild(ut.cloneNode(!0))}),!ht.children.length)return null;ct.appendChild(ht);const dt=new XMLSerializer().serializeToString(ct);return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(dt)}function collectDefElements(it,rt){const lt=new Map,ct=Array.from(rt),ht=new Set(ct),dt=new Set,ut=ft=>{dt.has(ft)||ht.has(ft)||(ct.push(ft),ht.add(ft))};for(;ct.length;){const ft=ct.shift();if(dt.has(ft))continue;dt.add(ft);const pt=`#${escapeCssId(ft)}`,gt=it.querySelector(pt);gt&&(lt.set(ft,gt),traverse(gt,mt=>{collectIdsFromAttributes(mt,ut)}))}return lt}function escapeCssId(it){return globalThis.CSS&&typeof globalThis.CSS.escape=="function"?globalThis.CSS.escape(it):it.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1")}function removeDefs(it){Array.from(it.querySelectorAll("defs")).forEach(lt=>lt.remove())}function cleanSVG(it){removeBtnGroup(it),removeTransientContainer(it),removeUselessAttrs(it),clearDataset(it)}function removeBtnGroup(it){const rt=getElementByRole(it,"btns-group");rt==null||rt.remove();const lt=getElementByRole(it,"btn-icon-defs");lt==null||lt.remove()}function removeTransientContainer(it){const rt=it.querySelector("[data-element-type=transient-container]");rt==null||rt.remove()}function removeUselessAttrs(it){it.querySelectorAll("g").forEach(lt=>{lt.removeAttribute("x"),lt.removeAttribute("y"),lt.removeAttribute("width"),lt.removeAttribute("height")})}function clearDataset(it){traverse(it,rt=>{for(const lt in rt.dataset)delete rt.dataset[lt]})}function exportToPNGString(lt){return ve(this,arguments,function*(it,rt={}){var ft;const{dpr:ct=(ft=globalThis.devicePixelRatio)!=null?ft:2}=rt,ht=yield exportToSVG(it),{width:dt,height:ut}=getViewBox(ht);return new Promise((pt,gt)=>{try{const mt=document.createElement("canvas");mt.width=dt*ct,mt.height=ut*ct;const xt=mt.getContext("2d");if(!xt){gt(new Error("Failed to get canvas context"));return}xt.scale(ct,ct),xt.imageSmoothingEnabled=!0,xt.imageSmoothingQuality="high",ht.setAttribute("width",String(dt)),ht.setAttribute("height",String(ut));const yt=new XMLSerializer().serializeToString(ht),bt="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(yt),wt=new Image;wt.onload=function(){xt.clearRect(0,0,dt,ut),xt.drawImage(wt,0,0,dt,ut);const Ct=mt.toDataURL("image/png");pt(Ct)},wt.onerror=function(Ct){gt(new Error("Image load failed: "+Ct))},wt.src=bt}catch(mt){gt(mt)}})})}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(it){var rt=Object.prototype.hasOwnProperty,lt="~";function ct(){}Object.create&&(ct.prototype=Object.create(null),new ct().__proto__||(lt=!1));function ht(pt,gt,mt){this.fn=pt,this.context=gt,this.once=mt||!1}function dt(pt,gt,mt,xt,yt){if(typeof mt!="function")throw new TypeError("The listener must be a function");var bt=new ht(mt,xt||pt,yt),wt=lt?lt+gt:gt;return pt._events[wt]?pt._events[wt].fn?pt._events[wt]=[pt._events[wt],bt]:pt._events[wt].push(bt):(pt._events[wt]=bt,pt._eventsCount++),pt}function ut(pt,gt){--pt._eventsCount===0?pt._events=new ct:delete pt._events[gt]}function ft(){this._events=new ct,this._eventsCount=0}ft.prototype.eventNames=function(){var gt=[],mt,xt;if(this._eventsCount===0)return gt;for(xt in mt=this._events)rt.call(mt,xt)&&gt.push(lt?xt.slice(1):xt);return Object.getOwnPropertySymbols?gt.concat(Object.getOwnPropertySymbols(mt)):gt},ft.prototype.listeners=function(gt){var mt=lt?lt+gt:gt,xt=this._events[mt];if(!xt)return[];if(xt.fn)return[xt.fn];for(var yt=0,bt=xt.length,wt=new Array(bt);yt<bt;yt++)wt[yt]=xt[yt].fn;return wt},ft.prototype.listenerCount=function(gt){var mt=lt?lt+gt:gt,xt=this._events[mt];return xt?xt.fn?1:xt.length:0},ft.prototype.emit=function(gt,mt,xt,yt,bt,wt){var Ct=lt?lt+gt:gt;if(!this._events[Ct])return!1;var vt=this._events[Ct],St=arguments.length,_t,Tt;if(vt.fn){switch(vt.once&&this.removeListener(gt,vt.fn,void 0,!0),St){case 1:return vt.fn.call(vt.context),!0;case 2:return vt.fn.call(vt.context,mt),!0;case 3:return vt.fn.call(vt.context,mt,xt),!0;case 4:return vt.fn.call(vt.context,mt,xt,yt),!0;case 5:return vt.fn.call(vt.context,mt,xt,yt,bt),!0;case 6:return vt.fn.call(vt.context,mt,xt,yt,bt,wt),!0}for(Tt=1,_t=new Array(St-1);Tt<St;Tt++)_t[Tt-1]=arguments[Tt];vt.fn.apply(vt.context,_t)}else{var Et=vt.length,At;for(Tt=0;Tt<Et;Tt++)switch(vt[Tt].once&&this.removeListener(gt,vt[Tt].fn,void 0,!0),St){case 1:vt[Tt].fn.call(vt[Tt].context);break;case 2:vt[Tt].fn.call(vt[Tt].context,mt);break;case 3:vt[Tt].fn.call(vt[Tt].context,mt,xt);break;case 4:vt[Tt].fn.call(vt[Tt].context,mt,xt,yt);break;default:if(!_t)for(At=1,_t=new Array(St-1);At<St;At++)_t[At-1]=arguments[At];vt[Tt].fn.apply(vt[Tt].context,_t)}}return!0},ft.prototype.on=function(gt,mt,xt){return dt(this,gt,mt,xt,!1)},ft.prototype.once=function(gt,mt,xt){return dt(this,gt,mt,xt,!0)},ft.prototype.removeListener=function(gt,mt,xt,yt){var bt=lt?lt+gt:gt;if(!this._events[bt])return this;if(!mt)return ut(this,bt),this;var wt=this._events[bt];if(wt.fn)wt.fn===mt&&(!yt||wt.once)&&(!xt||wt.context===xt)&&ut(this,bt);else{for(var Ct=0,vt=[],St=wt.length;Ct<St;Ct++)(wt[Ct].fn!==mt||yt&&!wt[Ct].once||xt&&wt[Ct].context!==xt)&&vt.push(wt[Ct]);vt.length?this._events[bt]=vt.length===1?vt[0]:vt:ut(this,bt)}return this},ft.prototype.removeAllListeners=function(gt){var mt;return gt?(mt=lt?lt+gt:gt,this._events[mt]&&ut(this,mt)):(this._events=new ct,this._eventsCount=0),this},ft.prototype.off=ft.prototype.removeListener,ft.prototype.addListener=ft.prototype.on,ft.prefixed=lt,ft.EventEmitter=ft,it.exports=ft}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);class CommandManager{constructor(){this.undoStack=[],this.redoStack=[]}init(rt){Object.assign(this,rt)}execute(rt){return ve(this,null,function*(){yield rt.apply(this.state),this.undoStack.push(rt),this.redoStack=[],this.emitHistoryChange("execute")})}executeBatch(rt){return ve(this,null,function*(){if(rt.length===0)return;const lt=new BatchCommand(rt);yield this.execute(lt)})}undo(){return ve(this,null,function*(){const rt=this.undoStack.pop();rt&&(yield rt.undo(this.state),this.redoStack.push(rt),this.emitHistoryChange("undo"))})}redo(){return ve(this,null,function*(){const rt=this.redoStack.pop();rt&&(yield rt.apply(this.state),this.undoStack.push(rt),this.emitHistoryChange("redo"))})}serialize(){return this.undoStack.map(rt=>rt.serialize())}clear(){this.undoStack=[],this.redoStack=[]}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}getHistorySize(){return this.undoStack.length}destroy(){this.clear()}emitHistoryChange(rt){var lt;(lt=this.emitter)==null||lt.emit("history:change",{type:"history:change",action:rt})}}class InteractionManager{constructor(){this.extensions=new Extension,this.interactions=[],this.active=!1,this.running=null,this.concurrentInteractions=new Set,this.selection=new Set,this.handleClick=rt=>{const lt=this.editor.getDocument(),ct=rt.target;if(!ct){this.deactivate();return}lt.contains(ct)||isInfographicComponent(ct)?this.activate():this.deactivate()}}init(rt){Object.assign(this,rt),document.addEventListener("click",this.handleClick),this.interactions.forEach(lt=>{this.extensions.register(lt.name,lt),lt.init({emitter:this.emitter,editor:this.editor,commander:this.commander,state:this.state,interaction:this}),this.emitter.emit("interaction:registered",lt)})}isActive(){return this.active}select(rt,lt){const ct=this.getSelection(),ht=[],dt=[];if(lt==="replace"){const pt=new Set(rt);ct.forEach(gt=>{pt.has(gt)||dt.push(gt)}),rt.forEach(gt=>{this.selection.has(gt)||ht.push(gt)}),this.selection=pt}else lt==="add"?rt.forEach(pt=>{this.selection.has(pt)||(this.selection.add(pt),ht.push(pt))}):lt==="remove"?rt.forEach(pt=>{this.selection.delete(pt)&&dt.push(pt)}):lt==="toggle"&&rt.forEach(pt=>{this.selection.has(pt)?(this.selection.delete(pt),dt.push(pt)):(this.selection.add(pt),ht.push(pt))});const ut=this.getSelection(),ft={type:"selection:change",previous:ct,next:ut,added:ht,removed:dt,mode:lt};this.emitter.emit("selection:change",ft)}getSelection(){return[...this.selection]}isSelected(rt){return this.selection.has(rt)}clearSelection(){const rt=this.getSelection();this.selection.clear();const lt={type:"selection:change",previous:rt,next:[],added:[],removed:rt,mode:"replace"};this.emitter.emit("selection:change",lt)}activate(){this.active=!0,this.emitter.emit("activated")}deactivate(){this.active=!1,this.running=null,this.clearSelection(),this.emitter.emit("deactivated")}executeExclusiveInteraction(rt,lt){return ve(this,null,function*(){if(!(!this.active||this.running)){this.running=rt;try{this.emitter.emit("interaction:started",rt),yield lt(),this.emitter.emit("interaction:ended",rt)}catch(ct){console.error(`Error occurred during exclusive interaction "${rt.name}":`,ct),this.emitter.emit("interaction:error",rt,ct)}finally{this.running=null}}})}executeConcurrentInteraction(rt,lt){return ve(this,null,function*(){if(this.active){this.concurrentInteractions.add(rt);try{this.emitter.emit("interaction:started",rt),yield lt(),this.emitter.emit("interaction:ended",rt)}catch(ct){console.error(`Error occurred during concurrent interaction "${rt.name}":`,ct),this.emitter.emit("interaction:error",rt,ct)}finally{this.concurrentInteractions.delete(rt)}}})}getOrCreateTransientContainer(){const rt="transient-container",lt=this.editor.getDocument(),ct=getElementByRole(lt,rt);if(ct&&ct.isConnected)return ct;const ht=createElement("g");return setElementRole(ht,rt),lt.appendChild(ht),ht}appendTransientElement(rt){return this.getOrCreateTransientContainer().appendChild(rt),rt}destroy(){this.extensions.forEach(rt=>{rt.destroy(),this.emitter.emit("interaction:destroyed",rt)}),this.extensions.destroy(),this.active=!1,this.running=null,this.clearSelection(),document.removeEventListener("click",this.handleClick),this.getOrCreateTransientContainer().remove()}}class PluginManager{constructor(){this.extensions=new Extension}init(rt,lt=[]){Object.assign(this,rt),lt.forEach(ct=>{this.registerPlugin(ct)})}getPlugin(rt){return this.extensions.get(rt)}getPlugins(){return this.extensions.getAll()}registerPlugin(rt){this.extensions.register(rt.name,rt);const lt={emitter:this.emitter,editor:this.editor,commander:this.commander,plugin:this,state:this.state};rt.init(lt),this.emitter.emit("plugin:registered",rt)}unregisterPlugin(rt){const lt=this.extensions.get(rt);lt&&(lt.destroy(),this.extensions.unregister(rt),this.emitter.emit("plugin:unregistered",lt))}destroy(){this.extensions.getAll().forEach(rt=>{this.unregisterPlugin(rt.name),this.emitter.emit("plugin:destroyed",rt)}),this.extensions.destroy()}}class StateManager{init(rt){Object.assign(this,rt)}addItemDatum(rt,lt){const ct=rt.slice(0,-1),ht=rt[rt.length-1],dt=Array.isArray(lt)?lt:[lt];getChildrenDataByIndexes(this.options.data,ct).splice(ht,0,...dt),this.emitter.emit("options:data:item:add",{indexes:rt,datum:lt}),this.emitter.emit("options:change",{type:"options:change",changes:[{op:"add",path:"data.items",indexes:rt,value:dt}]})}updateItemDatum(rt,lt){const ct=getDatumByIndexes(this.options.data,rt);Object.assign(ct,lt),this.emitter.emit("options:data:item:update",{indexes:rt,datum:lt}),this.emitter.emit("options:change",{type:"options:change",changes:[{op:"update",path:"data.items",indexes:rt,value:lt}]})}removeItemDatum(rt,lt=1){const ct=rt.slice(0,-1),ht=rt[rt.length-1],ut=getChildrenDataByIndexes(this.options.data,ct).splice(ht,lt);this.emitter.emit("options:data:item:remove",{indexes:rt,datum:ut}),this.emitter.emit("options:change",{type:"options:change",changes:[{op:"remove",path:"data.items",indexes:rt,value:ut}]})}updateData(rt,lt){this.options.data[rt]=lt,this.emitter.emit("options:data:update",{key:rt,value:lt}),this.emitter.emit("options:change",{type:"options:change",changes:[{op:"update",path:`data.${rt}`,value:lt}]})}updateElement(rt,lt){this.updateBuiltInElement(rt,lt)}updateOptions(rt){this.options=Ft(Ft({},this.options),rt),this.options.padding!==void 0&&setSVGPadding(this.editor.getDocument(),parsePadding(this.options.padding)),this.emitter.emit("options:change",{type:"options:change",changes:[{op:"update",path:"",value:rt}]})}getOptions(){return this.options}updateBuiltInElement(rt,lt){var ct,ht;const{data:dt}=this.options,{attributes:ut={}}=lt,ft=getElementRole(rt),pt=isIconElement(rt)||ft==="item-label"||ft==="item-desc"||ft==="item-value"||ft==="item-illus",gt=pt?getIndexesFromElement(rt):void 0;if(pt){const mt=getDatumByIndexes(dt,gt),xt=ft.replace("item-","");mt.attributes||(mt.attributes={}),(ct=mt.attributes)[xt]||(ct[xt]={}),Object.assign(mt.attributes[xt],ut)}else(ft==="title"||ft==="desc"||ft==="illus")&&(dt.attributes||(dt.attributes={}),(ht=dt.attributes)[ft]||(ht[ft]={}),Object.assign(dt.attributes[ft],ut));this.emitter.emit("options:element:update",{element:rt,props:lt}),this.emitter.emit("options:change",{type:"options:change",changes:[{op:"update",role:ft,indexes:gt,path:pt?`${buildItemPath(gt)}.attributes.${ft.replace("item-","")}`:`data.attributes.${ft}`,value:lt}]})}destroy(){}}class Editor{constructor(rt,lt,ct){if(this.emitter=rt,this.document=lt,this.options=ct,!lt.isConnected)throw new Error("The provided document is not connected to the DOM.");lt.style.userSelect="none";const ht=new CommandManager,dt=new StateManager,ut=new PluginManager,ft=new InteractionManager;ht.init({state:dt,emitter:rt}),dt.init({emitter:rt,editor:this,commander:ht,options:ct}),ut.init({emitter:rt,editor:this,commander:ht,state:dt},ct.plugins),ft.init({emitter:rt,editor:this,commander:ht,state:dt,interactions:ct.interactions}),this.commander=ht,this.state=dt,this.plugin=ut,this.interaction=ft}getDocument(){return this.document}destroy(){this.document.style.userSelect="",this.interaction.destroy(),this.plugin.destroy(),this.commander.destroy(),this.state.destroy()}}function parseOptions(it){const bt=it,{container:rt="#container",padding:lt=0,template:ct,design:ht,theme:dt,themeConfig:ut}=bt,ft=Pe(bt,["container","padding","template","design","theme","themeConfig"]),pt=typeof rt=="string"?document.querySelector(rt)||document.createElement("div"):rt,gt=ct?getTemplate(ct):void 0,mt=merge({},gt==null?void 0:gt.themeConfig,ut),xt=dt||ut||gt!=null&&gt.themeConfig?parseTheme(dt,mt):void 0,yt={container:pt,padding:parsePadding(lt)};if(gt){const wt=gt,{design:Ct}=wt,vt=Pe(wt,["design"]);Object.assign(yt,vt)}if(Object.assign(yt,ft),ct&&(yt.template=ct),gt!=null&&gt.design||ht){const Ct=parseDesign(Ft(Ft({},gt==null?void 0:gt.design),ht),xt?te(Ft({},it),{themeConfig:xt}):it);isNonNullableParsedDesignsOptions(Ct)&&(yt.design=Ct)}return dt&&(yt.theme=dt),xt&&(yt.themeConfig=xt),yt}function normalizeWithType(it){if(typeof it=="string")return{type:it};if(!("type"in it))throw new Error("Type is required");return it}function parseDesign(it,rt){const{structure:lt,title:ct,item:ht,items:dt}=it||{},ut=parseDesignItem(ht||(dt==null?void 0:dt[0]),rt);return{structure:parseDesignStructure(lt),title:parseDesignTitle(ct,rt),item:ut,items:dt?dt.map(ft=>parseDesignItem(ft,rt)):[ut]}}function parseDesignStructure(it){if(!it)return null;const dt=normalizeWithType(it),{type:rt}=dt,lt=Pe(dt,["type"]),ct=getStructure(rt);if(!ct)return null;const{component:ht}=ct;return te(Ft({},ct),{component:ut=>ht(Ft(Ft({},ut),lt))})}function parseDesignTitle(it,rt){if(!it)return{component:null};const ft=normalizeWithType(it),{type:lt}=ft,ct=Pe(ft,["type"]),{themeConfig:ht}=rt,dt=(ht==null?void 0:ht.colorBg)||"#fff",ut=generateColors(dt,dt);return{component:pt=>Title(Ft(te(Ft({},pt),{themeColors:ut}),ct))}}function parseDesignItem(it,rt){if(!it)return null;const ft=normalizeWithType(it),{type:lt}=ft,ct=Pe(ft,["type"]),ht=getItem(lt);if(!ht)return null;const{component:dt,options:ut}=ht;return te(Ft({},ht),{component:pt=>{var Ct;const{indexes:gt}=pt,{data:mt,themeConfig:xt}=rt,yt=(xt==null?void 0:xt.colorBg)||"#fff",vt=pt,{themeColors:bt=generateColors(getPaletteColor$1(xt==null?void 0:xt.palette,gt,(Ct=mt==null?void 0:mt.items)==null?void 0:Ct.length)||(xt==null?void 0:xt.colorPrimary)||"#FF356A",yt)}=vt,wt=Pe(vt,["themeColors"]);return dt(Ft(Ft({themeColors:bt},wt),ct))},options:ut})}function parseTheme(it,rt={}){var ht;const lt=it?getTheme(it)||{}:{},ct=merge({},lt,rt);return ct.palette=rt.palette||lt.palette,ct.stylize=(ht=rt.stylize)!=null?ht:lt.stylize,ct.colorPrimary||(ct.colorPrimary="#FF356A"),ct.palette||(ct.palette=[ct.colorPrimary]),ct}function generateColors(it,rt="#fff"){return generateThemeColors({colorPrimary:it,isDarkMode:isDarkColor(rt),colorBg:rt})}function isWhitespace(it){return it===" "||it==="	"}function getIndentInfo(it){let rt=0,lt=0;for(;lt<it.length;){const ct=it[lt];if(ct===" "){rt+=1,lt+=1;continue}if(ct==="	"){rt+=2,lt+=1;continue}break}return{indent:rt,content:it.slice(lt)}}function stripComments(it){return it.trimEnd()}function parseKeyValue(it){const rt=it.trim();if(!rt)return null;const lt=rt.match(/^([^:\s=]+)\s*[:=]\s*(.*)$/);if(lt)return{key:lt[1],value:lt[2].trim()};const ct=rt.match(/^([^\s]+)\s+(.*)$/);return ct?{key:ct[1],value:ct[2].trim()}:{key:rt,value:void 0}}function createObjectNode(it,rt){return{kind:"object",line:it,value:rt,entries:{}}}function createArrayNode(it){return{kind:"array",line:it,items:[]}}function parseSyntaxToAst(it){const rt=[],lt=createObjectNode(0),ct=[{indent:-1,node:lt,parent:null,key:null}];return it.split(/\r?\n/).forEach((dt,ut)=>{const ft=ut+1;if(!dt.trim())return;const{indent:pt,content:gt}=getIndentInfo(dt),mt=stripComments(gt);if(!mt.trim())return;for(;ct.length>1&&pt<=ct[ct.length-1].indent;)ct.pop();const xt=ct[ct.length-1];let yt=xt.node;const bt=mt.trim();if(bt.startsWith("-")&&(bt.length===1||isWhitespace(bt[1]))){if(yt.kind!=="array")if(yt.kind==="object"&&Object.keys(yt.entries).length===0&&yt.value===void 0&&xt.parent&&xt.key){const _t=createArrayNode(yt.line);if(xt.parent.kind==="object")xt.parent.entries[xt.key]=_t;else if(xt.parent.kind==="array"){const Tt=xt.parent.items.indexOf(yt);Tt>=0&&(xt.parent.items[Tt]=_t)}xt.node=_t,yt=_t}else{rt.push({path:"",line:ft,code:"bad_list",message:"List item is not under an array container.",raw:bt});return}const vt=bt.slice(1).trim(),St=createObjectNode(ft,vt||void 0);yt.items.push(St),ct.push({indent:pt,node:St,parent:yt});return}const wt=parseKeyValue(bt);if(!wt){rt.push({path:"",line:ft,code:"bad_syntax",message:"Invalid syntax line.",raw:bt});return}if(yt.kind!=="object"){rt.push({path:"",line:ft,code:"bad_syntax",message:"Key-value pair is not under an object container.",raw:bt});return}const Ct=createObjectNode(ft,wt.value);yt.entries[wt.key]=Ct,ct.push({indent:pt,node:Ct,parent:yt,key:wt.key})}),{ast:lt,errors:rt}}function parseInlineKeyValue(it){return parseKeyValue(it)}function createValueNode(it,rt){return{kind:"value",line:rt,value:it}}const HEX_COLOR_PATTERN=/^(#[0-9a-f]{8}|#[0-9a-f]{6}|#[0-9a-f]{4}|#[0-9a-f]{3})/i,FUNCTION_COLOR_PATTERN=/^((?:rgb|rgba|hsl|hsla)\([^)]*\))/i;function parseScalar(it){const rt=it.trim();return rt==="true"?!0:rt==="false"?!1:/^-?\d+(\.\d+)?$/.test(rt)?parseFloat(rt):rt}function readScalar(it){if(it.kind==="value"||it.kind==="object")return it.value}function addError(it,rt,lt,ct,ht,dt){it.push({path:lt,line:rt.line,code:ct,message:ht,raw:dt})}function splitArrayValue(it,rt="any"){let lt=it.trim();if(lt.startsWith("[")&&lt.endsWith("]")&&(lt=lt.slice(1,-1).trim()),!lt)return[];let ct;rt==="comma"?ct=lt.split(","):rt==="space"?ct=lt.split(/\s+/):ct=lt.split(/[,\s]+/);const ht=[];for(const dt of ct){const ut=dt.trim();if(ut){if(ut==="#"||ut==="//")break;ht.push(ut)}}return ht}function stripColorComments(it){let rt=it.trim();const lt=rt.search(/\s+#(?![0-9a-f])/i);lt>=0&&(rt=rt.slice(0,lt).trimEnd());const ct=rt.indexOf("//");return ct>=0&&(rt=rt.slice(0,ct).trimEnd()),rt}function normalizeExplicitColor(it){const rt=stripColorComments(it);if(!rt)return;const lt=rt.match(HEX_COLOR_PATTERN);if(lt&&lt[0].length===rt.length)return rt;const ct=rt.match(FUNCTION_COLOR_PATTERN);if(ct&&ct[1].length===rt.length||tinycolor(rt).isValid())return rt}function mapColor(it,rt,lt,ct={}){const ht=readScalar(it);if(ht===void 0){addError(lt,it,rt,"schema_mismatch","Expected color value.");return}const dt=normalizeExplicitColor(ht);if(!dt){ct.soft||addError(lt,it,rt,"invalid_value","Invalid color value.",ht);return}return dt}function shouldTreatPaletteStringAsArray(it,rt){return rt.length>1||it.startsWith("[")&&it.endsWith("]")?!0:normalizeExplicitColor(it)!==void 0}function mapUnknown(it){if(it.kind==="array")return it.items.map(ct=>mapUnknown(ct));if(it.kind==="value"||!(Object.keys(it.entries).length>0)&&it.value!==void 0)return parseScalar(it.value);const lt={};return it.value!==void 0&&(lt.value=parseScalar(it.value)),Object.entries(it.entries).forEach(([ct,ht])=>{lt[ct]=mapUnknown(ht)}),lt}function mapUnion(it,rt,lt,ct){let ht,dt=null;for(const ut of rt.variants){const ft=[],pt=mapWithSchema(it,ut,lt,ft);(dt===null||ft.length<dt.length)&&(dt=ft,ht=pt)}return dt&&ct.push(...dt),ht}function mapWithSchema(it,rt,lt,ct){switch(rt.kind){case"union":return mapUnion(it,rt,lt,ct);case"string":{const ht=readScalar(it);if(ht===void 0){addError(ct,it,lt,"schema_mismatch","Expected string value.");return}return ht}case"number":{const ht=readScalar(it);if(ht===void 0){addError(ct,it,lt,"schema_mismatch","Expected number value.");return}const ut=ht.trim().match(/^(-?\d+(\.\d+)?)(?:\s*(#|\/\/).*)?$/);if(!ut){addError(ct,it,lt,"invalid_value","Invalid number value.",ht);return}return parseFloat(ut[1])}case"boolean":{const ht=readScalar(it);if(ht===void 0){addError(ct,it,lt,"schema_mismatch","Expected boolean value.");return}if(ht!=="true"&&ht!=="false"){addError(ct,it,lt,"invalid_value","Invalid boolean value.",ht);return}return ht==="true"}case"enum":{const ht=readScalar(it);if(ht===void 0){addError(ct,it,lt,"schema_mismatch","Expected enum value.");return}if(!rt.values.includes(ht)){addError(ct,it,lt,"invalid_value","Invalid enum value.",ht);return}return ht}case"array":{if(it.kind==="array")return it.items.map((ft,pt)=>mapWithSchema(ft,rt.item,`${lt}[${pt}]`,ct)).filter(ft=>ft!==void 0);if(it.kind==="object"&&Object.keys(it.entries).length>0){addError(ct,it,lt,"schema_mismatch","Expected array value.");return}const ht=readScalar(it);if(ht===void 0){addError(ct,it,lt,"schema_mismatch","Expected array value.");return}const dt=ht.trim();return dt.startsWith("[")&&!dt.endsWith("]")?void 0:splitArrayValue(ht,rt.split).map((ft,pt)=>mapWithSchema(createValueNode(ft,it.line),rt.item,`${lt}[${pt}]`,ct)).filter(ft=>ft!==void 0)}case"palette":{if(it.kind==="array"){const pt=mapWithSchema(it,{kind:"array",item:{kind:"color"},split:"any"},lt,ct);return Array.isArray(pt)&&pt.length>0?pt:void 0}if(it.kind==="object"&&Object.keys(it.entries).length>0){addError(ct,it,lt,"schema_mismatch","Expected palette value.");return}const ht=readScalar(it);if(ht===void 0){addError(ct,it,lt,"schema_mismatch","Expected palette value.");return}const dt=ht.trim();if(dt.startsWith("[")&&!dt.endsWith("]"))return;const ut=normalizeExplicitColor(dt);if(ut)return[ut];const ft=splitArrayValue(ht,"any");if(shouldTreatPaletteStringAsArray(dt,ft)){const pt=ft.map((gt,mt)=>mapColor(createValueNode(gt,it.line),`${lt}[${mt}]`,ct)).filter(gt=>gt!==void 0);return pt.length>0?pt:void 0}return ht}case"color":return mapColor(it,lt,ct,{soft:rt.soft});case"object":{if(it.kind==="array"){addError(ct,it,lt,"schema_mismatch","Expected object value.");return}const ht={};if(it.kind==="value"){if(rt.shorthandKey)return ht[rt.shorthandKey]=it.value,ht;const dt=parseInlineKeyValue(it.value);if((dt==null?void 0:dt.value)!==void 0){if(rt.fields[dt.key]){const ut=mapWithSchema(createValueNode(dt.value,it.line),rt.fields[dt.key],`${lt}.${dt.key}`,ct);return ut!==void 0&&(ht[dt.key]=ut),ht}return rt.allowUnknown?(ht[dt.key]=parseScalar(dt.value),ht):(addError(ct,it,`${lt}.${dt.key}`,"unknown_key","Unknown key in object.",dt.key),ht)}if(rt.allowUnknown)return ht.value=parseScalar(it.value),ht;addError(ct,it,lt,"invalid_value","Expected object value.");return}if(it.value!==void 0)if(rt.shorthandKey&&ht[rt.shorthandKey]===void 0)ht[rt.shorthandKey]=it.value;else{const dt=parseInlineKeyValue(it.value);if((dt==null?void 0:dt.value)!==void 0)if(rt.fields[dt.key]){const ut=mapWithSchema(createValueNode(dt.value,it.line),rt.fields[dt.key],`${lt}.${dt.key}`,ct);ut!==void 0&&ht[dt.key]===void 0&&(ht[dt.key]=ut)}else rt.allowUnknown?ht[dt.key]=parseScalar(dt.value):addError(ct,it,`${lt}.${dt.key}`,"unknown_key","Unknown key in object.",dt.key);else rt.allowUnknown&&(ht.value=parseScalar(it.value))}return Object.entries(it.entries).forEach(([dt,ut])=>{const ft=rt.fields[dt];if(!ft){if(rt.allowUnknown){ht[dt]=mapUnknown(ut);return}addError(ct,ut,`${lt}.${dt}`,"unknown_key","Unknown key in object.",dt);return}const pt=mapWithSchema(ut,ft,`${lt}.${dt}`,ct);pt!==void 0&&(ht[dt]=pt)}),ht}default:return}}const string=()=>({kind:"string"}),number=()=>({kind:"number"}),enumOf=it=>({kind:"enum",values:it}),color=(it={})=>({kind:"color",soft:it.soft}),array=(it,rt="any")=>({kind:"array",item:it,split:rt}),object=(it,rt={})=>({kind:"object",fields:it,allowUnknown:rt.allowUnknown,shorthandKey:rt.shorthandKey}),union=(...it)=>({kind:"union",variants:it}),palette=()=>({kind:"palette"}),nullableColorFields={fill:color({soft:!0}),stroke:color({soft:!0})},textStyleSchema=object(nullableColorFields,{allowUnknown:!0}),shapeStyleSchema=object(nullableColorFields,{allowUnknown:!0}),itemDatumSchema=object({},{allowUnknown:!0});itemDatumSchema.fields={label:string(),value:union(number(),string()),desc:string(),icon:string(),children:array(itemDatumSchema)};const ThemeSchema=object({type:string(),colorBg:color(),colorPrimary:color(),palette:palette(),title:textStyleSchema,desc:textStyleSchema,shape:shapeStyleSchema,base:object({global:object({},{allowUnknown:!0}),shape:shapeStyleSchema,text:textStyleSchema}),item:object({icon:object({},{allowUnknown:!0}),label:textStyleSchema,desc:textStyleSchema,value:textStyleSchema,shape:shapeStyleSchema}),stylize:object({type:enumOf(["rough","pattern"]),roughness:number(),bowing:number(),fillWeight:number(),hachureGap:number(),pattern:string(),backgroundColor:color(),foregroundColor:color(),scale:number()},{shorthandKey:"type"}),elements:object({},{allowUnknown:!0})},{shorthandKey:"type"}),designNodeSchema=object({},{allowUnknown:!0,shorthandKey:"type"}),DesignSchema=object({structure:designNodeSchema,item:designNodeSchema,items:array(designNodeSchema),title:designNodeSchema}),DataSchema=object({title:string(),desc:string(),items:array(itemDatumSchema)}),TemplateSchema=object({type:string()},{shorthandKey:"type"}),RootSchema=object({template:TemplateSchema,design:DesignSchema,data:DataSchema,theme:ThemeSchema,width:union(number(),string()),height:union(number(),string())});function resolveTemplate(it,rt){if(!it)return;const lt=mapWithSchema(it,TemplateSchema,"template",rt);if(lt){if(typeof lt=="string")return lt;if(typeof lt=="object"&&typeof lt.type=="string")return lt.type}}function parseSyntax(it){const{ast:rt,errors:lt}=parseSyntaxToAst(it),ct=[],ht={},dt=Ft({},rt.entries),ut=rt.entries.infographic;let ft;ut&&ut.kind==="object"&&(ut.value&&(ft=ut.value),Object.entries(ut.entries).forEach(([St,_t])=>{St in dt||(dt[St]=_t)}));const pt=new Set(["infographic","template","design","data","theme","width","height"]);Object.keys(dt).forEach(St=>{pt.has(St)||lt.push({path:St,line:dt[St].line,code:"unknown_key",message:"Unknown top-level key.",raw:St})});const gt=dt.template,mt=resolveTemplate(gt,lt);mt&&(ht.template=mt),!ht.template&&ft&&(ht.template=ft);const xt=dt.design;if(xt){const St=mapWithSchema(xt,DesignSchema,"design",lt);St&&(ht.design=St)}const yt=dt.data;if(yt){const St=mapWithSchema(yt,DataSchema,"data",lt);St&&(ht.data=St)}const bt=dt.theme;if(bt){const St=mapWithSchema(bt,ThemeSchema,"theme",lt);if(St&&typeof St=="object"){const vt=St,{type:_t}=vt,Tt=Pe(vt,["type"]);typeof _t=="string"&&_t&&(ht.theme=_t),Object.keys(Tt).length>0&&(ht.themeConfig=Tt)}}const wt=dt.width;if(wt){const St=mapWithSchema(wt,RootSchema.fields.width,"width",lt);St!==void 0&&(ht.width=St)}const Ct=dt.height;if(Ct){const St=mapWithSchema(Ct,RootSchema.fields.height,"height",lt);St!==void 0&&(ht.height=St)}return{options:ht,errors:lt,warnings:ct,ast:rt}}const createDefaultPlugins=()=>[new EditBar,new ResizeElement],createDefaultInteractions=()=>[new DblClickEditText,new BrushSelect,new ClickSelect,new DragElement,new HotkeyHistory,new ZoomWheel,new SelectHighlight],DEFAULT_OPTIONS={padding:20,theme:"light",themeConfig:{palette:"antv"},get plugins(){return createDefaultPlugins()},get interactions(){return createDefaultInteractions()}};function mergeOptions(it,rt){const lt=Ft(Ft({},it),rt);return(it.design||rt.design)&&(lt.design=Ft(Ft({},it.design),rt.design)),(it.themeConfig||rt.themeConfig)&&(lt.themeConfig=Ft(Ft({},it.themeConfig),rt.themeConfig)),(it.svg||rt.svg)&&(lt.svg=Ft(Ft({},it.svg),rt.svg)),lt}function cloneOptions(it){const rt=Ft({},it);return rt.data&&(rt.data=cloneDeep(rt.data)),rt.elements&&(rt.elements=cloneDeep(rt.elements)),rt}function isCompleteParsedInfographicOptions(it){const{design:rt,data:lt}=it;return!(!rt||!isNonNullableParsedDesignsOptions(rt)||!lt||!Array.isArray(lt.items)||lt.items.length<1)}class Infographic{constructor(rt){this.rendered=!1,this.emitter=new EventEmitter,this.node=null,this.initialOptions={},this.setOptions(rt,"replace",!0)}getOptions(){return this.options}setOptions(rt,lt="replace",ct=!1){const{options:ht,errors:dt,warnings:ut}=parseSyntaxOptions(rt);ct&&(this.initialOptions=cloneOptions(ht));const ft=mergeOptions(lt==="replace"?cloneOptions(this.initialOptions||{}):this.options||cloneOptions(this.initialOptions||{}),ht);this.options=ft,this.parsedOptions=parseOptions(mergeOptions(DEFAULT_OPTIONS,this.options)),ut.length&&this.emitter.emit("warning",ut),dt.length&&this.emitter.emit("error",dt)}render(rt){rt?this.setOptions(rt,"replace"):!this.options&&this.initialOptions&&this.setOptions(this.initialOptions,"replace"),this.performRender()}update(rt){this.setOptions(rt,"merge"),this.performRender()}performRender(){var ut;const rt=this.parsedOptions;if(!isCompleteParsedInfographicOptions(rt)){this.emitter.emit("error",new Error("Incomplete options"));return}const{container:lt}=this.parsedOptions,ct=this.compose(rt),ht=new Renderer(rt,ct);this.node=ht.render(),lt==null||lt.replaceChildren(this.node),(ut=this.editor)==null||ut.destroy(),this.editor=void 0,this.options.editable&&(this.editor=new Editor(this.emitter,this.node,rt)),this.rendered=!0,this.emitter.emit("rendered",{node:this.node,options:this.options});const dt=this.node;return dt&&waitForSvgLoads(dt).then(()=>{this.node===dt&&this.emitter.emit("loaded",{node:dt,options:this.options})}),!0}compose(rt){const{design:lt,data:ct}=rt,{title:ht,item:dt,items:ut,structure:ft}=lt,{component:pt,props:gt}=ft,mt=ht.component,xt=dt.component,yt=ut.map(Ct=>Ct.component),bt=renderSVG(jsx(pt,Ft({data:ct,Title:mt,Item:xt,Items:yt,options:rt},gt))),wt=parseSVG(bt);if(!wt)throw new Error("Failed to parse SVG template");return wt}getTypes(){const rt=this.parsedOptions;if(!isCompleteParsedInfographicOptions(rt)){this.emitter.emit("error",new Error("Incomplete options"));return}const lt=rt.design,ct=lt.structure.composites||[],ht=lt.items.map(dt=>dt.composites||[]);return getTypes({structure:ct,items:ht})}toDataURL(rt){return ve(this,null,function*(){if(!this.node)throw new Error("Infographic is not rendered yet.");return(rt==null?void 0:rt.type)==="svg"?yield exportToSVGString(this.node,rt):yield exportToPNGString(this.node,rt)})}on(rt,lt){this.emitter.on(rt,lt)}off(rt,lt){this.emitter.off(rt,lt)}destroy(){var rt,lt;(rt=this.editor)==null||rt.destroy(),(lt=this.node)==null||lt.remove(),this.node=null,this.rendered=!1,this.emitter.emit("destroyed"),this.emitter.removeAllListeners()}}function parseSyntaxOptions(it){if(typeof it=="string"){const{options:rt,errors:lt,warnings:ct}=parseSyntax(it);return{options:rt,errors:lt,warnings:ct}}return{options:cloneOptions(it),errors:[],warnings:[]}}const _hoisted_1$1={class:"markdown-mermaid mt-3"},_hoisted_2$1={class:"toolbar-container"},_hoisted_3$1={class:"flex h-10 items-center justify-end bg-[#ebecef] px-3"},_sfc_main$1=defineComponent({__name:"infographic",props:{code:{},height:{},width:{}},setup(it){const rt=it,lt=ref(null),ct=ref(!0);let ht=null;function dt(){if(lt.value)try{ht||(ht=new Infographic({container:lt.value,width:rt.width||"100%",height:rt.height||"100%"})),ht&&ht.render(rt.code),rt.code.includes(`data
`)&&ct.value&&(ct.value=!1)}catch(ft){console.error("图表配置解析失败:",ft)}}function ut(ft){return ve(this,null,function*(){if(ht&&ht.rendered){const pt=yield ht.toDataURL({type:ft}),gt=document.createElement("a");gt.href=pt,gt.download=`aiflowy-infographic-${Date.now()}.${ft}`,document.body.append(gt),gt.click(),gt.remove()}})}return onMounted(()=>{dt()}),watch(()=>rt.code,()=>{dt()}),onBeforeUnmount(()=>{ht&&ht.destroy()}),(ft,pt)=>{const gt=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createVNode(unref(ElButton),{link:"",icon:unref(download_default),onClick:pt[0]||(pt[0]=mt=>ut("png"))},{default:withCtx(()=>[...pt[2]||(pt[2]=[createTextVNode(" PNG ",-1)])]),_:1},8,["icon"]),createVNode(unref(ElButton),{link:"",icon:unref(download_default),onClick:pt[1]||(pt[1]=mt=>ut("svg"))},{default:withCtx(()=>[...pt[3]||(pt[3]=[createTextVNode(" SVG ",-1)])]),_:1},8,["icon"])])]),createBaseVNode("div",{ref_key:"containerRef",ref:lt,class:"mermaid-content"},null,512)])),[[gt,ct.value]])}}}),_hoisted_1={class:"mx-auto h-full max-w-[780px]"},_hoisted_2={key:0,class:"message-container w-full flex-1 overflow-hidden"},_hoisted_3={class:"flex flex-col"},_hoisted_4={class:"chat-bubble-item-time-style"},_hoisted_5=["onClick"],_hoisted_6={key:1,class:"flex flex-col items-center gap-3.5"},_hoisted_7={class:"text-base font-medium text-black/85"},_hoisted_8={class:"text-sm text-[#757575]"},_hoisted_9={key:2,class:"questions-preset-container"},_sfc_main=defineComponent({__name:"chat",props:{bot:{},conversationId:{},showChatConversations:{type:Boolean}},setup(it,{expose:rt}){const lt=it,ct=useBotStore(),ht=useRoute(),dt=ref(ht.params.id||""),ut=useRouter(),ft=ref([]),pt=ref(),gt=ref(""),mt=ref(!1),xt=()=>ve(null,null,function*(){return(yield api.get("/api/v1/bot/generateConversationId")).data}),yt=ref(""),bt=ref([]);rt({clear(){ft.value=[],vt.value=[]}});const wt=()=>{api.get("/api/v1/bot/detail",{params:{id:dt.value}}).then(Lt=>{var jt,Ot;(jt=Lt.data.options)!=null&&jt.presetQuestions&&(bt.value=(Ot=Lt.data.options)==null?void 0:Ot.presetQuestions.filter(Pt=>Pt.description&&Pt.description.trim()!=="").map(Pt=>({key:Pt.key,description:Pt.description})))})};onMounted(()=>ve(null,null,function*(){yt.value=lt.conversationId&&lt.conversationId.length>0?lt.conversationId:yield xt(),wt()})),watchEffect(()=>ve(null,null,function*(){if(lt.bot&&lt.conversationId){const[,Lt]=yield tryit(getMessageList)({conversationId:lt.conversationId,botId:lt.bot.id,tempUserId:uuid$1()+lt.bot.id});(Lt==null?void 0:Lt.errorCode)===0&&(ft.value=Lt.data.map(jt=>te(Ft({},jt),{content:jt.role==="assistant"?jt.content.replace(/^Final Answer:\s*/i,""):jt.content,placement:jt.role==="assistant"?"start":"end"})))}else ft.value=[]}));const Ct=ref(""),vt=ref([]),St=()=>{sseClient.abort(),mt.value=!1;const Lt=ft.value[ft.value.length-1];Lt&&(ft.value[ft.value.length-1]=te(Ft({},Lt),{content:Lt.content,loading:!1,typing:!1}))},_t=Lt=>ve(null,null,function*(){var kt;const jt=Lt||gt.value.trim();if(!jt)return;mt.value=!0,Ct.value=jt,vt.value.push({role:"user",content:jt});const Ot=[...vt.value],Pt={botId:dt.value,prompt:jt,conversationId:yt.value,messages:Ot};vt.value.pop();const Gt=Et(Lt);ft.value.push(...Gt),(kt=pt.value)==null||kt.clear(),sseClient.post("/api/v1/bot/chat",Pt,{onMessage(Ht){var Yt,Kt,Dt,Rt,Wt;const Xt=Ht.event,zt=ft.value[ft.value.length-1];if(Xt==="done"){mt.value=!1;return}if(!Ht.data)return;const Nt=JSON.parse(Ht.data);if((Nt==null?void 0:Nt.domain)==="SYSTEM"&&((Yt=Nt.payload)==null?void 0:Yt.code)==="SYSTEM_ERROR"){const qt=Nt.payload.message,Zt=ft.value[ft.value.length-1];if(!Zt)return;ft.value[ft.value.length-1]=te(Ft({},Zt),{content:qt,loading:!1,typing:!0});return}const Bt=(Kt=Nt.payload)==null?void 0:Kt.delta,Vt=(Dt=Nt.payload)==null?void 0:Dt.role;zt&&Bt&&(Nt.type==="THINKING"?ft.value[ft.value.length-1]=te(Ft({},zt),{thinkingStatus:"thinking",thinlCollapse:!0,reasoning_content:((Rt=zt.reasoning_content)!=null?Rt:"")+Bt}):Nt.type==="MESSAGE"&&(ft.value[ft.value.length-1]=te(Ft({},zt),{thinkingStatus:"end",content:(zt.content+Bt).replaceAll("```echartsoption","```echarts\noption"),loading:!1,typing:!0}))),Xt==="needSaveMessage"&&vt.value.push({role:Vt,content:(Wt=Nt.payload)==null?void 0:Wt.content})},onFinished(){mt.value=!1;const Ht=ft.value.length-1;Ht&&(ft.value[Ht]=te(Ft({},ft.value[Ht]),{thinlCollapse:!1}))},onError(Ht){console.error(Ht),mt.value=!1}})}),Tt=(Lt,jt)=>{jt===ft.value.length-1&&lt.conversationId&&lt.conversationId.length<=0&&mt.value===!1&&setTimeout(()=>{ut.replace({params:{conversationId:yt.value}})},100)},Et=Lt=>{const jt={role:"user",id:Date.now().toString(),fileList:[],content:Lt||gt.value,created:Date.now(),updateAt:Date.now(),placement:"end"},Ot={role:"assistant",id:Date.now().toString(),content:"",loading:!0,created:Date.now(),updateAt:Date.now(),placement:"start"};return[jt,Ot]},At=Lt=>{navigator.clipboard.writeText(Lt).then(()=>ElMessage.success($t("message.copySuccess"))).catch(()=>ElMessage.error($t("message.copyFail")))},Mt=()=>{_t(Ct.value)},It={echarts:Lt=>h$2(_sfc_main$2,{code:Lt.raw.content}),infographic:Lt=>h$2(_sfc_main$1,{code:Lt.raw.content})};return(Lt,jt)=>{var Ht,Xt,zt;const Ot=resolveComponent("ElThinking"),Pt=resolveComponent("XMarkdown"),Gt=resolveComponent("el-bubble-list"),kt=resolveComponent("el-sender");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",{class:normalizeClass(unref(cn)("flex h-full w-full flex-col gap-3",!yt.value&&"items-center justify-center gap-8"))},[yt.value||ft.value.length>0?(openBlock(),createElementBlock("div",_hoisted_2,[createVNode(Gt,{class:"!h-full",list:ft.value,"max-height":"none",onComplete:Tt},{header:withCtx(({item:Nt})=>[createBaseVNode("div",_hoisted_3,[createBaseVNode("span",_hoisted_4,toDisplayString(new Date(Nt.created).toLocaleString()),1),Nt.reasoning_content?(openBlock(),createBlock(Ot,{key:0,modelValue:Nt.thinlCollapse,"onUpdate:modelValue":Bt=>Nt.thinlCollapse=Bt,content:Nt.reasoning_content,status:Nt.thinkingStatus},null,8,["modelValue","onUpdate:modelValue","content","status"])):createCommentVNode("",!0)])]),avatar:withCtx(({item:Nt})=>{var Bt;return[Nt.role==="assistant"?(openBlock(),createBlock(_sfc_main$6,{key:0,src:(Bt=it.bot)==null?void 0:Bt.icon,size:40},null,8,["src"])):createCommentVNode("",!0)]}),content:withCtx(({item:Nt})=>[createVNode(Pt,{markdown:Nt.content,"code-x-render":It},null,8,["markdown"])]),footer:withCtx(({item:Nt})=>[createVNode(unref(ElSpace),{size:10},{default:withCtx(()=>[createVNode(unref(ElSpace),null,{default:withCtx(()=>[createBaseVNode("span",{onClick:jt[0]||(jt[0]=Bt=>Mt()),style:{cursor:"pointer"}},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(refresh_right_default))]),_:1})]),createBaseVNode("span",{onClick:Bt=>At(Nt.content),style:{cursor:"pointer"}},[createVNode(unref(ElIcon),null,{default:withCtx(()=>[createVNode(unref(copy_document_default))]),_:1})],8,_hoisted_5)]),_:2},1024)]),_:2},1024)]),_:1},8,["list"])])):(openBlock(),createElementBlock("div",_hoisted_6,[createVNode(_sfc_main$6,{src:(Ht=it.bot)==null?void 0:Ht.icon,size:88},null,8,["src"]),createBaseVNode("h1",_hoisted_7,toDisplayString((Xt=it.bot)==null?void 0:Xt.title),1),createBaseVNode("span",_hoisted_8,toDisplayString((zt=it.bot)==null?void 0:zt.description),1)])),unref(ct).presetQuestions.length>0?(openBlock(),createElementBlock("div",_hoisted_9,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(getPerQuestions)(unref(ct).presetQuestions),Nt=>(openBlock(),createBlock(unref(ElButton),{key:Nt.key,onClick:Bt=>_t(Nt.description)},{default:withCtx(()=>[createTextVNode(toDisplayString(Nt.description),1)]),_:2},1032,["onClick"]))),128))])):createCommentVNode("",!0),createVNode(kt,{ref_key:"senderRef",ref:pt,class:"w-full",modelValue:gt.value,"onUpdate:modelValue":jt[2]||(jt[2]=Nt=>gt.value=Nt),placeholder:unref($t)("message.pleaseInputContent"),variant:"updown","auto-size":{minRows:3,maxRows:6},"allow-speech":"",onSubmit:_t},{"action-list":withCtx(()=>[createVNode(unref(ElSpace),null,{default:withCtx(()=>[mt.value?(openBlock(),createBlock(unref(ElButton),{key:0,circle:"",onClick:St},{default:withCtx(()=>[createVNode(unref(ElIcon),{size:"30",color:"#409eff"},{default:withCtx(()=>[createVNode(SendingIcon)]),_:1})]),_:1})):(openBlock(),createElementBlock(Fragment$1,{key:1},[gt.value?(openBlock(),createBlock(unref(ElButton),{key:1,circle:"",onClick:jt[1]||(jt[1]=Nt=>_t(""))},{default:withCtx(()=>[createVNode(SendEnableIcon)]),_:1})):(openBlock(),createBlock(unref(ElButton),{key:0,circle:"",disabled:""},{default:withCtx(()=>[createVNode(SendIcon)]),_:1}))],64))]),_:1})]),_:1},8,["modelValue","placeholder"])],2)])}}}),Chat=_export_sfc(_sfc_main,[["__scopeId","data-v-7e3a0c1d"]]);export{Chat as C,_sfc_main$6 as _,uuid$1 as u};
