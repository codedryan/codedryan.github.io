var _=(E,c,u)=>new Promise((n,r)=>{var v=e=>{try{t(u.next(e))}catch(w){r(w)}},d=e=>{try{t(u.throw(e))}catch(w){r(w)}},t=e=>e.done?n(e.value):Promise.resolve(e.value).then(v,d);t((u=u.apply(E,c)).next())});import{as as j,M as I,$ as g,aI as D,aL as V}from"./bootstrap-Bf65uz2I.js";import{E as F}from"./el-avatar-BVPcm0Px.js";import"./css-gf8D6QlL.js";import{E as b}from"./el-card-DGd_zL6P.js";import{E as $}from"./el-col-D5ifHzRC.js";import{E as L}from"./el-row-u3yI-Elm.js";import{w as q}from"./workflowIcon-DFe_EiNo.js";import{_ as A}from"./ExecResult.vue_vue_type_script_setup_true_lang-BdUf8Ivc.js";import{_ as J}from"./WorkflowForm.vue_vue_type_script_setup_true_lang-DcGKqheD.js";import M from"./WorkflowSteps-Cs8SjhWj.js";import{ElButton as z}from"./index-oBOAcXl-.js";import{k as H,o as O,r as l,H as T,I as Z,m as G,n as h,q as i,J as s,E as p,L as K,y as f,u as o,B as x,p as y,Z as B}from"../jse/index-index-D3Xb8oT_.js";import"./el-empty-CDAlv280.js";import"./index-Bxb6QITi.js";import"./ShowJson-BAGbKM0P.js";import"./vue3-json-viewer-B3eBxIfC.js";import"./ExecResultItem.vue_vue_type_script_setup_true_lang-BYxF_Hxf.js";import"./el-image-viewer-DlaFkWIK.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-C33Sf0pH.js";import"./scroll-C2492Iw_.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./WorkflowFormItem.vue_vue_type_script_setup_true_lang-Cr5clR5Y.js";import"./el-alert-DFDoDStD.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./css-_QzOlLq8.js";import"./css-XAUFhYlW.js";import"./css-C9o_OfXA.js";import"./css-BBEQ4fog.js";import"./css-Co2xKw2s.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import"./ChooseResource.vue_vue_type_script_setup_true_lang-DqbjF1_U.js";import"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";import"./vnode-DysYOGZN.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Dg3fRnQE.js";import"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./index-pv0R11Cf.js";import"./index-BjDsryRX.js";import"./ResourceCardList.vue_vue_type_script_setup_true_lang-DuPVj3a4.js";/* empty css                *//* empty css                   */import"./Tag-BLqYdY0p.js";import"./dict-CsbZy8Qf.js";import"./resource-Vt4YTl0B.js";import"./PreviewModal.vue_vue_type_script_setup_true_lang-DbqXkAAw.js";import"./index-p7kg-xKH.js";import"./omit-CbyqVLxv.js";import"./_baseSlice-DZe_dRSe.js";import"./index-C5wmh2tf.js";import"./index-Bpv3aWiu.js";import"./el-collapse-item-DRoc9NR8.js";import"./index-DF0dk4ce.js";import"./ConfirmItem-tawJTZXx.js";import"./confirm-other-CecEfHYi.js";import"./ConfirmItemMulti-wNCtRvrG.js";const Q={class:"bg-background-deep flex h-full max-h-[calc(100vh-90px)] w-full flex-col gap-6 overflow-hidden p-6"},U={class:"flex h-[150px] shrink-0 items-center gap-6 rounded-lg border border-[var(--el-border-color)] bg-[var(--el-bg-color)] pl-11"},X={class:"flex flex-col gap-5"},Y={class:"text-2xl font-medium"},oo={class:"text-base text-[#75808d]"},to={class:"grid h-full grid-rows-2 gap-2.5"},eo={class:"mb-2.5 font-semibold"},ro={class:"mb-2.5 font-semibold"},io={class:"mb-2.5 mt-2.5 font-semibold"},Vt=H({__name:"RunPage",setup(E){O(()=>_(null,null,function*(){c.value=!0,yield Promise.all([w(n.value),N()]),c.value=!1}));const c=l(!1),u=j(),n=l(u.query.id),r=l({}),v=l(null),d=l(!1),t=l(null),e=l();function w(a){return _(this,null,function*(){I.get(`/api/v1/workflow/detail?id=${a}`).then(m=>{r.value=m.data,t.value=r.value.content?JSON.parse(r.value.content):{}})})}function N(){return _(this,null,function*(){I.get(`/api/v1/workflow/getRunningParameters?id=${n.value}`).then(a=>{v.value=a.data})})}function R(){d.value=!d.value}function P(a){var m;(m=e.value)==null||m.resume(a)}const k=l(null);function S(a){k.value=a}return(a,m)=>{var C;const W=T("loading");return Z((h(),G("div",Q,[i("div",null,[s(o(z),{icon:o(V),onClick:m[0]||(m[0]=ao=>o(D).back())},{default:p(()=>[K(f(o(g)("button.back")),1)]),_:1},8,["icon"])]),i("div",U,[s(o(F),{class:"shrink-0",src:(C=r.value.icon)!=null?C:o(q),size:72},null,8,["src"]),i("div",X,[i("span",Y,f(r.value.title),1),i("span",oo,f(r.value.description),1)])]),s(o(L),{class:"h-full overflow-hidden",gutter:10},{default:p(()=>[s(o($),{span:10,class:"h-full overflow-hidden"},{default:p(()=>[i("div",to,[s(o(b),{shadow:"never",style:{height:"100%",overflow:"auto"}},{default:p(()=>[i("div",eo,f(o(g)("aiWorkflow.params"))+"： ",1),v.value&&t.value?(h(),x(J,{key:0,ref_key:"workflowForm",ref:e,"workflow-id":n.value,"workflow-params":v.value,"on-submit":R,"on-async-execute":S,"tiny-flow-data":t.value},null,8,["workflow-id","workflow-params","tiny-flow-data"])):y("",!0)]),_:1}),s(o(b),{shadow:"never",style:{height:"100%",overflow:"auto"}},{default:p(()=>[i("div",ro,f(o(g)("aiWorkflow.steps"))+"： ",1),t.value?(h(),x(M,{key:0,"workflow-id":n.value,"node-json":o(B)(t.value),"init-signal":d.value,"polling-data":k.value,onResume:P},null,8,["workflow-id","node-json","init-signal","polling-data"])):y("",!0)]),_:1})])]),_:1}),s(o($),{span:14},{default:p(()=>[s(o(b),{shadow:"never",style:{height:"100%",overflow:"auto"}},{default:p(()=>[i("div",io,f(o(g)("aiWorkflow.result"))+"： ",1),t.value?(h(),x(A,{key:0,"workflow-id":n.value,"node-json":o(B)(t.value),"init-signal":d.value,"polling-data":k.value},null,8,["workflow-id","node-json","init-signal","polling-data"])):y("",!0)]),_:1})]),_:1})]),_:1})])),[[W,c.value]])}}});export{Vt as default};
