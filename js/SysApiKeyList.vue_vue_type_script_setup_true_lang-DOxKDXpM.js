var N=Object.defineProperty;var h=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var x=(n,r,i)=>r in n?N(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i,B=(n,r)=>{for(var i in r||(r={}))P.call(r,i)&&x(n,i,r[i]);if(h)for(var i of h(r))Q.call(r,i)&&x(n,i,r[i]);return n};import{$ as a,Z as H,a3 as O,Y as q,M as w,R as E}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as z}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";import{E as F,a as I,b as J}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     */import{E as C}from"./el-message-box-B8o3mhYx.js";import"./css-C9o_OfXA.js";import{E as U,a as u}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{H as Y}from"./HeaderSearch-Dj9rqjlr.js";import{_ as Z}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{_ as j}from"./SysApiKeyResourcePermissionList.vue_vue_type_script_setup_true_lang-uQ6RPzeB.js";import G from"./SysApiKeyModal-30INcmRg.js";import{E as k}from"./index-DGdiZ7pE.js";import{ElButton as b}from"./index-oBOAcXl-.js";import{k as W,r as y,S as X,m as ee,n as g,J as t,q as D,E as s,u as e,L as d,y as p,B as A}from"../jse/index-index-D3Xb8oT_.js";const ae={class:"flex h-full flex-col gap-6 p-6"},te={class:"bg-background border-border flex-1 rounded-lg border p-5"},se={class:"flex items-center gap-3"},we=W({__name:"SysApiKeyList",setup(n){const r=y(),i=y(),K=y(),T=[{key:"addApiKey",text:a("sysApiKey.addApiKey"),icon:X(H),type:"primary",data:{action:"create"},permission:""}],R=o=>{i.value.setQuery({apiKey:o,isQueryOr:!0})},S=o=>{o.key==="addApiKey"?L():o.key==="addPermission"&&M()};function v(o){o==null||o.resetFields(),i.value.setQuery({})}function V(o){K.value.openDialog(B({},o))}function M(o){_.value=!0}const _=y(!1);function $(o){C.confirm(a("message.deleteAlert"),a("message.noticeTitle"),{confirmButtonText:a("message.ok"),cancelButtonText:a("message.cancel"),type:"warning",beforeClose:(m,c,l)=>{m==="confirm"?(c.confirmButtonLoading=!0,w.post("/api/v1/sysApiKey/remove",{id:o.id}).then(f=>{c.confirmButtonLoading=!1,f.errorCode===0&&(E.success(f.message),v(r.value),l())}).catch(()=>{c.confirmButtonLoading=!1})):l()}}).catch(()=>{})}function L(){C.confirm(a("sysApiKey.addApiKeyNotice"),a("message.noticeTitle"),{confirmButtonText:a("message.ok"),cancelButtonText:a("message.cancel"),type:"warning"}).then(()=>{w.post("/api/v1/sysApiKey/key/save",{}).then(o=>{o.errorCode===0&&(E.success(a("message.saveOkMessage")),i.value.setQuery({}))})})}return(o,m)=>(g(),ee("div",ae,[t(G,{ref_key:"saveDialog",ref:K,onReload:v},null,512),t(Y,{buttons:T,onSearch:R,onButtonClick:S}),D("div",te,[t(Z,{ref_key:"pageDataRef",ref:i,"page-url":"/api/v1/sysApiKey/page","page-size":10},{default:s(({pageList:c})=>[t(e(U),{data:c,border:""},{default:s(()=>[t(e(u),{prop:"apiKey",label:e(a)("sysApiKey.apiKey"),width:"280"},{default:s(({row:l})=>[d(p(l.apiKey),1)]),_:1},8,["label"]),t(e(u),{prop:"created",label:e(a)("sysApiKey.created")},{default:s(({row:l})=>[d(p(l.created),1)]),_:1},8,["label"]),t(e(u),{prop:"status",label:e(a)("sysApiKey.status")},{default:s(({row:l})=>[l.status===1?(g(),A(e(k),{key:0,type:"primary"},{default:s(()=>[d(p(e(a)("sysApiKey.actions.enable")),1)]),_:1})):l.status===0?(g(),A(e(k),{key:1,type:"danger"},{default:s(()=>[d(p(e(a)("sysApiKey.actions.disable")),1)]),_:1})):(g(),A(e(k),{key:2,type:"warning"},{default:s(()=>[d(p(e(a)("sysApiKey.actions.failure")),1)]),_:1}))]),_:1},8,["label"]),t(e(u),{prop:"expiredAt",label:e(a)("sysApiKey.expiredAt")},{default:s(({row:l})=>[d(p(l.expiredAt),1)]),_:1},8,["label"]),t(e(u),{label:e(a)("common.handle"),width:"90",align:"right"},{default:s(({row:l})=>[D("div",se,[t(e(b),{link:"",type:"primary",onClick:f=>V(l)},{default:s(()=>[d(p(e(a)("button.edit")),1)]),_:1},8,["onClick"]),t(e(F),null,{dropdown:s(()=>[t(e(I),null,{default:s(()=>[t(e(J),{onClick:f=>$(l)},{default:s(()=>[t(e(b),{link:"",icon:e(q),type:"danger"},{default:s(()=>[d(p(e(a)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])]),_:2},1024)]),default:s(()=>[t(e(b),{link:"",icon:e(O)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)]),t(e(z),{modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=c=>_.value=c),title:e(a)("sysApiKeyResourcePermission.addPermission"),draggable:"","close-on-click-modal":!1},{default:s(()=>[t(j)]),_:1},8,["modelValue","title"])]))}});export{we as _};
