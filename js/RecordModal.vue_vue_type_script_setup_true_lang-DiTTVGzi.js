import{$ as m,M as C,R as N}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import"./css-Dv7ceDvX.js";import"./css-C9o_OfXA.js";/* empty css                     *//* empty css                  */import{E as B}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as h,a as Y}from"./el-form-item-8FQp7Cs4.js";import"./css-B4xXAc0m.js";import{D as $}from"./DictSelect-DdOvS-6R.js";import{ElInput as L}from"./index-BjDsryRX.js";import{ElInputNumber as b}from"./index-9UPoHQm1.js";import{ElDatePicker as q}from"./index-Dwe-AimY.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as w,o as H,r as d,B as r,n as u,E as s,J as V,u as o,m as R,F as S,N as A,p as i,L as E,y as U}from"../jse/index-index-D3Xb8oT_.js";const re=w({__name:"RecordModal",props:{formItems:{},tableId:{}},emits:["reload"],setup(_,{expose:I,emit:D}){const c=_,F=D;H(()=>{}),I({openDialog:x});const v=d(),p=d(!1),y=d(!0),l=d({}),n=d(!1),M=d({});function x(t){t.id&&(y.value=!1),l.value=t,p.value=!0}function T(){var t;(t=v.value)==null||t.validate(f=>{if(f){const e={};for(const a of c.formItems)e[a.key]=l.value[a.key];e.tableId=c.tableId,e.id=l.value.id,n.value=!0,C.postForm("/api/v1/datacenterTable/saveValue",e).then(a=>{n.value=!1,a.errorCode===0&&(N.success(a.message),F("reload"),k())}).catch(()=>{n.value=!1})}})}function k(){var t;(t=v.value)==null||t.resetFields(),y.value=!0,l.value={},p.value=!1}return(t,f)=>(u(),r(o(B),{modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=e=>p.value=e),draggable:"",title:y.value?o(m)("button.add"):o(m)("button.edit"),"before-close":k,"close-on-click-modal":!1,width:"800px"},{footer:s(()=>[V(o(g),{onClick:k},{default:s(()=>[E(U(o(m)("button.cancel")),1)]),_:1}),V(o(g),{type:"primary",onClick:T,loading:n.value,disabled:n.value},{default:s(()=>[E(U(o(m)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:s(()=>[V(o(h),{"label-width":"100px",ref_key:"saveForm",ref:v,model:l.value,"status-icon":"",rules:M.value},{default:s(()=>[(u(!0),R(S,null,A(c.formItems,e=>(u(),r(o(Y),{rules:e.required?[{required:!0,message:`${e.title}${o(m)("message.notEmpty")}`}]:[],key:e.key,prop:e.key,label:e.title},{default:s(()=>[e.fieldType===1?(u(),r(o(L),{key:0,modelValue:l.value[e.key],"onUpdate:modelValue":a=>l.value[e.key]=a,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])):i("",!0),e.fieldType===2?(u(),r(o(b),{key:1,modelValue:l.value[e.key],"onUpdate:modelValue":a=>l.value[e.key]=a,modelModifiers:{number:!0},precision:0},null,8,["modelValue","onUpdate:modelValue"])):i("",!0),e.fieldType===3?(u(),r(o(q),{key:2,modelValue:l.value[e.key],"onUpdate:modelValue":a=>l.value[e.key]=a,type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])):i("",!0),e.fieldType===4?(u(),r(o(b),{key:3,modelValue:l.value[e.key],"onUpdate:modelValue":a=>l.value[e.key]=a,precision:2},null,8,["modelValue","onUpdate:modelValue"])):i("",!0),e.fieldType===5?(u(),r($,{key:4,modelValue:l.value[e.key],"onUpdate:modelValue":a=>l.value[e.key]=a,"dict-code":"yesOrNo"},null,8,["modelValue","onUpdate:modelValue"])):i("",!0)]),_:2},1032,["rules","prop","label"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{re as _};
