var T=Object.defineProperty;var C=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var B=(l,n,i)=>n in l?T(l,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[n]=i,D=(l,n)=>{for(var i in n||(n={}))M.call(n,i)&&B(l,i,n[i]);if(C)for(var i of C(n))H.call(n,i)&&B(l,i,n[i]);return l};import{$ as s,Z as I,a3 as U,Y as Q,M as E,R as S,_ as q}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as z,a as A,b as F}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     */import{E as J}from"./el-message-box-B8o3mhYx.js";import"./css-C9o_OfXA.js";import"./el-overlay-Zuw8glOl.js";import"./css-DCrZaNHy.js";import{E as O,a as d}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{H as Y}from"./HeaderSearch-Dj9rqjlr.js";import{_ as Z}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{_ as j}from"./SysNotificationModal.vue_vue_type_script_setup_true_lang-DPoaKjmV.js";import{ElSwitch as G}from"./index-CHf9SThW.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as K,r as v,S as P,H as W,m as y,n as b,J as e,q as h,E as r,u as t,L as _,y as u,I as $}from"../jse/index-index-D3Xb8oT_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./index-BjDsryRX.js";import"./event-BB_Ol6Sd.js";import"./index-C33Sf0pH.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./validator-D2YZey62.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./merge-BysAs727.js";import"./_baseClone-trfKWgGN.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./hasPermission-CIdLHqw4.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";/* empty css                  */import"./el-dialog-CAR1-R4U.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./DictSelect-DdOvS-6R.js";const X={class:"flex h-full flex-col gap-6 p-6"},tt={class:"bg-background border-border flex-1 rounded-lg border p-5"},et={class:"content-ellipsis"},ot={class:"flex items-center gap-3"},it=K({__name:"SysNotificationList",setup(l){const n=v(),i=v(),k=v();function N(a){a==null||a.resetFields(),i.value.setQuery({})}function x(a){k.value.openDialog(D({},a))}function w(a){J.confirm(s("message.deleteAlert"),s("message.noticeTitle"),{confirmButtonText:s("message.ok"),cancelButtonText:s("message.cancel"),type:"warning",beforeClose:(p,m,c)=>{p==="confirm"?(m.confirmButtonLoading=!0,E.post("/api/v1/sysNotification/remove",{id:a.id}).then(o=>{m.confirmButtonLoading=!1,o.errorCode===0&&(S.success(o.message),N(n.value),c())}).catch(()=>{m.confirmButtonLoading=!1})):c()}}).catch(()=>{})}const V=[{key:"create",text:s("button.add"),icon:P(I),type:"primary",data:{action:"create"},permission:"/api/v1/sysNotification/save"}],L=a=>{i.value.setQuery({title:a})};function R(a){E.post("/api/v1/sysNotification/updateStatus",{id:a.id,status:a.status}).then(p=>{p.errorCode===0&&S.success(s("message.updateOkMessage"))})}return(a,p)=>{const m=W("access");return b(),y("div",X,[e(j,{ref_key:"saveDialog",ref:k,onReload:N},null,512),e(Y,{buttons:V,onSearch:L,onButtonClick:p[0]||(p[0]=c=>x({}))}),h("div",tt,[e(Z,{ref_key:"pageDataRef",ref:i,"page-url":"/api/v1/sysNotification/page","page-size":10},{default:r(({pageList:c})=>[e(t(O),{data:c,border:""},{default:r(()=>[e(t(d),{prop:"title",label:t(s)("sysNotification.title")},{default:r(({row:o})=>[_(u(o.title),1)]),_:1},8,["label"]),e(t(d),{prop:"content",label:t(s)("sysNotification.content")},{default:r(({row:o})=>[h("div",et,u(o.content),1)]),_:1},8,["label"]),e(t(d),{prop:"status",label:t(s)("sysNotification.status")},{default:r(({row:o})=>[e(t(G),{modelValue:o.status,"onUpdate:modelValue":f=>o.status=f,onChange:f=>R(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),e(t(d),{prop:"created",label:t(s)("sysNotification.created")},{default:r(({row:o})=>[_(u(o.created),1)]),_:1},8,["label"]),e(t(d),{label:t(s)("common.handle"),width:"90",align:"right"},{default:r(({row:o})=>[h("div",ot,[$((b(),y("div",null,[e(t(g),{type:"primary",link:"",onClick:f=>x(o)},{default:r(()=>[_(u(t(s)("button.edit")),1)]),_:1},8,["onClick"])])),[[m,"/api/v1/sysNotification/save","code"]]),e(t(z),null,{dropdown:r(()=>[e(t(A),null,{default:r(()=>[$((b(),y("div",null,[e(t(F),{onClick:f=>w(o)},{default:r(()=>[e(t(g),{type:"danger",icon:t(Q),link:""},{default:r(()=>[_(u(t(s)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[m,"/api/v1/sysNotification/remove","code"]])]),_:2},1024)]),default:r(()=>[e(t(g),{link:"",icon:t(U)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])])}}}),ge=q(it,[["__scopeId","data-v-64cef7f0"]]);export{ge as default};
