import{ai as E,k as B,J as H,P as X,x,r as W,o as D,ag as I,ak as N,an as $,c as j,w as A,ao as U}from"../jse/index-index-D3Xb8oT_.js";import{P as C}from"./vnode-DysYOGZN.js";import{bm as F,ao as S,bn as L,bC as P,by as J,ck as K,cl as V,g as q,cm as G}from"./bootstrap-Bf65uz2I.js";import{g as Q}from"./scroll-C2492Iw_.js";const Z=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let n=!1,a=!1;return{onClick:t=>{n&&a&&e(t),n=a=!1},onMousedown:t=>{n=t.target===t.currentTarget},onMouseup:t=>{a=t.target===t.currentTarget}}},_=F({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),R={click:e=>e instanceof MouseEvent},ee="overlay";var te=B({name:"ElOverlay",props:_,emits:R,setup(e,{slots:n,emit:a}){const c=S(ee),o=d=>{a("click",d)},{onClick:s,onMousedown:t,onMouseup:i}=Z(e.customMaskEvent?void 0:o);return()=>e.mask?H("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:t,onMouseup:i},[x(n,"default")],C.STYLE|C.CLASS|C.PROPS,["onClick","onMouseup","onMousedown"]):X("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(n,"default")])}});const ce=te,ue=(e,n,a,c)=>{const o={offsetX:0,offsetY:0},s=W(!1),t=(u,l)=>{if(e.value){const{offsetX:p,offsetY:y}=o,r=e.value.getBoundingClientRect(),m=r.left,f=r.top,h=r.width,g=r.height,M=document.documentElement.clientWidth,k=document.documentElement.clientHeight,T=-m+p,Y=-f+y,O=M-m-h+p,z=k-f-(g<k?g:0)+y;c!=null&&c.value||(u=Math.min(Math.max(u,T),O),l=Math.min(Math.max(l,Y),z)),o.offsetX=u,o.offsetY=l,e.value.style.transform=`translate(${P(u)}, ${P(l)})`}},i=u=>{const l=u.clientX,p=u.clientY,{offsetX:y,offsetY:r}=o,m=h=>{s.value||(s.value=!0);const g=y+h.clientX-l,M=r+h.clientY-p;t(g,M)},f=()=>{s.value=!1,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",f)},d=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",i),window.addEventListener("resize",b))},v=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",i),window.removeEventListener("resize",b))},w=()=>{o.offsetX=0,o.offsetY=0,e.value&&(e.value.style.transform="")},b=()=>{const{offsetX:u,offsetY:l}=o;t(u,l)};return D(()=>{I(()=>{a.value?d():v()})}),N(()=>{v()}),{isDragging:s,resetPosition:w,updatePosition:b}},le=(e,n={})=>{$(e)||J("[useLockscreen]","You need to pass a ref param to this function");const a=n.ns||S("popup"),c=j(()=>a.bm("parent","hidden"));let o=0,s=!1,t="0";const i=()=>{setTimeout(()=>{typeof document!="undefined"&&s&&document&&(document.body.style.width=t,G(document.body,c.value))},200)};A(e,d=>{if(!d){i();return}s=!K(document.body,c.value),s&&(t=document.body.style.width,V(document.body,c.value)),o=Q(a.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,w=q(document.body,"overflowY");o>0&&(v||w==="scroll")&&s&&(document.body.style.width=`calc(100% - ${o}px)`)}),U(()=>i())};export{ce as E,le as a,Z as b,ue as u};
