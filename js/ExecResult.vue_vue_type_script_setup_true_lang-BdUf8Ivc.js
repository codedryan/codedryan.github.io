import{R as p,$ as f}from"./bootstrap-Bf65uz2I.js";import{E as k}from"./el-empty-CDAlv280.js";import{E as h}from"./el-row-u3yI-Elm.js";import{S as E}from"./ShowJson-BAGbKM0P.js";import{_ as N}from"./ExecResultItem.vue_vue_type_script_setup_true_lang-BYxF_Hxf.js";import{k as B,c as x,r as v,w as g,m as r,n,p as l,q as R,B as c,E as w,F as C,N as J,u as d,J as S,K as $}from"../jse/index-index-D3Xb8oT_.js";const A={key:0},F={key:1},T=B({__name:"ExecResult",props:{workflowId:{},nodeJson:{},initSignal:{type:Boolean},pollingData:{}},setup(y){const u=y,s=x(()=>{const e=u.nodeJson;if(e.length>0){let i=e[e.length-1].original;for(const a of e)a.original.type==="endNode"&&(i=a.original);return i}return{}}),t=v(""),o=v(!1);g(()=>u.initSignal,()=>{t.value=""}),g(()=>u.pollingData,e=>{e.status===20&&(p.success(f("message.success")),t.value=e.result,o.value=!0),e.status===21&&(p.error(f("message.fail")),t.value=e.message,o.value=!1)},{deep:!0});function _(e){return e.length>1||s.value.data.outputDefs.length>1?2:1}function m(e){return Array.isArray(e)?e:[e]}return(e,i)=>(n(),r("div",null,[s.value.type==="endNode"&&o.value?(n(),r("div",A,[s.value.data.outputDefs&&t.value?(n(),c(d(h),{key:0,gutter:12},{default:w(()=>[(n(!0),r(C,null,J(s.value.data.outputDefs,a=>(n(),c(N,{key:a.id,result:m(t.value[a.name]),"result-count":_(m(t.value[a.name])),"content-type":a.contentType||"text","def-name":a.name},null,8,["result","result-count","content-type","def-name"]))),128))]),_:1})):l("",!0)])):l("",!0),s.value.type!=="endNode"&&!o.value?(n(),r("div",F,[S(E,{value:t.value},null,8,["value"])])):l("",!0),R("div",null,[t.value?l("",!0):(n(),c(d(k),{key:0,image:`/empty${d($).theme.mode==="dark"?"-dark":""}.png`},null,8,["image"]))])]))}});export{T as _};
