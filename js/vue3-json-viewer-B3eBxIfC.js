import{k as T,T as ie,m as _,n as N,p as X,q,s as S,x as ce,L as pe,y as O,J as fe,r as k,X as z,c as A,w as J,o as F,i as $,P as g,A as de}from"../jse/index-index-D3Xb8oT_.js";const ve=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,Y=T({name:"JsonString",props:{jsonValue:{type:String,required:!0}},setup(e){const y=k(!0),c=k(!1),p=k(null),d=k(null);F(()=>{p.value&&d.value&&p.value.offsetHeight>d.value.offsetHeight&&(c.value=!0)});const i=()=>{y.value=!y.value};return()=>{const n=e.jsonValue,t=ve.test(n);let o;!y.value&&c.value?o=g("span",{class:{"jv-ellipsis":!0},onClick:i},"..."):t?o=g("span",{class:{"jv-item":!0,"jv-string":!0},ref:p},[g("span",null,'"'),g("a",{href:n,target:"_blank",class:"jv-link"},n),g("span",null,'"')]):o=g("span",{class:{"jv-item":!0,"jv-string":!0},ref:p},`"${n}"`);const a=[];return c.value&&a.push(g("span",{class:{"jv-toggle":!0,open:y.value},onClick:i})),a.push(g("span",{class:{"jv-holder-node":!0},ref:d})),a.push(o),g("span",{},a)}}}),ye={class:S(["jv-item","jv-undefined"])},me=T({__name:"json-undefined",props:{jsonValue:{type:null,default:void 0}},setup(e){const y=e,c=A(()=>y.jsonValue===null?"null":"undefined");return(p,d)=>(N(),_("span",ye,O(c.value),1))}}),he=T({__name:"json-number",props:{jsonValue:{type:Number,required:!0}},setup(e){const y=e,c=A(()=>Number.isInteger(y.jsonValue));return(p,d)=>(N(),_("span",{class:S(["jv-item","jv-number",c.value?"jv-number-integer":"jv-number-float"])},O(e.jsonValue.toString()),3))}}),ge={class:S(["jv-item","jv-boolean"])},be=T({__name:"json-boolean",props:{jsonValue:{type:Boolean,required:!0}},setup(e){return(y,c)=>(N(),_("span",ge,O(e.jsonValue.toString()),1))}}),je=T({name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:y}){const c=k({});let p=null;const d=o=>{setTimeout(()=>{c.value=o},0)};J(()=>e.jsonValue,o=>{d(o)},{immediate:!0,deep:!0});const i=A(()=>{if(!e.sort)return c.value;const o=Object.keys(c.value).sort(),a={};return o.forEach(f=>{a[f]=c.value[f]}),a}),n=()=>{if(p)try{p.dispatchEvent(new Event("resized"))}catch(o){const a=document.createEvent("Event");a.initEvent("resized",!0,!1),p.dispatchEvent(a)}},t=()=>{y("update:expand",!e.expand),n()};return()=>{const o=[];if(o.push(g("span",{class:["jv-item","jv-object"]},"{")),e.expand){for(const a in i.value)if(i.value.hasOwnProperty(a)){const f=i.value[a];o.push(g(I,{key:a,sort:e.sort,keyName:a,depth:e.depth+1,value:f,previewMode:e.previewMode}))}}return!e.expand&&Object.keys(c.value).length>0&&o.push(g("span",{class:"jv-ellipsis",onClick:t,title:`click to reveal object content (keys: ${Object.keys(i.value).join(", ")})`},"...")),o.push(g("span",{class:["jv-item","jv-object"]},"}")),g("span",{ref:a=>{p=a}},o)}}}),xe=T({name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:y}){const c=k([]);let p=null;const d=(n,t=0)=>{t===0&&(c.value=[]),setTimeout(()=>{n&&n.length>t&&(c.value.push(n[t]),d(n,t+1))},0)};J(()=>e.jsonValue,n=>{d(n)},{immediate:!0,deep:!0});const i=()=>{if(y("update:expand",!e.expand),p)try{p.dispatchEvent(new Event("resized"))}catch(n){const t=document.createEvent("Event");t.initEvent("resized",!0,!1),p.dispatchEvent(t)}};return()=>{const n=[];return!e.previewMode&&!e.keyName&&n.push(g("span",{class:{"jv-toggle":!0,open:!!e.expand},onClick:i})),n.push(g("span",{class:["jv-item","jv-array"]},"[")),e.expand&&c.value.forEach((t,o)=>{n.push(g(I,{key:o,sort:e.sort,depth:e.depth+1,value:t,previewMode:e.previewMode}))}),!e.expand&&c.value.length>0&&n.push(g("span",{class:"jv-ellipsis",onClick:i,title:`click to reveal ${c.value.length} hidden items`},"...")),n.push(g("span",{class:["jv-item","jv-array"]},"]")),g("span",{ref:t=>{p=t}},n)}}}),Ee=["title"],we=T({__name:"json-function",props:{jsonValue:{type:Function,required:!0}},setup(e){return(y,c)=>(N(),_("span",{class:S(["jv-item","jv-function"]),title:e.jsonValue.toString()}," <function> ",8,Ee))}}),ke={class:S(["jv-item","jv-string"])},Se=T({__name:"json-date",props:{jsonValue:{type:Date,required:!0}},setup(e){const y=e,c=$("timeformat",d=>d.toLocaleString()),p=A(()=>c(y.jsonValue));return(d,i)=>(N(),_("span",ke,' "'+O(p.value)+'" ',1))}}),Te={class:S(["jv-item","jv-regexp"])},Ce=T({__name:"json-regexp",props:{jsonValue:{type:RegExp,required:!0}},setup(e){return(y,c)=>(N(),_("span",Te,O(e.jsonValue.toString()),1))}}),I=T({name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},setup(e){const y=$("expandDepth",1/0),c=$("keyClick",()=>{}),p=k(!0);let d=null;F(()=>{p.value=e.previewMode||e.depth<y});const i=()=>{if(p.value=!p.value,d)try{d.dispatchEvent(new Event("resized"))}catch(n){const t=document.createEvent("Event");t.initEvent("resized",!0,!1),d.dispatchEvent(t)}};return()=>{const n=[];let t;e.value===null||e.value===void 0?t=me:Array.isArray(e.value)?t=xe:e.value instanceof Date?t=Se:e.value instanceof RegExp?t=Ce:typeof e.value=="object"?t=je:typeof e.value=="number"?t=he:typeof e.value=="string"?t=Y:typeof e.value=="boolean"?t=be:typeof e.value=="function"?t=we:t=Y;const o=e.value&&(Array.isArray(e.value)||typeof e.value=="object"&&!(e.value instanceof Date)&&!(e.value instanceof RegExp));return!e.previewMode&&o&&!(e.value instanceof RegExp)&&n.push(g("span",{class:{"jv-toggle":!0,open:!!p.value},onClick:i})),e.keyName&&n.push(g("span",{class:"jv-key",onClick:()=>{c&&c(e.keyName)}},`${e.keyName}:`)),n.push(g(t,{class:"jv-push",jsonValue:e.value,keyName:e.keyName,sort:e.sort,depth:e.depth,expand:p.value,previewMode:e.previewMode,"onUpdate:expand":a=>{p.value=a}})),g("div",{class:{"jv-node":!0,"jv-key-node":!!e.keyName&&!o,toggle:!e.previewMode&&o},ref:a=>{d=a}},n)}}});function _e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H={exports:{}};var Ne=H.exports,Z;function Ae(){return Z||(Z=1,function(e,y){(function(c,p){e.exports=p()})(Ne,function(){return function(){var c={686:function(i,n,t){t.d(n,{default:function(){return le}});var o=t(279),a=t.n(o),f=t(370),j=t.n(f),b=t(817),w=t.n(b);function v(u){try{return document.execCommand(u)}catch(r){return!1}}var x=function(u){var r=w()(u);return v("cut"),r},h=x;function C(u){var r=document.documentElement.getAttribute("dir")==="rtl",l=document.createElement("textarea");l.style.fontSize="12pt",l.style.border="0",l.style.padding="0",l.style.margin="0",l.style.position="absolute",l.style[r?"right":"left"]="-9999px";var s=window.pageYOffset||document.documentElement.scrollTop;return l.style.top="".concat(s,"px"),l.setAttribute("readonly",""),l.value=u,l}var K=function(u,r){var l=C(u);r.container.appendChild(l);var s=w()(l);return v("copy"),l.remove(),s},G=function(u){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},l="";return typeof u=="string"?l=K(u,r):u instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(u==null?void 0:u.type)?l=K(u.value,r):(l=w()(u),v("copy")),l},R=G;function V(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?V=function(r){return typeof r}:V=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},V(u)}var Q=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=u.action,l=r===void 0?"copy":r,s=u.container,m=u.target,E=u.text;if(l!=="copy"&&l!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(m!==void 0)if(m&&V(m)==="object"&&m.nodeType===1){if(l==="copy"&&m.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(l==="cut"&&(m.hasAttribute("readonly")||m.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(E)return R(E,{container:s});if(m)return l==="cut"?h(m):R(m,{container:s})},W=Q;function M(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(r){return typeof r}:M=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},M(u)}function ee(u,r){if(!(u instanceof r))throw new TypeError("Cannot call a class as a function")}function U(u,r){for(var l=0;l<r.length;l++){var s=r[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(u,s.key,s)}}function te(u,r,l){return r&&U(u.prototype,r),l&&U(u,l),u}function ne(u,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(r&&r.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),r&&D(u,r)}function D(u,r){return D=Object.setPrototypeOf||function(l,s){return l.__proto__=s,l},D(u,r)}function oe(u){var r=ue();return function(){var l=B(u),s;if(r){var m=B(this).constructor;s=Reflect.construct(l,arguments,m)}else s=l.apply(this,arguments);return re(this,s)}}function re(u,r){return r&&(M(r)==="object"||typeof r=="function")?r:ae(u)}function ae(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function ue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(u){return!1}}function B(u){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},B(u)}function P(u,r){var l="data-clipboard-".concat(u);if(r.hasAttribute(l))return r.getAttribute(l)}var se=function(u){ne(l,u);var r=oe(l);function l(s,m){var E;return ee(this,l),E=r.call(this),E.resolveOptions(m),E.listenClick(s),E}return te(l,[{key:"resolveOptions",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof s.action=="function"?s.action:this.defaultAction,this.target=typeof s.target=="function"?s.target:this.defaultTarget,this.text=typeof s.text=="function"?s.text:this.defaultText,this.container=M(s.container)==="object"?s.container:document.body}},{key:"listenClick",value:function(s){var m=this;this.listener=j()(s,"click",function(E){return m.onClick(E)})}},{key:"onClick",value:function(s){var m=s.delegateTarget||s.currentTarget,E=this.action(m)||"copy",L=W({action:E,container:this.container,target:this.target(m),text:this.text(m)});this.emit(L?"success":"error",{action:E,text:L,trigger:m,clearSelection:function(){m&&m.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(s){return P("action",s)}},{key:"defaultTarget",value:function(s){var m=P("target",s);if(m)return document.querySelector(m)}},{key:"defaultText",value:function(s){return P("text",s)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(s){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return R(s,m)}},{key:"cut",value:function(s){return h(s)}},{key:"isSupported",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],m=typeof s=="string"?[s]:s,E=!!document.queryCommandSupported;return m.forEach(function(L){E=E&&!!document.queryCommandSupported(L)}),E}}]),l}(a()),le=se},828:function(i){var n=9;if(typeof Element<"u"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function o(a,f){for(;a&&a.nodeType!==n;){if(typeof a.matches=="function"&&a.matches(f))return a;a=a.parentNode}}i.exports=o},438:function(i,n,t){var o=t(828);function a(b,w,v,x,h){var C=j.apply(this,arguments);return b.addEventListener(v,C,h),{destroy:function(){b.removeEventListener(v,C,h)}}}function f(b,w,v,x,h){return typeof b.addEventListener=="function"?a.apply(null,arguments):typeof v=="function"?a.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(C){return a(C,w,v,x,h)}))}function j(b,w,v,x){return function(h){h.delegateTarget=o(h.target,w),h.delegateTarget&&x.call(b,h)}}i.exports=f},879:function(i,n){n.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},n.nodeList=function(t){var o=Object.prototype.toString.call(t);return t!==void 0&&(o==="[object NodeList]"||o==="[object HTMLCollection]")&&"length"in t&&(t.length===0||n.node(t[0]))},n.string=function(t){return typeof t=="string"||t instanceof String},n.fn=function(t){var o=Object.prototype.toString.call(t);return o==="[object Function]"}},370:function(i,n,t){var o=t(879),a=t(438);function f(v,x,h){if(!v&&!x&&!h)throw new Error("Missing required arguments");if(!o.string(x))throw new TypeError("Second argument must be a String");if(!o.fn(h))throw new TypeError("Third argument must be a Function");if(o.node(v))return j(v,x,h);if(o.nodeList(v))return b(v,x,h);if(o.string(v))return w(v,x,h);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function j(v,x,h){return v.addEventListener(x,h),{destroy:function(){v.removeEventListener(x,h)}}}function b(v,x,h){return Array.prototype.forEach.call(v,function(C){C.addEventListener(x,h)}),{destroy:function(){Array.prototype.forEach.call(v,function(C){C.removeEventListener(x,h)})}}}function w(v,x,h){return a(document.body,v,x,h)}i.exports=f},817:function(i){function n(t){var o;if(t.nodeName==="SELECT")t.focus(),o=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var a=t.hasAttribute("readonly");a||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),a||t.removeAttribute("readonly"),o=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var f=window.getSelection(),j=document.createRange();j.selectNodeContents(t),f.removeAllRanges(),f.addRange(j),o=f.toString()}return o}i.exports=n},279:function(i){function n(){}n.prototype={on:function(t,o,a){var f=this.e||(this.e={});return(f[t]||(f[t]=[])).push({fn:o,ctx:a}),this},once:function(t,o,a){var f=this;function j(){f.off(t,j),o.apply(a,arguments)}return j._=o,this.on(t,j,a)},emit:function(t){var o=[].slice.call(arguments,1),a=((this.e||(this.e={}))[t]||[]).slice(),f=0,j=a.length;for(f;f<j;f++)a[f].fn.apply(a[f].ctx,o);return this},off:function(t,o){var a=this.e||(this.e={}),f=a[t],j=[];if(f&&o)for(var b=0,w=f.length;b<w;b++)f[b].fn!==o&&f[b].fn._!==o&&j.push(f[b]);return j.length?a[t]=j:delete a[t],this}},i.exports=n,i.exports.TinyEmitter=n}},p={};function d(i){if(p[i])return p[i].exports;var n=p[i]={exports:{}};return c[i](n,n.exports,d),n.exports}return function(){d.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return d.d(n,{a:n}),n}}(),function(){d.d=function(i,n){for(var t in n)d.o(n,t)&&!d.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:n[t]})}}(),function(){d.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)}}(),d(686)}().default})}(H)),H.exports}var Oe=Ae();const Me=_e(Oe),Ve=function(e,y){let c=Date.now(),p;return(...d)=>{Date.now()-c<y&&p&&clearTimeout(p),p=setTimeout(()=>{e(...d)},y),c=Date.now()}},Be=T({name:"JsonViewer",components:{JsonBox:I},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:e=>e.toLocaleString()},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},emits:["onKeyClick","copied"],setup(e,{emit:y}){const c=k(!1),p=k(!1),d=k(e.expanded),i=k(null),n=k(null);z("expandDepth",e.expandDepth),z("timeformat",e.timeformat),z("keyClick",v=>{y("onKeyClick",v)});const t=A(()=>"jv-container jv-"+e.theme+(e.boxed?" boxed":"")),o=A(()=>{if(typeof e.copyable=="boolean"&&!e.copyable)return{copyText:"copy",copiedText:"copied!",timeout:2e3,align:"right"};const v=e.copyable;return{copyText:v.copyText||"copy",copiedText:v.copiedText||"copied!",timeout:v.timeout||2e3,align:v.align||"right"}}),a=A(()=>{if(!e.parse||typeof e.value!="string")return e.value;try{return JSON.parse(e.value)}catch(v){return e.value}}),f=()=>{j()},j=Ve(()=>{de(()=>{n.value&&(n.value.$el.clientHeight>=250?p.value=!0:p.value=!1)})},200),b=v=>{c.value||(c.value=!0,setTimeout(()=>{c.value=!1},o.value.timeout),y("copied",v))},w=()=>{d.value=!d.value};return J(()=>e.value,()=>{f()}),F(()=>{e.boxed&&n.value&&(f(),n.value.$el.addEventListener("resized",f,!0)),e.copyable&&i.value&&new Me(i.value,{text:()=>JSON.stringify(a.value,null,2)}).on("success",b)}),{clip:i,jsonBox:n,copied:c,expandableCode:p,expandCode:d,jvClass:t,copyText:o,parseValue:a,toggleExpandCode:w}}}),Le=(e,y)=>{const c=e.__vccOpts||e;for(const[p,d]of y)c[p]=d;return c};function Re(e,y,c,p,d,i){const n=ie("json-box");return N(),_("div",{class:S(e.jvClass)},[e.copyable?(N(),_("div",{key:0,class:S(`jv-tooltip ${e.copyText.align||"right"}`)},[q("span",{ref:"clip",class:S(["jv-button",{copied:e.copied}])},[ce(e.$slots,"copy",{copied:e.copied},()=>[pe(O(e.copied?e.copyText.copiedText:e.copyText.copyText),1)])],2)],2)):X("",!0),q("div",{class:S(["jv-code",{open:e.expandCode,boxed:e.boxed}])},[fe(n,{ref:"jsonBox",value:e.parseValue,sort:e.sort,"preview-mode":e.previewMode},null,8,["value","sort","preview-mode"])],2),e.expandableCode&&e.boxed?(N(),_("div",{key:1,class:"jv-more",onClick:y[0]||(y[0]=(...t)=>e.toggleExpandCode&&e.toggleExpandCode(...t))},[q("span",{class:S(["jv-toggle",{open:!!e.expandCode}])},null,2)])):X("",!0)],2)}const Pe=Le(Be,[["render",Re]]);export{Pe as Q};
