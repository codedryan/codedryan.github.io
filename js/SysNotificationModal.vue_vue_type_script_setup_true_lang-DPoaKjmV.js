import{$ as u,M as k,R as x}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as T}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as U,a as r}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import"./css-DCrZaNHy.js";import{D as v}from"./DictSelect-DdOvS-6R.js";import{ElInput as b}from"./index-BjDsryRX.js";import{ElSwitch as A}from"./index-CHf9SThW.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as M,o as _,r as d,B as C,n as F,E as s,J as o,u as e,L as y,y as V}from"../jse/index-index-D3Xb8oT_.js";const W=M({__name:"SysNotificationModal",emits:["reload"],setup(R,{expose:I,emit:L}){const D=L;_(()=>{}),I({openDialog:N});const c=d(),m=d(!1),p=d(!0),t=d({title:"",content:"",status:!1,deptId:"",noticeAccountTypeList:[],noticeRoleIdList:[],noticeDeptIdList:[]}),n=d(!1),E=d({title:[{required:!0,message:u("message.required"),trigger:"blur"}],content:[{required:!0,message:u("message.required"),trigger:"blur"}],status:[{required:!0,message:u("message.required"),trigger:"blur"}],deptId:[{required:!0,message:u("message.required"),trigger:"blur"}]});function N(i){i.id&&(p.value=!1),t.value=i,m.value=!0}function q(){var i;(i=c.value)==null||i.validate(l=>{l&&(n.value=!0,k.post(p.value?"api/v1/sysNotification/save":"api/v1/sysNotification/update",t.value).then(a=>{n.value=!1,a.errorCode===0&&(x.success(a.message),D("reload"),f())}).catch(()=>{n.value=!1}))})}function f(){var i;(i=c.value)==null||i.resetFields(),p.value=!0,t.value={},m.value=!1}return(i,l)=>(F(),C(e(T),{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=a=>m.value=a),draggable:"",title:p.value?e(u)("button.add"):e(u)("button.edit"),"before-close":f,"close-on-click-modal":!1},{footer:s(()=>[o(e(g),{onClick:f},{default:s(()=>[y(V(e(u)("button.cancel")),1)]),_:1}),o(e(g),{type:"primary",onClick:q,loading:n.value,disabled:n.value},{default:s(()=>[y(V(e(u)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:s(()=>[o(e(U),{"label-width":"120px",ref_key:"saveForm",ref:c,model:t.value,"status-icon":"",rules:E.value},{default:s(()=>[o(e(r),{prop:"title",label:e(u)("sysNotification.title")},{default:s(()=>[o(e(b),{modelValue:t.value.title,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value.title=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),o(e(r),{prop:"content",label:e(u)("sysNotification.content")},{default:s(()=>[o(e(b),{type:"textarea",rows:10,modelValue:t.value.content,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.content=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),o(e(r),{label:e(u)("sysNotification.status")},{default:s(()=>[o(e(A),{modelValue:t.value.status,"onUpdate:modelValue":l[2]||(l[2]=a=>t.value.status=a)},null,8,["modelValue"])]),_:1},8,["label"]),o(e(r),{label:e(u)("sysAccount.deptId")},{default:s(()=>[o(v,{multiple:"",modelValue:t.value.noticeDeptIdList,"onUpdate:modelValue":l[3]||(l[3]=a=>t.value.noticeDeptIdList=a),"dict-code":"sysDept"},null,8,["modelValue"])]),_:1},8,["label"]),o(e(r),{label:e(u)("sysAccount.roleIds")},{default:s(()=>[o(v,{multiple:"",modelValue:t.value.noticeRoleIdList,"onUpdate:modelValue":l[4]||(l[4]=a=>t.value.noticeRoleIdList=a),"dict-code":"sysRole"},null,8,["modelValue"])]),_:1},8,["label"]),o(e(r),{prop:"accountType",label:e(u)("sysNotification.labels.accountType")},{default:s(()=>[o(v,{multiple:"",modelValue:t.value.noticeAccountTypeList,"onUpdate:modelValue":l[5]||(l[5]=a=>t.value.noticeAccountTypeList=a),"dict-code":"accountType"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{W as _};
