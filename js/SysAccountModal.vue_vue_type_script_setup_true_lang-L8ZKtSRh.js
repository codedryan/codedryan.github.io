import{$ as u,M as w,R as D}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as x}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as C,a as d}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{D as f}from"./DictSelect-DdOvS-6R.js";import{U as F}from"./UploadAvatar-a3x1lqjM.js";import{ElInput as i}from"./index-BjDsryRX.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as S,o as B,r as m,B as c,n as y,E as s,J as t,u as e,p as L,L as k,y as I}from"../jse/index-index-D3Xb8oT_.js";const W=S({__name:"SysAccountModal",emits:["reload"],setup(R,{expose:A,emit:U}){const q=U;B(()=>{}),A({openDialog:E});const b=m(),v=m(!1),n=m(!0),l=m({deptId:"",loginName:"",password:"",accountType:"",nickname:"",mobile:"",email:"",avatar:"",dataScope:"",deptIdList:"",status:"",remark:"",positionIds:[]}),p=m(!1),M=m({deptId:[{required:!0,message:u("message.required"),trigger:"blur"}],loginName:[{required:!0,message:u("message.required"),trigger:"blur"}],nickname:[{required:!0,message:u("message.required"),trigger:"blur"}],password:[{required:!0,message:u("message.required"),trigger:"blur"}],status:[{required:!0,message:u("message.required"),trigger:"blur"}]});function E(r){r.id&&(n.value=!1),l.value=r,v.value=!0}function N(){var r;(r=b.value)==null||r.validate(a=>{a&&(p.value=!0,w.post(n.value?"api/v1/sysAccount/save":"api/v1/sysAccount/update",l.value).then(o=>{p.value=!1,o.errorCode===0&&(D.success(o.message),q("reload"),V())}).catch(()=>{p.value=!1}))})}function V(){var r;(r=b.value)==null||r.resetFields(),n.value=!0,l.value={},v.value=!1}return(r,a)=>(y(),c(e(x),{modelValue:v.value,"onUpdate:modelValue":a[11]||(a[11]=o=>v.value=o),draggable:"",title:n.value?e(u)("button.add"):e(u)("button.edit"),"before-close":V,"close-on-click-modal":!1},{footer:s(()=>[t(e(g),{onClick:V},{default:s(()=>[k(I(e(u)("button.cancel")),1)]),_:1}),t(e(g),{type:"primary",onClick:N,loading:p.value,disabled:p.value},{default:s(()=>[k(I(e(u)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:s(()=>[t(e(C),{"label-width":"120px",ref_key:"saveForm",ref:b,model:l.value,"status-icon":"",rules:M.value},{default:s(()=>[t(e(d),{prop:"avatar",label:e(u)("sysAccount.avatar")},{default:s(()=>[t(F,{modelValue:l.value.avatar,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.avatar=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"deptId",label:e(u)("sysAccount.deptId")},{default:s(()=>[t(f,{modelValue:l.value.deptId,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.deptId=o),"dict-code":"sysDept"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"loginName",label:e(u)("sysAccount.loginName")},{default:s(()=>[t(e(i),{modelValue:l.value.loginName,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.loginName=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),n.value?(y(),c(e(d),{key:0,prop:"password",label:e(u)("sysAccount.password")},{default:s(()=>[t(e(i),{modelValue:l.value.password,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.password=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])):L("",!0),t(e(d),{prop:"nickname",label:e(u)("sysAccount.nickname")},{default:s(()=>[t(e(i),{modelValue:l.value.nickname,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.nickname=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"mobile",label:e(u)("sysAccount.mobile")},{default:s(()=>[t(e(i),{modelValue:l.value.mobile,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.mobile=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"email",label:e(u)("sysAccount.email")},{default:s(()=>[t(e(i),{modelValue:l.value.email,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.email=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"status",label:e(u)("sysAccount.status")},{default:s(()=>[t(f,{modelValue:l.value.status,"onUpdate:modelValue":a[7]||(a[7]=o=>l.value.status=o),"dict-code":"dataStatus"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"remark",label:e(u)("sysAccount.remark")},{default:s(()=>[t(e(i),{modelValue:l.value.remark,"onUpdate:modelValue":a[8]||(a[8]=o=>l.value.remark=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"roleIds",label:e(u)("sysAccount.roleIds")},{default:s(()=>[t(f,{multiple:"",modelValue:l.value.roleIds,"onUpdate:modelValue":a[9]||(a[9]=o=>l.value.roleIds=o),"dict-code":"sysRole"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"positionIds",label:e(u)("sysAccount.positionIds")},{default:s(()=>[t(f,{multiple:"",modelValue:l.value.positionIds,"onUpdate:modelValue":a[10]||(a[10]=o=>l.value.positionIds=o),"dict-code":"sysPosition"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{W as _};
