var R=Object.defineProperty;var D=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var E=(p,a,l)=>a in p?R(p,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[a]=l,y=(p,a)=>{for(var l in a||(a={}))F.call(a,l)&&E(p,l,a[l]);if(D)for(var l of D(a))H.call(a,l)&&E(p,l,a[l]);return p};import{$ as n,Z as O,M as w,a3 as Q,Y as V,R as W}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as q,a as z,b as A}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     */import{E as J}from"./el-message-box-B8o3mhYx.js";import"./css-C9o_OfXA.js";import"./el-overlay-Zuw8glOl.js";import{E as Y,a as f}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{H as Z}from"./HeaderSearch-Dj9rqjlr.js";import{_ as j}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{u as G}from"./dict-CsbZy8Qf.js";import{_ as K}from"./NotificationEventModal.vue_vue_type_script_setup_true_lang-DmaNgm20.js";import P from"./StatisticsChart-tfh1ACKN.js";import{ElButton as _}from"./index-oBOAcXl-.js";import{k as U,o as X,r as b,S as tt,H as et,m as B,n as x,J as e,q as C,E as i,u as t,L as s,y as c,I as ot}from"../jse/index-index-D3Xb8oT_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./index-BjDsryRX.js";import"./event-BB_Ol6Sd.js";import"./index-C33Sf0pH.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./validator-D2YZey62.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./merge-BysAs727.js";import"./_baseClone-trfKWgGN.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./hasPermission-CIdLHqw4.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";/* empty css                  */import"./el-dialog-CAR1-R4U.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./DictSelect-DdOvS-6R.js";import"./index-Dv97N9Ru.js";import"./universalTransition-D5im4pU2.js";import"./el-card-DGd_zL6P.js";import"./el-col-D5ifHzRC.js";import"./el-row-u3yI-Elm.js";const it={class:"flex h-full flex-col gap-6 p-6"},at={class:"bg-background border-border flex-1 rounded-lg border p-5"},rt={class:"flex items-center gap-3"},ye=U({__name:"NotificationEventList",setup(p){X(()=>{L(),$()});const a=b(),l=b(),u=G(),I=[{key:"create",text:n("button.add"),icon:tt(O),type:"primary",data:{action:"create"},permission:"/api/v1/notificationEvent/save"}],g=b([]);function L(){u.fetchDictionary("aiWorkFlow"),u.fetchDictionary("aiBot"),u.fetchDictionary("yesOrNo")}const N=r=>{a.value.setQuery({roleName:r,isQueryOr:!0})};function h(r){r==null||r.resetFields(),a.value.setQuery({})}function k(r){l.value.openDialog(y({},r))}function S(r){J.confirm(n("message.deleteAlert"),n("message.noticeTitle"),{confirmButtonText:n("message.ok"),cancelButtonText:n("message.cancel"),type:"warning",beforeClose:(m,d,v)=>{m==="confirm"?(d.confirmButtonLoading=!0,w.post("/api/v1/notificationEvent/remove",{id:r.id}).then(o=>{d.confirmButtonLoading=!1,o.errorCode===0&&(W.success(o.message),h(),v())}).catch(()=>{d.confirmButtonLoading=!1})):v()}}).catch(()=>{})}function $(){w.get("/api/v1/model/list",{}).then(m=>{m.errorCode===0&&(g.value=m.data)})}function M(r){if(!r)return"";const m=g.value.find(d=>d.id===r);return m?m.title:"-"}return(r,m)=>{const d=et("access");return x(),B("div",it,[e(P),e(K,{ref_key:"saveDialog",ref:l,onReload:h},null,512),e(Z,{buttons:I,onSearch:N,onButtonClick:m[0]||(m[0]=v=>k({}))}),C("div",at,[e(j,{ref_key:"pageDataRef",ref:a,"page-url":"/api/v1/notificationEvent/page","page-size":10},{default:i(({pageList:v})=>[e(t(Y),{data:v,border:""},{default:i(()=>[e(t(f),{prop:"eventName",label:t(n)("notificationEvent.eventName")},{default:i(({row:o})=>[s(c(o.eventName),1)]),_:1},8,["label"]),e(t(f),{prop:"modelId",label:t(n)("notificationEvent.modelId")},{default:i(({row:o})=>[s(c(M(o.modelId)),1)]),_:1},8,["label"]),e(t(f),{prop:"workflowId",label:t(n)("notificationEvent.workflowId")},{default:i(({row:o})=>[s(c(t(u).getDictLabel("aiWorkFlow",o.workflowId)),1)]),_:1},8,["label"]),e(t(f),{prop:"botId",label:t(n)("notificationEvent.botId")},{default:i(({row:o})=>[s(c(t(u).getDictLabel("aiBot",o.botId)),1)]),_:1},8,["label"]),e(t(f),{prop:"status",label:t(n)("notificationEvent.status")},{default:i(({row:o})=>[s(c(t(u).getDictLabel("yesOrNo",o.status)),1)]),_:1},8,["label"]),e(t(f),{prop:"created",label:t(n)("notificationEvent.created")},{default:i(({row:o})=>[s(c(o.created),1)]),_:1},8,["label"]),e(t(f),{label:t(n)("common.handle"),width:"90",align:"right"},{default:i(({row:o})=>[C("div",rt,[e(t(_),{link:"",type:"primary",onClick:T=>k(o)},{default:i(()=>[s(c(t(n)("button.edit")),1)]),_:1},8,["onClick"]),e(t(q),null,{dropdown:i(()=>[e(t(z),null,{default:i(()=>[ot((x(),B("div",null,[e(t(A),{onClick:T=>S(o)},{default:i(()=>[e(t(_),{type:"danger",icon:t(V),link:""},{default:i(()=>[s(c(t(n)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[d,"/api/v1/notificationEvent/remove","code"]])]),_:2},1024)]),default:i(()=>[e(t(_),{link:"",icon:t(Q)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])])}}});export{ye as default};
