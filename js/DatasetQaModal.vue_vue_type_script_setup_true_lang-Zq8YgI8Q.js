import{$ as s,Y as T,Z as C,M as D,R as F}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as U}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as B,a as n}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{D as c}from"./DictSelect-DdOvS-6R.js";import{ElInput as k}from"./index-BjDsryRX.js";import{ElButton as f}from"./index-oBOAcXl-.js";import{k as S,o as $,r as d,B as L,n as b,E as r,J as t,u as e,m as I,F as N,N as A,L as V,y}from"../jse/index-index-D3Xb8oT_.js";const X=S({__name:"DatasetQaModal",emits:["reload"],setup(O,{expose:x,emit:E}){const _=E;$(()=>{}),x({openDialog:M});const v=d(),m=d(!1),p=d(!0),l=d({deptId:"",datasetId:"",answer:"",originType:"",accountId:"",status:""}),i=d(!1),w=d({deptId:[{required:!0,message:s("message.required"),trigger:"blur"}],datasetId:[{required:!0,message:s("message.required"),trigger:"blur"}],originType:[{required:!0,message:s("message.required"),trigger:"blur"}],status:[{required:!0,message:s("message.required"),trigger:"blur"}]});function M(u){u.id&&(p.value=!1),l.value=u,m.value=!0}function Q(){var u;(u=v.value)==null||u.validate(o=>{o&&(i.value=!0,D.post(p.value?"api/v1/datasetQa/save":"api/v1/datasetQa/update",l.value).then(a=>{i.value=!1,a.errorCode===0&&(F.success(a.message),_("reload"),g())}).catch(()=>{i.value=!1}))})}function g(){var u;(u=v.value)==null||u.resetFields(),p.value=!0,l.value={},m.value=!1}return(u,o)=>(b(),L(e(U),{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=a=>m.value=a),draggable:"",title:p.value?e(s)("button.add"):e(s)("button.edit"),"before-close":g,"close-on-click-modal":!1},{footer:r(()=>[t(e(f),{onClick:g},{default:r(()=>[V(y(e(s)("button.cancel")),1)]),_:1}),t(e(f),{type:"primary",onClick:Q,loading:i.value,disabled:i.value},{default:r(()=>[V(y(e(s)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:r(()=>[t(e(B),{"label-position":"top","label-width":"120px",ref_key:"saveForm",ref:v,model:l.value,"status-icon":"",rules:w.value},{default:r(()=>[t(e(n),{prop:"datasetId",label:e(s)("datasetQa.datasetId")},{default:r(()=>[t(c,{disabled:"",modelValue:l.value.datasetId,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value.datasetId=a),modelModifiers:{trim:!0},"dict-code":"aiDataset"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(n),{prop:"status",label:e(s)("datasetQa.status")},{default:r(()=>[t(c,{modelValue:l.value.status,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value.status=a),modelModifiers:{trim:!0},"dict-code":"auditStatus"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(n),{prop:"originType",label:e(s)("datasetQa.originType")},{default:r(()=>[t(c,{disabled:"",modelValue:l.value.originType,"onUpdate:modelValue":o[2]||(o[2]=a=>l.value.originType=a),modelModifiers:{trim:!0},"dict-code":"qaOriginType"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(n),{prop:"originType",label:e(s)("datasetQa.questions")},{default:r(()=>[(b(!0),I(N,null,A(l.value.questions,a=>(b(),I("div",{class:"mb-2 flex w-full gap-2",key:a.id},[t(e(k),{modelValue:a.question,"onUpdate:modelValue":q=>a.question=q,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"]),t(e(f),{type:"danger",icon:e(T),onClick:q=>l.value.questions.splice(l.value.questions.indexOf(a),1)},null,8,["icon","onClick"])]))),128)),t(e(f),{style:{color:"var(--el-color-primary)",border:"1px dashed var(--el-color-primary)"},class:"w-full",plain:"",icon:e(C),onClick:o[3]||(o[3]=a=>l.value.questions.push({question:""}))},{default:r(()=>[V(y(e(s)("dataset.AddSimilarQuestion")),1)]),_:1},8,["icon"])]),_:1},8,["label"]),t(e(n),{prop:"answer",label:e(s)("datasetQa.answer")},{default:r(()=>[t(e(k),{type:"textarea",rows:4,modelValue:l.value.answer,"onUpdate:modelValue":o[4]||(o[4]=a=>l.value.answer=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{X as _};
