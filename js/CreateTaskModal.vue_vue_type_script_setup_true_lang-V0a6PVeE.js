var B=Object.defineProperty;var D=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var E=(s,o,e)=>o in s?B(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,g=(s,o)=>{for(var e in o||(o={}))R.call(o,e)&&E(s,e,o[e]);if(D)for(var e of D(o))w.call(o,e)&&E(s,e,o[e]);return s};var M=(s,o,e)=>new Promise((C,m)=>{var p=n=>{try{l(e.next(n))}catch(d){m(d)}},k=n=>{try{l(e.throw(n))}catch(d){m(d)}},l=n=>n.done?C(n.value):Promise.resolve(n.value).then(p,k);l((e=e.apply(s,o)).next())});import{$ as r,M as N,R as $}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as j}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as A,a as T}from"./el-form-item-8FQp7Cs4.js";import{D as I}from"./DictSelect-DdOvS-6R.js";import{_ as J}from"./SelectConversationModal.vue_vue_type_script_setup_true_lang-D6OprW_5.js";import{ElButton as b}from"./index-oBOAcXl-.js";import{k as L,r as v,c as z,m as G,n as H,F as K,J as i,u as a,E as c,q as h,y as _,L as V}from"../jse/index-index-D3Xb8oT_.js";const O={class:"flex items-center gap-2"},P={class:"flex justify-end gap-2"},re=L({__name:"CreateTaskModal",emits:["reload"],setup(s,{expose:o,emit:e}){const C=e,m=v(!1),p=v(!1),k=v(),l=v({}),n=z(()=>({conversationCount:[{required:!0,message:r("message.selectTopic"),trigger:"change"}],markUser:[{required:!0,message:r("message.selectMarker"),trigger:"change"}]})),d=v(),F=t=>{m.value=!0,t&&t.id?l.value=g({},t):x()},y=()=>{m.value=!1,l.value={},x()},x=()=>{var t;(t=d.value)==null||t.resetFields()},U=()=>{k.value.openDialog()},q=t=>{l.value=g(g({},l.value),t)},S=()=>M(null,null,function*(){var t;(t=d.value)==null||t.validate(f=>M(null,null,function*(){f&&(p.value=!0,N.post("/api/v1/markTask/saveTask",l.value).then(u=>{p.value=!1,u.errorCode===0&&($.success(u.message),C("reload"),y())}).catch(u=>{console.error("创建失败:",u)}))}))});return o({openDialog:F}),(t,f)=>(H(),G(K,null,[i(a(j),{modelValue:m.value,"onUpdate:modelValue":f[1]||(f[1]=u=>m.value=u),title:l.value.id?a(r)("dataMark.editMark"):a(r)("dataMark.createMark"),width:"500px","close-on-click-modal":!1,onClose:y},{footer:c(()=>[h("div",P,[i(a(b),{onClick:y},{default:c(()=>[V(_(a(r)("button.cancel")),1)]),_:1}),i(a(b),{type:"primary",loading:p.value,onClick:S},{default:c(()=>[V(_(a(r)("button.confirm")),1)]),_:1},8,["loading"])])]),default:c(()=>[i(a(A),{ref_key:"formRef",ref:d,model:l.value,rules:n.value,"label-width":"120px"},{default:c(()=>[i(a(T),{label:a(r)("dataMark.selectTopic"),prop:"conversationCount",required:""},{default:c(()=>[h("div",O,[h("span",null,_(a(r)("dataMark.selectedTopics",{number:l.value.conversationCount})),1),i(a(b),{type:"primary",link:"",onClick:U},{default:c(()=>[V(_(a(r)("button.choose")),1)]),_:1})])]),_:1},8,["label"]),i(a(T),{label:a(r)("dataMark.selectMarker"),prop:"markUser",required:""},{default:c(()=>[i(I,{modelValue:l.value.markUser,"onUpdate:modelValue":f[0]||(f[0]=u=>l.value.markUser=u),"dict-code":"sysAccount"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),i(J,{ref_key:"selectConversationDialog",ref:k,onConfirm:q},null,512)],64))}});export{re as _};
