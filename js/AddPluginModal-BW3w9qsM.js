var Y=Object.defineProperty,Z=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var F=(p,d,s)=>d in p?Y(p,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[d]=s,c=(p,d)=>{for(var s in d||(d={}))Q.call(d,s)&&F(p,s,d[s]);if(B)for(var s of B(d))W.call(d,s)&&F(p,s,d[s]);return p},E=(p,d)=>Z(p,j(d));import{M as q,$ as o,V as H,bY as X,Z as ee,R as A,_ as le}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as ae}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as te,a as m}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";/* empty css                  */import"./css-BBEQ4fog.js";import"./css-Co2xKw2s.js";/* empty css               *//* empty css                     *//* empty css                  */import{U as oe}from"./UploadAvatar-a3x1lqjM.js";import{ElInput as g}from"./index-BjDsryRX.js";import{ElButton as x}from"./index-oBOAcXl-.js";import{E as re,a as ue}from"./index-DcZY4wgD.js";import{ElRadioGroup as ie,ElRadio as I}from"./index-C5wmh2tf.js";import{k as de,r as n,o as se,B as y,n as v,E as u,J as a,u as e,p as M,m as T,F as D,N as O,q as pe,L as k,y as K}from"../jse/index-index-D3Xb8oT_.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./el-image-viewer-DlaFkWIK.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-C33Sf0pH.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./index-CMBjNRIa.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";import"./index-pv0R11Cf.js";import"./omit-CbyqVLxv.js";import"./_baseSlice-DZe_dRSe.js";const ne={class:"head-con-content flex flex-row gap-4"},me=de({__name:"AddPluginModal",emits:["reload"],setup(p,{expose:d,emit:s}){const L=s,R=n([]),S=n([]),z=n([{label:"None",value:"none"},{label:"Service token / ApiKey",value:"apiKey"}]);se(()=>{q.get("/api/v1/model/list?supportEmbed=true").then(i=>{R.value=i.data}),q.get("/api/v1/model/list?supportRerankerLlmList=true").then(i=>{S.value=i.data})}),d({openDialog:P});const _=n(),b=n(!1),h=n(!0),V=n([]),r=n({alias:"",deptId:"",icon:"",title:"",authType:"none",description:"",englishName:"",headers:"",position:""}),C=n(!1),J=n({name:[{required:!0,message:o("message.required"),trigger:"blur"}],description:[{required:!0,message:o("message.required"),trigger:"blur"}],baseUrl:[{required:!0,message:o("message.required"),trigger:"blur"}],authType:[{required:!0,message:o("message.required"),trigger:"blur"}],tokenKey:[{required:!0,message:o("message.required"),trigger:"blur"}],tokenValue:[{required:!0,message:o("message.required"),trigger:"blur"}],position:[{required:!0,message:o("message.required"),trigger:"blur"}]});function P(i){i.id&&(h.value=!1,i.headers&&(V.value=JSON.parse(i.headers))),r.value=E(c({},i),{authType:i.authType||"none"}),b.value=!0}function $(){var i;(i=_.value)==null||i.validate(t=>{if(t){const l=c({},r.value),U=[...V.value];h.value?q.post("/api/v1/plugin/plugin/save",E(c({},l),{headers:U})).then(f=>{f.errorCode===0&&(b.value=!1,A.success(o("message.saveOkMessage")),L("reload"))}):q.post("/api/v1/plugin/plugin/update",E(c({},l),{headers:U})).then(f=>{f.errorCode===0&&(b.value=!1,A.success(o("message.updateOkMessage")),L("reload"))})}})}function N(){var i;(i=_.value)==null||i.resetFields(),h.value=!0,r.value={},b.value=!1}function w(){V.value.push({label:"",value:""})}function G(i){V.value.splice(i,1)}return(i,t)=>(v(),y(e(ae),{modelValue:b.value,"onUpdate:modelValue":t[8]||(t[8]=l=>b.value=l),draggable:"",title:h.value?e(o)("button.add"):e(o)("button.edit"),"before-close":N,"close-on-click-modal":!1,"align-center":""},{footer:u(()=>[a(e(x),{onClick:N},{default:u(()=>[k(K(e(o)("button.cancel")),1)]),_:1}),a(e(x),{type:"primary",onClick:$,loading:C.value,disabled:C.value},{default:u(()=>[k(K(e(o)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:u(()=>[a(e(te),{"label-width":"150px",ref_key:"saveForm",ref:_,model:r.value,"status-icon":"",rules:J.value},{default:u(()=>[a(e(m),{prop:"icon",label:e(o)("plugin.icon"),style:{display:"flex","align-items":"center"}},{default:u(()=>[a(oe,{modelValue:r.value.icon,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value.icon=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(e(m),{prop:"name",label:e(o)("plugin.name")},{default:u(()=>[a(e(g),{modelValue:r.value.name,"onUpdate:modelValue":t[1]||(t[1]=l=>r.value.name=l),modelModifiers:{trim:!0},placeholder:e(o)("plugin.placeholder.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(m),{prop:"baseUrl",label:e(o)("plugin.baseUrl")},{default:u(()=>[a(e(g),{modelValue:r.value.baseUrl,"onUpdate:modelValue":t[2]||(t[2]=l=>r.value.baseUrl=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),a(e(m),{prop:"description",label:e(o)("plugin.description")},{default:u(()=>[a(e(g),{modelValue:r.value.description,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value.description=l),modelModifiers:{trim:!0},rows:4,type:"textarea",placeholder:e(o)("plugin.placeholder.description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(m),{prop:"Headers",label:"Headers"},{default:u(()=>[(v(!0),T(D,null,O(V.value,(l,U)=>(v(),T("div",{class:"headers-container-reduce flex flex-row gap-4",key:U},[pe("div",ne,[a(e(g),{modelValue:l.label,"onUpdate:modelValue":f=>l.label=f,modelModifiers:{trim:!0},placeholder:"header name"},null,8,["modelValue","onUpdate:modelValue"]),a(e(g),{modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,modelModifiers:{trim:!0},placeholder:"header value"},null,8,["modelValue","onUpdate:modelValue"]),a(e(H),{size:"20",onClick:G,style:{cursor:"pointer"}},{default:u(()=>[a(e(X))]),_:1})])]))),128)),a(e(x),{onClick:w,class:"addHeadersBtn"},{default:u(()=>[a(e(H),{size:"18",style:{"margin-right":"4px"}},{default:u(()=>[a(e(ee))]),_:1}),k(" "+K(e(o)("button.add"))+"headers ",1)]),_:1})]),_:1}),a(e(m),{prop:"authType",label:e(o)("plugin.authType")},{default:u(()=>[a(e(re),{modelValue:r.value.authType,"onUpdate:modelValue":t[4]||(t[4]=l=>r.value.authType=l)},{default:u(()=>[(v(!0),T(D,null,O(z.value,l=>(v(),y(e(ue),{key:l.value,label:l.label,value:l.value||""},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),r.value.authType==="apiKey"?(v(),y(e(m),{key:0,prop:"position",label:e(o)("plugin.position")},{default:u(()=>[a(e(ie),{modelValue:r.value.position,"onUpdate:modelValue":t[5]||(t[5]=l=>r.value.position=l)},{default:u(()=>[a(e(I),{value:"headers"},{default:u(()=>[...t[9]||(t[9]=[k("headers",-1)])]),_:1}),a(e(I),{value:"query"},{default:u(()=>[...t[10]||(t[10]=[k("query",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):M("",!0),r.value.authType==="apiKey"?(v(),y(e(m),{key:1,prop:"tokenKey",label:e(o)("plugin.tokenKey")},{default:u(()=>[a(e(g),{modelValue:r.value.tokenKey,"onUpdate:modelValue":t[6]||(t[6]=l=>r.value.tokenKey=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])):M("",!0),r.value.authType==="apiKey"?(v(),y(e(m),{key:2,prop:"tokenValue",label:e(o)("plugin.tokenValue")},{default:u(()=>[a(e(g),{modelValue:r.value.tokenValue,"onUpdate:modelValue":t[7]||(t[7]=l=>r.value.tokenValue=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])):M("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}}),vl=le(me,[["__scopeId","data-v-eb6a4ec8"]]);export{vl as default};
