var $=Object.defineProperty;var N=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var F=(s,u,d)=>u in s?$(s,u,{enumerable:!0,configurable:!0,writable:!0,value:d}):s[u]=d,q=(s,u)=>{for(var d in u||(u={}))j.call(u,d)&&F(s,d,u[d]);if(N)for(var d of N(u))z.call(u,d)&&F(s,d,u[d]);return s};var y=(s,u,d)=>new Promise((k,t)=>{var V=p=>{try{b(d.next(p))}catch(f){t(f)}},E=p=>{try{b(d.throw(p))}catch(f){t(f)}},b=p=>p.done?k(p.value):Promise.resolve(p.value).then(V,E);b((d=d.apply(s,u)).next())});import{$ as l,V as A,a0 as J,M as I,R as S,_ as G}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";/* empty css                */import{E as H,a as n}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import"./css-DCrZaNHy.js";/* empty css                   */import{U as K}from"./UploadAvatar-a3x1lqjM.js";import{ElInput as c}from"./index-BjDsryRX.js";import{E as L,a as U}from"./index-DcZY4wgD.js";import{E as Q}from"./index-CMBjNRIa.js";import{ElSwitch as W}from"./index-CHf9SThW.js";import{ElButton as X}from"./index-oBOAcXl-.js";import{k as Y,r as v,w as Z,o as ee,m as h,n as g,J as a,u as e,E as i,F as x,N as w,B as _,q as le,L as B,y as P}from"../jse/index-index-D3Xb8oT_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./index-Bxb6QITi.js";import"./_baseClone-trfKWgGN.js";import"./el-image-viewer-DlaFkWIK.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-C33Sf0pH.js";import"./scroll-C2492Iw_.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./event-BB_Ol6Sd.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";import"./index-pv0R11Cf.js";import"./vnode-DysYOGZN.js";import"./validator-D2YZey62.js";import"./index-Dg3fRnQE.js";const oe={class:"document-config-container"},te={style:{display:"flex","align-items":"center"}},re=Y({__name:"DocumentCollectionDataConfig",props:{detailData:{type:Object,default:()=>({id:"",alias:"",deptId:"",icon:"",title:"",description:"",summaryPrompt:"",slug:"",vectorStoreEnable:!1,vectorStoreType:"",vectorStoreCollection:"",vectorStoreConfig:"",vectorEmbedModelId:"",options:{canUpdateEmbeddingModel:!0},rerankModelId:"",searchEngineEnable:!1,englishName:""}),required:!0}},emits:["reload"],setup(s,{emit:u}){const d=s,k=u,t=v(q({},d.detailData));Z(()=>d.detailData,m=>{t.value=q({},m)},{immediate:!0,deep:!0});const V=v([]),E=v([]),b=v([{value:"milvus",label:"Milvus"},{value:"redis",label:"Redis"},{value:"opensearch",label:"OpenSearch"},{value:"elasticsearch",label:"ElasticSearch"},{value:"aliyun",label:l("documentCollection.alibabaCloud")},{value:"qcloud",label:l("documentCollection.tencentCloud")}]),p=()=>y(null,null,function*(){try{const r=yield I.get("/api/v1/model/list?modelType=embeddingModel",{});r.errorCode===0&&(V.value=r.data)}catch(m){S.error(l("message.apiError")),console.error("获取嵌入模型列表失败：",m)}}),f=()=>y(null,null,function*(){try{const m=yield I.get("/api/v1/model/list?modelType=rerankModel");E.value=m.data}catch(m){S.error(l("message.apiError")),console.error("获取重排模型列表失败：",m)}});ee(()=>y(null,null,function*(){yield p(),yield f()}));const T=v(),M=v(!1),O=v({deptId:[{required:!0,message:l("message.required"),trigger:"blur"}],englishName:[{required:!0,message:l("message.required"),trigger:"blur"}],description:[{required:!0,message:l("message.required"),trigger:"blur"}],title:[{required:!0,message:l("message.required"),trigger:"blur"}],vectorStoreType:[{required:!0,message:l("message.required"),trigger:"blur"}],vectorStoreCollection:[{required:!0,message:l("message.required"),trigger:"blur"}],vectorStoreConfig:[{required:!0,message:l("message.required"),trigger:"blur"}],vectorEmbedModelId:[{required:!0,message:l("message.required"),trigger:"blur"}]});function R(){return y(this,null,function*(){var m;try{if(!(yield(m=T.value)==null?void 0:m.validate()))return;M.value=!0,(yield I.post("/api/v1/documentCollection/update",t.value)).errorCode===0&&(S.success(l("message.saveOkMessage")),k("reload"))}catch(r){S.error(l("message.saveFail")),console.error("保存失败：",r)}finally{M.value=!1}})}return(m,r)=>(g(),h("div",oe,[a(e(H),{"label-width":"150px",ref_key:"saveForm",ref:T,model:t.value,"status-icon":"",rules:O.value},{default:i(()=>[a(e(n),{prop:"icon",label:e(l)("documentCollection.icon"),style:{display:"flex","align-items":"center"}},{default:i(()=>[a(K,{modelValue:t.value.icon,"onUpdate:modelValue":r[0]||(r[0]=o=>t.value.icon=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(e(n),{prop:"title",label:e(l)("documentCollection.title")},{default:i(()=>[a(e(c),{modelValue:t.value.title,"onUpdate:modelValue":r[1]||(r[1]=o=>t.value.title=o),modelModifiers:{trim:!0},placeholder:e(l)("documentCollection.placeholder.title")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(n),{prop:"alias",label:e(l)("documentCollection.alias")},{default:i(()=>[a(e(c),{modelValue:t.value.alias,"onUpdate:modelValue":r[2]||(r[2]=o=>t.value.alias=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),a(e(n),{prop:"englishName",label:e(l)("documentCollection.englishName")},{default:i(()=>[a(e(c),{modelValue:t.value.englishName,"onUpdate:modelValue":r[3]||(r[3]=o=>t.value.englishName=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),a(e(n),{prop:"description",label:e(l)("documentCollection.description")},{default:i(()=>[a(e(c),{modelValue:t.value.description,"onUpdate:modelValue":r[4]||(r[4]=o=>t.value.description=o),modelModifiers:{trim:!0},rows:4,type:"textarea",placeholder:e(l)("documentCollection.placeholder.description")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(n),{prop:"summaryPrompt",label:e(l)("documentCollection.summaryPrompt")},{default:i(()=>[a(e(c),{modelValue:t.value.summaryPrompt,"onUpdate:modelValue":r[5]||(r[5]=o=>t.value.summaryPrompt=o),modelModifiers:{trim:!0},rows:4,type:"textarea",placeholder:e(l)("documentCollection.placeholder.summaryPrompt")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(n),{prop:"vectorStoreType",label:e(l)("documentCollection.vectorStoreType")},{default:i(()=>[a(e(L),{modelValue:t.value.vectorStoreType,"onUpdate:modelValue":r[6]||(r[6]=o=>t.value.vectorStoreType=o),placeholder:e(l)("documentCollection.placeholder.vectorStoreType")},{default:i(()=>[(g(!0),h(x,null,w(b.value,o=>(g(),_(e(U),{key:o.value,label:o.label,value:o.value||""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(n),{prop:"vectorStoreCollection",label:e(l)("documentCollection.vectorStoreCollection")},{default:i(()=>[a(e(c),{modelValue:t.value.vectorStoreCollection,"onUpdate:modelValue":r[7]||(r[7]=o=>t.value.vectorStoreCollection=o),modelModifiers:{trim:!0},placeholder:e(l)("documentCollection.placeholder.vectorStoreCollection")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(n),{prop:"vectorStoreConfig",label:e(l)("documentCollection.vectorStoreConfig")},{default:i(()=>[a(e(c),{modelValue:t.value.vectorStoreConfig,"onUpdate:modelValue":r[8]||(r[8]=o=>t.value.vectorStoreConfig=o),modelModifiers:{trim:!0},rows:4,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),a(e(n),{prop:"vectorEmbedModelId"},{label:i(()=>[le("span",te,[B(P(e(l)("documentCollection.vectorEmbedLlmId"))+" ",1),a(e(Q),{content:e(l)("documentCollection.vectorEmbedModelTips"),placement:"top",effect:"light"},{default:i(()=>[a(e(A),{style:{"margin-left":"4px",color:"#909399",cursor:"pointer","font-size":"14px"}},{default:i(()=>[a(e(J))]),_:1})]),_:1},8,["content"])])]),default:i(()=>{var o,D;return[a(e(L),{modelValue:t.value.vectorEmbedModelId,"onUpdate:modelValue":r[9]||(r[9]=C=>t.value.vectorEmbedModelId=C),disabled:!((D=(o=t.value)==null?void 0:o.options)!=null&&D.canUpdateEmbeddingModel),placeholder:e(l)("documentCollection.placeholder.embedLlm")},{default:i(()=>[(g(!0),h(x,null,w(V.value,C=>(g(),_(e(U),{key:C.id,label:C.title,value:C.id||""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]}),_:1}),a(e(n),{prop:"rerankModelId",label:e(l)("documentCollection.rerankLlmId")},{default:i(()=>[a(e(L),{modelValue:t.value.rerankModelId,"onUpdate:modelValue":r[10]||(r[10]=o=>t.value.rerankModelId=o),placeholder:e(l)("documentCollection.placeholder.rerankLlm")},{default:i(()=>[(g(!0),h(x,null,w(E.value,o=>(g(),_(e(U),{key:o.id,label:o.title,value:o.id||""},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),a(e(n),{prop:"searchEngineEnable",label:e(l)("documentCollection.searchEngineEnable")},{default:i(()=>[a(e(W),{modelValue:t.value.searchEngineEnable,"onUpdate:modelValue":r[11]||(r[11]=o=>t.value.searchEngineEnable=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(e(n),{style:{"margin-top":"20px","text-align":"right"}},{default:i(()=>[a(e(X),{type:"primary",onClick:R,loading:M.value,disabled:M.value},{default:i(()=>[B(P(e(l)("button.save")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model","rules"])]))}}),ll=G(re,[["__scopeId","data-v-ba04b2fa"]]);export{ll as default};
