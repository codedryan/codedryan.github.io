import{M as d,$ as f,R as E}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as b}from"./el-empty-CDAlv280.js";import{E as k,a as O}from"./el-tabs-BUyJm6xP.js";import _ from"./OAuthConfig-D7vMI9RP.js";import{ElButton as B}from"./index-oBOAcXl-.js";import{k as N,r as n,o as U,m as v,n as p,J as s,B as c,p as V,E as l,L as I,y as M,u as i,F as S,N as x}from"../jse/index-index-D3Xb8oT_.js";import"./index-Bxb6QITi.js";import"./use-wheel-C9oFsIdW.js";import"./raf-BVBe43_O.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./event-BB_Ol6Sd.js";import"./index-DSAOTmKA.js";import"./vnode-DysYOGZN.js";import"./omit-CbyqVLxv.js";import"./_baseClone-trfKWgGN.js";import"./_baseSlice-DZe_dRSe.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./el-card-DGd_zL6P.js";import"./el-col-D5ifHzRC.js";import"./css-CLrSDUNG.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./css-C9o_OfXA.js";/* empty css                  */import"./el-row-u3yI-Elm.js";/* empty css               *//* empty css                     *//* empty css                  */import"./DictSelect-DdOvS-6R.js";import"./index-DcZY4wgD.js";import"./index-CMBjNRIa.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./scroll-C2492Iw_.js";import"./index-pv0R11Cf.js";import"./UploadAvatar-a3x1lqjM.js";import"./el-image-viewer-DlaFkWIK.js";import"./debounce-AsHllEOy.js";import"./index-C33Sf0pH.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./DynamicHeaders-D7JhPeUG.js";import"./index-BjDsryRX.js";import"./DynamicParams-BlHUGnR7.js";import"./FieldMapping-QpubKO_Q.js";import"./index-Ce9mjW49.js";import"./index-Dg3fRnQE.js";const T={class:"page-container"},wt=N({__name:"oauth",setup(D){const e=n([]),m=n(!1),r=n("");U(()=>{u("oauthConfig")});const g=()=>({id:crypto.randomUUID(),platform:"",displayName:"OAuth",icon:"",enabled:1,roleId:"",clientId:"",clientSecret:"",redirectUrl:"",authUrl:"",authHttpConfig:{params:{}},tokenUrl:"",tokenHttpConfig:{method:"get",headers:{},params:{}},userInfoUrl:"",userInfoHttpConfig:{method:"get",headers:{},params:{},fieldMapping:{userKey:"",username:"",nickname:"",avatar:""}}});function h(a){m.value=!0,d.post("/api/v1/sysOption/saveOption",{key:a,value:JSON.stringify(e.value)}).then(t=>{m.value=!1,t.errorCode===0&&(E.success(f("message.saveOkMessage")),u(a))})}function u(a){d.get("/api/v1/sysOption/getByKey",{params:{key:a}}).then(t=>{t.errorCode===0&&t.data&&(e.value=JSON.parse(t.data.value),r.value=e.value[0].id)})}function y(a,t){if(t==="add"){const o=g();e.value.push(o),r.value=o.id}t==="remove"&&(e.value=e.value.filter(o=>o.id!==a),r.value===a&&(r.value=e.value.length>0?e.value[0].id:""))}return(a,t)=>(p(),v("div",T,[s(i(B),{class:"mb-2",type:"primary",onClick:t[0]||(t[0]=o=>h("oauthConfig")),disabled:m.value},{default:l(()=>[I(M(i(f)("button.save")),1)]),_:1},8,["disabled"]),s(i(O),{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=o=>r.value=o),type:"card",editable:"",onEdit:y},{default:l(()=>[(p(!0),v(S,null,x(e.value,(o,C)=>(p(),c(i(k),{key:C,label:o.displayName,name:o.id},{default:l(()=>[s(_,{"config-json":o},null,8,["config-json"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),e.value.length===0?(p(),c(i(b),{key:0})):V("",!0)]))}});export{wt as default};
