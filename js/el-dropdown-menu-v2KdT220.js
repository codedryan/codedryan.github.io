var Se=Object.defineProperty,Fe=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ae=(e,o,n)=>o in e?Se(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,R=(e,o)=>{for(var n in o||(o={}))Re.call(o,n)&&ae(e,n,o[n]);if(se)for(var n of se(o))Ne.call(o,n)&&ae(e,n,o[n]);return e},H=(e,o)=>Fe(e,Oe(o));import{ElButton as pe}from"./index-oBOAcXl-.js";import{b as Y,r as ke,d as x,O as Be,E as Pe}from"./index-CMBjNRIa.js";import{E as Me}from"./index-CbSmxnRE.js";import{an as M,bm as q,bn as C,bv as X,dS as $,bk as Ke,bB as De,bx as P,aG as Ae,V as fe,ao as ne,br as Ge,bC as Le,ax as ee,dT as ie,cB as me,aq as ze}from"./bootstrap-Bf65uz2I.js";import{k as K,x as S,r as _,i as F,o as Ue,u as T,ak as He,X as G,c as E,t as V,al as Ve,w as Ye,A as Je,T as y,B as L,n as k,E as I,J as N,ap as je,aq as We,m as J,p as oe,a7 as qe,D as j,s as W,g as ve,q as Xe,V as Qe,F as Ze,z as xe}from"../jse/index-index-D3Xb8oT_.js";import{u as ge}from"./index-Bxb6QITi.js";import{u as eo}from"./use-form-common-props-IzjzSHax.js";import{c as oo}from"./castArray-BBset58W.js";import{c as be}from"./refs-D6FW0B1r.js";const no=K({inheritAttrs:!1});function to(e,o,n,t,i,d){return S(e.$slots,"default")}var ro=M(no,[["render",to],["__file","collection.vue"]]);const lo=K({name:"ElCollectionItem",inheritAttrs:!1});function so(e,o,n,t,i,d){return S(e.$slots,"default")}var ao=M(lo,[["render",so],["__file","collection-item.vue"]]);const we="data-el-collection-item",io=e=>{const o=`El${e}Collection`,n=`${o}Item`,t=Symbol(o),i=Symbol(n),d=H(R({},ro),{name:o,setup(){const l=_(),c=new Map;G(t,{itemMap:c,getItems:()=>{const p=T(l);if(!p)return[];const r=Array.from(p.querySelectorAll(`[${we}]`));return[...c.values()].sort((g,w)=>r.indexOf(g.ref)-r.indexOf(w.ref))},collectionRef:l})}}),a=H(R({},ao),{name:n,setup(l,{attrs:c}){const v=_(),p=F(t,void 0);G(i,{collectionItemRef:v}),Ue(()=>{const r=T(v);r&&p.itemMap.set(r,R({ref:r},c))}),He(()=>{const r=T(v);p.itemMap.delete(r)})}});return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:d,ElCollectionItem:a}},uo=q({style:{type:C([String,Array,Object])},currentTabId:{type:C(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:C(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:co,ElCollectionItem:po,COLLECTION_INJECTION_KEY:he,COLLECTION_ITEM_INJECTION_KEY:fo}=io("RovingFocusGroup"),te=Symbol("elRovingFocusGroup"),Ie=Symbol("elRovingFocusGroupItem"),mo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},vo=(e,o)=>e,go=(e,o,n)=>{const t=X(e),i=vo(t);return mo[i]},bo=(e,o)=>e.map((n,t)=>e[(t+o)%e.length]),de=e=>{const{activeElement:o}=document;for(const n of e)if(n===o||(n.focus(),o!==document.activeElement))return},ue="currentTabIdChange",ce="rovingFocusGroup.entryFocus",wo={bubbles:!1,cancelable:!0},ho=K({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:uo,emits:[ue,"entryFocus"],setup(e,{emit:o}){var n;const t=_((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),i=_(!1),d=_(!1),a=_(),{getItems:l}=F(he,void 0),c=E(()=>[{outline:"none"},e.style]),v=u=>{o(ue,u)},p=()=>{i.value=!0},r=$(u=>{var b;(b=e.onMousedown)==null||b.call(e,u)},()=>{d.value=!0}),s=$(u=>{var b;(b=e.onFocus)==null||b.call(e,u)},u=>{const b=!T(d),{target:A,currentTarget:h}=u;if(A===h&&b&&!T(i)){const f=new Event(ce,wo);if(h==null||h.dispatchEvent(f),!f.defaultPrevented){const O=l().filter(B=>B.focusable),z=O.find(B=>B.active),U=O.find(B=>B.id===T(t)),Z=[z,U,...O].filter(Boolean).map(B=>B.ref);de(Z)}}d.value=!1}),g=$(u=>{var b;(b=e.onBlur)==null||b.call(e,u)},()=>{i.value=!1}),w=(...u)=>{o("entryFocus",...u)},D=u=>{const b=go(u);if(b){u.preventDefault();let h=l().filter(f=>f.focusable).map(f=>f.ref);switch(b){case"last":{h.reverse();break}case"prev":case"next":{b==="prev"&&h.reverse();const f=h.indexOf(u.currentTarget);h=e.loop?bo(h,f+1):h.slice(f+1);break}}Je(()=>{de(h)})}};G(te,{currentTabbedId:Ve(t),loop:V(e,"loop"),tabIndex:E(()=>T(i)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:c,orientation:V(e,"orientation"),dir:V(e,"dir"),onItemFocus:v,onItemShiftTab:p,onBlur:g,onFocus:s,onMousedown:r,onKeydown:D}),Ye(()=>e.currentTabId,u=>{t.value=u!=null?u:null}),Ke(a,ce,w)}});function Io(e,o,n,t,i,d){return S(e.$slots,"default")}var yo=M(ho,[["render",Io],["__file","roving-focus-group-impl.vue"]]);const _o=K({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:co,ElRovingFocusGroupImpl:yo}});function Eo(e,o,n,t,i,d){const a=y("el-roving-focus-group-impl"),l=y("el-focus-group-collection");return k(),L(l,null,{default:I(()=>[N(a,je(We(e.$attrs)),{default:I(()=>[S(e.$slots,"default")]),_:3},16)]),_:3})}var Co=M(_o,[["render",Eo],["__file","roving-focus-group.vue"]]);const To=q({trigger:H(R({},x.trigger),{type:C([String,Array])}),triggerKeys:{type:C(Array),default:()=>[P.enter,P.numpadEnter,P.space,P.down]},virtualTriggering:x.virtualTriggering,virtualRef:x.virtualRef,effect:H(R({},Y.effect),{default:"light"}),type:{type:C(String)},placement:{type:C(String),default:"bottom"},popperOptions:{type:C(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:C([Number,String]),default:0},maxHeight:{type:C([Number,String]),default:""},popperClass:Y.popperClass,popperStyle:Y.popperStyle,disabled:Boolean,role:{type:String,values:ke,default:"menu"},buttonProps:{type:C(Object)},teleported:Y.teleported,persistent:{type:Boolean,default:!0}}),ye=q({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:De}}),$o=q({onKeydown:{type:C(Function)}}),Q=Symbol("elDropdown"),_e="elDropdown",{ButtonGroup:So}=pe,Fo=K({name:"ElDropdown",components:{ElButton:pe,ElButtonGroup:So,ElScrollbar:Me,ElTooltip:Pe,ElRovingFocusGroup:Co,ElOnlyChild:Be,ElIcon:fe,ArrowDown:Ae},props:To,emits:["visible-change","click","command"],setup(e,{emit:o}){const n=ve(),t=ne("dropdown"),{t:i}=Ge(),d=_(),a=_(),l=_(),c=_(),v=_(null),p=_(null),r=_(!1),s=E(()=>({maxHeight:Le(e.maxHeight)})),g=E(()=>[t.m(f.value)]),w=E(()=>oo(e.trigger)),D=ge().value,u=E(()=>e.id||D);function b(){var m;(m=l.value)==null||m.onClose(void 0,0)}function A(){var m;(m=l.value)==null||m.onClose()}function h(){var m;(m=l.value)==null||m.onOpen()}const f=eo();function O(...m){o("command",...m)}function z(){}function U(){const m=T(c);w.value.includes("hover")&&(m==null||m.focus({preventScroll:!0})),p.value=null}function re(m){p.value=m}function Z(){o("visible-change",!0)}function B(m){var le;r.value=(m==null?void 0:m.type)==="keydown",(le=c.value)==null||le.focus()}function $e(){o("visible-change",!1)}return G(Q,{contentRef:c,role:E(()=>e.role),triggerId:u,isUsingKeyboard:r,onItemEnter:z,onItemLeave:U,handleClose:A}),G(_e,{instance:n,dropdownSize:f,handleClick:b,commandHandler:O,trigger:V(e,"trigger"),hideOnClick:V(e,"hideOnClick")}),{t:i,ns:t,scrollbar:v,wrapStyle:s,dropdownTriggerKls:g,dropdownSize:f,triggerId:u,currentTabId:p,handleCurrentTabIdChange:re,handlerMainButtonClick:m=>{o("click",m)},handleClose:A,handleOpen:h,handleBeforeShowTooltip:Z,handleShowTooltip:B,handleBeforeHideTooltip:$e,popperRef:l,contentRef:c,triggeringElementRef:d,referenceElementRef:a}}});function Oo(e,o,n,t,i,d){var a;const l=y("el-roving-focus-group"),c=y("el-scrollbar"),v=y("el-only-child"),p=y("el-tooltip"),r=y("el-button"),s=y("arrow-down"),g=y("el-icon"),w=y("el-button-group");return k(),J("div",{class:W([e.ns.b(),e.ns.is("disabled",e.disabled)])},[N(p,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"popper-style":e.popperStyle,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":e.trigger==="hover"?e.showTimeout:0,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"virtual-ref":(a=e.virtualRef)!=null?a:e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"","focus-on-target":"",persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},qe({content:I(()=>[N(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:I(()=>[N(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange},{default:I(()=>[S(e.$slots,"dropdown")]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:I(()=>[N(v,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:I(()=>[S(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","placement","popper-class","popper-style","trigger","trigger-keys","trigger-target-el","show-arrow","show-after","hide-after","virtual-ref","virtual-triggering","disabled","transition","teleported","persistent","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(k(),L(w,{key:0},{default:I(()=>[N(r,j({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:I(()=>[S(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),N(r,j({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:I(()=>[N(g,{class:W(e.ns.e("icon"))},{default:I(()=>[N(s)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):oe("v-if",!0)],2)}var Ro=M(Fo,[["render",Oo],["__file","dropdown.vue"]]);const No=K({components:{ElRovingFocusCollectionItem:po},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:n,onItemFocus:t,onItemShiftTab:i,onKeydown:d}=F(te,void 0),a=ge(),l=_(),c=$(s=>{o("mousedown",s)},s=>{e.focusable?t(T(a)):s.preventDefault()}),v=$(s=>{o("focus",s)},()=>{t(T(a))}),p=$(s=>{o("keydown",s)},s=>{const{shiftKey:g,target:w,currentTarget:D}=s;if(X(s)===P.tab&&g){i();return}w===D&&d(s)}),r=E(()=>n.value===T(a));return G(Ie,{rovingFocusGroupItemRef:l,tabIndex:E(()=>T(r)?0:-1),handleMousedown:c,handleFocus:v,handleKeydown:p}),{id:a,handleKeydown:p,handleFocus:v,handleMousedown:c}}});function ko(e,o,n,t,i,d){const a=y("el-roving-focus-collection-item");return k(),L(a,{id:e.id,focusable:e.focusable,active:e.active},{default:I(()=>[S(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Bo=M(No,[["render",ko],["__file","roving-focus-item.vue"]]);const Po=K({name:"DropdownItemImpl",components:{ElIcon:fe},props:ye,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const n=ne("dropdown"),{role:t}=F(Q,void 0),{collectionItemRef:i}=F(fo,void 0),{rovingFocusGroupItemRef:d,tabIndex:a,handleFocus:l,handleKeydown:c,handleMousedown:v}=F(Ie,void 0),p=be(i,d),r=E(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),s=$(g=>{const w=X(g);if([P.enter,P.numpadEnter,P.space].includes(w))return g.preventDefault(),g.stopImmediatePropagation(),o("clickimpl",g),!0},c);return{ns:n,itemRef:p,dataset:{[we]:""},role:r,tabIndex:a,handleFocus:l,handleKeydown:s,handleMousedown:v}}});function Mo(e,o,n,t,i,d){const a=y("el-icon");return k(),J(Ze,null,[e.divided?(k(),J("li",{key:0,role:"separator",class:W(e.ns.bem("menu","item","divided"))},null,2)):oe("v-if",!0),Xe("li",j({ref:e.itemRef},R(R({},e.dataset),e.$attrs),{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:l=>e.$emit("clickimpl",l),onFocus:e.handleFocus,onKeydown:ee(e.handleKeydown,["self"]),onMousedown:e.handleMousedown,onPointermove:l=>e.$emit("pointermove",l),onPointerleave:l=>e.$emit("pointerleave",l)}),[e.icon?(k(),L(a,{key:0},{default:I(()=>[(k(),L(Qe(e.icon)))]),_:1})):oe("v-if",!0),S(e.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Ko=M(Po,[["render",Mo],["__file","dropdown-item-impl.vue"]]);const Ee=()=>{const e=F(_e,{}),o=E(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},Do=K({name:"ElDropdownItem",components:{ElRovingFocusItem:Bo,ElDropdownItemImpl:Ko},inheritAttrs:!1,props:ye,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:n}){const{elDropdown:t}=Ee(),i=ve(),{onItemEnter:d,onItemLeave:a}=F(Q,void 0),l=$(r=>(o("pointermove",r),r.defaultPrevented),ie(r=>{if(e.disabled){a(r);return}const s=r.currentTarget;s===document.activeElement||s.contains(document.activeElement)||(d(r),r.defaultPrevented||s==null||s.focus({preventScroll:!0}))})),c=$(r=>(o("pointerleave",r),r.defaultPrevented),ie(a)),v=$(r=>{if(!e.disabled)return o("click",r),r.type!=="keydown"&&r.defaultPrevented},r=>{var s,g,w;if(e.disabled){r.stopImmediatePropagation();return}(s=t==null?void 0:t.hideOnClick)!=null&&s.value&&((g=t.handleClick)==null||g.call(t)),(w=t.commandHandler)==null||w.call(t,e.command,i,r)}),p=E(()=>R(R({},e),n));return{handleClick:v,handlePointerMove:l,handlePointerLeave:c,propsAndAttrs:p}}});function Ao(e,o,n,t,i,d){const a=y("el-dropdown-item-impl"),l=y("el-roving-focus-item");return k(),L(l,{focusable:!e.disabled},{default:I(()=>[N(a,j(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:I(()=>[S(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])}var Ce=M(Do,[["render",Ao],["__file","dropdown-item.vue"]]);const Go=K({name:"ElDropdownMenu",props:$o,setup(e){const o=ne("dropdown"),{_elDropdownSize:n}=Ee(),t=n.value,{contentRef:i,role:d,triggerId:a,isUsingKeyboard:l,handleClose:c}=F(Q,void 0),{rovingFocusGroupRef:v,rovingFocusGroupRootStyle:p,onBlur:r,onFocus:s,onKeydown:g,onMousedown:w}=F(te,void 0),{collectionRef:D}=F(he,void 0),u=E(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),b=be(i,v,D),A=$(f=>{var O;(O=e.onKeydown)==null||O.call(e,f)},f=>{const{currentTarget:O,target:z}=f,U=X(f);if(O.contains(z),P.tab===U)return c();g(f)});function h(f){l.value&&s(f)}return{size:t,rovingFocusGroupRootStyle:p,dropdownKls:u,role:d,triggerId:a,dropdownListWrapperRef:b,handleKeydown:A,onBlur:r,handleFocus:h,onMousedown:w}}});function Lo(e,o,n,t,i,d){return k(),J("ul",{ref:e.dropdownListWrapperRef,class:W(e.dropdownKls),style:xe(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onFocusin:e.handleFocus,onFocusout:e.onBlur,onKeydown:ee(e.handleKeydown,["self"]),onMousedown:ee(e.onMousedown,["self"])},[S(e.$slots,"default")],46,["role","aria-labelledby","onFocusin","onFocusout","onKeydown","onMousedown"])}var Te=M(Go,[["render",Lo],["__file","dropdown-menu.vue"]]);const Zo=ze(Ro,{DropdownItem:Ce,DropdownMenu:Te}),xo=me(Ce),en=me(Te);export{Zo as E,en as a,xo as b};
