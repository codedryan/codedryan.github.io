var ve=Object.defineProperty,Ne=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var Z=(a,d,l)=>d in a?ve(a,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[d]=l,K=(a,d)=>{for(var l in d||(d={}))Ve.call(d,l)&&Z(a,l,d[l]);if(J)for(var l of J(d))Ee.call(d,l)&&Z(a,l,d[l]);return a},z=(a,d)=>Ne(a,he(d));import{bo as f,bp as g,bm as ye,bn as j,bq as ge,an as Ie,br as we,ao as Se,bs as A,d as E,X as Q,aG as _e,bt as Ae,V as Y,bu as Fe,Z as Pe,ax as ke,bv as Ce,bw as De,bx as ee,by as Te,aq as xe}from"./bootstrap-Bf65uz2I.js";import{ElInput as Be}from"./index-BjDsryRX.js";import{u as Me}from"./index-bT9OJj6t.js";import{U as h,I as C,C as ue}from"./event-BB_Ol6Sd.js";import{v as ne}from"./index-BKzCwxYe.js";import{u as $e}from"./use-form-item-DVWmmqeW.js";import{u as Ke,b as ze}from"./use-form-common-props-IzjzSHax.js";import{k as le,r as Ge,G as Oe,c as y,w as te,o as Re,a6 as Le,m as G,n as v,I as ae,p as re,J as O,u as r,s as R,x as F,E as P,B as k,a7 as Ue,a8 as Xe}from"../jse/index-index-D3Xb8oT_.js";import"./index-C33Sf0pH.js";import"./index-m1ZP1zbM.js";import"./aria-DEUWDJ1E.js";import"./_overRest-Bb9G3v08.js";import"./index-Bxb6QITi.js";const qe=ye(z(K({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:ge,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:a=>a===null||f(a)||["min","max"].includes(a),default:null},name:String,placeholder:String,precision:{type:Number,validator:a=>a>=0&&a===Number.parseInt(`${a}`,10)},validateEvent:{type:Boolean,default:!0}},Me(["ariaLabel"])),{inputmode:{type:j(String),default:void 0},align:{type:j(String),default:"center"},disabledScientific:Boolean})),We={[ue]:(a,d)=>d!==a,blur:a=>a instanceof FocusEvent,focus:a=>a instanceof FocusEvent,[C]:a=>f(a)||g(a),[h]:a=>f(a)||g(a)},He=le({name:"ElInputNumber"}),Je=le(z(K({},He),{props:qe,emits:We,setup(a,{expose:d,emit:l}){const u=a,{t:L}=we(),m=Se("input-number"),b=Ge(),s=Oe({currentValue:u.modelValue,userInput:null}),{formItem:N}=$e(),U=y(()=>f(u.modelValue)&&u.modelValue<=u.min),X=y(()=>f(u.modelValue)&&u.modelValue>=u.max),se=y(()=>{const e=W(u.step);return A(u.precision)?Math.max(W(u.modelValue),e):(e>u.precision&&E("InputNumber","precision should not be less than the decimal places of step"),u.precision)}),D=y(()=>u.controls&&u.controlsPosition==="right"),q=Ke(),V=ze(),T=y(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(g(e))return"";if(f(e)){if(Number.isNaN(e))return"";A(u.precision)||(e=e.toFixed(u.precision))}return e}),I=(e,n)=>{if(A(n)&&(n=se.value),n===0)return Math.round(e);let t=String(e);const i=t.indexOf(".");if(i===-1||!t.replace(".","").split("")[i+n])return e;const S=t.length;return t.charAt(S-1)==="5"&&(t=`${t.slice(0,Math.max(0,S-1))}6`),Number.parseFloat(Number(t).toFixed(n))},W=e=>{if(g(e))return 0;const n=e.toString(),t=n.indexOf(".");let i=0;return t!==-1&&(i=n.length-t-1),i},H=(e,n=1)=>f(e)?e>=Number.MAX_SAFE_INTEGER&&n===1?(E("InputNumber","The value has reached the maximum safe integer limit."),e):e<=Number.MIN_SAFE_INTEGER&&n===-1?(E("InputNumber","The value has reached the minimum safe integer limit."),e):I(e+u.step*n):s.currentValue,ie=e=>{const n=Ce(e),t=De(e);if(u.disabledScientific&&["e","E"].includes(t)){e.preventDefault();return}switch(n){case ee.up:{e.preventDefault(),x();break}case ee.down:{e.preventDefault(),B();break}}},x=()=>{if(u.readonly||V.value||X.value)return;const e=Number(T.value)||0,n=H(e);w(n),l(C,s.currentValue),$()},B=()=>{if(u.readonly||V.value||U.value)return;const e=Number(T.value)||0,n=H(e,-1);w(n),l(C,s.currentValue),$()},M=(e,n)=>{const{max:t,min:i,step:o,precision:p,stepStrictly:S,valueOnClear:_}=u;t<i&&Te("InputNumber","min should not be greater than max.");let c=Number(e);if(g(e)||Number.isNaN(c))return null;if(e===""){if(_===null)return null;c=Xe(_)?{min:i,max:t}[_]:_}return S&&(c=I(Math.round(I(c/o))*o,p),c!==e&&n&&l(h,c)),A(p)||(c=I(c,p)),(c>t||c<i)&&(c=c>t?t:i,n&&l(h,c)),c},w=(e,n=!0)=>{var t;const i=s.currentValue,o=M(e);if(!n){l(h,o);return}i===o&&e||(s.userInput=null,l(h,o),i!==o&&l(ue,o,i),u.validateEvent&&((t=N==null?void 0:N.validate)==null||t.call(N,"change").catch(p=>E(p))),s.currentValue=o)},oe=e=>{s.userInput=e;const n=e===""?null:Number(e);l(C,n),w(n,!1)},de=e=>{const n=e!==""?Number(e):"";(f(n)&&!Number.isNaN(n)||e==="")&&w(n),$(),s.userInput=null},ce=()=>{var e,n;(n=(e=b.value)==null?void 0:e.focus)==null||n.call(e)},me=()=>{var e,n;(n=(e=b.value)==null?void 0:e.blur)==null||n.call(e)},pe=e=>{l("focus",e)},fe=e=>{var n,t;s.userInput=null,s.currentValue===null&&((n=b.value)!=null&&n.input)&&(b.value.input.value=""),l("blur",e),u.validateEvent&&((t=N==null?void 0:N.validate)==null||t.call(N,"blur").catch(i=>E(i)))},$=()=>{s.currentValue!==u.modelValue&&(s.currentValue=u.modelValue)},be=e=>{document.activeElement===e.target&&e.preventDefault()};return te(()=>u.modelValue,(e,n)=>{const t=M(e,!0);s.userInput===null&&t!==n&&(s.currentValue=t)},{immediate:!0}),te(()=>u.precision,()=>{s.currentValue=M(u.modelValue)}),Re(()=>{var e;const{min:n,max:t,modelValue:i}=u,o=(e=b.value)==null?void 0:e.input;if(o.setAttribute("role","spinbutton"),Number.isFinite(t)?o.setAttribute("aria-valuemax",String(t)):o.removeAttribute("aria-valuemax"),Number.isFinite(n)?o.setAttribute("aria-valuemin",String(n)):o.removeAttribute("aria-valuemin"),o.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),o.setAttribute("aria-disabled",String(V.value)),!f(i)&&i!=null){let p=Number(i);Number.isNaN(p)&&(p=null),l(h,p)}o.addEventListener("wheel",be,{passive:!1})}),Le(()=>{var e,n;const t=(e=b.value)==null?void 0:e.input;t==null||t.setAttribute("aria-valuenow",`${(n=s.currentValue)!=null?n:""}`)}),d({focus:ce,blur:me}),(e,n)=>(v(),G("div",{class:R([r(m).b(),r(m).m(r(q)),r(m).is("disabled",r(V)),r(m).is("without-controls",!e.controls),r(m).is("controls-right",r(D)),r(m).is(e.align,!!e.align)]),onDragstart:ke(()=>{},["prevent"])},[e.controls?ae((v(),G("span",{key:0,role:"button","aria-label":r(L)("el.inputNumber.decrease"),class:R([r(m).e("decrease"),r(m).is("disabled",r(U))]),onKeydown:Q(B,["enter"])},[F(e.$slots,"decrease-icon",{},()=>[O(r(Y),null,{default:P(()=>[r(D)?(v(),k(r(_e),{key:0})):(v(),k(r(Ae),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(ne),B]]):re("v-if",!0),e.controls?ae((v(),G("span",{key:1,role:"button","aria-label":r(L)("el.inputNumber.increase"),class:R([r(m).e("increase"),r(m).is("disabled",r(X))]),onKeydown:Q(x,["enter"])},[F(e.$slots,"increase-icon",{},()=>[O(r(Y),null,{default:P(()=>[r(D)?(v(),k(r(Fe),{key:0})):(v(),k(r(Pe),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(ne),x]]):re("v-if",!0),O(r(Be),{id:e.id,ref_key:"input",ref:b,type:"number",step:e.step,"model-value":r(T),placeholder:e.placeholder,readonly:e.readonly,disabled:r(V),size:r(q),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:ie,onBlur:fe,onFocus:pe,onInput:oe,onChange:de},Ue({_:2},[e.$slots.prefix?{name:"prefix",fn:P(()=>[F(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:P(()=>[F(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode"])],42,["onDragstart"]))}}));var Ze=Ie(Je,[["__file","input-number.vue"]]);const mn=xe(Ze);export{mn as ElInputNumber,mn as default,We as inputNumberEmits,qe as inputNumberProps};
