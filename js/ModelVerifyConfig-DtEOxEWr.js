var k=(C,b,i)=>new Promise((_,d)=>{var s=t=>{try{r(i.next(t))}catch(f){d(f)}},u=t=>{try{r(i.throw(t))}catch(f){d(f)}},r=t=>t.done?_(t.value):Promise.resolve(t.value).then(s,u);r((i=i.apply(C,b)).next())});import{$ as n,M as I,R as T,_ as h}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as F}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as w,a as D}from"./el-form-item-8FQp7Cs4.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import{E as N,a as $}from"./index-DcZY4wgD.js";import{ElButton as M}from"./index-oBOAcXl-.js";import{k as R,r as p,G as S,B as y,n as g,E as m,J as c,u as l,p as q,m as O,F as U,N as G,L as E,y as V}from"../jse/index-index-D3Xb8oT_.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";const J=R({__name:"ModelVerifyConfig",setup(C,{expose:b}){const i=p([]),_=o=>{I.get(`/api/v1/model/list?providerId=${o}`,{}).then(e=>{e.errorCode===0&&(i.value=e.data)})},d=p(""),s=p(""),u=p(),r=p(!1);b({openDialog(o){var e;(e=u.value)==null||e.resetFields(),d.value="",s.value="",_(o),r.value=!0}});const t=S({llmId:""}),f={llmId:[{required:!0,message:n("message.required"),trigger:"change"}]},x=()=>k(null,null,function*(){v.value=!0,yield u.value.validate(),I.get(`/api/v1/model/verifyLlmConfig?id=${t.llmId}`,{}).then(o=>{var e,a;o.errorCode===0&&(T.success(n("llm.testSuccess")),d.value==="embeddingModel"&&((e=o==null?void 0:o.data)!=null&&e.dimension)&&(s.value=(a=o==null?void 0:o.data)==null?void 0:a.dimension)),v.value=!1})}),v=p(!1),L=()=>{r.value=!1},B=o=>{i.value.forEach(e=>{e.id===o&&(d.value=e.modelType)})};return(o,e)=>(g(),y(l(F),{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),draggable:"",title:l(n)("llm.verifyLlmTitle"),"close-on-click-modal":!1,"align-center":"",width:"482"},{footer:m(()=>[c(l(M),{onClick:L},{default:m(()=>[E(V(l(n)("button.cancel")),1)]),_:1}),c(l(M),{type:"primary",onClick:x,loading:v.value,disabled:v.value},{default:m(()=>[E(V(l(n)("button.confirm")),1)]),_:1},8,["loading","disabled"])]),default:m(()=>[c(l(w),{ref_key:"formDataRef",ref:u,model:t,"status-icon":"",rules:f},{default:m(()=>[c(l(D),{prop:"llmId",label:l(n)("llm.modelToBeTested")},{default:m(()=>[c(l(N),{modelValue:t.llmId,"onUpdate:modelValue":e[0]||(e[0]=a=>t.llmId=a),onChange:B},{default:m(()=>[(g(!0),O(U,null,G(i.value,a=>(g(),y(l($),{key:a.id,label:a.title,value:a.id||""},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d.value==="embeddingModel"&&s.value?(g(),y(l(D),{key:0,label:l(n)("documentCollection.dimensionOfVectorModel"),"label-width":"100px"},{default:m(()=>[E(V(s.value),1)]),_:1},8,["label"])):q("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"]))}}),Be=h(J,[["__scopeId","data-v-0f6b7915"]]);export{Be as default};
