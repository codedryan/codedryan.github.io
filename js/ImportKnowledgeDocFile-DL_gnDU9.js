import{a7 as V,$ as s,R as P,_ as M}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as $}from"./el-pagination-W2lJTIgw.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import"./css-C9o_OfXA.js";import{a as K,E as k}from"./el-steps-CtYXBgXl.js";import L from"./AutoSplitterDocPreview-Cntb-TL6.js";import j from"./ComfirmImportDocument-ncuiyqZK.js";import{_ as q}from"./ImportKnowledgeFileContainer.vue_vue_type_script_setup_true_lang-Ca_P6yVx.js";import A from"./ManualSplitterDocPreview-uWhcQuuW.js";import J from"./SegmenterDoc-CJLSI0-t.js";import{ElButton as h}from"./index-oBOAcXl-.js";import{k as G,r as l,m as v,n as a,q as t,J as n,u as e,E as p,L as b,y as u,p as m,B as g}from"../jse/index-index-D3Xb8oT_.js";import"./index-DcZY4wgD.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./castArray-BBset58W.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./event-BB_Ol6Sd.js";import"./scroll-C2492Iw_.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";import"./vnode-DysYOGZN.js";import"./index-BjDsryRX.js";import"./index-C33Sf0pH.js";import"./index-Dg3fRnQE.js";import"./index-DSAOTmKA.js";import"./CategoryPanel-DTPGkE9u.js";import"./PreviewSearchKnowledge-BZ_QEu6s.js";import"./el-table-JPhh2aff.js";import"./merge-BysAs727.js";import"./_baseClone-trfKWgGN.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./debounce-AsHllEOy.js";import"./index-p7kg-xKH.js";import"./omit-CbyqVLxv.js";import"./raf-BVBe43_O.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        */import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";import"./AIEditorManualSegmentation-C7EP4Ojv.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./el-slider-iZWu467N.js";import"./index-9UPoHQm1.js";import"./index-BKzCwxYe.js";import"./css-B4xXAc0m.js";const H={class:"imp-doc-kno-container"},O={class:"imp-doc-header"},Q={class:"imp-doc-kno-content"},W={class:"rounded-lg bg-[var(--table-header-bg-color)] py-5"},X={class:"flex items-center gap-2"},Y={class:"text-base"},Z={class:"flex items-center gap-2"},tt={class:"text-base"},et={class:"flex items-center gap-2"},ot={class:"text-base"},at={class:"flex items-center gap-2"},it={class:"text-base"},rt={style:{"margin-top":"20px"}},st={key:0,class:"knw-file-upload"},lt={key:1,class:"knw-file-splitter"},nt={key:2,class:"knw-file-preview"},mt={key:3,class:"knw-file-confirm"},pt={class:"imp-doc-footer"},ct={key:0,class:"imp-doc-page-container"},ut=G({__name:"ImportKnowledgeDocFile",emits:["importBack"],setup(dt,{emit:I}){const w=I,R=()=>{w("importBack")},_=l([]),c=l({segmentationStrategy:""}),o=l(0),y=l(),x=l(),D=l(),f=l(),C=l([]),d=l({pageSize:10,currentPage:1,total:0}),z=()=>{if(o.value===0){if(!y.value||y.value.getFilesData().length===0){P.error(s("message.uploadFileFirst"));return}_.value=y.value.getFilesData()}if(o.value===1&&D.value&&(c.value=D.value.getSplitterFormValues()),o.value===2&&c.value.segmentationStrategy==="manualSegmentation")try{if(f.value&&typeof f.value.getStoreManualDocuments=="function"){const i=f.value.getStoreManualDocuments();C.value=i}}catch(i){console.error(i),C.value=[]}o.value+=1},B=()=>{o.value-=1},E=i=>{d.value.pageSize=i},F=i=>{d.value.currentPage=i},N=i=>{d.value.total=i},S=l(!1),T=()=>{S.value=!0,x.value&&x.value.handleSave()},U=()=>{S.value=!1,P.success(s("documentCollection.splitterDoc.importSuccess")),w("importBack")};return(i,r)=>(a(),v("div",H,[t("div",O,[n(e(h),{onClick:R,icon:e(V)},{default:p(()=>[b(u(e(s)("button.back")),1)]),_:1},8,["icon"])]),t("div",Q,[t("div",W,[n(e(K),{active:o.value,"align-center":""},{default:p(()=>[n(e(k),null,{icon:p(()=>[t("div",X,[r[0]||(r[0]=t("div",{class:"h-8 w-8 rounded-full bg-[var(--step-item-bg)]"},[t("span",{class:"text-accent-foreground text-sm/8"},"1")],-1)),t("span",Y,u(e(s)("documentCollection.importDoc.fileUpload")),1)])]),_:1}),n(e(k),null,{icon:p(()=>[t("div",Z,[r[1]||(r[1]=t("div",{class:"h-8 w-8 rounded-full bg-[var(--step-item-bg)]"},[t("span",{class:"text-accent-foreground text-sm/8"},"2")],-1)),t("span",tt,u(e(s)("documentCollection.importDoc.parameterSettings")),1)])]),_:1}),n(e(k),null,{icon:p(()=>[t("div",et,[r[2]||(r[2]=t("div",{class:"h-8 w-8 rounded-full bg-[var(--step-item-bg)]"},[t("span",{class:"text-accent-foreground text-sm/8"},"3")],-1)),t("span",ot,u(e(s)("documentCollection.importDoc.segmentedPreview")),1)])]),_:1}),n(e(k),null,{icon:p(()=>[t("div",at,[r[3]||(r[3]=t("div",{class:"h-8 w-8 rounded-full bg-[var(--step-item-bg)]"},[t("span",{class:"text-accent-foreground text-sm/8"},"4")],-1)),t("span",it,u(e(s)("documentCollection.importDoc.confirmImport")),1)])]),_:1})]),_:1},8,["active"])]),t("div",rt,[o.value===0?(a(),v("div",st,[n(q,{ref_key:"fileUploadRef",ref:y},null,512)])):m("",!0),o.value===1?(a(),v("div",lt,[n(J,{ref_key:"segmenterDocRef",ref:D},null,512)])):m("",!0),o.value===2?(a(),v("div",nt,[c.value.segmentationStrategy==="automaticSegmentation"?(a(),g(L,{key:0,ref_key:"manualSplitterDocPreviewRef",ref:f,"flies-list":_.value,"splitter-params":c.value,"page-number":d.value.currentPage,"page-size":d.value.pageSize,onUpdateTotal:N},null,8,["flies-list","splitter-params","page-number","page-size"])):m("",!0),c.value.segmentationStrategy==="manualSegmentation"?(a(),g(A,{key:1,ref_key:"manualSplitterDocPreviewRef",ref:f,"files-list":_.value},null,8,["files-list"])):m("",!0)])):m("",!0),o.value===3?(a(),v("div",mt,[n(j,{"manual-documents-data":C.value,"segmentation-strategy":c.value.segmentationStrategy,"splitter-params":c.value,"files-list":_.value,ref_key:"confirmImportRef",ref:x,onLoadingFinish:U},null,8,["manual-documents-data","segmentation-strategy","splitter-params","files-list"])])):m("",!0)])]),r[4]||(r[4]=t("div",{style:{height:"40px"}},null,-1)),t("div",pt,[o.value===2&&c.value.segmentationStrategy==="automaticSegmentation"?(a(),v("div",ct,[n(e($),{"page-sizes":[10,20],layout:"total, sizes, prev, pager, next, jumper",total:d.value.total,onSizeChange:E,onCurrentChange:F},null,8,["total"])])):m("",!0),o.value>=1?(a(),g(e(h),{key:1,onClick:B,type:"primary",style:{"margin-right":"12px"}},{default:p(()=>[b(u(e(s)("button.previousStep")),1)]),_:1})):m("",!0),o.value<3?(a(),g(e(h),{key:2,onClick:z,type:"primary",style:{"margin-right":"12px"}},{default:p(()=>[b(u(e(s)("button.nextStep")),1)]),_:1})):m("",!0),o.value===3?(a(),g(e(h),{key:3,onClick:T,type:"primary",loading:S.value,disabled:S.value},{default:p(()=>[b(u(e(s)("button.startImport")),1)]),_:1},8,["loading","disabled"])):m("",!0)])]))}}),Ie=M(ut,[["__scopeId","data-v-825b2f2b"]]);export{Ie as default};
