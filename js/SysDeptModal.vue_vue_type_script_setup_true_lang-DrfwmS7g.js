import{$ as o,M as _,R as x}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as I}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as M,a as p}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{D as q}from"./DictSelect-DdOvS-6R.js";import{ElInput as f}from"./index-BjDsryRX.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as U,o as F,r as u,B,n as S,E as s,J as r,u as e,L as V,y}from"../jse/index-index-D3Xb8oT_.js";const O=U({__name:"SysDeptModal",emits:["reload"],setup(L,{expose:D,emit:c}){const N=c;F(()=>{}),D({openDialog:C});const v=u(),m=u(!1),n=u(!0),l=u({parentId:"",ancestors:"",deptName:"",deptCode:"",sortNo:"",status:"",remark:""}),i=u(!1),k=u({parentId:[{required:!0,message:o("message.required"),trigger:"blur"}],deptName:[{required:!0,message:o("message.required"),trigger:"blur"}],status:[{required:!0,message:o("message.required"),trigger:"blur"}]});function C(d){d.id&&(n.value=!1),l.value=d,m.value=!0}function E(){var d;(d=v.value)==null||d.validate(a=>{a&&(i.value=!0,_.post(n.value?"api/v1/sysDept/save":"api/v1/sysDept/update",l.value).then(t=>{i.value=!1,t.errorCode===0&&(x.success(t.message),N("reload"),b())}).catch(()=>{i.value=!1}))})}function b(){var d;(d=v.value)==null||d.resetFields(),n.value=!0,l.value={},m.value=!1}return(d,a)=>(S(),B(e(I),{modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=t=>m.value=t),draggable:"",title:n.value?e(o)("button.add"):e(o)("button.edit"),"before-close":b,"close-on-click-modal":!1},{footer:s(()=>[r(e(g),{onClick:b},{default:s(()=>[V(y(e(o)("button.cancel")),1)]),_:1}),r(e(g),{type:"primary",onClick:E,loading:i.value,disabled:i.value},{default:s(()=>[V(y(e(o)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:s(()=>[r(e(M),{"label-width":"120px",ref_key:"saveForm",ref:v,model:l.value,"status-icon":"",rules:k.value},{default:s(()=>[r(e(p),{prop:"parentId",label:e(o)("sysDept.parentId")},{default:s(()=>[r(q,{disabled:l.value.deptCode==="root_dept","extra-options":[{label:e(o)("sysDept.root"),value:0}],modelValue:l.value.parentId,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.parentId=t),"dict-code":"sysDept"},null,8,["disabled","extra-options","modelValue"])]),_:1},8,["label"]),r(e(p),{prop:"deptName",label:e(o)("sysDept.deptName")},{default:s(()=>[r(e(f),{modelValue:l.value.deptName,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.deptName=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),r(e(p),{prop:"deptCode",label:e(o)("sysDept.deptCode")},{default:s(()=>[r(e(f),{disabled:l.value.deptCode==="root_dept",modelValue:l.value.deptCode,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.deptCode=t),modelModifiers:{trim:!0}},null,8,["disabled","modelValue"])]),_:1},8,["label"]),r(e(p),{prop:"sortNo",label:e(o)("sysDept.sortNo")},{default:s(()=>[r(e(f),{modelValue:l.value.sortNo,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.sortNo=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),r(e(p),{prop:"remark",label:e(o)("sysDept.remark")},{default:s(()=>[r(e(f),{modelValue:l.value.remark,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.remark=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{O as _};
