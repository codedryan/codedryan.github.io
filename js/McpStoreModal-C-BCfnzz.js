import{$ as o,M as D,R as x,_ as I}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as N}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as k,a as u}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{D as U}from"./DictSelect-DdOvS-6R.js";import{U as J}from"./UploadAvatar-a3x1lqjM.js";import B from"./AIEditorManualSegmentation-C7EP4Ojv.js";import{ElInput as f}from"./index-BjDsryRX.js";import{ElButton as b}from"./index-oBOAcXl-.js";import{k as F,o as w,r as m,B as A,n as R,E as i,J as t,u as e,q as L,L as V,y}from"../jse/index-index-D3Xb8oT_.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import"./index-DcZY4wgD.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";import"./el-image-viewer-DlaFkWIK.js";import"./debounce-AsHllEOy.js";import"./index-C33Sf0pH.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";const $={class:"preview-container"},T=F({__name:"McpStoreModal",emits:["reload"],setup(j,{expose:S,emit:_}){const C=_;w(()=>{}),S({openDialog:E});const c=m(),p=m(!1),g=m(),n=m(!0),r=m({icon:"",serverName:"",description:"",serviceDetail:"",serverConfigJson:"",categoryId:""}),d=m(!1),q=m({serverName:[{required:!0,message:o("message.required"),trigger:"blur"}],description:[{required:!0,message:o("message.required"),trigger:"blur"}],serviceDetail:[{required:!0,message:o("message.required"),trigger:"blur"}],serverConfigJson:[{required:!0,message:o("message.required"),trigger:"blur"}],categoryId:[{required:!0,message:o("message.required"),trigger:"change"}],icon:[{required:!0,message:o("message.required"),trigger:"change"}]});function E(s){s.id&&(n.value=!1),r.value=s,p.value=!0}function M(){var s;r.value.serviceDetail=g.value.getEditorContent(),(s=c.value)==null||s.validate(a=>{a&&(d.value=!0,D.post(n.value?"api/v1/mcpStore/save":"api/v1/mcpStore/update",r.value).then(l=>{d.value=!1,l.errorCode===0&&(x.success(l.message),C("reload"),v())}).catch(()=>{d.value=!1}))})}function v(){var s;(s=c.value)==null||s.resetFields(),n.value=!0,r.value={},p.value=!1}return(s,a)=>(R(),A(e(N),{modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=l=>p.value=l),draggable:"",title:n.value?e(o)("button.add"):e(o)("button.edit"),"before-close":v,"close-on-click-modal":!1},{footer:i(()=>[t(e(b),{onClick:v},{default:i(()=>[V(y(e(o)("button.cancel")),1)]),_:1}),t(e(b),{type:"primary",onClick:M,loading:d.value,disabled:d.value},{default:i(()=>[V(y(e(o)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:i(()=>[t(e(k),{"label-width":"120px",ref_key:"saveForm",ref:c,model:r.value,"status-icon":"",rules:q.value},{default:i(()=>[t(e(u),{prop:"icon",label:e(o)("documentCollection.icon"),style:{display:"flex","align-items":"center"}},{default:i(()=>[t(J,{modelValue:r.value.icon,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value.icon=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(e(u),{prop:"serverName",label:e(o)("mcpStore.serverName")},{default:i(()=>[t(e(f),{modelValue:r.value.serverName,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value.serverName=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(u),{prop:"description",label:e(o)("mcpStore.description")},{default:i(()=>[t(e(f),{type:"textarea",rows:4,modelValue:r.value.description,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value.description=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(u),{prop:"serviceDetail",label:e(o)("mcpStore.serviceDetail")},{default:i(()=>[L("div",$,[t(B,{ref_key:"aiEditorManualSegmentationRef",ref:g,content:r.value.serviceDetail},null,8,["content"])])]),_:1},8,["label"]),t(e(u),{prop:"serverConfigJson",label:e(o)("mcpStore.serverConfigJson")},{default:i(()=>[t(e(f),{type:"textarea",rows:4,modelValue:r.value.serverConfigJson,"onUpdate:modelValue":a[3]||(a[3]=l=>r.value.serverConfigJson=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(u),{prop:"categoryId",label:e(o)("mcpStore.categoryId")},{default:i(()=>[t(U,{modelValue:r.value.categoryId,"onUpdate:modelValue":a[4]||(a[4]=l=>r.value.categoryId=l),"dict-code":"mcpStoreCategory"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}}),Le=I(T,[["__scopeId","data-v-273eec98"]]);export{Le as default};
