import{$ as u,M as f,R as T}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as F}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as q,a as d}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import"./css-DCrZaNHy.js";import{D as V}from"./DictSelect-DdOvS-6R.js";import{T as g}from"./Tree-DNoeY5lZ.js";import{ElInput as y}from"./index-BjDsryRX.js";import{ElSwitch as b}from"./index-CHf9SThW.js";import{ElButton as k}from"./index-oBOAcXl-.js";import{k as K,o as B,r as i,B as $,n as S,E as r,J as o,u as e,m as L,p as P,L as R,y as x}from"../jse/index-index-D3Xb8oT_.js";const _={key:0,style:{width:"100%"}},te=K({__name:"SysRoleModal",emits:["reload"],setup(w,{expose:I,emit:C}){const E=C;B(()=>{}),I({openDialog:N});const p=i(),n=i(!1),v=i(!0),l=i({roleName:"",roleKey:"",status:"",remark:""}),m=i(!1),M=i({roleName:[{required:!0,message:u("message.required"),trigger:"blur"}],roleKey:[{required:!0,message:u("message.required"),trigger:"blur"}],status:[{required:!0,message:u("message.required"),trigger:"blur"}]});function N(s){s.id&&(v.value=!1,D(s.id),h(s.id)),l.value=s,n.value=!0}function U(){var s;(s=p.value)==null||s.validate(t=>{t&&(m.value=!0,f.post("/api/v1/sysRole/saveRole",l.value).then(a=>{m.value=!1,a.errorCode===0&&(T.success(a.message),E("reload"),c())}).catch(()=>{m.value=!1}))})}function c(){var s;(s=p.value)==null||s.resetFields(),v.value=!0,l.value={},n.value=!1}function D(s){f.get(`/api/v1/sysRole/getRoleMenuIds?roleId=${s}`).then(t=>{l.value.menuIds=t.data})}function h(s){f.get(`/api/v1/sysRole/getRoleDeptIds?roleId=${s}`).then(t=>{l.value.deptIds=t.data})}return(s,t)=>(S(),$(e(F),{modelValue:n.value,"onUpdate:modelValue":t[9]||(t[9]=a=>n.value=a),draggable:"",title:v.value?e(u)("button.add"):e(u)("button.edit"),"before-close":c,"close-on-click-modal":!1},{footer:r(()=>[o(e(k),{onClick:c},{default:r(()=>[R(x(e(u)("button.cancel")),1)]),_:1}),o(e(k),{type:"primary",onClick:U,loading:m.value,disabled:m.value},{default:r(()=>[R(x(e(u)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:r(()=>[o(e(q),{"label-width":"120px",ref_key:"saveForm",ref:p,model:l.value,"status-icon":"",rules:M.value},{default:r(()=>[o(e(d),{prop:"roleName",label:e(u)("sysRole.roleName")},{default:r(()=>[o(e(y),{modelValue:l.value.roleName,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.roleName=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),o(e(d),{prop:"roleKey",label:e(u)("sysRole.roleKey")},{default:r(()=>[o(e(y),{modelValue:l.value.roleKey,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value.roleKey=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),o(e(d),{prop:"status",label:e(u)("sysRole.status")},{default:r(()=>[o(V,{modelValue:l.value.status,"onUpdate:modelValue":t[2]||(t[2]=a=>l.value.status=a),"dict-code":"dataStatus"},null,8,["modelValue"])]),_:1},8,["label"]),o(e(d),{prop:"remark",label:e(u)("sysRole.remark")},{default:r(()=>[o(e(y),{modelValue:l.value.remark,"onUpdate:modelValue":t[3]||(t[3]=a=>l.value.remark=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),o(e(d),{label:e(u)("sysRole.menuPermission")},{default:r(()=>[o(e(b),{modelValue:l.value.menuCheckStrictly,"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.menuCheckStrictly=a),"active-text":e(u)("sysRole.checkStrictlyTrue"),"inactive-text":e(u)("sysRole.checkStrictlyFalse")},null,8,["modelValue","active-text","inactive-text"]),o(g,{"data-url":"/api/v1/sysMenu/list?asTree=true",modelValue:l.value.menuIds,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.menuIds=a),"default-props":{label:"menuTitle",children:"children"},"check-strictly":!l.value.menuCheckStrictly},null,8,["modelValue","check-strictly"])]),_:1},8,["label"]),o(e(d),{label:e(u)("sysRole.dataPermission")},{default:r(()=>[o(V,{modelValue:l.value.dataScope,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.dataScope=a),"dict-code":"dataScope"},null,8,["modelValue"]),l.value.dataScope===5?(S(),L("div",_,[o(e(b),{modelValue:l.value.deptCheckStrictly,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.deptCheckStrictly=a),"active-text":e(u)("sysRole.checkStrictlyTrue"),"inactive-text":e(u)("sysRole.checkStrictlyFalse")},null,8,["modelValue","active-text","inactive-text"]),o(g,{"data-url":"/api/v1/sysDept/list?asTree=true",modelValue:l.value.deptIds,"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.deptIds=a),"default-props":{label:"deptName",children:"children"},"check-strictly":!l.value.deptCheckStrictly},null,8,["modelValue","check-strictly"])])):P("",!0)]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{te as _};
