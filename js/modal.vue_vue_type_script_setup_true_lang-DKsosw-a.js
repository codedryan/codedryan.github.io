var E=(k,V,i)=>new Promise((y,n)=>{var u=l=>{try{p(i.next(l))}catch(f){n(f)}},m=l=>{try{p(i.throw(l))}catch(f){n(f)}},p=l=>l.done?y(l.value):Promise.resolve(l.value).then(u,m);p((i=i.apply(k,V)).next())});import{$ as s,Q as C,R as D}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as $}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as q,a as d}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{s as _,u as F}from"./bot-DbCgUpjx.js";import{D as I}from"./DictSelect-DdOvS-6R.js";import{U as N}from"./UploadAvatar-a3x1lqjM.js";import{ElInput as b}from"./index-BjDsryRX.js";import{ElButton as U}from"./index-oBOAcXl-.js";import{k as R,r as v,B as S,n as W,E as r,J as t,u as a,L as w,y as B}from"../jse/index-index-D3Xb8oT_.js";const Y=R({__name:"modal",emits:["success"],setup(k,{expose:V,emit:i}){const y=i,n={icon:"",title:"",alias:"",description:"",categoryId:"",status:1},u=v(!1),m=v("create"),p=v(),l=v(n),f={title:[{required:!0,message:s("message.required"),trigger:"blur"}],alias:[{required:!0,message:s("message.required"),trigger:"blur"}]},g=v(!1),x=()=>E(null,null,function*(){g.value=!0;const[c,e]=yield C(m.value==="create"?_:F)(l.value);!c&&e.errorCode===0&&(y("success"),D.success(s("message.saveOkMessage")),u.value=!1),g.value=!1});return V({open(c,e){l.value=e?{id:e.id,icon:e.icon,title:e.title,alias:e.alias,description:e.description,categoryId:e.categoryId,status:e.status}:n,m.value=c,u.value=!0}}),(c,e)=>(W(),S(a($),{modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=o=>u.value=o),title:`${a(s)(`button.${m.value}`)} Bot`,draggable:"","align-center":""},{footer:r(()=>[t(a(U),{onClick:e[6]||(e[6]=o=>u.value=!1)},{default:r(()=>[w(B(a(s)("button.cancel")),1)]),_:1}),t(a(U),{type:"primary",loading:g.value,disabled:g.value,onClick:x},{default:r(()=>[w(B(a(s)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:r(()=>[t(a(q),{ref_key:"formRef",ref:p,model:l.value,rules:f,"label-width":"150px"},{default:r(()=>[t(a(d),{label:a(s)("common.avatar"),prop:"icon"},{default:r(()=>[t(N,{modelValue:l.value.icon,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.icon=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(a(d),{prop:"categoryId",label:a(s)("aiWorkflow.categoryId")},{default:r(()=>[t(I,{modelValue:l.value.categoryId,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.categoryId=o),"dict-code":"aiBotCategory"},null,8,["modelValue"])]),_:1},8,["label"]),t(a(d),{label:a(s)("aiWorkflow.title"),prop:"title"},{default:r(()=>[t(a(b),{modelValue:l.value.title,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.title=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(a(d),{label:a(s)("plugin.alias"),prop:"alias"},{default:r(()=>[t(a(b),{modelValue:l.value.alias,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.alias=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(a(d),{label:a(s)("plugin.description"),prop:"description"},{default:r(()=>[t(a(b),{type:"textarea",rows:3,modelValue:l.value.description,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.description=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(a(d),{prop:"status",label:a(s)("aiWorkflow.status")},{default:r(()=>[t(I,{modelValue:l.value.status,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.status=o),"dict-code":"showOrNot"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"]))}});export{Y as _};
