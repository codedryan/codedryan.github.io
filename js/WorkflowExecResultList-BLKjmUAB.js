import{a9 as B,as as $,$ as a,aL as K,a3 as S,aO as q,M as L,R as V}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as M,a as N,b as F}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     *//* empty css                */import{a as b,E as Q}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{E as z}from"./el-message-box-B8o3mhYx.js";import"./el-overlay-Zuw8glOl.js";import{E as A,a as u}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{_ as H}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{u as J}from"./dict-CsbZy8Qf.js";import{ElButton as m}from"./index-oBOAcXl-.js";import{ElInput as O}from"./index-BjDsryRX.js";import{E as P}from"./index-DGdiZ7pE.js";import{k as U,o as j,r as _,H as G,m as g,n as y,q as k,J as o,E as t,L as s,y as p,u as e,I as X}from"../jse/index-index-D3Xb8oT_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./_baseClone-trfKWgGN.js";import"./validator-D2YZey62.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./merge-BysAs727.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./event-BB_Ol6Sd.js";import"./use-form-item-DVWmmqeW.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";/* empty css                  */import"./index-C33Sf0pH.js";const Y={class:"page-container border-border border"},Z={class:"mb-3"},ee={class:"flex items-center gap-1"},so=U({__name:"WorkflowExecResultList",setup(oe){const x=B(),E=$();j(()=>{h()});const d=_(),w=_(),f=_({execKey:""}),R=J();function h(){R.fetchDictionary("dataStatus")}function C(l){l==null||l.validate(i=>{i&&w.value.setQuery(f.value)})}function v(l){l==null||l.resetFields(),w.value.setQuery({})}function T(l){z.confirm(a("message.deleteAlert"),a("message.noticeTitle"),{confirmButtonText:a("message.ok"),cancelButtonText:a("message.cancel"),type:"warning",beforeClose:(i,c,n)=>{i==="confirm"?(c.confirmButtonLoading=!0,L.get("/api/v1/workflowExecResult/del",{params:{id:l.id}}).then(r=>{c.confirmButtonLoading=!1,r.errorCode===0&&(V.success(r.message),v(d.value),n())}).catch(()=>{c.confirmButtonLoading=!1})):n()}}).catch(()=>{})}function W(l){x.push({name:"RecordStep",query:{recordId:l.id}})}function D(l){switch(l.status){case 1:return"primary";case 5:return"warning";case 10:return"danger";case 20:return"success";case 21:return"danger";default:return"info"}}return(l,i)=>{const c=G("access");return y(),g("div",Y,[k("div",Z,[o(e(m),{icon:e(K),onClick:i[0]||(i[0]=n=>e(x).back())},{default:t(()=>[s(p(e(a)("button.back")),1)]),_:1},8,["icon"])]),o(e(Q),{ref_key:"formRef",ref:d,inline:!0,model:f.value},{default:t(()=>[o(e(b),{class:"w-full max-w-[300px]",prop:"execKey"},{default:t(()=>[o(e(O),{modelValue:f.value.execKey,"onUpdate:modelValue":i[1]||(i[1]=n=>f.value.execKey=n),placeholder:e(a)("aiWorkflowExecRecord.execKey")},null,8,["modelValue","placeholder"])]),_:1}),o(e(b),null,{default:t(()=>[o(e(m),{onClick:i[2]||(i[2]=n=>C(d.value)),type:"primary"},{default:t(()=>[s(p(e(a)("button.query")),1)]),_:1}),o(e(m),{onClick:i[3]||(i[3]=n=>v(d.value))},{default:t(()=>[s(p(e(a)("button.reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),i[4]||(i[4]=k("div",{class:"handle-div"},null,-1)),o(H,{ref_key:"pageDataRef",ref:w,"page-url":"/api/v1/workflowExecResult/page","page-size":10,"extra-query-params":{workflowId:e(E).query.workflowId}},{default:t(({pageList:n})=>[o(e(A),{data:n,border:""},{default:t(()=>[o(e(u),{prop:"execKey","show-overflow-tooltip":"",label:e(a)("aiWorkflowExecRecord.execKey")},{default:t(({row:r})=>[s(p(r.execKey),1)]),_:1},8,["label"]),o(e(u),{prop:"title",label:e(a)("aiWorkflowExecRecord.title")},{default:t(({row:r})=>[s(p(r.title),1)]),_:1},8,["label"]),o(e(u),{prop:"description",label:e(a)("aiWorkflowExecRecord.description")},{default:t(({row:r})=>[s(p(r.description),1)]),_:1},8,["label"]),o(e(u),{"show-overflow-tooltip":"",prop:"input",label:e(a)("aiWorkflowExecRecord.input")},{default:t(({row:r})=>[s(p(r.input),1)]),_:1},8,["label"]),o(e(u),{"show-overflow-tooltip":"",prop:"output",label:e(a)("aiWorkflowExecRecord.output")},{default:t(({row:r})=>[s(p(r.output),1)]),_:1},8,["label"]),o(e(u),{prop:"startTime",label:e(a)("aiWorkflowExecRecord.execTime")},{default:t(({row:r})=>[s(p(r.execTime||"-")+" ms ",1)]),_:1},8,["label"]),o(e(u),{prop:"status",label:e(a)("aiWorkflowExecRecord.status")},{default:t(({row:r})=>[o(e(P),{type:D(r)},{default:t(()=>[s(p(e(a)(`aiWorkflowExecRecord.status${r.status}`)),1)]),_:2},1032,["type"])]),_:1},8,["label"]),o(e(u),{"show-overflow-tooltip":"",prop:"errorInfo",label:e(a)("aiWorkflowExecRecord.errorInfo")},{default:t(({row:r})=>[s(p(r.errorInfo),1)]),_:1},8,["label"]),o(e(u),{label:e(a)("common.handle"),width:"110",align:"right"},{default:t(({row:r})=>[k("div",ee,[o(e(m),{link:"",type:"primary",onClick:I=>W(r)},{default:t(()=>[s(p(e(a)("aiWorkflowRecordStep.moduleName")),1)]),_:1},8,["onClick"]),o(e(M),null,{dropdown:t(()=>[o(e(N),null,{default:t(()=>[X((y(),g("div",null,[o(e(F),{onClick:I=>T(r)},{default:t(()=>[o(e(m),{type:"danger",icon:e(q),link:""},{default:t(()=>[s(p(e(a)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[c,"/api/v1/workflow/save","code"]])]),_:2},1024)]),default:t(()=>[o(e(m),{icon:e(S),link:""},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["extra-query-params"])])}}});export{so as default};
