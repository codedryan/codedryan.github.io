var w=Object.defineProperty;var c=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var d=(l,t,a)=>t in l?w(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,f=(l,t)=>{for(var a in t||(t={}))L.call(t,a)&&d(l,a,t[a]);if(c)for(var a of c(t))_.call(t,a)&&d(l,a,t[a]);return l};import{as as k,M as C,_ as z}from"./bootstrap-Bf65uz2I.js";import{C as D}from"./CategoryPanel-DTPGkE9u.js";import I from"./PreviewSearchKnowledge-BZ_QEu6s.js";import{k as A,r as u,w as m,o as B,m as q,n as M,q as g,J as v}from"../jse/index-index-D3Xb8oT_.js";import"./css-gf8D6QlL.js";import"./index-oBOAcXl-.js";import"./index-Dg3fRnQE.js";import"./use-form-item-DVWmmqeW.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";const R={class:"splitter-doc-container"},T={class:"preview-container"},j=A({__name:"AutoSplitterDocPreview",props:{pageNumber:{default:1,type:Number},pageSize:{default:10,type:Number},knowledgeId:{default:"",type:String},fliesList:{default:()=>[],type:Array},splitterParams:{default:()=>{},type:Object}},emits:["updateTotal"],setup(l,{expose:t,emit:a}){const e=l,h=a,r=u([]),S=k();t({getFilesData(){return r.value.length}});const N=u(S.query.id||""),s=u();m(()=>e.pageNumber,i=>{s.value?o(i,e.pageSize,s.value.value,"textSplit",s.value.label):o(i,e.pageSize,e.fliesList[0].filePath,"textSplit",e.fliesList[0].fileName)}),m(()=>e.pageSize,i=>{s.value?o(e.pageNumber,i,s.value.value,"textSplit",s.value.label):o(e.pageNumber,i,e.fliesList[0].filePath,"textSplit",e.fliesList[0].fileName)});function o(i,n,x,y,P){C.post("/api/v1/document/textSplit",{},{params:f({pageNumber:i,pageSize:n,filePath:x,operation:y,knowledgeId:N.value,fileOriginName:P},e.splitterParams)}).then(p=>{p.errorCode===0&&(r.value=p.data.previewData,h("updateTotal",p.data.total))})}B(()=>{e.fliesList.length!==0&&o(e.pageNumber,e.pageSize,e.fliesList[0].filePath,"textSplit",e.fliesList[0].fileName)});const b=i=>{s.value=i,o(e.pageNumber,e.pageSize,i.value,"textSplit",i.label)};return(i,n)=>(M(),q("div",R,[g("div",null,[v(D,{categories:l.fliesList,"title-key":"fileName","need-hide-collapse":!0,"expand-width":200,"value-key":"filePath","default-selected-category":l.fliesList[0].filePath,onClick:b},null,8,["categories","default-selected-category"])]),g("div",T,[v(I,{data:r.value,"hide-score":!0},null,8,["data"])])]))}}),X=z(j,[["__scopeId","data-v-16bfc536"]]);export{X as default};
