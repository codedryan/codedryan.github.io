var je=Object.defineProperty;var fe=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ge=(m,b,p)=>b in m?je(m,b,{enumerable:!0,configurable:!0,writable:!0,value:p}):m[b]=p,le=(m,b)=>{for(var p in b||(b={}))qe.call(b,p)&&ge(m,p,b[p]);if(fe)for(var p of fe(b))Ne.call(b,p)&&ge(m,p,b[p]);return m};var A=(m,b,p)=>new Promise((D,f)=>{var v=w=>{try{d(p.next(w))}catch(k){f(k)}},V=w=>{try{d(p.throw(w))}catch(k){f(k)}},d=w=>w.done?D(w.value):Promise.resolve(w.value).then(v,V);d((p=p.apply(m,b)).next())});import{$ as n,M as C,R as h,V as E,Y as se,_ as Ce,as as Ge,Z as Q,a6 as ze,Q as Je}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as M}from"./el-col-D5ifHzRC.js";import{E as ae,a as P}from"./el-collapse-item-DRoc9NR8.js";import"./css-C9o_OfXA.js";import"./css-B4xXAc0m.js";import{E as W}from"./el-row-u3yI-Elm.js";/* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{E as j}from"./el-slider-iZWu467N.js";/* empty css                   */import"./css-DCrZaNHy.js";import{b as Ye,c as Ze,a as He,d as Xe}from"./bot-DbCgUpjx.js";import{E as ke}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as ye,a as N}from"./el-form-item-8FQp7Cs4.js";import{ElInput as U}from"./index-BjDsryRX.js";import{ElButton as $}from"./index-oBOAcXl-.js";import{k as Y,r as g,B as G,n as y,E as s,J as o,u as t,m as I,F as ie,N as ne,q as i,L as O,y as c,A as xe,w as et,o as tt,af as ve,p as be}from"../jse/index-index-D3Xb8oT_.js";import{E as he}from"./el-avatar-BVPcm0Px.js";import{E as ot}from"./el-message-box-B8o3mhYx.js";import{C as z}from"./CommonSelectDataModal-PCNY26XT.js";import{E as lt}from"./index-DcZY4wgD.js";import{ElInputNumber as q}from"./index-9UPoHQm1.js";import{ElSwitch as we}from"./index-CHf9SThW.js";import{u as at}from"./bot-CHN1-44s.js";import"./event-BB_Ol6Sd.js";import"./castArray-BBset58W.js";import"./index-DF0dk4ce.js";import"./index-Bxb6QITi.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./use-form-common-props-IzjzSHax.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./clamp-CeuJyDnc.js";import"./use-form-item-DVWmmqeW.js";import"./refs-D6FW0B1r.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./_baseClone-trfKWgGN.js";import"./index-C33Sf0pH.js";import"./index-m1ZP1zbM.js";import"./validator-D2YZey62.js";import"./css-_QzOlLq8.js";/* empty css                */import"./HeaderSearch-Dj9rqjlr.js";import"./el-dropdown-menu-v2KdT220.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./hasPermission-CIdLHqw4.js";import"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-Bpv3aWiu.js";import"./index-p7kg-xKH.js";import"./omit-CbyqVLxv.js";import"./_baseSlice-DZe_dRSe.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./index-pv0R11Cf.js";import"./index-BKzCwxYe.js";const st={class:"dialog-footer"},it=Y({__name:"ProblemPresupposition",emits:["success"],setup(m,{expose:b,emit:p}){const D=p,f=g(!1),v=(r=[])=>Array.from({length:5},(u,x)=>{var T;return{key:(x+1).toString(),description:((T=r[x])==null?void 0:T.description)||""}}),V=r=>{xe(()=>{var u;(u=w.value)==null||u.resetFields()}),d.value=v(r),f.value=!0},d=g(v()),w=g();b({openDialog(r){V(r)}});const k=()=>{var r;(r=w.value)==null||r.validate(u=>{u&&(D("success",d.value),f.value=!1)})};return(r,u)=>(y(),G(t(ke),{modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=x=>f.value=x),title:t(n)("button.add"),width:"700","align-center":""},{footer:s(()=>[i("div",st,[o(t($),{onClick:u[0]||(u[0]=x=>f.value=!1)},{default:s(()=>[O(c(t(n)("button.cancel")),1)]),_:1}),o(t($),{type:"primary",onClick:k},{default:s(()=>[O(c(t(n)("button.confirm")),1)]),_:1})])]),default:s(()=>[o(t(ye),{ref_key:"basicFormRef",ref:w,style:{width:"100%","margin-top":"20px"},model:d.value,"label-width":"auto"},{default:s(()=>[(y(!0),I(ie,null,ne(d.value,(x,T)=>(y(),G(t(N),{key:x.key,label:`${t(n)("bot.problemPresupposition")}${x.key}`,prop:`${T}.description`,"label-position":"right"},{default:s(()=>[o(t(U),{modelValue:x.description,"onUpdate:modelValue":F=>x.description=F},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model"])]),_:1},8,["modelValue","title"]))}}),nt={class:"dialog-footer"},dt=Y({__name:"PublishWxOfficalAccount",setup(m,{expose:b}){const p=g(!1),D=g(""),f=(k,r)=>{xe(()=>{var u;(u=V.value)==null||u.resetFields()}),D.value=k,v.value=r,p.value=!0},v=g({weChatMpAppId:"",weChatMpSecret:"",weChatMpToken:"",EncodingAESKey:""}),V=g();b({openDialog(k,r){f(k,r)}});const d=g({weChatMpAppId:[{required:!0,message:n("message.required"),trigger:"blur"}],weChatMpSecret:[{required:!0,message:n("message.required"),trigger:"blur"}],weChatMpToken:[{required:!0,message:n("message.required")}]}),w=()=>{var k;(k=V.value)==null||k.validate(r=>{r&&(C.post("/api/v1/bot/updateOptions",{id:D.value,options:{weChatMpAppId:v.value.weChatMpAppId,weChatMpSecret:v.value.weChatMpSecret,weChatMpToken:v.value.weChatMpToken,EncodingAESKey:v.value.EncodingAESKey}}).then(u=>{u.errorCode===0?h.success(n("message.updateOkMessage")):h.error(u.message)}),p.value=!1)})};return(k,r)=>(y(),G(t(ke),{modelValue:p.value,"onUpdate:modelValue":r[5]||(r[5]=u=>p.value=u),title:t(n)("bot.weChatOfficialAccountConfiguration"),width:"700","align-center":""},{footer:s(()=>[i("div",nt,[o(t($),{onClick:r[4]||(r[4]=u=>p.value=!1)},{default:s(()=>[O(c(t(n)("button.cancel")),1)]),_:1}),o(t($),{type:"primary",onClick:w},{default:s(()=>[O(c(t(n)("button.confirm")),1)]),_:1})])]),default:s(()=>[o(t(ye),{ref_key:"basicFormRef",ref:V,style:{width:"100%","margin-top":"20px"},model:v.value,"label-width":"auto",rules:d.value},{default:s(()=>[o(t(N),{label:"AppId",prop:"weChatMpAppId","label-position":"right"},{default:s(()=>[o(t(U),{modelValue:v.value.weChatMpAppId,"onUpdate:modelValue":r[0]||(r[0]=u=>v.value.weChatMpAppId=u)},null,8,["modelValue"])]),_:1}),o(t(N),{label:"Secret",prop:"weChatMpSecret","label-position":"right"},{default:s(()=>[o(t(U),{modelValue:v.value.weChatMpSecret,"onUpdate:modelValue":r[1]||(r[1]=u=>v.value.weChatMpSecret=u)},null,8,["modelValue"])]),_:1}),o(t(N),{label:"Token",prop:"weChatMpToken","label-position":"right"},{default:s(()=>[o(t(U),{modelValue:v.value.weChatMpToken,"onUpdate:modelValue":r[2]||(r[2]=u=>v.value.weChatMpToken=u)},null,8,["modelValue"])]),_:1}),o(t(N),{label:"EncodingAESKey",prop:"EncodingAESKey","label-position":"right"},{default:s(()=>[o(t(U),{modelValue:v.value.EncodingAESKey,"onUpdate:modelValue":r[3]||(r[3]=u=>v.value.EncodingAESKey=u)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}}),rt={class:"collapse-item-container"},ut={class:"el-list-item-container"},pt={class:"flex-center"},mt={class:"el-list-item-content"},ct={class:"title"},ft={class:"description"},gt=Y({__name:"CollapseViewItem",props:{data:{type:Array,default:()=>[]},titleKey:{type:String,default:"title"},descriptionKey:{type:String,default:"description"}},emits:["delete"],setup(m,{emit:b}){const p=m,D=b,f=v=>{ot.confirm(n("message.deleteAlert"),n("message.noticeTitle"),{confirmButtonText:n("button.confirm"),cancelButtonText:n("button.cancel"),type:"warning"}).then(()=>{D("delete",v)})};return(v,V)=>(y(),I("div",rt,[(y(!0),I(ie,null,ne(p.data,(d,w)=>(y(),I("div",{key:w,class:"el-list-item-max-container"},[i("div",ut,[i("div",pt,[d.icon?(y(),G(t(he),{key:0,src:d.icon},null,8,["src"])):(y(),G(t(he),{key:1,src:"/favicon.png",shape:"circle"}))]),i("div",mt,[i("div",ct,c(d[m.titleKey]),1),i("div",ft,c(d[m.descriptionKey]),1)])]),o(t(E),{color:"var(--el-color-danger)",size:"20px",onClick:k=>f(d),class:"el-list-item-delete-container"},{default:s(()=>[o(t(se))]),_:1},8,["onClick"])]))),128))]))}}),J=Ce(gt,[["__scopeId","data-v-f72dac8a"]]),vt={class:"config-container flex flex-col gap-3"},bt={class:"flex flex-col gap-3 rounded-lg bg-white p-3"},ht={class:"text-base font-medium text-[#1A1A1A]"},wt={class:"llm-back-container flex w-full flex-col justify-between gap-1 rounded-lg p-3"},Ct={class:"config-font-style"},kt={class:"config-font-style"},yt={class:"config-font-style"},xt={class:"flex flex-col gap-3 rounded-lg bg-white p-3"},_t={class:"text-base font-medium text-[#1A1A1A]"},Mt={class:"flex w-full flex-col justify-between"},Vt={class:"flex items-center justify-between pr-2"},It={class:"collapse-right-container"},Dt={class:"badge-circle"},St={class:"flex items-center justify-between pr-2"},At={class:"collapse-right-container"},Pt={class:"badge-circle"},Et={class:"flex items-center justify-between pr-2"},Tt={class:"collapse-right-container"},Rt={class:"badge-circle"},Kt={class:"flex items-center justify-between pr-2"},Bt={class:"collapse-right-container"},Ut={class:"badge-circle"},$t={class:"flex flex-col gap-3 rounded-lg bg-white p-3"},Ot={class:"text-base font-medium text-[#1A1A1A]"},Ft={class:"flex w-full flex-col justify-between rounded-lg"},Lt={class:"flex items-center justify-between pr-2"},Qt={class:"question-container"},Wt={key:0,class:"presetQues-container"},jt={class:"bg-[#f5f5f5] p-2.5"},qt={class:"enable-think-container"},Nt={class:"enable-think-container"},Gt={class:"publish-container flex flex-col gap-3 rounded-lg bg-white p-3"},zt={class:"text-base font-medium text-[#1A1A1A]"},Jt={class:"flex w-full flex-col justify-between rounded-lg"},Yt={class:"publish-wx-container"},Zt={class:"publish-wx"},Ht={key:0},Xt={key:1},eo={class:"publish-config-operation"},to=Y({__name:"config",props:{bot:{},hasSavePermission:{type:Boolean}},setup(m){const b=m,p=at(),D=Ge(),f=g(D.params.id||""),v=g([]),V=g(""),d=g({maxMessageCount:0,maxReplyLength:0,temperature:0,topK:0,topP:0}),w=g({welcomeMessage:"",enableDeepThinking:!1,enableSensitiveFilter:!1});et(b,a=>{var e;a.hasSavePermission?(e=a.bot)!=null&&e.modelId&&(V.value=a.bot.modelId):V.value=n("bot.noPermission"),a.bot&&(d.value=a.bot.modelOptions)},{immediate:!0});const k=g([]),r=g([]),u=g([]),x=g([]),T=g([]),F=g([]),Z=g([]),H=()=>A(null,null,function*(){C.post("/api/v1/pluginItem/tool/list",{botId:f.value}).then(a=>{Z.value=a.data,k.value=a.data.map(e=>e.id)})}),X=()=>A(null,null,function*(){C.get(`/api/v1/botMcp/list?botId=${f.value}`).then(a=>{x.value=a.data})}),ee=()=>A(null,null,function*(){C.get("/api/v1/botKnowledge/list",{params:{botId:f.value}}).then(a=>{F.value=a.data.map(e=>le({recordId:e.id},e.knowledge)),r.value=a.data.map(e=>e.documentCollectionId)})}),te=()=>A(null,null,function*(){C.get("/api/v1/botWorkflow/list",{params:{botId:f.value}}).then(a=>{T.value=a.data.map(e=>le({recordId:e.id},e.workflow)),u.value=a.data.map(e=>e.workflowId)})}),R=g(),L=()=>A(null,null,function*(){C.get("/api/v1/bot/detail",{params:{id:f.value}}).then(a=>{var e,l,_;a.errorCode===0&&(R.value=a.data,a.data.options&&(w.value=a.data.options),(e=a.data.options)!=null&&e.presetQuestions&&p.setPresetQuestions((_=(l=a.data)==null?void 0:l.options)==null?void 0:_.presetQuestions))})}),_e=()=>A(null,null,function*(){C.get("/api/v1/model/list?modelType=chatModel&added=true",{}).then(e=>{e.errorCode===0&&(v.value=e.data)})});tt(()=>A(null,null,function*(){H(),ee(),te(),X(),L(),_e()}));const Me=a=>A(null,null,function*(){var l;if(!b.bot)return;const[,e]=yield Je(Ze)({id:((l=b.bot)==null?void 0:l.id)||"",modelId:a});(e==null?void 0:e.errorCode)===0?h.success(n("message.saveOkMessage")):h.error((e==null?void 0:e.message)||n("message.saveFailMessage"))}),S=ve((a,e)=>{var l;He({id:((l=b.bot)==null?void 0:l.id)||"",llmOptions:{[a]:e}})},300),oe=ve((a,e)=>{var l;Xe({id:((l=b.bot)==null?void 0:l.id)||"",options:{[a]:e}})},300),de=g(),re=g(),ue=g(),pe=g(),me=g(),Ve=()=>{de.value.openDialog(k.value)},Ie=()=>{const a=We();me.value.openMcpDialog(a)},De=()=>{re.value.openDialog(r.value)},Se=()=>{ue.value.openDialog(u.value)},Ae=a=>{C.post("/api/v1/botPlugins/updateBotPluginToolIds",{botId:f.value,pluginToolIds:a}).then(e=>{e.errorCode===0?(h.success(n("message.updateOkMessage")),H()):h.error(e.message)})},Pe=a=>{C.post("/api/v1/botKnowledge/updateBotKnowledgeIds",{botId:f.value,knowledgeIds:a}).then(e=>{e.errorCode===0?(h.success(n("message.updateOkMessage")),ee()):h.error(e.message)})},Ee=a=>{C.post("/api/v1/botWorkflow/updateBotWorkflowIds",{botId:f.value,workflowIds:a}).then(e=>{e.errorCode===0?(h.success(n("message.updateOkMessage")),te()):h.error(e.message)})},Te=a=>{C.post("/api/v1/botMcp/updateBotMcpToolIds",{botId:f.value,mcpSelectedData:a}).then(e=>{e.errorCode===0?(h.success(n("message.updateOkMessage")),X()):h.error(e.message)})},Re=a=>{C.post("/api/v1/botPlugins/doRemove",{botId:f.value,pluginToolId:a.id}).then(e=>{e.errorCode===0?(h.success(n("message.deleteOkMessage")),H()):h.error(e.message)})},Ke=a=>{C.post("/api/v1/botMcp/remove",{id:a.id}).then(e=>{e.errorCode===0?(h.success(n("message.deleteOkMessage")),X()):h.error(e.message)})},Be=a=>{C.post("/api/v1/botKnowledge/remove",{id:a.recordId}).then(e=>{e.errorCode===0?(h.success(n("message.deleteOkMessage")),ee()):h.error(e.message)})},Ue=a=>{C.post("/api/v1/botWorkflow/remove",{id:a.recordId}).then(e=>{e.errorCode===0?(h.success(n("message.deleteOkMessage")),te()):h.error(e.message)})},ce=g(),$e=()=>{var a,e;ce.value.openDialog((e=(a=R.value)==null?void 0:a.options)==null?void 0:e.presetQuestions)},Oe=a=>{C.post("/api/v1/bot/updateOptions",{id:f.value,options:{presetQuestions:a}}).then(e=>{e.errorCode===0?(h.success(n("message.updateOkMessage")),L(),p.setPresetQuestions(a)):h.error(e.message)})},Fe=a=>{var l,_,K;const e=(K=(_=(l=R.value)==null?void 0:l.options)==null?void 0:_.presetQuestions)==null?void 0:K.filter(B=>B.key!==a);C.post("/api/v1/bot/updateOptions",{id:f.value,options:{presetQuestions:e}}).then(B=>{B.errorCode===0&&L()})},Le=()=>{var a;pe.value.openDialog(f.value,(a=R.value)==null?void 0:a.options)},Qe=()=>{C.post("/api/v1/bot/updateOptions",{id:f.value,options:{weChatMpAppId:"",weChatMpSecret:"",weChatMpToken:"",EncodingAESKey:""}}).then(a=>{a.errorCode===0?(h.success(n("message.updateOkMessage")),L()):h.error(a.message)})},We=()=>{const a={};return x.value.forEach(e=>{const l=e.mcpId||e.id,_={name:e.mcpToolName,description:e.mcpToolDescription};a[l]||(a[l]=[]),a[l].push(_)}),a};return(a,e)=>(y(),I("div",vt,[i("div",bt,[i("h1",ht,c(t(n)("bot.llm")),1),i("div",wt,[o(t(lt),{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),options:v.value,props:{value:"id",label:"title"},disabled:!m.hasSavePermission,onChange:Me},null,8,["modelValue","options","disabled"]),o(t(W),{gutter:12,align:"middle",type:"flex"},{default:s(()=>[o(t(M),{class:"options-config-item-left"},{default:s(()=>[i("span",Ct,c(t(n)("bot.temperature")),1)]),_:1}),o(t(M),{class:"options-config-item-middle"},{default:s(()=>[o(t(j),{min:.1,max:1,step:.1,disabled:!m.hasSavePermission,modelValue:d.value.temperature,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value.temperature=l),onChange:e[2]||(e[2]=l=>t(S)("temperature",l))},null,8,["disabled","modelValue"])]),_:1}),o(t(M),{class:"options-config-item-right"},{default:s(()=>[o(t(q),{min:.1,max:1,step:.1,disabled:!m.hasSavePermission,modelValue:d.value.temperature,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value.temperature=l),onChange:e[4]||(e[4]=l=>t(S)("temperature",l))},null,8,["disabled","modelValue"])]),_:1})]),_:1}),o(t(W),{gutter:12,align:"middle",type:"flex"},{default:s(()=>[o(t(M),{class:"options-config-item-left"},{default:s(()=>[...e[33]||(e[33]=[i("span",{class:"config-font-style"},"TopK",-1)])]),_:1}),o(t(M),{class:"options-config-item-middle"},{default:s(()=>[o(t(j),{min:1,max:10,step:1,disabled:!m.hasSavePermission,modelValue:d.value.topK,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value.topK=l),onChange:e[6]||(e[6]=l=>t(S)("topK",l))},null,8,["disabled","modelValue"])]),_:1}),o(t(M),{class:"options-config-item-right"},{default:s(()=>[o(t(q),{min:1,max:10,step:1,disabled:!m.hasSavePermission,modelValue:d.value.topK,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value.topK=l),onChange:e[8]||(e[8]=l=>t(S)("topK",l))},null,8,["disabled","modelValue"])]),_:1})]),_:1}),o(t(W),{gutter:12,align:"middle",type:"flex"},{default:s(()=>[o(t(M),{class:"options-config-item-left"},{default:s(()=>[...e[34]||(e[34]=[i("span",{class:"config-font-style"},"TopP",-1)])]),_:1}),o(t(M),{class:"options-config-item-middle"},{default:s(()=>[o(t(j),{min:.1,max:1,step:.1,disabled:!m.hasSavePermission,modelValue:d.value.topP,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value.topP=l),onChange:e[10]||(e[10]=l=>t(S)("topP",l))},null,8,["disabled","modelValue"])]),_:1}),o(t(M),{class:"options-config-item-right"},{default:s(()=>[o(t(q),{min:.1,max:1,step:.1,disabled:!m.hasSavePermission,modelValue:d.value.topP,"onUpdate:modelValue":e[11]||(e[11]=l=>d.value.topP=l),onChange:e[12]||(e[12]=l=>t(S)("topP",l))},null,8,["disabled","modelValue"])]),_:1})]),_:1}),o(t(W),{gutter:12,align:"middle",type:"flex"},{default:s(()=>[o(t(M),{class:"options-config-item-left"},{default:s(()=>[i("span",kt,c(t(n)("bot.maxReplyLength")),1)]),_:1}),o(t(M),{class:"options-config-item-middle"},{default:s(()=>[o(t(j),{min:1024,max:2e4,step:1e3,disabled:!m.hasSavePermission,modelValue:d.value.maxReplyLength,"onUpdate:modelValue":e[13]||(e[13]=l=>d.value.maxReplyLength=l),onChange:e[14]||(e[14]=l=>t(S)("maxReplyLength",l))},null,8,["disabled","modelValue"])]),_:1}),o(t(M),{class:"options-config-item-right"},{default:s(()=>[o(t(q),{min:1024,max:2e4,step:1e3,disabled:!m.hasSavePermission,modelValue:d.value.maxReplyLength,"onUpdate:modelValue":e[15]||(e[15]=l=>d.value.maxReplyLength=l),onChange:e[16]||(e[16]=l=>t(S)("maxReplyLength",l))},null,8,["disabled","modelValue"])]),_:1})]),_:1}),o(t(W),{gutter:12,align:"middle",type:"flex"},{default:s(()=>[o(t(M),{class:"options-config-item-left"},{default:s(()=>[i("span",yt,c(t(n)("bot.historyCount")),1)]),_:1}),o(t(M),{class:"options-config-item-middle"},{default:s(()=>[o(t(j),{min:1,max:100,step:10,disabled:!m.hasSavePermission,modelValue:d.value.maxMessageCount,"onUpdate:modelValue":e[17]||(e[17]=l=>d.value.maxMessageCount=l),onChange:e[18]||(e[18]=l=>t(S)("maxMessageCount",l))},null,8,["disabled","modelValue"])]),_:1}),o(t(M),{class:"options-config-item-right"},{default:s(()=>[o(t(q),{min:1,max:100,step:1,disabled:!m.hasSavePermission,modelValue:d.value.maxMessageCount,"onUpdate:modelValue":e[19]||(e[19]=l=>d.value.maxMessageCount=l),onChange:e[20]||(e[20]=l=>t(S)("maxMessageCount",l))},null,8,["disabled","modelValue"])]),_:1})]),_:1})])]),i("div",xt,[i("h1",_t,c(t(n)("bot.skill")),1),i("div",Mt,[o(t(ae),{"expand-icon-position":"left"},{default:s(()=>[o(t(P),null,{title:s(()=>[i("div",Vt,[i("span",null,c(t(n)("menus.ai.workflow")),1),i("div",It,[i("span",Dt,c(T.value.length),1),i("span",{onClick:e[21]||(e[21]=l=>Se())},[o(t(E),null,{default:s(()=>[o(t(Q))]),_:1})])])])]),default:s(()=>[o(J,{data:T.value,onDelete:Ue},null,8,["data"])]),_:1}),o(t(P),null,{title:s(()=>[i("div",St,[i("span",null,c(t(n)("menus.ai.documentCollection")),1),i("div",At,[i("span",Pt,c(F.value.length),1),i("span",{onClick:e[22]||(e[22]=l=>De())},[o(t(E),null,{default:s(()=>[o(t(Q))]),_:1})])])])]),default:s(()=>[o(J,{data:F.value,onDelete:Be},null,8,["data"])]),_:1}),o(t(P),null,{title:s(()=>[i("div",Et,[i("span",null,c(t(n)("menus.ai.plugin")),1),i("div",Tt,[i("span",Rt,c(Z.value.length),1),i("span",{onClick:e[23]||(e[23]=l=>Ve())},[o(t(E),null,{default:s(()=>[o(t(Q))]),_:1})])])])]),default:s(()=>[o(J,{data:Z.value,"title-key":"name",onDelete:Re},null,8,["data"])]),_:1}),o(t(P),{title:"MCP"},{title:s(()=>[i("div",Kt,[e[35]||(e[35]=i("span",null,"MCP",-1)),i("div",Bt,[i("span",Ut,c(x.value.length),1),i("span",{onClick:e[24]||(e[24]=l=>Ie())},[o(t(E),null,{default:s(()=>[o(t(Q))]),_:1})])])])]),default:s(()=>[o(J,{data:x.value,"title-key":"mcpToolName","description-key":"mcpToolDescription",onDelete:Ke},null,8,["data"])]),_:1})]),_:1})])]),i("div",$t,[i("h1",Ot,c(t(n)("bot.conversationSettings")),1),i("div",Ft,[o(t(ae),{"expand-icon-position":"left"},{default:s(()=>[o(t(P),null,{title:s(()=>[i("div",Lt,[i("span",null,c(t(n)("bot.problemPresupposition")),1),i("span",{onClick:e[25]||(e[25]=l=>$e())},[o(t(E),null,{default:s(()=>[o(t(Q))]),_:1})])])]),default:s(()=>{var l;return[i("div",Qt,[(y(!0),I(ie,null,ne(t(Ye)((l=t(p))==null?void 0:l.presetQuestions),_=>(y(),I("div",{key:_.key},[_.description?(y(),I("div",Wt,[i("span",null,c(_.description),1),o(t(E),{color:"var(--el-color-danger)",size:"20px",onClick:K=>Fe(_.key),class:"el-list-item-delete-container"},{default:s(()=>[o(t(se))]),_:1},8,["onClick"])])):be("",!0)]))),128))])]}),_:1}),o(t(P),{title:t(n)("bot.welcomeMessage")},{default:s(()=>[i("div",jt,[o(t(U),{modelValue:w.value.welcomeMessage,"onUpdate:modelValue":e[26]||(e[26]=l=>w.value.welcomeMessage=l),placeholder:t(n)("bot.placeholder.welcome"),type:"textarea",onChange:e[27]||(e[27]=l=>t(oe)("welcomeMessage",l))},null,8,["modelValue","placeholder"])])]),_:1},8,["title"]),o(t(P),{title:t(n)("bot.deepThinking")},{default:s(()=>[i("div",qt,[i("div",null,c(t(n)("bot.enableDeepThinking")),1),o(t(we),{modelValue:w.value.enableDeepThinking,"onUpdate:modelValue":e[28]||(e[28]=l=>w.value.enableDeepThinking=l),onChange:e[29]||(e[29]=l=>t(oe)("enableDeepThinking",l))},null,8,["modelValue"])])]),_:1},8,["title"]),o(t(P),{title:t(n)("bot.sensitiveFilter")},{default:s(()=>[i("div",Nt,[i("div",null,c(t(n)("bot.enableSensitiveFilter")),1),o(t(we),{modelValue:w.value.enableSensitiveFilter,"onUpdate:modelValue":e[30]||(e[30]=l=>w.value.enableSensitiveFilter=l),onChange:e[31]||(e[31]=l=>t(oe)("enableSensitiveFilter",l))},null,8,["modelValue"])])]),_:1},8,["title"])]),_:1})])]),i("div",Gt,[i("h1",zt,c(t(n)("bot.publish")),1),i("div",Jt,[o(t(ae),{"expand-icon-position":"left"},{default:s(()=>[o(t(P),{title:t(n)("bot.postToWeChatOfficialAccount")},{default:s(()=>{var l,_,K,B;return[i("div",Yt,[i("div",Zt,[(_=(l=R.value)==null?void 0:l.options)!=null&&_.weChatMpAppId?(y(),I("span",Ht,c(t(n)("bot.configured")),1)):(y(),I("span",Xt,c(t(n)("bot.notConfigured")),1)),i("div",eo,[i("div",{class:"publish-wx-right-container",onClick:Le},[o(t($),{link:"",type:"primary"},{default:s(()=>[o(t(E),{class:"mr-1"},{default:s(()=>[o(t(ze))]),_:1}),O(" "+c(t(n)("button.edit")),1)]),_:1})]),(B=(K=R.value)==null?void 0:K.options)!=null&&B.weChatMpAppId?(y(),I("div",{key:0,class:"publish-wx-right-container",onClick:Qe},[o(t($),{link:"",type:"danger"},{default:s(()=>[o(t(E),{class:"mr-1"},{default:s(()=>[o(t(se))]),_:1}),O(" "+c(t(n)("button.delete")),1)]),_:1})])):be("",!0)])])])]}),_:1},8,["title"])]),_:1})])]),o(z,{title:t(n)("menus.ai.plugin"),width:"730",ref_key:"pluginToolDataRef",ref:de,"page-url":"/api/v1/plugin/pageByCategory","has-parent":!0,onGetData:Ae,"extra-query-params":{category:0}},null,8,["title"]),o(z,{title:t(n)("menus.ai.documentCollection"),width:"730",ref_key:"knowledgeDataRef",ref:re,"page-url":"/api/v1/documentCollection/page",onGetData:Pe},null,8,["title"]),o(z,{title:t(n)("menus.ai.workflow"),width:"730",ref_key:"workflowDataRef",ref:ue,"page-url":"/api/v1/workflow/page",onGetData:Ee},null,8,["title"]),o(z,{title:t(n)("menus.ai.mcp"),width:"730",ref_key:"mcpToolDataRef",ref:me,"page-url":"/api/v1/mcp/pageTools?status=1","title-key":"title","has-parent":!0,"is-select-mcp":!0,onGetData:Te},null,8,["title"]),o(it,{ref_key:"problemPresuppositionRef",ref:ce,onSuccess:Oe},null,512),o(dt,{ref_key:"publishWxRef",ref:pe,onReload:e[32]||(e[32]=l=>L())},null,512)]))}}),yl=Ce(to,[["__scopeId","data-v-fccf0f1c"]]);export{yl as default};
