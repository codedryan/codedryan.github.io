var U=Object.defineProperty,B=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var E=(p,i,o)=>i in p?U(p,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):p[i]=o,D=(p,i)=>{for(var o in i||(i={}))A.call(i,o)&&E(p,o,i[o]);if(h)for(var o of h(i))N.call(i,o)&&E(p,o,i[o]);return p},w=(p,i)=>B(p,Q(i));var $=(p,i,o)=>new Promise((_,u)=>{var k=f=>{try{F(o.next(f))}catch(y){u(y)}},V=f=>{try{F(o.throw(f))}catch(y){u(y)}},F=f=>f.done?_(f.value):Promise.resolve(f.value).then(k,V);F((o=o.apply(p,i)).next())});import{$ as l,aI as q,a3 as z,aJ as J,V as L,aW as M,Q as O,M as P}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as W,a as j,b as x}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     *//* empty css                */import{a as C,E as G}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";/* empty css               *//* empty css                  */import{E as H,a as b}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        */import{D as K}from"./DictSelect-DdOvS-6R.js";import{_ as X}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{E as Y}from"./index-DcZY4wgD.js";import{ElInput as Z}from"./index-BjDsryRX.js";import{ElButton as T}from"./index-oBOAcXl-.js";import{E as ee}from"./index-DGdiZ7pE.js";import{k as te,r as I,m as ae,n as le,J as t,q as S,E as a,u as e,L as m,y as c}from"../jse/index-index-D3Xb8oT_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./_baseClone-trfKWgGN.js";import"./merge-BysAs727.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./event-BB_Ol6Sd.js";import"./use-form-item-DVWmmqeW.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./index-m1ZP1zbM.js";import"./scroll-C2492Iw_.js";import"./clamp-CeuJyDnc.js";import"./vnode-DysYOGZN.js";import"./index-C33Sf0pH.js";const oe={class:"flex h-full flex-col gap-1.5 p-6"},se={class:"bg-background border-border flex-1 rounded-lg border p-5"},re={class:"flex items-center gap-3"},nt=te({__name:"sysFeedbackList",setup(p){const i=[{value:1,label:l("sysFeedback.functionalFailure")},{value:2,label:l("sysFeedback.optimizationSuggestions")},{value:3,label:l("sysFeedback.accountIssue")},{value:4,label:l("sysFeedback.other")}],o={0:{label:l("sysFeedback.notViewed"),type:"warning"},1:{label:l("sysFeedback.viewed"),type:"primary"},2:{label:l("sysFeedback.processed"),type:"success"},3:{label:l("sysFeedback.closed/Invalid"),type:"info"}},_=I(),u=I({feedbackType:"",status:"",feedbackContent:""}),k=I();function V(n){n==null||n.validate(s=>{s&&k.value.setQuery(u.value)})}function F(n){n==null||n.resetFields(),k.value.setQuery({})}function f(n){const s=i.find(d=>d.value===n);return s==null?void 0:s.label}function y(n,s){return $(this,null,function*(){const[,d]=yield O(P.post)("/api/v1/sysUserFeedback/update",w(D({},n),{status:s}));d&&d.errorCode===0&&k.value.setQuery({})})}return(n,s)=>(le(),ae("div",oe,[t(e(G),{ref_key:"formRef",ref:_,inline:"",model:u.value},{default:a(()=>[t(e(C),{prop:"feedbackType",class:"!mr-3"},{default:a(()=>[t(e(Y),{modelValue:u.value.feedbackType,"onUpdate:modelValue":s[0]||(s[0]=d=>u.value.feedbackType=d),options:i,placeholder:e(l)("sysFeedback.feedbackType"),clearable:"",filterable:"",immediate:""},null,8,["modelValue","placeholder"])]),_:1}),t(e(C),{prop:"status",class:"!mr-3"},{default:a(()=>[t(K,{modelValue:u.value.status,"onUpdate:modelValue":s[1]||(s[1]=d=>u.value.status=d),"dict-code":"feedbackType",placeholder:e(l)("sysFeedback.processingStatus")},null,8,["modelValue","placeholder"])]),_:1}),t(e(C),{prop:"feedbackContent",class:"!mr-3"},{default:a(()=>[t(e(Z),{modelValue:u.value.feedbackContent,"onUpdate:modelValue":s[2]||(s[2]=d=>u.value.feedbackContent=d),placeholder:e(l)("common.searchPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),t(e(C),null,{default:a(()=>[t(e(T),{onClick:s[3]||(s[3]=d=>V(_.value)),type:"primary"},{default:a(()=>[m(c(e(l)("button.query")),1)]),_:1}),t(e(T),{onClick:s[4]||(s[4]=d=>F(_.value))},{default:a(()=>[m(c(e(l)("button.reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),S("div",se,[t(X,{ref_key:"pageDataRef",ref:k,"page-url":"/api/v1/sysUserFeedback/page","page-size":10},{default:a(({pageList:d})=>[t(e(H),{border:"","show-overflow-tooltip":"",data:d},{default:a(()=>[t(e(b),{prop:"id",label:"ID"},{default:a(({row:r})=>[m(c(r.id),1)]),_:1}),t(e(b),{prop:"feedbackType",label:e(l)("sysFeedback.category")},{default:a(({row:r})=>[m(c(f(r.feedbackType)),1)]),_:1},8,["label"]),t(e(b),{prop:"feedbackContent",label:e(l)("sysFeedback.description")},{default:a(({row:r})=>[m(c(r.feedbackContent),1)]),_:1},8,["label"]),t(e(b),{prop:"contactInfo",label:e(l)("sysFeedback.contactInformation")},{default:a(({row:r})=>[m(c(r.contactInfo),1)]),_:1},8,["label"]),t(e(b),{prop:"created",label:e(l)("sysFeedback.submittedAt")},{default:a(({row:r})=>[m(c(r.created),1)]),_:1},8,["label"]),t(e(b),{prop:"status",label:e(l)("sysFeedback.processingStatus")},{default:a(({row:r})=>{var v;return[t(e(ee),{type:o[(v=r.status)!=null?v:0].type},{default:a(()=>{var g;return[m(c(o[(g=r.status)!=null?g:0].label),1)]}),_:2},1032,["type"])]}),_:1},8,["label"]),t(e(b),{label:e(l)("common.handle"),width:"90",align:"right"},{default:a(({row:r})=>[S("div",re,[t(e(T),{link:"",type:"primary",onClick:v=>e(q).push(`/sys/sysFeedback/${r.id}`)},{default:a(()=>[m(c(e(l)("button.view")),1)]),_:1},8,["onClick"]),t(e(W),null,{dropdown:a(()=>[t(e(j),null,{default:a(()=>{var v,g;return[t(e(x),{icon:e(J),disabled:((v=r.status)!=null?v:0)>=1,onClick:R=>y(r,1)},{default:a(()=>[m(c(e(l)("button.markAsRead")),1)]),_:1},8,["icon","disabled","onClick"]),t(e(x),{disabled:((g=r.status)!=null?g:0)>=2,onClick:R=>y(r,2)},{default:a(()=>[t(e(L),null,{default:a(()=>[t(e(M),{icon:"svg:resolved"})]),_:1}),m(" "+c(e(l)("button.markAsResolved")),1)]),_:1},8,["disabled","onClick"])]}),_:2},1024)]),default:a(()=>[t(e(T),{link:"",icon:e(z)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])]))}});export{nt as default};
