var Le=Object.defineProperty,qe=Object.defineProperties;var Ve=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var Q=(a,t,o)=>t in a?Le(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,m=(a,t)=>{for(var o in t||(t={}))re.call(t,o)&&Q(a,o,t[o]);if(K)for(var o of K(t))ie.call(t,o)&&Q(a,o,t[o]);return a},T=(a,t)=>qe(a,Ve(t));var P=(a,t)=>{var o={};for(var s in a)re.call(a,s)&&t.indexOf(s)<0&&(o[s]=a[s]);if(a!=null&&K)for(var s of K(a))t.indexOf(s)<0&&ie.call(a,s)&&(o[s]=a[s]);return o};var R=(a,t,o)=>Q(a,typeof t!="symbol"?t+"":t,o);var H=(a,t,o)=>new Promise((s,r)=>{var l=v=>{try{p(o.next(v))}catch(u){r(u)}},w=v=>{try{p(o.throw(v))}catch(u){r(u)}},p=v=>v.done?s(v.value):Promise.resolve(v.value).then(l,w);p((o=o.apply(a,t)).next())});import{k as C,c as B,B as d,n as i,E as c,x as y,D as L,u as e,ap as te,aq as oe,v as x,m as U,p as g,y as E,s as I,i as ve,r as N,au as je,J as A,z as We,aM as Ke,aN as He,w as Ue,q as Y,L as M,V as de,X as _e,aO as Je,d as Ge,G as Xe,P as ce,A as we}from"../jse/index-index-D3Xb8oT_.js";import{aQ as Qe,cT as Ye,bN as ge,dy as Ze,ap as et,dz as tt,dA as ot,dB as at,dC as st,dD as nt,cy as ue,dE as lt,dF as pe,aw as fe,dG as rt,dH as it}from"./bootstrap-Bf65uz2I.js";import{D as dt,a as ct,b as ut,c as pt,d as ft,X as me,A as mt}from"./loading-BcNj5jY5.js";var yt=C({__name:"BaseSeparator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const t=a,o=["horizontal","vertical"];function s(p){return o.includes(p)}const r=B(()=>s(t.orientation)?t.orientation:"horizontal"),l=B(()=>r.value==="vertical"?t.orientation:void 0),w=B(()=>t.decorative?{role:"none"}:{"aria-orientation":l.value,role:"separator"});return(p,v)=>(i(),d(e(Qe),L({as:p.as,"as-child":p.asChild,"data-orientation":r.value},w.value),{default:c(()=>[y(p.$slots,"default")]),_:3},16,["as","as-child","data-orientation"]))}}),ht=yt,vt=C({__name:"Separator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const t=a;return(o,s)=>(i(),d(ht,te(oe(t)),{default:c(()=>[y(o.$slots,"default")]),_:3},16))}}),_t=vt;const wt=C({__name:"Separator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{},label:{}},setup(a){const t=a,o=B(()=>{const l=t,{class:s}=l;return P(l,["class"])});return(s,r)=>(i(),d(e(_t),L(o.value,{class:e(x)("bg-border relative shrink-0",t.orientation==="vertical"?"h-full w-px":"h-px w-full",t.class)}),{default:c(()=>[t.label?(i(),U("span",{key:0,class:I(e(x)("text-muted-foreground bg-background absolute left-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center justify-center text-xs",t.orientation==="vertical"?"w-[1px] px-1 py-2":"h-[1px] px-2 py-1"))},E(t.label),3)):g("",!0)]),_:1},16,["class"]))}}),gt=Ye("bg-background shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 border-border",{defaultVariants:{side:"right"},variants:{side:{bottom:"inset-x-0 bottom-0 border-t border-border data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left ",right:"inset-y-0 right-0 w-3/4 border-l  data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right",top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top"}}}),Ct=C({__name:"Sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(a,{emit:t}){const r=ge(a,t);return(l,w)=>(i(),d(e(dt),te(oe(e(r))),{default:c(()=>[y(l.$slots,"default")]),_:3},16))}}),ye=C({__name:"SheetClose",props:{asChild:{type:Boolean},as:{}},setup(a){const t=a;return(o,s)=>(i(),d(e(ct),te(oe(t)),{default:c(()=>[y(o.$slots,"default")]),_:3},16))}}),bt=["data-dismissable-drawer"],xt=C({__name:"SheetOverlay",setup(a){Ze();const t=ve("DISMISSABLE_DRAWER_ID");return(o,s)=>(i(),U("div",{"data-dismissable-drawer":e(t),class:"bg-overlay z-popup inset-0"},null,8,bt))}}),Bt=C({inheritAttrs:!1,__name:"SheetContent",props:{appendTo:{default:"body"},class:{},modal:{type:Boolean},open:{type:Boolean},overlayBlur:{},side:{},zIndex:{},forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(a,{emit:t}){const o=a,s=t,r=B(()=>{const $=o,{class:_,modal:f,open:h,side:O}=$;return P($,["class","modal","open","side"])});function l(){return o.appendTo==="body"||o.appendTo===document.body||!o.appendTo}const w=B(()=>l()?"fixed":"absolute"),p=ge(r,s),v=N(null);function u(_){var f;_.target===((f=v.value)==null?void 0:f.$el)&&(o.open?s("opened"):s("closed"))}return(_,f)=>(i(),d(je,{defer:"",to:a.appendTo},[A(et,{name:"fade"},{default:c(()=>[a.open&&a.modal?(i(),d(xt,{key:0,style:We(T(m({},a.zIndex?{zIndex:a.zIndex}:{}),{position:w.value,backdropFilter:a.overlayBlur&&a.overlayBlur>0?`blur(${a.overlayBlur}px)`:"none"}))},null,8,["style"])):g("",!0)]),_:1}),A(e(ut),L({ref_key:"contentRef",ref:v,class:e(x)("z-popup",e(gt)({side:a.side}),o.class),style:T(m({},a.zIndex?{zIndex:a.zIndex}:{}),{position:w.value}),onAnimationend:u},m(m({},e(p)),_.$attrs)),{default:c(()=>[y(_.$slots,"default")]),_:3},16,["class","style"])],8,["to"]))}}),Z=C({__name:"SheetDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const t=a,o=B(()=>{const l=t,{class:s}=l;return P(l,["class"])});return(s,r)=>(i(),d(e(pt),L({class:e(x)("text-muted-foreground text-sm",t.class)},o.value),{default:c(()=>[y(s.$slots,"default")]),_:3},16,["class"]))}}),Ot=C({__name:"SheetFooter",props:{class:{}},setup(a){const t=a;return(o,s)=>(i(),U("div",{class:I(e(x)("flex flex-row flex-col-reverse justify-end gap-x-2",t.class))},[y(o.$slots,"default")],2))}}),Dt=C({__name:"SheetHeader",props:{class:{}},setup(a){const t=a;return(o,s)=>(i(),U("div",{class:I(e(x)("flex flex-col text-center sm:text-left",t.class))},[y(o.$slots,"default")],2))}}),ee=C({__name:"SheetTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(a){const t=a,o=B(()=>{const l=t,{class:s}=l;return P(l,["class"])});return(s,r)=>(i(),d(e(ft),L({class:e(x)("text-foreground font-medium",t.class)},o.value),{default:c(()=>[y(s.$slots,"default")]),_:3},16,["class"]))}}),At={class:"flex items-center"},St={class:"flex-center"},kt=C({__name:"drawer",props:{drawerApi:{default:void 0},appendToMain:{type:Boolean,default:!1},cancelText:{},class:{},closable:{type:Boolean},closeIconPlacement:{default:"right"},closeOnClickModal:{type:Boolean},closeOnPressEscape:{type:Boolean},confirmLoading:{type:Boolean},confirmText:{},contentClass:{},description:{},destroyOnClose:{type:Boolean,default:!1},footer:{type:Boolean},footerClass:{},header:{type:Boolean},headerClass:{},loading:{type:Boolean},modal:{type:Boolean},openAutoFocus:{type:Boolean},overlayBlur:{},placement:{},showCancelButton:{type:Boolean},showConfirmButton:{type:Boolean},submitting:{type:Boolean,default:!1},title:{},titleTooltip:{},zIndex:{default:1e3}},setup(a){var j,le;const t=a,o=tt.getComponents(),s=Ke();_e("DISMISSABLE_DRAWER_ID",s);const r=N(),{$t:l}=ot(),{isMobile:w}=at(),p=(le=(j=t.drawerApi)==null?void 0:j.useStore)==null?void 0:le.call(j),{appendToMain:v,cancelText:u,class:_,closable:f,closeIconPlacement:h,closeOnClickModal:O,closeOnPressEscape:S,confirmLoading:$,confirmText:J,contentClass:Ce,description:q,destroyOnClose:be,footer:xe,footerClass:Be,header:Oe,headerClass:De,loading:ae,modal:Ae,openAutoFocus:Se,overlayBlur:ke,placement:z,showCancelButton:$e,showConfirmButton:Ie,submitting:D,title:V,titleTooltip:se,zIndex:Te}=st(t,p);He(()=>{var n;v.value||(n=t.drawerApi)==null||n.close()});function Pe(n){(!O.value||D.value)&&n.preventDefault()}function Ee(n){(!S.value||D.value)&&n.preventDefault()}function ze(n){const b=n.target,W=b==null?void 0:b.dataset.dismissableDrawer;(D.value||!O.value||W!==s)&&n.preventDefault()}function Fe(n){Se.value||n==null||n.preventDefault()}function ne(n){n.preventDefault(),n.stopPropagation()}const Re=B(()=>v.value?`#${nt}>div:not(.absolute)>div`:void 0),G=N(!1),X=N(!0);Ue(()=>{var n;return(n=p==null?void 0:p.value)==null?void 0:n.isOpen},n=>{X.value=!1,n&&!e(G)&&(G.value=!0)});function Me(){var n;X.value=!0,(n=t.drawerApi)==null||n.onClosed()}const Ne=B(()=>!e(be)&&e(G));return(n,b)=>{var W;return i(),d(e(Ct),{modal:!1,open:(W=e(p))==null?void 0:W.isOpen,"onUpdate:open":b[3]||(b[3]=()=>{var F;return(F=a.drawerApi)==null?void 0:F.close()})},{default:c(()=>{var F;return[A(e(Bt),{"append-to":Re.value,class:I(e(x)("flex w-[520px] flex-col",e(_),{"!w-full":e(w)||e(z)==="bottom"||e(z)==="top","max-h-[100vh]":e(z)==="bottom"||e(z)==="top",hidden:X.value})),modal:e(Ae),open:(F=e(p))==null?void 0:F.isOpen,side:e(z),"z-index":e(Te),"force-mount":Ne.value,"overlay-blur":e(ke),onCloseAutoFocus:ne,onClosed:Me,onEscapeKeyDown:Ee,onFocusOutside:ne,onInteractOutside:Pe,onOpenAutoFocus:Fe,onOpened:b[2]||(b[2]=()=>{var k;return(k=a.drawerApi)==null?void 0:k.onOpened()}),onPointerDownOutside:ze},{default:c(()=>[e(Oe)?(i(),d(e(Dt),{key:0,class:I(e(x)("!flex flex-row items-center justify-between border-b px-6 py-5",e(De),{"px-4 py-3":e(f),"pl-2":e(f)&&e(h)==="left"}))},{default:c(()=>[Y("div",At,[e(f)&&e(h)==="left"?(i(),d(e(ye),{key:0,"as-child":"",disabled:e(D),class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:c(()=>[y(n.$slots,"close-icon",{},()=>[A(e(ue),null,{default:c(()=>[A(e(me),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):g("",!0),e(f)&&e(h)==="left"?(i(),d(e(wt),{key:1,class:"ml-1 mr-2 h-8",decorative:"",orientation:"vertical"})):g("",!0),e(V)?(i(),d(e(ee),{key:2,class:"text-left"},{default:c(()=>[y(n.$slots,"title",{},()=>[M(E(e(V))+" ",1),e(se)?(i(),d(e(lt),{key:0,"trigger-class":"pb-1"},{default:c(()=>[M(E(e(se)),1)]),_:1})):g("",!0)])]),_:3})):g("",!0),e(q)?(i(),d(e(Z),{key:3,class:"mt-1 text-xs"},{default:c(()=>[y(n.$slots,"description",{},()=>[M(E(e(q)),1)])]),_:3})):g("",!0)]),!e(V)||!e(q)?(i(),d(e(pe),{key:0},{default:c(()=>[e(V)?g("",!0):(i(),d(e(ee),{key:0})),e(q)?g("",!0):(i(),d(e(Z),{key:1}))]),_:1})):g("",!0),Y("div",St,[y(n.$slots,"extra"),e(f)&&e(h)==="right"?(i(),d(e(ye),{key:0,"as-child":"",disabled:e(D),class:"data-[state=open]:bg-secondary ml-[2px] cursor-pointer rounded-full opacity-80 transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none"},{default:c(()=>[y(n.$slots,"close-icon",{},()=>[A(e(ue),null,{default:c(()=>[A(e(me),{class:"size-4"})]),_:1})])]),_:3},8,["disabled"])):g("",!0)])]),_:3},8,["class"])):(i(),d(e(pe),{key:1},{default:c(()=>[A(e(ee)),A(e(Z))]),_:1})),Y("div",{ref_key:"wrapperRef",ref:r,class:I(e(x)("relative flex-1 overflow-y-auto p-3",e(Ce),{"pointer-events-none":e(ae)||e(D)}))},[y(n.$slots,"default")],2),e(ae)||e(D)?(i(),d(e(mt),{key:2,spinning:""})):g("",!0),e(xe)?(i(),d(e(Ot),{key:3,class:I(e(x)("w-full flex-row items-center justify-end border-t p-2 px-3",e(Be)))},{default:c(()=>[y(n.$slots,"prepend-footer"),y(n.$slots,"footer",{},()=>[e($e)?(i(),d(de(e(o).DefaultButton||e(fe)),{key:0,variant:"ghost",disabled:e(D),onClick:b[0]||(b[0]=()=>{var k;return(k=a.drawerApi)==null?void 0:k.onCancel()})},{default:c(()=>[y(n.$slots,"cancelText",{},()=>[M(E(e(u)||e(l)("cancel")),1)])]),_:3},8,["disabled"])):g("",!0),y(n.$slots,"center-footer"),e(Ie)?(i(),d(de(e(o).PrimaryButton||e(fe)),{key:1,loading:e($)||e(D),onClick:b[1]||(b[1]=()=>{var k;return(k=a.drawerApi)==null?void 0:k.onConfirm()})},{default:c(()=>[y(n.$slots,"confirmText",{},()=>[M(E(e(J)||e(l)("confirm")),1)])]),_:3},8,["loading"])):g("",!0)]),y(n.$slots,"append-footer")]),_:3},8,["class"])):g("",!0)]),_:3},8,["append-to","class","modal","open","side","z-index","force-mount","overlay-blur"])]}),_:3},8,["open"])}}});class $t{constructor(t={}){R(this,"sharedData",{payload:{}});R(this,"store");R(this,"api");R(this,"state");const f=t,{connectedComponent:o,onBeforeClose:s,onCancel:r,onClosed:l,onConfirm:w,onOpenChange:p,onOpened:v}=f,u=P(f,["connectedComponent","onBeforeClose","onCancel","onClosed","onConfirm","onOpenChange","onOpened"]),_={class:"",closable:!0,closeIconPlacement:"right",closeOnClickModal:!0,closeOnPressEscape:!0,confirmLoading:!1,contentClass:"",footer:!0,header:!0,isOpen:!1,loading:!1,modal:!0,openAutoFocus:!1,placement:"right",showCancelButton:!0,showConfirmButton:!0,submitting:!1,title:""};this.store=new rt(m(m({},_),u),{onUpdate:()=>{var O,S,$;const h=this.store.state;(h==null?void 0:h.isOpen)===((O=this.state)==null?void 0:O.isOpen)?this.state=h:(this.state=h,($=(S=this.api).onOpenChange)==null||$.call(S,!!(h!=null&&h.isOpen)))}}),this.state=this.store.state,this.api={onBeforeClose:s,onCancel:r,onClosed:l,onConfirm:w,onOpenChange:p,onOpened:v},Je(this)}close(){return H(this,null,function*(){var o,s,r;((r=yield(s=(o=this.api).onBeforeClose)==null?void 0:s.call(o))!=null?r:!0)&&this.store.setState(l=>T(m({},l),{isOpen:!1,submitting:!1}))})}getData(){var t,o;return(o=(t=this.sharedData)==null?void 0:t.payload)!=null?o:{}}lock(t=!0){return this.setState({submitting:t})}onCancel(){var t,o;this.api.onCancel?(o=(t=this.api).onCancel)==null||o.call(t):this.close()}onClosed(){var t,o;this.state.isOpen||(o=(t=this.api).onClosed)==null||o.call(t)}onConfirm(){var t,o;(o=(t=this.api).onConfirm)==null||o.call(t)}onOpened(){var t,o;this.state.isOpen&&((o=(t=this.api).onOpened)==null||o.call(t))}open(){this.store.setState(t=>T(m({},t),{isOpen:!0}))}setData(t){return this.sharedData.payload=t,this}setState(t){return Ge(t)?this.store.setState(t):this.store.setState(o=>m(m({},o),t)),this}unlock(){return this.lock(!1)}}const he=Symbol("APP_DRAWER_INJECT"),It={};function Rt(a={}){var v;const{connectedComponent:t}=a;if(t){const u=Xe({}),_=N(!0);return[C((h,{attrs:O,slots:S})=>(_e(he,{extendApi(J){Object.setPrototypeOf(u,J)},options:a,reCreateDrawer(){return H(this,null,function*(){_.value=!1,yield we(),_.value=!0})}}),Tt(u,m(m(m({},h),O),S)),()=>ce(_.value?t:"div",m(m({},h),O),S)),{name:"AIFlowyParentDrawer",inheritAttrs:!1}),u]}const o=ve(he,{}),s=m(m(m({},It),o.options),a);s.onOpenChange=u=>{var _,f,h;(_=a.onOpenChange)==null||_.call(a,u),(h=(f=o.options)==null?void 0:f.onOpenChange)==null||h.call(f,u)};const r=s.onClosed;s.onClosed=()=>{var u;r==null||r(),s.destroyOnClose&&((u=o.reCreateDrawer)==null||u.call(o))};const l=new $t(s),w=l;w.useStore=u=>it(l.store,u);const p=C((u,{attrs:_,slots:f})=>()=>ce(kt,T(m(m({},u),_),{drawerApi:w}),f),{name:"AIFlowyDrawer",inheritAttrs:!1});return(v=o.extendApi)==null||v.call(o,w),[p,w]}function Tt(a,t){return H(this,null,function*(){var r;if(!t||Object.keys(t).length===0)return;yield we();const o=(r=a==null?void 0:a.store)==null?void 0:r.state;if(!o)return;const s=new Set(Object.keys(o));for(const l of Object.keys(t))s.has(l)&&!["class"].includes(l)&&console.warn(`[AIFlowy Drawer]: When 'connectedComponent' exists, do not set props or slots '${l}', which will increase complexity. If you need to modify the props of Drawer, please use useAIFlowyDrawer or api.`)})}export{Rt as u};
