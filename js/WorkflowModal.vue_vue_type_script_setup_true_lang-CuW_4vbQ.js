import{$ as u,M as N,R as I}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as x}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as C,a as d}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{D as b}from"./DictSelect-DdOvS-6R.js";import{U as D}from"./UploadAvatar-a3x1lqjM.js";import{ElInput as f}from"./index-BjDsryRX.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as F,o as _,r as s,B,n as q,E as i,J as t,u as e,L as c,y as k}from"../jse/index-index-D3Xb8oT_.js";const P=F({__name:"WorkflowModal",emits:["reload"],setup(A,{expose:w,emit:y}){const U=y;_(()=>{}),w({openDialog:W});const v=s(),m=s(!1),p=s(!0),l=s({alias:"",deptId:"",title:"",description:"",icon:"",content:"",englishName:""}),n=s(!1),E=s({title:[{required:!0,message:u("message.required"),trigger:"blur"}]});function W(r){r.id&&(p.value=!1),l.value=r,m.value=!0}function M(){var r;(r=v.value)==null||r.validate(a=>{a&&(n.value=!0,N.post(p.value?"/api/v1/workflow/save":"/api/v1/workflow/update",l.value).then(o=>{n.value=!1,o.errorCode===0&&(I.success(o.message),U("reload"),V())}).catch(()=>{n.value=!1}))})}function V(){var r;(r=v.value)==null||r.resetFields(),p.value=!0,l.value={},m.value=!1}return(r,a)=>(q(),B(e(x),{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=o=>m.value=o),draggable:"",title:p.value?e(u)("button.add"):e(u)("button.edit"),"before-close":V,"close-on-click-modal":!1},{footer:i(()=>[t(e(g),{onClick:V},{default:i(()=>[c(k(e(u)("button.cancel")),1)]),_:1}),t(e(g),{type:"primary",onClick:M,loading:n.value,disabled:n.value},{default:i(()=>[c(k(e(u)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:i(()=>[t(e(C),{"label-width":"120px",ref_key:"saveForm",ref:v,model:l.value,"status-icon":"",rules:E.value},{default:i(()=>[t(e(d),{prop:"icon",label:e(u)("aiWorkflow.icon")},{default:i(()=>[t(D,{modelValue:l.value.icon,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.icon=o)},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"title",label:e(u)("aiWorkflow.title")},{default:i(()=>[t(e(f),{modelValue:l.value.title,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.title=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"categoryId",label:e(u)("aiWorkflow.categoryId")},{default:i(()=>[t(b,{modelValue:l.value.categoryId,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.categoryId=o),"dict-code":"aiWorkFlowCategory"},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"alias",label:e(u)("aiWorkflow.alias")},{default:i(()=>[t(e(f),{modelValue:l.value.alias,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.alias=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"englishName",label:e(u)("aiWorkflow.englishName")},{default:i(()=>[t(e(f),{modelValue:l.value.englishName,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.englishName=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"description",label:e(u)("aiWorkflow.description")},{default:i(()=>[t(e(f),{modelValue:l.value.description,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.description=o),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),t(e(d),{prop:"status",label:e(u)("aiWorkflow.status")},{default:i(()=>[t(b,{modelValue:l.value.status,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.status=o),"dict-code":"showOrNot"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{P as _};
