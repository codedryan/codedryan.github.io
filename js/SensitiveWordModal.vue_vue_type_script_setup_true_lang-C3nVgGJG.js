import{$ as a,M as F,R as M}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as C}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as I,a as f}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import{_ as B}from"./Upload.vue_vue_type_script_setup_true_lang-ClW8ereK.js";import{ElInput as W}from"./index-BjDsryRX.js";import{ElButton as _}from"./index-oBOAcXl-.js";import{k as S,o as $,r as i,B as c,n as g,E as r,J as u,u as e,L as V,y as k}from"../jse/index-index-D3Xb8oT_.js";const O=S({__name:"SensitiveWordModal",emits:["reload"],setup(h,{expose:D,emit:y}){const E=y;$(()=>{}),D({openDialog:x});const v=i(),n=i(!1),m=i(!0),s=i({packageId:"",sensitiveWord:"",fileUrl:"",wordDesc:"",status:"",deptId:""}),d=i(!1),w=i({packageId:[{required:!0,message:a("message.required"),trigger:"blur"}],sensitiveWord:[{required:!0,message:a("message.required"),trigger:"blur"}],wordDesc:[{required:!0,message:a("message.required"),trigger:"blur"}]}),b=i(!1);function x(l,o){b.value=o,l.id&&(m.value=!1),s.value=l,n.value=!0}function U(){var l;(l=v.value)==null||l.validate(o=>{o&&(d.value=!0,F.post(m.value?"api/v1/sensitiveWord/save":"api/v1/sensitiveWord/update",s.value).then(t=>{d.value=!1,t.errorCode===0&&(M.success(t.message),E("reload"),p())}).catch(()=>{d.value=!1}))})}function p(){var l;(l=v.value)==null||l.resetFields(),m.value=!0,s.value={},n.value=!1}function q(l){s.value.fileUrl=l}return(l,o)=>(g(),c(e(C),{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=t=>n.value=t),draggable:"",title:m.value?e(a)("button.add"):e(a)("button.edit"),"before-close":p,"close-on-click-modal":!1},{footer:r(()=>[u(e(_),{onClick:p},{default:r(()=>[V(k(e(a)("button.cancel")),1)]),_:1}),u(e(_),{type:"primary",onClick:U,loading:d.value,disabled:d.value},{default:r(()=>[V(k(e(a)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:r(()=>[u(e(I),{"label-width":"100px",ref_key:"saveForm",ref:v,model:s.value,"status-icon":"",rules:w.value},{default:r(()=>[u(e(f),{prop:"wordDesc",label:e(a)("sensitiveWord.wordDesc")},{default:r(()=>[u(e(W),{modelValue:s.value.wordDesc,"onUpdate:modelValue":o[0]||(o[0]=t=>s.value.wordDesc=t),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),b.value?(g(),c(e(f),{key:0,prop:"fileUrl",label:e(a)("sensitiveWord.fileUrl")},{default:r(()=>[u(B,{onSuccess:q})]),_:1},8,["label"])):(g(),c(e(f),{key:1,prop:"sensitiveWord",label:e(a)("sensitiveWord.sensitiveWord")},{default:r(()=>[u(e(W),{type:"textarea",placeholder:e(a)("sensitiveWord.placeholder.sensitiveWord"),rows:20,modelValue:s.value.sensitiveWord,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value.sensitiveWord=t),modelModifiers:{trim:!0}},null,8,["placeholder","modelValue"])]),_:1},8,["label"]))]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{O as _};
