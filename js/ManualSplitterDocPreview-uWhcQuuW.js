import{M as h,_}from"./bootstrap-Bf65uz2I.js";import{C as y}from"./CategoryPanel-DTPGkE9u.js";import M from"./AIEditorManualSegmentation-C7EP4Ojv.js";import{k,r,w as E,o as S,m as w,n as x,q as v,J as d}from"../jse/index-index-D3Xb8oT_.js";const L={class:"splitter-doc-container"},D={class:"preview-container"},F=k({__name:"ManualSplitterDocPreview",props:{filesList:{type:Array,default:()=>[]},knowledgeId:{default:"",type:String}},setup(s,{expose:f}){const i=s,m=r([]),u=r(),p=r(),n=r(null),t=r({}),a=r(""),g=e=>{if(e){if(t.value[e]!==void 0){a.value===e&&(n.value=t.value[e]);return}h.get(`/file/toText?filePath=${e}`).then(l=>{l.errorCode===0&&(t.value[e]=l.data,a.value===e&&(n.value=l.data))})}};E(()=>n.value,e=>{a.value&&(t.value[a.value]=e)},{deep:!0}),S(()=>{var l;if(i.filesList.length===0)return;i.filesList.forEach(o=>{o!=null&&o.filePath&&g(o.filePath)});const e=(l=i.filesList[0])==null?void 0:l.filePath;e&&(a.value=e,n.value=t.value[e]||null)});const c=()=>{if(a.value&&u.value)try{const e=u.value.getEditorContent();t.value[a.value]=e,n.value=e}catch(e){console.error(e)}},C=e=>{c(),p.value=e,e&&e.value&&(a.value=e.value,n.value=t.value[e.value]||null)};return f({getFilesData(){return m.value.length},getManualContent(){return u.value?u.value.getEditorContent:()=>""},getStoreManualDocuments:()=>(c(),Object.keys(t.value).map(e=>({filePath:e,manualContent:t.value[e]}))),syncCurrentEditorContent:c}),(e,l)=>{var o;return x(),w("div",L,[v("div",null,[d(y,{categories:s.filesList,"title-key":"fileName","need-hide-collapse":!0,"expand-width":200,"value-key":"filePath","default-selected-category":(o=s.filesList[0])==null?void 0:o.filePath,onClick:C},null,8,["categories","default-selected-category"])]),v("div",D,[d(M,{ref_key:"aiEditorManualSegmentationRef",ref:u,content:n.value},null,8,["content"])])])}}}),A=_(F,[["__scopeId","data-v-e088350e"]]);export{A as default};
