var U=Object.defineProperty,z=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var $=(p,s,l)=>s in p?U(p,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):p[s]=l,b=(p,s)=>{for(var l in s||(s={}))q.call(s,l)&&$(p,l,s[l]);if(V)for(var l of V(s))A.call(s,l)&&$(p,l,s[l]);return p},H=(p,s)=>z(p,I(s));import{$ as i,Z as F,aH as J,a3 as Y,Y as Z,M as L,R as B}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as j,a as G,b as K}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     */import{E as P}from"./el-message-box-B8o3mhYx.js";import"./css-C9o_OfXA.js";import"./el-overlay-Zuw8glOl.js";import"./css-DCrZaNHy.js";import{E as W,a as u}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{H as X}from"./HeaderSearch-Dj9rqjlr.js";import{_ as w}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import ee from"./McpModal-CQMsEbXr.js";import{E as te}from"./index-CMBjNRIa.js";import{ElSwitch as ae}from"./index-CHf9SThW.js";import{ElButton as h}from"./index-oBOAcXl-.js";import{k as oe,r as f,S as ie,H as le,m as k,n as y,J as o,q as x,E as r,u as e,L as m,s as re,y as c,I as D}from"../jse/index-index-D3Xb8oT_.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./index-BjDsryRX.js";import"./event-BB_Ol6Sd.js";import"./index-C33Sf0pH.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./aria-DEUWDJ1E.js";import"./index-B3qAv2kq.js";import"./validator-D2YZey62.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./merge-BysAs727.js";import"./_baseClone-trfKWgGN.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./hasPermission-CIdLHqw4.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";/* empty css                  */import"./el-dialog-CAR1-R4U.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./el-tabs-BUyJm6xP.js";import"./use-wheel-C9oFsIdW.js";import"./index-DSAOTmKA.js";const se={class:"flex h-full flex-col gap-6 p-6"},pe={class:"bg-background border-border flex-1 rounded-lg border p-5"},ne={class:"flex items-center gap-3"},xt=oe({__name:"Mcp",setup(p){const s=f(),l=f(),E=f();function M(a){a==null||a.resetFields(),l.value.setQuery({})}function S(a){E.value.openDialog(b({},a))}function O(a){P.confirm(i("message.deleteAlert"),i("message.noticeTitle"),{confirmButtonText:i("message.ok"),cancelButtonText:i("message.cancel"),type:"warning",beforeClose:(d,n,_)=>{d==="confirm"?(n.confirmButtonLoading=!0,L.post("/api/v1/mcp/remove",{id:a.id}).then(t=>{n.confirmButtonLoading=!1,t.errorCode===0&&(B.success(t.message),M(s.value),_())}).catch(()=>{n.confirmButtonLoading=!1})):_()}}).catch(()=>{})}const T=(a,d)=>{d?C.value[a.id]=!0:g.value[a.id]=!0,L.post("/api/v1/mcp/update",b({},a)).then(n=>{d?C.value[a.id]=!1:g.value[a.id]=!1,n.errorCode===0&&(a.status?B.success(i("mcp.message.startupSuccessful")):B.success(i("mcp.message.stopSuccessful"))),l.value.setQuery({})})},R=[{key:"create",type:"primary",text:i("button.add"),icon:ie(F),data:{action:"create"}}],N=a=>{l.value.setQuery({packageName:a,isQueryOr:!0})},Q=a=>{a.key==="create"&&S({})},g=f({}),C=f({});return(a,d)=>{const n=le("access");return y(),k("div",se,[o(ee,{ref_key:"saveDialog",ref:E,onReload:M},null,512),o(X,{buttons:R,onSearch:N,onButtonClick:Q}),x("div",pe,[o(w,{ref_key:"pageDataRef",ref:l,"page-url":"/api/v1/mcp/page","page-size":10},{default:r(({pageList:_})=>[o(e(W),{data:_,border:""},{default:r(()=>[o(e(u),{prop:"title",label:e(i)("mcp.title")},{default:r(({row:t})=>[o(e(te),{content:t.clientOnline?e(i)("mcp.labels.clientOnline"):e(i)("mcp.labels.clientOffline"),placement:"top"},{default:r(()=>[x("span",{class:re(["mr-2 inline-block h-2 w-2 rounded-full",t.clientOnline?"bg-green-500":"bg-red-500"])},null,2)]),_:2},1032,["content"]),m(" "+c(t.title),1)]),_:1},8,["label"]),o(e(u),{prop:"description",label:e(i)("mcp.description")},{default:r(({row:t})=>[m(c(t.description),1)]),_:1},8,["label"]),o(e(u),{prop:"created",label:e(i)("mcp.created")},{default:r(({row:t})=>[m(c(t.created),1)]),_:1},8,["label"]),o(e(u),{prop:"status",label:e(i)("mcp.status")},{default:r(({row:t})=>[o(e(ae),{modelValue:t.status,"onUpdate:modelValue":v=>t.status=v,onChange:()=>T(t,!1),loading:g.value[t.id],disabled:g.value[t.id]},null,8,["modelValue","onUpdate:modelValue","onChange","loading","disabled"])]),_:1},8,["label"]),o(e(u),{label:e(i)("common.handle"),width:"150",align:"right"},{default:r(({row:t})=>[x("div",ne,[D((y(),k("div",null,[o(e(h),{onClick:v=>T(H(b({},t),{status:!0}),!0),type:"primary",link:"",icon:e(J),loading:C.value[t.id]},{default:r(()=>[m(c(e(i)("重启")),1)]),_:1},8,["onClick","icon","loading"])])),[[n,"/api/v1/mcp/save","code"]]),D((y(),k("div",null,[o(e(h),{type:"primary",link:"",onClick:v=>S(t)},{default:r(()=>[m(c(e(i)("button.edit")),1)]),_:1},8,["onClick"])])),[[n,"/api/v1/mcp/save","code"]]),o(e(j),null,{dropdown:r(()=>[o(e(G),null,{default:r(()=>[D((y(),k("div",null,[o(e(K),{onClick:v=>O(t)},{default:r(()=>[o(e(h),{type:"danger",icon:e(Z),link:""},{default:r(()=>[m(c(e(i)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[n,"/api/v1/mcp/remove","code"]])]),_:2},1024)]),default:r(()=>[o(e(h),{link:"",icon:e(Y)},null,8,["icon"])]),_:2},1024)])]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])])}}});export{xt as default};
