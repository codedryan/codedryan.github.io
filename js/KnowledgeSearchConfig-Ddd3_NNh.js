import{M as f,$ as l,a0 as r,R as _,_ as V}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";/* empty css                */import{E as N,a as d}from"./el-form-item-8FQp7Cs4.js";import"./css-C9o_OfXA.js";import"./css-B4xXAc0m.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import"./css-DCrZaNHy.js";/* empty css                   */import{E as u}from"./index-CMBjNRIa.js";import{ElInputNumber as C}from"./index-9UPoHQm1.js";import{ElSwitch as b}from"./index-CHf9SThW.js";import{E as w,a as M}from"./index-DcZY4wgD.js";import{ElButton as k}from"./index-oBOAcXl-.js";import{k as A,o as Q,r as I,G as B,m as S,n as v,q as n,J as o,y as s,u as e,E as c,B as U,p as F,L as E,F as D,N as L}from"../jse/index-index-D3Xb8oT_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./index-Bxb6QITi.js";import"./_baseClone-trfKWgGN.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-BjDsryRX.js";import"./event-BB_Ol6Sd.js";import"./index-C33Sf0pH.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./index-BKzCwxYe.js";import"./validator-D2YZey62.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./scroll-C2492Iw_.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";import"./vnode-DysYOGZN.js";import"./index-Dg3fRnQE.js";const $={class:"search-config-sidebar"},q={class:"config-header"},K={class:"form-item-label"},O={class:"form-item-content"},z={class:"form-item-label"},G={class:"form-item-content"},J={class:"form-item-label"},j={class:"form-item-content"},H={class:"form-item-label"},P={class:"form-item-content"},W={class:"form-item-label"},X={class:"form-item-content"},Y={class:"form-item-label"},Z={class:"form-item-content"},ee={class:"config-footer"},oe=A({__name:"KnowledgeSearchConfig",props:{documentCollectionId:{type:String,required:!0}},setup(g){const h=g;Q(()=>{x()});const m=I(!1),x=()=>{f.get(`/api/v1/documentCollection/detail?id=${h.documentCollectionId}`).then(p=>{const{data:t}=p;a.docRecallMaxNum=t.options.docRecallMaxNum?Number(t.options.docRecallMaxNum):5,a.simThreshold=t.options.simThreshold?Number(t.options.simThreshold):.5,a.enableQARecall=!!t.options.enableQARecall,a.enableSummaryRecall=!!t.options.enableSummaryRecall,a.searchEngineType=t.options.searchEngineType||"lucene",m.value=!!t.searchEngineEnable})},a=B({docRecallMaxNum:5,simThreshold:.5,enableQARecall:!0,enableSummaryRecall:!1,searchEngineType:"lucene"}),R=()=>{const p={id:h.documentCollectionId,options:{docRecallMaxNum:a.docRecallMaxNum,simThreshold:a.simThreshold,enableQARecall:a.enableQARecall,enableSummaryRecall:a.enableSummaryRecall,searchEngineType:a.searchEngineType},searchEngineEnable:m.value};f.post("/api/v1/documentCollection/update",p).then(()=>{_.success(l("documentCollectionSearch.message.saveSuccess"))}).catch(t=>{_.error(l("documentCollectionSearch.message.saveFailed")),console.error("保存配置失败：",t)})},y=[{label:"Lucene",value:"lucene"},{label:"ElasticSearch",value:"elasticSearch"}],T=()=>{f.post("/api/v1/documentCollection/update",{id:h.documentCollectionId,searchEngineEnable:m.value})};return(p,t)=>(v(),S("div",$,[n("div",q,[n("h3",null,s(e(l)("documentCollectionSearch.title")),1)]),o(e(N),{class:"config-form",model:a,"label-width":"100%",size:"small"},{default:c(()=>[o(e(d),{prop:"docRecallMaxNum",class:"form-item"},{default:c(()=>[n("div",K,[n("span",null,s(e(l)("documentCollectionSearch.docRecallMaxNum.label")),1),o(e(u),{content:e(l)("documentCollectionSearch.docRecallMaxNum.tooltip"),placement:"top",effect:"dark",class:"label-tooltip"},{default:c(()=>[o(e(r),{class:"info-icon"})]),_:1},8,["content"])]),n("div",O,[o(e(C),{modelValue:a.docRecallMaxNum,"onUpdate:modelValue":t[0]||(t[0]=i=>a.docRecallMaxNum=i),min:1,max:50,step:1,placeholder:e(l)("documentCollectionSearch.placeholder.count"),class:"form-control"},{append:c(()=>[E(s(e(l)("documentCollectionSearch.unit.count")),1)]),_:1},8,["modelValue","placeholder"])])]),_:1}),o(e(d),{prop:"simThreshold",class:"form-item"},{default:c(()=>[n("div",z,[n("span",null,s(e(l)("documentCollectionSearch.simThreshold.label")),1),o(e(u),{content:e(l)("documentCollectionSearch.simThreshold.tooltip"),placement:"top",effect:"dark",class:"label-tooltip"},{default:c(()=>[o(e(r),{class:"info-icon"})]),_:1},8,["content"])]),n("div",G,[o(e(C),{modelValue:a.simThreshold,"onUpdate:modelValue":t[1]||(t[1]=i=>a.simThreshold=i),min:0,max:1,step:.01,"show-input":"",class:"form-control"},null,8,["modelValue"])])]),_:1}),o(e(d),{class:"form-item"},{default:c(()=>[n("div",J,[n("span",null,s(e(l)("documentCollectionSearch.enableQARecall.label")),1),o(e(u),{content:e(l)("documentCollectionSearch.enableQARecall.tooltip"),placement:"top",effect:"dark",class:"label-tooltip"},{default:c(()=>[o(e(r),{class:"info-icon"})]),_:1},8,["content"])]),n("div",j,[o(e(b),{modelValue:a.enableQARecall,"onUpdate:modelValue":t[2]||(t[2]=i=>a.enableQARecall=i),"active-text":e(l)("documentCollectionSearch.switch.on"),"inactive-text":e(l)("documentCollectionSearch.switch.off"),class:"form-control switch-control"},null,8,["modelValue","active-text","inactive-text"])])]),_:1}),o(e(d),{class:"form-item"},{default:c(()=>[n("div",H,[n("span",null,s(e(l)("documentCollectionSearch.enableSummaryRecall.label")),1),o(e(u),{content:e(l)("documentCollectionSearch.enableSummaryRecall.tooltip"),placement:"top",effect:"dark",class:"label-tooltip"},{default:c(()=>[o(e(r),{class:"info-icon"})]),_:1},8,["content"])]),n("div",P,[o(e(b),{modelValue:a.enableSummaryRecall,"onUpdate:modelValue":t[3]||(t[3]=i=>a.enableSummaryRecall=i),"active-text":e(l)("documentCollectionSearch.switch.on"),"inactive-text":e(l)("documentCollectionSearch.switch.off"),class:"form-control switch-control"},null,8,["modelValue","active-text","inactive-text"])])]),_:1}),o(e(d),{class:"form-item"},{default:c(()=>[n("div",W,[n("span",null,s(e(l)("documentCollectionSearch.searchEngineEnable.label")),1),o(e(u),{content:e(l)("documentCollectionSearch.searchEngineEnable.tooltip"),placement:"top",effect:"dark",class:"label-tooltip"},{default:c(()=>[o(e(r),{class:"info-icon"})]),_:1},8,["content"])]),n("div",X,[o(e(b),{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=i=>m.value=i),onChange:T,"active-text":e(l)("documentCollectionSearch.switch.on"),"inactive-text":e(l)("documentCollectionSearch.switch.off"),class:"form-control switch-control"},null,8,["modelValue","active-text","inactive-text"])])]),_:1}),m.value?(v(),U(e(d),{key:0,prop:"searchEngineType",class:"form-item"},{default:c(()=>[n("div",Y,[n("span",null,s(e(l)("documentCollectionSearch.searchEngineType.label")),1),o(e(u),{content:e(l)("documentCollectionSearch.searchEngineType.tooltip"),placement:"top",effect:"dark",class:"label-tooltip"},{default:c(()=>[o(e(r),{class:"info-icon"})]),_:1},8,["content"])]),n("div",Z,[o(e(w),{modelValue:a.searchEngineType,"onUpdate:modelValue":t[5]||(t[5]=i=>a.searchEngineType=i),placeholder:e(l)("documentCollectionSearch.searchEngineType.placeholder"),class:"form-control"},{default:c(()=>[(v(),S(D,null,L(y,i=>o(e(M),{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","placeholder"])])]),_:1})):F("",!0)]),_:1},8,["model"]),n("div",ee,[o(e(k),{type:"primary",onClick:R,class:"submit-btn"},{default:c(()=>[E(s(e(l)("documentCollectionSearch.button.save")),1)]),_:1})])]))}}),He=V(oe,[["__scopeId","data-v-f9977f68"]]);export{He as default};
