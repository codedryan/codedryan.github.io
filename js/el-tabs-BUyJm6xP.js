var Le=Object.defineProperty,Ue=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var De=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var ge=(e,t,a)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ae=(e,t)=>{for(var a in t||(t={}))De.call(t,a)&&ge(e,a,t[a]);if(he)for(var a of he(t))Ke.call(t,a)&&ge(e,a,t[a]);return e},se=(e,t)=>Ue(e,We(t));var U=(e,t,a)=>new Promise((h,s)=>{var m=c=>{try{b(a.next(c))}catch(v){s(v)}},w=c=>{try{b(a.throw(c))}catch(v){s(v)}},b=c=>c.done?h(c.value):Promise.resolve(c.value).then(m,w);b((a=a.apply(e,t)).next())});import{bm as X,cd as le,bn as q,an as Ce,by as ue,ao as G,c1 as oe,bs as re,d8 as He,d9 as je,da as ye,V as j,aL as qe,aM as Qe,bz as Xe,bv as ie,bx as A,bo as Ge,Z as Je,c as _e,bQ as Ye,cB as Ze,aq as et}from"./bootstrap-Bf65uz2I.js";import{u as tt}from"./use-wheel-C9oFsIdW.js";import{c as F}from"./strings-CGsg9AfI.js";import{k as D,i as de,r as y,w as W,A as Q,ak as Te,m as we,n as Ee,z as at,s as Pe,u as B,O as st,c as R,o as nt,a6 as lt,Q as ot,J as p,a8 as rt,g as Se,x as ce,X as it,ah as ct,G as ut,aA as dt,I as bt,p as vt}from"../jse/index-index-D3Xb8oT_.js";import{c as ft}from"./clamp-CeuJyDnc.js";import{U as xe}from"./event-BB_Ol6Sd.js";import{u as mt}from"./index-DSAOTmKA.js";import{o as pt}from"./omit-CbyqVLxv.js";const J=Symbol("tabsRootContextKey"),ht=X({tabs:{type:q(Array),default:()=>le([])},tabRefs:{type:q(Object),default:()=>le({})}}),Re="ElTabBar",gt=D({name:Re}),yt=D(se(ae({},gt),{props:ht,setup(e,{expose:t}){const a=e,h=de(J);h||ue(Re,"<el-tabs><el-tab-bar /></el-tabs>");const s=G("tabs"),m=y(),w=y(),b=()=>{let l=0,u=0;const T=["top","bottom"].includes(h.props.tabPosition)?"width":"height",i=T==="width"?"x":"y",k=i==="x"?"left":"top";return a.tabs.every(E=>{if(re(E.paneName))return!1;const _=a.tabRefs[E.paneName];if(!_)return!1;if(!E.active)return!0;l=_[`offset${F(k)}`],u=_[`client${F(T)}`];const n=window.getComputedStyle(_);return T==="width"&&(u-=Number.parseFloat(n.paddingLeft)+Number.parseFloat(n.paddingRight),l+=Number.parseFloat(n.paddingLeft)),!1}),{[T]:`${u}px`,transform:`translate${F(i)}(${l}px)`}},c=()=>w.value=b(),v=[],P=()=>{v.forEach(l=>l.stop()),v.length=0,Object.values(a.tabRefs).forEach(l=>{v.push(oe(l,c))})};W(()=>a.tabs,()=>U(null,null,function*(){yield Q(),c(),P()}),{immediate:!0});const g=oe(m,()=>c());return Te(()=>{v.forEach(l=>l.stop()),v.length=0,g.stop()}),t({ref:m,update:c}),(l,u)=>(Ee(),we("div",{ref_key:"barRef",ref:m,class:Pe([B(s).e("active-bar"),B(s).is(B(h).props.tabPosition)]),style:at(w.value)},null,6))}}));var _t=Ce(yt,[["__file","tab-bar.vue"]]);const Nt=X({panes:{type:q(Array),default:()=>le([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),Ct={tabClick:(e,t,a)=>a instanceof Event,tabRemove:(e,t)=>t instanceof Event},Ne="ElTabNav",Tt=D({name:Ne,props:Nt,emits:Ct,setup(e,{expose:t,emit:a}){const h=de(J);h||ue(Ne,"<el-tabs><tab-nav /></el-tabs>");const s=G("tabs"),m=He(),w=je(),b=y(),c=y(),v=y(),P=y({}),g=y(),l=y(!1),u=y(0),T=y(!1),i=y(!0),k=st(),E=R(()=>["top","bottom"].includes(h.props.tabPosition)),_=R(()=>E.value?"width":"height"),n=R(()=>({transform:`translate${_.value==="width"?"X":"Y"}(-${u.value}px)`})),{width:N,height:S}=ye(b),{width:M,height:L}=ye(c,{width:0,height:0},{box:"border-box"}),K=R(()=>E.value?N.value:S.value),V=R(()=>E.value?M.value:L.value),{onWheel:I}=tt({atStartEdge:R(()=>u.value<=0),atEndEdge:R(()=>V.value-u.value<=K.value),layout:R(()=>E.value?"horizontal":"vertical")},o=>{u.value=ft(u.value+o,0,V.value-K.value)}),Y=()=>{if(!b.value)return;const o=b.value[`offset${F(_.value)}`],f=u.value;if(!f)return;const r=f>o?f-o:0;u.value=r},ke=()=>{if(!b.value||!c.value)return;const o=c.value[`offset${F(_.value)}`],f=b.value[`offset${F(_.value)}`],r=u.value;if(o-r<=f)return;const d=o-r>f*2?r+f:o-f;u.value=d},be=()=>U(null,null,function*(){const o=c.value;if(!l.value||!v.value||!b.value||!o)return;yield Q();const f=P.value[e.currentName];if(!f)return;const r=b.value,d=f.getBoundingClientRect(),C=r.getBoundingClientRect(),x=E.value?o.offsetWidth-C.width:o.offsetHeight-C.height,O=u.value;let $=O;E.value?(d.left<C.left&&($=O-(C.left-d.left)),d.right>C.right&&($=O+d.right-C.right)):(d.top<C.top&&($=O-(C.top-d.top)),d.bottom>C.bottom&&($=O+(d.bottom-C.bottom))),$=Math.max($,0),u.value=Math.min($,x)}),ve=()=>{var o;if(!c.value||!b.value)return;e.stretch&&((o=g.value)==null||o.update());const f=c.value[`offset${F(_.value)}`],r=b.value[`offset${F(_.value)}`],d=u.value;r<f?(l.value=l.value||{},l.value.prev=d,l.value.next=d+r<f,f-d<r&&(u.value=f-r)):(l.value=!1,d>0&&(u.value=0))},Oe=o=>{const f=ie(o);let r=0;switch(f){case A.left:case A.up:r=-1;break;case A.right:case A.down:r=1;break;default:return}const d=Array.from(o.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let x=d.indexOf(o.target)+r;x<0?x=d.length-1:x>=d.length&&(x=0),d[x].focus({preventScroll:!0}),d[x].click(),fe()},fe=()=>{i.value&&(T.value=!0)},Z=()=>T.value=!1,ze=(o,f)=>{P.value[f]=o},Ae=()=>U(null,null,function*(){yield Q();const o=P.value[e.currentName];o==null||o.focus({preventScroll:!0})});return W(m,o=>{o==="hidden"?i.value=!1:o==="visible"&&setTimeout(()=>i.value=!0,50)}),W(w,o=>{o?setTimeout(()=>i.value=!0,50):i.value=!1}),oe(v,ve),nt(()=>setTimeout(()=>be(),0)),lt(()=>ve()),t({scrollToActiveTab:be,removeFocus:Z,focusActiveTab:Ae,tabListRef:c,tabBarRef:g,scheduleRender:()=>ot(k)}),()=>{const o=l.value?[p("span",{class:[s.e("nav-prev"),s.is("disabled",!l.value.prev)],onClick:Y},[p(j,null,{default:()=>[p(qe,null,null)]})]),p("span",{class:[s.e("nav-next"),s.is("disabled",!l.value.next)],onClick:ke},[p(j,null,{default:()=>[p(Qe,null,null)]})])]:null,f=e.panes.map((r,d)=>{var C,x,O,$,me;const Fe=r.uid,ee=r.props.disabled,H=(x=(C=r.props.name)!=null?C:r.index)!=null?x:`${d}`,te=!ee&&(r.isClosable||r.props.closable!==!1&&e.editable);r.index=`${d}`;const Me=te?p(j,{class:"is-icon-close",onClick:z=>a("tabRemove",r,z)},{default:()=>[p(Xe,null,null)]}):null,Ve=(($=(O=r.slots).label)==null?void 0:$.call(O))||r.props.label,Ie=!ee&&r.active?(me=e.tabindex)!=null?me:h.props.tabindex:-1;return p("div",{ref:z=>ze(z,H),class:[s.e("item"),s.is(h.props.tabPosition),s.is("active",r.active),s.is("disabled",ee),s.is("closable",te),s.is("focus",T.value)],id:`tab-${H}`,key:`tab-${Fe}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":r.active,tabindex:Ie,onFocus:()=>fe(),onBlur:()=>Z(),onClick:z=>{Z(),a("tabClick",r,H,z)},onKeydown:z=>{const pe=ie(z);te&&(pe===A.delete||pe===A.backspace)&&a("tabRemove",r,z)}},[Ve,Me])});return k.value,p("div",{ref:v,class:[s.e("nav-wrap"),s.is("scrollable",!!l.value),s.is(h.props.tabPosition)]},[o,p("div",{class:s.e("nav-scroll"),ref:b},[e.panes.length>0?p("div",{class:[s.e("nav"),s.is(h.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(h.props.tabPosition))],ref:c,style:n.value,role:"tablist",onKeydown:Oe,onWheel:I},[e.type?null:p(_t,{ref:g,tabs:[...e.panes],tabRefs:P.value},null),f]):null])])}}}),wt=X({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:q(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ne=e=>rt(e)||Ge(e),Et={[xe]:e=>ne(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>ne(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>ne(e),tabAdd:()=>!0},Pt=D({name:"ElTabs",props:wt,emits:Et,setup(e,{emit:t,slots:a,expose:h}){var s;const m=G("tabs"),w=R(()=>["left","right"].includes(e.tabPosition)),{children:b,addChild:c,removeChild:v,ChildrenSorter:P}=mt(Se(),"ElTabPane"),g=y(),l=y((s=e.modelValue)!=null?s:"0"),u=(n,N=!1)=>U(null,null,function*(){var S,M,L,K;if(!(l.value===n||re(n)))try{let V;if(e.beforeLeave){const I=e.beforeLeave(n,l.value);V=I instanceof Promise?yield I:I}else V=!0;if(V!==!1){const I=(S=b.value.find(Y=>Y.paneName===l.value))==null?void 0:S.isFocusInsidePane();l.value=n,N&&(t(xe,n),t("tabChange",n)),(L=(M=g.value)==null?void 0:M.removeFocus)==null||L.call(M),I&&((K=g.value)==null||K.focusActiveTab())}}catch(V){}}),T=(n,N,S)=>{n.props.disabled||(t("tabClick",n,S),u(N,!0))},i=(n,N)=>{n.props.disabled||re(n.props.name)||(N.stopPropagation(),t("edit",n.props.name,"remove"),t("tabRemove",n.props.name))},k=()=>{t("edit",void 0,"add"),t("tabAdd")},E=n=>{const N=ie(n);[A.enter,A.numpadEnter].includes(N)&&k()},_=n=>{const N=n.el.firstChild,S=["bottom","right"].includes(e.tabPosition)?n.children[0].el:n.children[1].el;N!==S&&N.before(S)};return W(()=>e.modelValue,n=>u(n)),W(l,()=>U(null,null,function*(){var n;yield Q(),(n=g.value)==null||n.scrollToActiveTab()})),it(J,{props:e,currentName:l,registerPane:c,unregisterPane:v,nav$:g}),h({currentName:l,get tabNavRef(){return pt(g.value,["scheduleRender"])}}),()=>{const n=a["add-icon"],N=e.editable||e.addable?p("div",{class:[m.e("new-tab"),w.value&&m.e("new-tab-vertical")],tabindex:e.tabindex,onClick:k,onKeydown:E},[n?ce(a,"add-icon"):p(j,{class:m.is("icon-plus")},{default:()=>[p(Je,null,null)]})]):null,S=()=>p(Tt,{ref:g,currentName:l.value,editable:e.editable,type:e.type,panes:b.value,stretch:e.stretch,onTabClick:T,onTabRemove:i},null),M=p("div",{class:[m.e("header"),w.value&&m.e("header-vertical"),m.is(e.tabPosition)]},[p(P,null,{default:S,$stable:!0}),N]),L=p("div",{class:m.e("content")},[ce(a,"default")]);return p("div",{class:[m.b(),m.m(e.tabPosition),{[m.m("card")]:e.type==="card",[m.m("border-card")]:e.type==="border-card"}],onVnodeMounted:_,onVnodeUpdated:_},[L,M])}}});var St=Pt;const xt=X({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),$e="ElTabPane",Rt=D({name:$e}),$t=D(se(ae({},Rt),{props:xt,setup(e){const t=e,a=Se(),h=ct(),s=de(J);s||ue($e,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const m=G("tab-pane"),w=y(),b=y(),c=R(()=>{var i;return(i=t.closable)!=null?i:s.props.closable}),v=_e(()=>{var i;return s.currentName.value===((i=t.name)!=null?i:b.value)}),P=y(v.value),g=R(()=>{var i;return(i=t.name)!=null?i:b.value}),l=_e(()=>!t.lazy||P.value||v.value),u=()=>{var i;return(i=w.value)==null?void 0:i.contains(document.activeElement)};W(v,i=>{i&&(P.value=!0)});const T=ut({uid:a.uid,getVnode:()=>a.vnode,slots:h,props:t,paneName:g,active:v,index:b,isClosable:c,isFocusInsidePane:u});return s.registerPane(T),Te(()=>{s.unregisterPane(T)}),dt(()=>{var i;h.label&&((i=s.nav$.value)==null||i.scheduleRender())}),(i,k)=>B(l)?bt((Ee(),we("div",{key:0,id:`pane-${B(g)}`,ref_key:"paneRef",ref:w,class:Pe(B(m).b()),role:"tabpanel","aria-hidden":!B(v),"aria-labelledby":`tab-${B(g)}`},[ce(i.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ye,B(v)]]):vt("v-if",!0)}}));var Be=Ce($t,[["__file","tab-pane.vue"]]);const Lt=et(St,{TabPane:Be}),Ut=Ze(Be);export{Ut as E,Lt as a};
