import{M as g,$ as m,R as D}from"./bootstrap-Bf65uz2I.js";import"./css-gf8D6QlL.js";import{E as P}from"./el-dialog-CAR1-R4U.js";import"./el-overlay-Zuw8glOl.js";/* empty css                */import{E as q,a as I}from"./el-form-item-8FQp7Cs4.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import{E as L,a as M}from"./index-DcZY4wgD.js";import{ElButton as b}from"./index-oBOAcXl-.js";import{k as T,o as N,r as a,B as y,n as c,E as l,J as u,u as t,m as S,F as h,N as U,L as E,y as _}from"../jse/index-index-D3Xb8oT_.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./refs-D6FW0B1r.js";import"./event-BB_Ol6Sd.js";import"./index-Bxb6QITi.js";import"./index-Dg3fRnQE.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./use-form-common-props-IzjzSHax.js";import"./castArray-BBset58W.js";import"./_baseClone-trfKWgGN.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./_baseIteratee-rJjBrWyx.js";import"./strings-CGsg9AfI.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./clamp-CeuJyDnc.js";import"./toNumber-CvayJyp9.js";import"./index-pv0R11Cf.js";const Ce=T({__name:"DocumentModal",emits:["reload"],setup($,{expose:k,emit:V}){const F=V;N(()=>{x()}),k({openDialog:O});const x=()=>{g.get("api/v1/sysPromptTemplate/listOptions").then(e=>{e.errorCode===0&&(f.value=e.data)})},d=a(),p=a(!1),n=a(!0),r=a({id:"",summaryOptPromptId:""}),s=a(!1),C=a({title:[{required:!0,message:m("message.required"),trigger:"blur"}],content:[{required:!0,message:m("message.required"),trigger:"blur"}]});function O(e){e.id&&(n.value=!1),r.value=e,p.value=!0}const f=a([]);function B(){var e;(e=d.value)==null||e.validate(i=>{i&&(s.value=!0,g.post(n.value?"api/v1/document/save":"api/v1/document/update",r.value).then(o=>{s.value=!1,o.errorCode===0&&(D.success(o.message),F("reload"),v())}).catch(()=>{s.value=!1}))})}function v(){var e;(e=d.value)==null||e.resetFields(),n.value=!0,r.value={},p.value=!1}return(e,i)=>(c(),y(t(P),{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=o=>p.value=o),draggable:"",title:n.value?t(m)("button.add"):t(m)("button.edit"),"before-close":v,"close-on-click-modal":!1},{footer:l(()=>[u(t(b),{onClick:v},{default:l(()=>[E(_(t(m)("button.cancel")),1)]),_:1}),u(t(b),{type:"primary",onClick:B,loading:s.value,disabled:s.value},{default:l(()=>[E(_(t(m)("button.save")),1)]),_:1},8,["loading","disabled"])]),default:l(()=>[u(t(q),{"label-width":"120px",ref_key:"saveForm",ref:d,model:r.value,"status-icon":"",rules:C.value},{default:l(()=>[u(t(I),{prop:"title",label:"摘要优化提示词"},{default:l(()=>[u(t(L),{modelValue:r.value.summaryOptPromptId,"onUpdate:modelValue":i[0]||(i[0]=o=>r.value.summaryOptPromptId=o)},{default:l(()=>[(c(!0),S(h,null,U(f.value,o=>(c(),y(t(M),{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))}});export{Ce as default};
