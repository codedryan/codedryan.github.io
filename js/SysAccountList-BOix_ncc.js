var T=Object.defineProperty;var h=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var A=(c,l,n)=>l in c?T(c,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[l]=n,D=(c,l)=>{for(var n in l||(l={}))$.call(l,n)&&A(c,n,l[n]);if(h)for(var n of h(l))L.call(l,n)&&A(c,n,l[n]);return c};import{$ as i,Z as M,a3 as R,Y as V,M as H,R as Q}from"./bootstrap-Bf65uz2I.js";import{E as F}from"./el-avatar-BVPcm0Px.js";import"./css-gf8D6QlL.js";import{E as I,a as q,b as z}from"./el-dropdown-menu-v2KdT220.js";/* empty css                  *//* empty css                     */import{E as J}from"./el-message-box-B8o3mhYx.js";import"./css-C9o_OfXA.js";import"./el-overlay-Zuw8glOl.js";import{E as O,a as s}from"./el-table-JPhh2aff.js";import"./css-_QzOlLq8.js";/* empty css                   *//* empty css                        *//* empty css               */import{H as U}from"./HeaderSearch-Dj9rqjlr.js";import{_ as Y}from"./PageData.vue_vue_type_script_setup_true_lang-DfbAOXk_.js";import{u as Z}from"./dict-CsbZy8Qf.js";import{_ as j}from"./SysAccountModal.vue_vue_type_script_setup_true_lang-L8ZKtSRh.js";import{ElButton as g}from"./index-oBOAcXl-.js";import{k as G,o as K,r as B,S as P,H as W,m as _,n as b,J as o,q as X,E as r,u as e,L as m,y as p,p as ee,I as te}from"../jse/index-index-D3Xb8oT_.js";import"./index-CMBjNRIa.js";import"./index-bT9OJj6t.js";import"./_overRest-Bb9G3v08.js";import"./index-B3qAv2kq.js";import"./aria-DEUWDJ1E.js";import"./index-Bxb6QITi.js";import"./use-form-common-props-IzjzSHax.js";import"./index-CbSmxnRE.js";import"./util-B2mB0_6C.js";import"./castArray-BBset58W.js";import"./refs-D6FW0B1r.js";import"./index-BjDsryRX.js";import"./event-BB_Ol6Sd.js";import"./index-C33Sf0pH.js";import"./use-form-item-DVWmmqeW.js";import"./index-m1ZP1zbM.js";import"./validator-D2YZey62.js";import"./vnode-DysYOGZN.js";import"./scroll-C2492Iw_.js";import"./merge-BysAs727.js";import"./_baseClone-trfKWgGN.js";import"./isArrayLikeObject-j3RaJGb0.js";import"./_baseSlice-DZe_dRSe.js";import"./_baseIteratee-rJjBrWyx.js";import"./debounce-AsHllEOy.js";import"./toNumber-CvayJyp9.js";import"./index-p7kg-xKH.js";import"./index-Dg3fRnQE.js";import"./omit-CbyqVLxv.js";import"./index-pv0R11Cf.js";import"./raf-BVBe43_O.js";import"./hasPermission-CIdLHqw4.js";import"./el-empty-CDAlv280.js";import"./el-pagination-W2lJTIgw.js";import"./index-DcZY4wgD.js";import"./index-DGdiZ7pE.js";import"./useProps-DNCnrLfW.js";import"./_baseFindIndex-D7XfJLKM.js";import"./strings-CGsg9AfI.js";import"./clamp-CeuJyDnc.js";/* empty css                  */import"./el-dialog-CAR1-R4U.js";/* empty css                */import"./el-form-item-8FQp7Cs4.js";import"./DictSelect-DdOvS-6R.js";import"./UploadAvatar-a3x1lqjM.js";import"./el-image-viewer-DlaFkWIK.js";import"./css-BA5xAVBz.js";import"./index-e0qsk5Ci.js";import"./cloneDeep-Orislllf.js";const oe="/png/defaultUserAvatar-CNfE5SFB.png",ae={class:"flex h-full flex-col gap-6 p-6"},re={class:"bg-background border-border flex-1 rounded-lg border p-5"},ie={key:0,class:"flex items-center gap-3"},Dt=G({__name:"SysAccountList",setup(c){K(()=>{C()});const l=B(),n=B(),y=Z(),x=[{key:"create",text:i("button.add"),icon:P(M),type:"primary",data:{action:"create"},permission:"/api/v1/sysAccount/save"}];function C(){y.fetchDictionary("dataStatus")}const E=a=>{l.value.setQuery({loginName:a,isQueryOr:!0})};function v(a){a==null||a.resetFields(),l.value.setQuery({})}function k(a){n.value.openDialog(D({},a))}function w(a){J.confirm(i("message.deleteAlert"),i("message.noticeTitle"),{confirmButtonText:i("message.ok"),cancelButtonText:i("message.cancel"),type:"warning",beforeClose:(f,u,d)=>{f==="confirm"?(u.confirmButtonLoading=!0,H.post("/api/v1/sysAccount/remove",{id:a.id}).then(t=>{u.confirmButtonLoading=!1,t.errorCode===0&&(Q.success(t.message),v(),d())}).catch(()=>{u.confirmButtonLoading=!1})):d()}}).catch(()=>{})}function S(a){return(a==null?void 0:a.accountType)===1||(a==null?void 0:a.accountType)===99}return(a,f)=>{const u=W("access");return b(),_("div",ae,[o(j,{ref_key:"saveDialog",ref:n,onReload:v},null,512),o(U,{buttons:x,onSearch:E,onButtonClick:f[0]||(f[0]=d=>k({}))}),X("div",re,[o(Y,{ref_key:"pageDataRef",ref:l,"page-url":"/api/v1/sysAccount/page","page-size":10},{default:r(({pageList:d})=>[o(e(O),{data:d,border:""},{default:r(()=>[o(e(s),{prop:"avatar",align:"center",label:e(i)("sysAccount.avatar")},{default:r(({row:t})=>[o(e(F),{src:t.avatar||e(oe)},null,8,["src"])]),_:1},8,["label"]),o(e(s),{prop:"loginName",align:"center",label:e(i)("sysAccount.loginName")},{default:r(({row:t})=>[m(p(t.loginName),1)]),_:1},8,["label"]),o(e(s),{prop:"nickname",align:"center",label:e(i)("sysAccount.nickname")},{default:r(({row:t})=>[m(p(t.nickname),1)]),_:1},8,["label"]),o(e(s),{prop:"mobile",align:"center",width:"120",label:e(i)("sysAccount.mobile")},{default:r(({row:t})=>[m(p(t.mobile),1)]),_:1},8,["label"]),o(e(s),{prop:"email",align:"center",width:"200",label:e(i)("sysAccount.email")},{default:r(({row:t})=>[m(p(t.email),1)]),_:1},8,["label"]),o(e(s),{prop:"status",align:"center",label:e(i)("sysAccount.status")},{default:r(({row:t})=>[m(p(e(y).getDictLabel("dataStatus",t.status)),1)]),_:1},8,["label"]),o(e(s),{prop:"created",width:"160",label:e(i)("sysAccount.created")},{default:r(({row:t})=>[m(p(t.created),1)]),_:1},8,["label"]),o(e(s),{prop:"remark",label:e(i)("sysAccount.remark")},{default:r(({row:t})=>[m(p(t.remark),1)]),_:1},8,["label"]),o(e(s),{label:e(i)("common.handle"),width:"90",align:"right"},{default:r(({row:t})=>[S(t)?ee("",!0):(b(),_("div",ie,[o(e(g),{link:"",type:"primary",onClick:N=>k(t)},{default:r(()=>[m(p(e(i)("button.edit")),1)]),_:1},8,["onClick"]),o(e(I),null,{dropdown:r(()=>[o(e(q),null,{default:r(()=>[te((b(),_("div",null,[o(e(z),{onClick:N=>w(t)},{default:r(()=>[o(e(g),{type:"danger",icon:e(V),link:""},{default:r(()=>[m(p(e(i)("button.delete")),1)]),_:1},8,["icon"])]),_:1},8,["onClick"])])),[[u,"/api/v1/sysAccount/remove","code"]])]),_:2},1024)]),default:r(()=>[o(e(g),{link:"",icon:e(R)},null,8,["icon"])]),_:2},1024)]))]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},512)])])}}});export{Dt as default};
