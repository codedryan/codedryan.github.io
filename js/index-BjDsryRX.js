var et=Object.defineProperty,tt=Object.defineProperties;var ot=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var Ne=(a,i,n)=>i in a?et(a,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[i]=n,U=(a,i)=>{for(var n in i||(i={}))at.call(i,n)&&Ne(a,n,i[n]);if(Ee)for(var n of Ee(i))nt.call(i,n)&&Ne(a,n,i[n]);return a},te=(a,i)=>tt(a,ot(i));var q=(a,i,n)=>new Promise((o,u)=>{var p=c=>{try{y(n.next(c))}catch(f){u(f)}},l=c=>{try{y(n.throw(c))}catch(f){u(f)}},y=c=>c.done?o(c.value):Promise.resolve(c.value).then(p,l);y((n=n.apply(a,i)).next())});import{bo as ze,al as st,bm as it,bn as V,cd as rt,bB as oe,ce as lt,bq as ut,an as dt,ao as Pe,cf as pt,aJ as ct,cg as ft,bp as mt,c1 as vt,d as ae,V as $,ax as ne,i as ht,aq as yt}from"./bootstrap-Bf65uz2I.js";import{u as bt}from"./index-bT9OJj6t.js";import{U as J,I as se,C as Me}from"./event-BB_Ol6Sd.js";import{a8 as ie,k as Oe,aa as gt,ah as wt,c as h,O as re,r as le,w as ue,o as xt,A as T,t as St,m as I,n as d,p as m,F as de,q as F,s as g,u as t,x as Y,B as E,E as H,V as A,D as ke,ai as pe,y as G,z as Ve,aj as Te}from"../jse/index-index-D3Xb8oT_.js";import{u as Ct}from"./index-C33Sf0pH.js";import{u as It,a as Et}from"./use-form-item-DVWmmqeW.js";import{u as Nt,b as zt}from"./use-form-common-props-IzjzSHax.js";import{u as Pt,a as Mt}from"./index-m1ZP1zbM.js";import"./_overRest-Bb9G3v08.js";import"./index-Bxb6QITi.js";import"./aria-DEUWDJ1E.js";let x;const kt={height:"0",visibility:"hidden",overflow:st()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Vt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],Fe=a=>{const i=Number.parseFloat(a);return Number.isNaN(i)?a:i};function Tt(a){const i=window.getComputedStyle(a),n=i.getPropertyValue("box-sizing"),o=Number.parseFloat(i.getPropertyValue("padding-bottom"))+Number.parseFloat(i.getPropertyValue("padding-top")),u=Number.parseFloat(i.getPropertyValue("border-bottom-width"))+Number.parseFloat(i.getPropertyValue("border-top-width"));return{contextStyle:Vt.map(l=>[l,i.getPropertyValue(l)]),paddingSize:o,borderSize:u,boxSizing:n}}function Be(a,i=1,n){var o,u;x||(x=document.createElement("textarea"),((o=a.parentNode)!=null?o:document.body).appendChild(x));const{paddingSize:p,borderSize:l,boxSizing:y,contextStyle:c}=Tt(a);c.forEach(([w,S])=>x==null?void 0:x.style.setProperty(w,S)),Object.entries(kt).forEach(([w,S])=>x==null?void 0:x.style.setProperty(w,S,"important")),x.value=a.value||a.placeholder||"";let f=x.scrollHeight;const b={};y==="border-box"?f=f+l:y==="content-box"&&(f=f-p),x.value="";const B=x.scrollHeight-p;if(ze(i)){let w=B*i;y==="border-box"&&(w=w+p+l),f=Math.max(w,f),b.minHeight=`${w}px`}if(ze(n)){let w=B*n;y==="border-box"&&(w=w+p+l),f=Math.min(w,f)}return b.height=`${f}px`,(u=x.parentNode)==null||u.removeChild(x),x=void 0,b}const Ft=it(te(U({id:{type:String,default:void 0},size:ut,disabled:Boolean,modelValue:{type:V([String,Number,Object]),default:""},modelModifiers:{type:V(Object),default:()=>({})},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:V([Boolean,Object]),default:!1},autocomplete:{type:V(String),default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:oe,default:lt},showPassword:Boolean,showWordLimit:Boolean,wordLimitPosition:{type:String,values:["inside","outside"],default:"inside"},suffixIcon:{type:oe},prefixIcon:{type:oe},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:V([Object,Array,String]),default:()=>rt({})},autofocus:Boolean,rows:{type:Number,default:2}},bt(["ariaLabel"])),{inputmode:{type:V(String),default:void 0},name:String})),Bt={[J]:a=>ie(a),input:a=>ie(a),change:a=>ie(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function Ot(a){let i;function n(){if(a.value==null)return;const{selectionStart:u,selectionEnd:p,value:l}=a.value;if(u==null||p==null)return;const y=l.slice(0,Math.max(0,u)),c=l.slice(Math.max(0,p));i={selectionStart:u,selectionEnd:p,value:l,beforeTxt:y,afterTxt:c}}function o(){if(a.value==null||i==null)return;const{value:u}=a.value,{beforeTxt:p,afterTxt:l,selectionStart:y}=i;if(p==null||l==null||y==null)return;let c=u.length;if(u.endsWith(l))c=u.length-l.length;else if(u.startsWith(p))c=p.length;else{const f=p[y-1],b=u.indexOf(f,y-1);b!==-1&&(c=b+1)}a.value.setSelectionRange(c,c)}return[n,o]}const Le="ElInput",Lt=Oe({name:Le,inheritAttrs:!1}),Rt=Oe(te(U({},Lt),{props:Ft,emits:Bt,setup(a,{expose:i,emit:n}){const o=a,u=gt(),p=Ct(),l=wt(),y=h(()=>[o.type==="textarea"?ce.b():s.b(),s.m(w.value),s.is("disabled",S.value),s.is("exceed",je.value),{[s.b("group")]:l.prepend||l.append,[s.m("prefix")]:l.prefix||o.prefixIcon,[s.m("suffix")]:l.suffix||o.suffixIcon||o.clearable||o.showPassword,[s.bm("suffix","password-clear")]:K.value&&Z.value,[s.b("hidden")]:o.type==="hidden"},u.class]),c=h(()=>[s.e("wrapper"),s.is("focus",Q.value)]),{form:f,formItem:b}=It(),{inputId:B}=Et(o,{formItemContext:b}),w=Nt(),S=zt(),s=Pe("input"),ce=Pe("textarea"),D=re(),N=re(),X=le(!1),j=le(!1),fe=le(),W=re(o.inputStyle),C=h(()=>D.value||N.value),{wrapperRef:Re,isFocused:Q,handleFocus:$e,handleBlur:He}=Pt(C,{disabled:S,afterBlur(){var e;o.validateEvent&&((e=b==null?void 0:b.validate)==null||e.call(b,"blur").catch(r=>ae(r)))}}),me=h(()=>{var e;return(e=f==null?void 0:f.statusIcon)!=null?e:!1}),O=h(()=>(b==null?void 0:b.validateState)||""),ve=h(()=>O.value&&pt[O.value]),Ae=h(()=>j.value?ct:ft),De=h(()=>[u.style]),he=h(()=>[o.inputStyle,W.value,{resize:o.resize}]),z=h(()=>mt(o.modelValue)?"":String(o.modelValue)),K=h(()=>o.clearable&&!S.value&&!o.readonly&&!!z.value&&(Q.value||X.value)),Z=h(()=>o.showPassword&&!S.value&&!!z.value),P=h(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!S.value&&!o.readonly&&!o.showPassword),_=h(()=>z.value.length),je=h(()=>!!P.value&&_.value>Number(o.maxlength)),We=h(()=>!!l.suffix||!!o.suffixIcon||K.value||o.showPassword||P.value||!!O.value&&me.value),Ke=h(()=>!!Object.keys(o.modelModifiers).length),[Ue,qe]=Ot(D);vt(N,e=>{if(Ye(),!P.value||o.resize!=="both")return;const r=e[0],{width:v}=r.contentRect;fe.value={right:`calc(100% - ${v+15+6}px)`}});const L=()=>{const{type:e,autosize:r}=o;if(!(!ht||e!=="textarea"||!N.value))if(r){const v=Te(r)?r.minRows:void 0,k=Te(r)?r.maxRows:void 0,R=Be(N.value,v,k);W.value=U({overflowY:"hidden"},R),T(()=>{N.value.offsetHeight,W.value=R})}else W.value={minHeight:Be(N.value).minHeight}},Ye=(e=>{let r=!1;return()=>{var v;if(r||!o.autosize)return;((v=N.value)==null?void 0:v.offsetParent)===null||(setTimeout(e),r=!0)}})(L),M=()=>{const e=C.value,r=o.formatter?o.formatter(z.value):z.value;!e||e.value===r||(e.value=r)},ye=e=>{const{trim:r,number:v}=o.modelModifiers;return r&&(e=e.trim()),v&&(e=`${Fe(e)}`),o.formatter&&o.parser&&(e=o.parser(e)),e},ee=e=>q(null,null,function*(){if(ge.value)return;const{lazy:r}=o.modelModifiers;let{value:v}=e.target;if(r){n(se,v);return}if(v=ye(v),String(v)===z.value){o.formatter&&M();return}Ue(),n(J,v),n(se,v),yield T(),(o.formatter&&o.parser||!Ke.value)&&M(),qe()}),be=e=>q(null,null,function*(){let{value:r}=e.target;r=ye(r),o.modelModifiers.lazy&&n(J,r),n(Me,r),yield T(),M()}),{isComposing:ge,handleCompositionStart:we,handleCompositionUpdate:xe,handleCompositionEnd:Se}=Mt({emit:n,afterComposition:ee}),Ge=()=>{j.value=!j.value},Je=()=>{var e;return(e=C.value)==null?void 0:e.focus()},Xe=()=>{var e;return(e=C.value)==null?void 0:e.blur()},Qe=e=>{X.value=!1,n("mouseleave",e)},Ze=e=>{X.value=!0,n("mouseenter",e)},Ce=e=>{n("keydown",e)},_e=()=>{var e;(e=C.value)==null||e.select()},Ie=()=>{n(J,""),n(Me,""),n("clear"),n(se,"")};return ue(()=>o.modelValue,()=>{var e;T(()=>L()),o.validateEvent&&((e=b==null?void 0:b.validate)==null||e.call(b,"change").catch(r=>ae(r)))}),ue(z,e=>{if(!C.value)return;const{trim:r,number:v}=o.modelModifiers,k=C.value.value,R=(v||o.type==="number")&&!/^0\d/.test(k)?`${Fe(k)}`:k;R!==e&&(document.activeElement===C.value&&C.value.type!=="range"&&r&&R.trim()===e||M())}),ue(()=>o.type,()=>q(null,null,function*(){yield T(),M(),L()})),xt(()=>{!o.formatter&&o.parser&&ae(Le,"If you set the parser, you also need to set the formatter."),M(),T(L)}),i({input:D,textarea:N,ref:C,textareaStyle:he,autosize:St(o,"autosize"),isComposing:ge,focus:Je,blur:Xe,select:_e,clear:Ie,resizeTextarea:L}),(e,r)=>(d(),I("div",{class:g([t(y),{[t(s).bm("group","append")]:e.$slots.append,[t(s).bm("group","prepend")]:e.$slots.prepend}]),style:Ve(t(De)),onMouseenter:Ze,onMouseleave:Qe},[m(" input "),e.type!=="textarea"?(d(),I(de,{key:0},[m(" prepend slot "),e.$slots.prepend?(d(),I("div",{key:0,class:g(t(s).be("group","prepend"))},[Y(e.$slots,"prepend")],2)):m("v-if",!0),F("div",{ref_key:"wrapperRef",ref:Re,class:g(t(c))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(d(),I("span",{key:0,class:g(t(s).e("prefix"))},[F("span",{class:g(t(s).e("prefix-inner"))},[Y(e.$slots,"prefix"),e.prefixIcon?(d(),E(t($),{key:0,class:g(t(s).e("icon"))},{default:H(()=>[(d(),E(A(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),F("input",ke({id:t(B),ref_key:"input",ref:D,class:t(s).e("inner")},t(p),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?j.value?"text":"password":e.type,disabled:t(S),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:t(we),onCompositionupdate:t(xe),onCompositionend:t(Se),onInput:ee,onChange:be,onKeydown:Ce}),null,16,["id","name","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","inputmode","onCompositionstart","onCompositionupdate","onCompositionend"]),m(" suffix slot "),t(We)?(d(),I("span",{key:1,class:g(t(s).e("suffix"))},[F("span",{class:g(t(s).e("suffix-inner"))},[!t(K)||!t(Z)||!t(P)?(d(),I(de,{key:0},[Y(e.$slots,"suffix"),e.suffixIcon?(d(),E(t($),{key:0,class:g(t(s).e("icon"))},{default:H(()=>[(d(),E(A(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(K)?(d(),E(t($),{key:1,class:g([t(s).e("icon"),t(s).e("clear")]),onMousedown:ne(t(pe),["prevent"]),onClick:Ie},{default:H(()=>[(d(),E(A(e.clearIcon)))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(Z)?(d(),E(t($),{key:2,class:g([t(s).e("icon"),t(s).e("password")]),onClick:Ge,onMousedown:ne(t(pe),["prevent"]),onMouseup:ne(t(pe),["prevent"])},{default:H(()=>[(d(),E(A(t(Ae))))]),_:1},8,["class","onMousedown","onMouseup"])):m("v-if",!0),t(P)?(d(),I("span",{key:3,class:g([t(s).e("count"),t(s).is("outside",e.wordLimitPosition==="outside")])},[F("span",{class:g(t(s).e("count-inner"))},G(t(_))+" / "+G(e.maxlength),3)],2)):m("v-if",!0),t(O)&&t(ve)&&t(me)?(d(),E(t($),{key:4,class:g([t(s).e("icon"),t(s).e("validateIcon"),t(s).is("loading",t(O)==="validating")])},{default:H(()=>[(d(),E(A(t(ve))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(d(),I("div",{key:1,class:g(t(s).be("group","append"))},[Y(e.$slots,"append")],2)):m("v-if",!0)],64)):(d(),I(de,{key:1},[m(" textarea "),F("textarea",ke({id:t(B),ref_key:"textarea",ref:N,class:[t(ce).e("inner"),t(s).is("focus",t(Q))]},t(p),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(S),readonly:e.readonly,autocomplete:e.autocomplete,style:t(he),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(we),onCompositionupdate:t(xe),onCompositionend:t(Se),onInput:ee,onFocus:t($e),onBlur:t(He),onChange:be,onKeydown:Ce}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(P)?(d(),I("span",{key:0,style:Ve(fe.value),class:g([t(s).e("count"),t(s).is("outside",e.wordLimitPosition==="outside")])},G(t(_))+" / "+G(e.maxlength),7)):m("v-if",!0)],64))],38))}}));var $t=dt(Rt,[["__file","input.vue"]]);const Zt=yt($t);export{Zt as ElInput,Zt as default,Bt as inputEmits,Ft as inputProps};
